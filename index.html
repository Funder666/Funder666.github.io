<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <meta name="renderer" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=edge" >
  <link rel="dns-prefetch" href="http://Funder666.github.io">
  <title>Hexo</title>
  <meta name="generator" content="hexo-theme-yilia-plus">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
    
    <!-- <meta name="keywords" content="">
    <meta name="description" content=""> -->
  
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://funder666.github.io/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Restart">
<meta name="twitter:card" content="summary">
  
    <link rel="alternative" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.ico">
  
  
    <link rel="apple-touch-icon" href="/apple-touch-icon-180x180.png">
  
  <link rel="stylesheet" type="text/css" href="/./main.a5fda8.css">
  <style type="text/css">
    
    #container.show {
      background: linear-gradient(200deg,#a0cfe4,#e8c37e);
    }
  </style>
  

  

  
    
 	  <script src="/lib/clickLove.js"></script>
  
  


  

</head>

<body>
  <div id="container" q-class="show:isCtnShow">
    <canvas id="anm-canvas" class="anm-canvas"></canvas>
    <div class="left-col" q-class="show:isShow">
      


<div class="overlay" style="background: #4d4d4d;"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			<img src="/img/%E5%A4%B4%E5%83%8F.jpg" class="js-avatar">
		</a>
		<hgroup>
			<h1 class="header-author"><a href="/">Restart</a></h1>
		</hgroup>
		

		<nav class="header-menu">
			<ul>
			
				<li><a href="/" target="_blank">主页</a></li>
			
				<li><a href="/tags/%E9%9A%8F%E7%AC%94/" target="_blank">随笔</a></li>
			
			</ul>
		</nav>
		<nav>
    			总文章数 5
		</nav>
		<nav class="header-smart-menu">
			
				
					<a q-on="click: openSlider(e, 'innerArchive')" href="javascript:void(0)">所有文章</a>
				
			
				
					<a q-on="click: openSlider(e, 'friends')" href="javascript:void(0)">友链</a>
				
			
				
					<a q-on="click: openSlider(e, 'aboutme')" href="javascript:void(0)">关于我</a>
				
			
		</nav>
		<nav class="header-nav">
			<div class="social">
				
					
						<a class="0" href="/h" 
												title="subNav.title.0" target="_blank"><i class="icon-0"></i></a>
					
						<a class="1" href="/t" 
												title="subNav.title.1" target="_blank"><i class="icon-1"></i></a>
					
						<a class="2" href="/t" 
												title="subNav.title.2" target="_blank"><i class="icon-2"></i></a>
					
						<a class="3" href="/p" 
												title="subNav.title.3" target="_blank"><i class="icon-3"></i></a>
					
						<a class="4" href="/s" 
												title="subNav.title.4" target="_blank"><i class="icon-4"></i></a>
					
						<a class="5" href="/:" 
												title="subNav.title.5" target="_blank"><i class="icon-5"></i></a>
					
						<a class="6" href="/" 
												title="subNav.title.6" target="_blank"><i class="icon-6"></i></a>
					
						<a class="7" href="/" 
												title="subNav.title.7" target="_blank"><i class="icon-7"></i></a>
					
						<a class="8" href="/g" 
												title="subNav.title.8" target="_blank"><i class="icon-8"></i></a>
					
						<a class="9" href="/i" 
												title="subNav.title.9" target="_blank"><i class="icon-9"></i></a>
					
						<a class="10" href="/t" 
												title="subNav.title.10" target="_blank"><i class="icon-10"></i></a>
					
						<a class="11" href="/h" 
												title="subNav.title.11" target="_blank"><i class="icon-11"></i></a>
					
						<a class="12" href="/u" 
												title="subNav.title.12" target="_blank"><i class="icon-12"></i></a>
					
						<a class="13" href="/b" 
												title="subNav.title.13" target="_blank"><i class="icon-13"></i></a>
					
						<a class="14" href="/." 
												title="subNav.title.14" target="_blank"><i class="icon-14"></i></a>
					
						<a class="15" href="/c" 
												title="subNav.title.15" target="_blank"><i class="icon-15"></i></a>
					
						<a class="16" href="/o" 
												title="subNav.title.16" target="_blank"><i class="icon-16"></i></a>
					
						<a class="17" href="/m" 
												title="subNav.title.17" target="_blank"><i class="icon-17"></i></a>
					
						<a class="18" href="/" 
												title="subNav.title.18" target="_blank"><i class="icon-18"></i></a>
					
						<a class="19" href="/F" 
												title="subNav.title.19" target="_blank"><i class="icon-19"></i></a>
					
						<a class="20" href="/u" 
												title="subNav.title.20" target="_blank"><i class="icon-20"></i></a>
					
						<a class="21" href="/n" 
												title="subNav.title.21" target="_blank"><i class="icon-21"></i></a>
					
						<a class="22" href="/d" 
												title="subNav.title.22" target="_blank"><i class="icon-22"></i></a>
					
						<a class="23" href="/e" 
												title="subNav.title.23" target="_blank"><i class="icon-23"></i></a>
					
						<a class="24" href="/r" 
												title="subNav.title.24" target="_blank"><i class="icon-24"></i></a>
					
						<a class="25" href="/6" 
												title="subNav.title.25" target="_blank"><i class="icon-25"></i></a>
					
						<a class="26" href="/6" 
												title="subNav.title.26" target="_blank"><i class="icon-26"></i></a>
					
						<a class="27" href="/6" 
												title="subNav.title.27" target="_blank"><i class="icon-27"></i></a>
					
				
					
						<a class="0" href="/i" 
												title="subNav.title.0" target="_blank"><i class="icon-0"></i></a>
					
						<a class="1" href="/m" 
												title="subNav.title.1" target="_blank"><i class="icon-1"></i></a>
					
						<a class="2" href="/g" 
												title="subNav.title.2" target="_blank"><i class="icon-2"></i></a>
					
						<a class="3" href="/" 
												title="subNav.title.3" target="_blank"><i class="icon-3"></i></a>
					
						<a class="4" href="/Q" 
												title="subNav.title.4" target="_blank"><i class="icon-4"></i></a>
					
						<a class="5" href="/Q" 
												title="subNav.title.5" target="_blank"><i class="icon-5"></i></a>
					
						<a class="6" href="/." 
												title="subNav.title.6" target="_blank"><i class="icon-6"></i></a>
					
						<a class="7" href="/p" 
												title="subNav.title.7" target="_blank"><i class="icon-7"></i></a>
					
						<a class="8" href="/n" 
												title="subNav.title.8" target="_blank"><i class="icon-8"></i></a>
					
						<a class="9" href="/g" 
												title="subNav.title.9" target="_blank"><i class="icon-9"></i></a>
					
				
			</div>
		
		</nav>
	</header>		
</div>

    </div>
    <div class="mid-col" q-class="show:isShow,hide:isShow|isFalse">
      
      
      <a class="forkMe" style="position:absolute;z-index:999;top:0;right:0.5em;" 
        href="https://github.com/Funder666" target="_blank">
        <img src="/img/forkme.png"
          class="attachment-full size-full" alt="Fork me on GitHub" data-recalc-dims="1"></a>
      
      
<nav id="mobile-nav">
  	<div class="overlay js-overlay" style="background: #4d4d4d"></div>
	<div class="btnctn js-mobile-btnctn">
  		<div class="slider-trigger list" q-on="click: openSlider(e)"><i class="icon icon-sort"></i></div>
	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<a href="/">
					<img src="/img/%E5%A4%B4%E5%83%8F.jpg" class="js-avatar">
				</a>
			</div>
			<hgroup>
			  <h1 class="header-author js-header-author">Restart</h1>
			</hgroup>
			
			
			
				
			
				
			
			
			
			<nav class="header-nav">
				<div class="social">
					
						
						<a class="0" target="_blank" 
							href="/h" title="subNav.title.0"><i class="icon-0"></i></a>
						
						<a class="1" target="_blank" 
							href="/t" title="subNav.title.1"><i class="icon-1"></i></a>
						
						<a class="2" target="_blank" 
							href="/t" title="subNav.title.2"><i class="icon-2"></i></a>
						
						<a class="3" target="_blank" 
							href="/p" title="subNav.title.3"><i class="icon-3"></i></a>
						
						<a class="4" target="_blank" 
							href="/s" title="subNav.title.4"><i class="icon-4"></i></a>
						
						<a class="5" target="_blank" 
							href="/:" title="subNav.title.5"><i class="icon-5"></i></a>
						
						<a class="6" target="_blank" 
							href="/" title="subNav.title.6"><i class="icon-6"></i></a>
						
						<a class="7" target="_blank" 
							href="/" title="subNav.title.7"><i class="icon-7"></i></a>
						
						<a class="8" target="_blank" 
							href="/g" title="subNav.title.8"><i class="icon-8"></i></a>
						
						<a class="9" target="_blank" 
							href="/i" title="subNav.title.9"><i class="icon-9"></i></a>
						
						<a class="10" target="_blank" 
							href="/t" title="subNav.title.10"><i class="icon-10"></i></a>
						
						<a class="11" target="_blank" 
							href="/h" title="subNav.title.11"><i class="icon-11"></i></a>
						
						<a class="12" target="_blank" 
							href="/u" title="subNav.title.12"><i class="icon-12"></i></a>
						
						<a class="13" target="_blank" 
							href="/b" title="subNav.title.13"><i class="icon-13"></i></a>
						
						<a class="14" target="_blank" 
							href="/." title="subNav.title.14"><i class="icon-14"></i></a>
						
						<a class="15" target="_blank" 
							href="/c" title="subNav.title.15"><i class="icon-15"></i></a>
						
						<a class="16" target="_blank" 
							href="/o" title="subNav.title.16"><i class="icon-16"></i></a>
						
						<a class="17" target="_blank" 
							href="/m" title="subNav.title.17"><i class="icon-17"></i></a>
						
						<a class="18" target="_blank" 
							href="/" title="subNav.title.18"><i class="icon-18"></i></a>
						
						<a class="19" target="_blank" 
							href="/F" title="subNav.title.19"><i class="icon-19"></i></a>
						
						<a class="20" target="_blank" 
							href="/u" title="subNav.title.20"><i class="icon-20"></i></a>
						
						<a class="21" target="_blank" 
							href="/n" title="subNav.title.21"><i class="icon-21"></i></a>
						
						<a class="22" target="_blank" 
							href="/d" title="subNav.title.22"><i class="icon-22"></i></a>
						
						<a class="23" target="_blank" 
							href="/e" title="subNav.title.23"><i class="icon-23"></i></a>
						
						<a class="24" target="_blank" 
							href="/r" title="subNav.title.24"><i class="icon-24"></i></a>
						
						<a class="25" target="_blank" 
							href="/6" title="subNav.title.25"><i class="icon-25"></i></a>
						
						<a class="26" target="_blank" 
							href="/6" title="subNav.title.26"><i class="icon-26"></i></a>
						
						<a class="27" target="_blank" 
							href="/6" title="subNav.title.27"><i class="icon-27"></i></a>
						
					
						
						<a class="0" target="_blank" 
							href="/i" title="subNav.title.0"><i class="icon-0"></i></a>
						
						<a class="1" target="_blank" 
							href="/m" title="subNav.title.1"><i class="icon-1"></i></a>
						
						<a class="2" target="_blank" 
							href="/g" title="subNav.title.2"><i class="icon-2"></i></a>
						
						<a class="3" target="_blank" 
							href="/" title="subNav.title.3"><i class="icon-3"></i></a>
						
						<a class="4" target="_blank" 
							href="/Q" title="subNav.title.4"><i class="icon-4"></i></a>
						
						<a class="5" target="_blank" 
							href="/Q" title="subNav.title.5"><i class="icon-5"></i></a>
						
						<a class="6" target="_blank" 
							href="/." title="subNav.title.6"><i class="icon-6"></i></a>
						
						<a class="7" target="_blank" 
							href="/p" title="subNav.title.7"><i class="icon-7"></i></a>
						
						<a class="8" target="_blank" 
							href="/n" title="subNav.title.8"><i class="icon-8"></i></a>
						
						<a class="9" target="_blank" 
							href="/g" title="subNav.title.9"><i class="icon-9"></i></a>
						
					
				</div>
			</nav>

			<nav class="header-menu js-header-menu">
				<ul style="width: 50%">
				
				
					<li style="width: 50%"><a href="/">主页</a></li>
		        
					<li style="width: 50%"><a href="/tags/%E9%9A%8F%E7%AC%94/">随笔</a></li>
		        
				</ul>
			</nav>
		</header>				
	</div>
	<div class="mobile-mask" style="display:none" q-show="isShow"></div>
</nav>

      <div id="wrapper" class="body-wrap">
        <div class="menu-l">
          <div class="canvas-wrap">
            <canvas data-colors="#eaeaea" data-sectionHeight="100" data-contentId="js-content" id="myCanvas1"
              class="anm-canvas"></canvas>
          </div>
          <div id="js-content" class="content-ll">
            

  
    <article id="post-爬虫" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
  <div class="article-entry" itemprop="articleBody">
    
    <h1 id="爬虫简介"><a href="#爬虫简介" class="headerlink" title="爬虫简介"></a>爬虫简介</h1><h2 id="——-爬虫初识"><a href="#——-爬虫初识" class="headerlink" title="—— 爬虫初识"></a>—— 爬虫初识</h2><p>什么是爬虫：编写程序，模拟浏览器上网，然后让其去互联网上抓取数据的过程。</p>
<p>爬虫的价值：<br>                    — 实际应用<br>                    — 就业</p>
<p>爬虫究竟是合法的还是违法的？<br>— 在法律中是不被禁止的<br>— 具有违法风险<br>— 善意爬虫    恶意爬虫</p>
<p>爬虫带来的风险体现在如下两方面：<br>— 爬虫干扰了被访问网站的正常运营<br>— 爬虫抓取了受到法律保护的特定类型的数据或信息</p>
<p>如何在使用编写爬虫的过程中避免进入局子的厄运呢？<br>— 时常的优化自己的程序，避免干扰被访问网站的正常运行<br>— 在使用，转播爬取到的数据时，审查抓取到的内容，如果发现了涉及到用户隐私和商业机密等内容，及时停止爬取和转播</p>
<p>爬虫在使用场景中的分类<br>            — 通用爬虫<br>                        抓取系统重要组成部分。抓取的是一整张页面数据<br>            — 聚焦爬虫<br>                        是建立在通用爬虫的基础之上。抓取的是页面中特定的局部内容<br>            — 增量式爬虫<br>                        检测网站中数据跟新的情况。只会抓取网站中最新更新出来的数据</p>
<p>反爬机制<br>    门户网站，可以通过制定相应的策略或者技术手段，防止爬虫程序进行网站数据的爬取。</p>
<p>反反爬策略<br>    爬虫程序可以通过制定相关的策略或者技术手段，破解门户网站中具备的反爬机制，从而可以获取门户网站中相关的数据</p>
<p>robots.txt协议<br>    君子协议。规定了网站中哪些数据可以被爬虫爬取哪些数据不可以被爬取。、</p>
<h2 id="——-http-amp-https协议"><a href="#——-http-amp-https协议" class="headerlink" title="—— http&amp;https协议"></a>—— http&amp;https协议</h2><p>http协议<br>    —概念：就是服&lt;font color=器和客户端进行数据交互的一种形式</p>
<p>常见的请求头信息:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">accept:浏览器通过这个头告诉服务器，它所支持的数据类型</span><br><span class="line">Accept-Charset: 浏览器通过这个头告诉服务器，它支持哪种字符集</span><br><span class="line">Accept-Encoding：浏览器通过这个头告诉服务器，支持的压缩格式</span><br><span class="line">Accept-Language：浏览器通过这个头告诉服务器，它的语言环境</span><br><span class="line">Host：浏览器通过这个头告诉服务器，想访问哪台主机</span><br><span class="line">If-Modified-Since: 浏览器通过这个头告诉服务器，缓存数据的时间</span><br><span class="line">Referer：浏览器通过这个头告诉服务器，客户机是哪个页面来的 防盗链</span><br><span class="line">Connection：浏览器通过这个头告诉服务器，请求完后是断开链接还是何持链接</span><br><span class="line">X-Requested-With: XMLHttpRequest 代表通过ajax方式进行访问</span><br><span class="line">User-Agent：请求载体的身份标识</span><br></pre></td></tr></table></figure>

<p>常见的相应头信息：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Location: 服务器通过这个头，来告诉浏览器跳到哪里</span><br><span class="line">Server：服务器通过这个头，告诉浏览器服务器的型号</span><br><span class="line">Content-Encoding：服务器通过这个头，告诉浏览器，数据的压缩格式</span><br><span class="line">Content-Length: 服务器通过这个头，告诉浏览器回送数据的长度</span><br><span class="line">Content-Language: 服务器通过这个头，告诉浏览器语言环境</span><br><span class="line">Content-<span class="type">Type</span>：服务器通过这个头，告诉浏览器回送数据的类型</span><br><span class="line">Refresh：服务器通过这个头，告诉浏览器定时刷新</span><br><span class="line">Content-Disposition: 服务器通过这个头，告诉浏览器以下载方式打数据</span><br><span class="line">Transfer-Encoding：服务器通过这个头，告诉浏览器数据是以分块方式回送的</span><br><span class="line">Expires: -<span class="number">1</span> 控制浏览器不要缓存</span><br><span class="line">Cache-Control: no-cache </span><br><span class="line">Pragma: no-cache</span><br></pre></td></tr></table></figure>

<p>HTTPS协议<br>    — 安全超文本传输协议，HTTPS是在HTTP上建立SSL加密层，并对传输数据进行加密，是HTTP协议的安全版。</p>
<p>加密方式</p>
<ol>
<li><p>对称密钥加密</p>
<ul>
<li>客服端传送信息和密钥给服务器</li>
<li>加密和解密是同一个密钥</li>
</ul>
<p>信息有被挟持、密钥有被破解的风险</p>
</li>
<li><p>非对称密钥加密</p>
<ul>
<li><p>服务器将公钥给客户端</p>
</li>
<li><p>客户端用公钥加密后将信息传给服务器</p>
</li>
<li><p>服务器用私钥解密</p>
</li>
</ul>
<p>公钥可能被挟持篡改</p>
</li>
<li><p> 证书密钥加密</p>
</li>
</ol>
<ul>
<li>服务器将公钥给证书认证机构签名</li>
<li>机构将签好名的公钥给客户端</li>
<li>客户端用公钥加密后发送给服务器，服务器用私钥解密</li>
</ul>
<p>   证书的数字签名难以伪造</p>
<h1 id="Requests-库"><a href="#Requests-库" class="headerlink" title="Requests 库"></a>Requests 库</h1><p>requests模块<br>    —python中原生的基于网络请求的模块，其主要作用是用来模拟浏览器发起请求。功能强大，用法简洁高效。在爬虫领域中占据着半壁江山的地位。</p>
<p>使用步骤：</p>
<ul>
<li>指定url</li>
<li>发起请求</li>
<li>获取响应数据</li>
<li>持久化存储</li>
</ul>
<p>第一个爬虫程序：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#导包</span></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="comment">#step_1:指定url</span></span><br><span class="line">url = <span class="string">&#x27;https://www.sogou.com/&#x27;</span></span><br><span class="line"><span class="comment">#step_2:发起请求:使用get方法发起get请求，该方法会返回一个响应对象。参数url表示请求对应的url</span></span><br><span class="line">response = requests.get(url=url)</span><br><span class="line"><span class="comment">#step_3:获取响应数据:通过调用响应对象的text属性，返回响应对象中存储的字符串形式的响应数据（页面源码数据）</span></span><br><span class="line">page_text = response.text</span><br><span class="line"><span class="comment">#step_4:持久化存储</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;./sogou.html&#x27;</span>,<span class="string">&#x27;w&#x27;</span>,encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> fp:</span><br><span class="line">    fp.write(page_text)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;爬取数据完毕！！！&#x27;</span>)</span><br></pre></td></tr></table></figure>







<h2 id="——-简易网站采集器"><a href="#——-简易网站采集器" class="headerlink" title="—— 简易网站采集器"></a>—— 简易网站采集器</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    <span class="comment"># UA伪装：将对应的User_Agent封装到一个字典中</span></span><br><span class="line">    headers = &#123;</span><br><span class="line">        <span class="string">&#x27;User-Agent&#x27;</span>:<span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36&#x27;</span>&#125;</span><br><span class="line">    url = <span class="string">&#x27;https://www.sogou.com/web&#x27;</span></span><br><span class="line">    <span class="comment"># 处理url携带的参数:封装到字典中</span></span><br><span class="line">    kw = <span class="built_in">input</span>(<span class="string">&quot;enter a word:&quot;</span>)</span><br><span class="line">    param = &#123;<span class="string">&#x27;query&#x27;</span>: kw&#125;</span><br><span class="line">    <span class="comment"># 对指定的url发起的请求对应的url是携带参数的，并且请求过程中处理了参数</span></span><br><span class="line">    response = requests.get(url=url, params=param,headers=headers)</span><br><span class="line">    page_text=response.text</span><br><span class="line">    fileName=kw+<span class="string">&#x27;.html&#x27;</span></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(fileName,<span class="string">&#x27;w&#x27;</span>,encoding=<span class="string">&#x27;utf-8&#x27;</span>)<span class="keyword">as</span> fp:</span><br><span class="line">        fp.write(page_text)</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    <span class="built_in">print</span>(fileName,<span class="string">&#x27;保存成功！！！&#x27;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="——-破解百度翻译-获取页面的局部数据"><a href="#——-破解百度翻译-获取页面的局部数据" class="headerlink" title="—— 破解百度翻译(获取页面的局部数据)"></a>—— 破解百度翻译(获取页面的局部数据)</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    <span class="comment"># 1.指定url</span></span><br><span class="line">    post_url = <span class="string">&#x27;https://fanyi.baidu.com/sug&#x27;</span></span><br><span class="line">    <span class="comment"># 2.UA伪装</span></span><br><span class="line">    headers = &#123;</span><br><span class="line">        <span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36&#x27;</span>&#125;</span><br><span class="line">    <span class="comment"># 3.post请求参数处理</span></span><br><span class="line">    word = <span class="built_in">input</span>(<span class="string">&#x27;enter a word:&#x27;</span>)</span><br><span class="line">    data = &#123;</span><br><span class="line">        <span class="string">&#x27;kw&#x27;</span>: word</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment"># 4.请求发送</span></span><br><span class="line">    response = requests.post(url=post_url, data=data, headers=headers)</span><br><span class="line">    <span class="comment"># 5.获取相应数据：json(）方法返回的是obj (如果确认响应数据类型是json类型的，才可以使用json(）)</span></span><br><span class="line">    dic_obj = response.json()</span><br><span class="line">    <span class="comment"># 6.持久化存储</span></span><br><span class="line">    fileName = word + <span class="string">&#x27;&#x27;</span></span><br><span class="line">    fp = <span class="built_in">open</span>(fileName, <span class="string">&#x27;w&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">    json.dump(dic_obj, fp=fp, ensure_ascii=<span class="literal">False</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;over!!!&#x27;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="——-豆瓣电影"><a href="#——-豆瓣电影" class="headerlink" title="—— 豆瓣电影"></a>—— 豆瓣电影</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line">url = <span class="string">&#x27;https://movie.douban.com/j/chart/top_list&#x27;</span></span><br><span class="line">headers = &#123;</span><br><span class="line">    <span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36&#x27;</span>&#125;</span><br><span class="line">param = &#123;<span class="string">&#x27;type&#x27;</span>: <span class="string">&#x27;24&#x27;</span>,</span><br><span class="line">         <span class="string">&#x27;interval_id&#x27;</span>: <span class="string">&#x27;100:90&#x27;</span>,</span><br><span class="line">         <span class="string">&#x27;action&#x27;</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">         <span class="string">&#x27;start&#x27;</span>: <span class="string">&#x27;0&#x27;</span>,  <span class="comment"># 从库中的第几部电影去取</span></span><br><span class="line">         <span class="string">&#x27;limit&#x27;</span>: <span class="string">&#x27;20&#x27;</span>,  <span class="comment"># 一次取出的个数</span></span><br><span class="line">         &#125;</span><br><span class="line">response = requests.get(url=url, params=param, headers=headers)</span><br><span class="line">list_data = response.json()</span><br><span class="line">fp = <span class="built_in">open</span>(<span class="string">&#x27;douban.json&#x27;</span>, <span class="string">&#x27;w&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">json.dump(list_data, fp=fp, ensure_ascii=<span class="literal">False</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;over!!!&quot;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>





<h2 id="——-综合练习之药监总局"><a href="#——-综合练习之药监总局" class="headerlink" title="—— 综合练习之药监总局"></a>—— 综合练习之药监总局</h2><p>需求：爬取国家药品监督管理总局中中华人民共和国化妆品生产许可证相关数据</p>
<p>—— 动态加载数据</p>
<p>—— 首页中对应的企业信息数据是通过ajax动态请求到的</p>
<p>—— 通过对详情页url的观察发现：</p>
<p>​    — url的域名都是一样的，只有携带的参数（id）不一样</p>
<p>​    — id值可以从首页对应的ajax请求道德json串中获取</p>
<p>​    — 域名和id值拼接出一个完整的企业对应的详情页的url</p>
<p>—— 详情页的企业详情数也是动态加载出来的</p>
<p>​    — 观察后发现：</p>
<p>​        — 所有的post请求的url都是一样的，只有参数id值是不同的</p>
<p>​        — 如果我们可以批量获取多家企业的id后，就可以将id和url形成一个完整的详情页所对应的ajax请求的url</p>
<p>​        </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line">url = <span class="string">&#x27;http://scxk.nmpa.gov.cn:81/xk/itownet/portalAction.do?method=getXkzsList&#x27;</span></span><br><span class="line">headers = &#123;</span><br><span class="line">    <span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36&#x27;</span>&#125;</span><br><span class="line">id_list = []  <span class="comment"># 存储企业的ID</span></span><br><span class="line">all_data_list = []</span><br><span class="line"><span class="comment"># 参数的封装</span></span><br><span class="line"><span class="keyword">for</span> page <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">6</span>):<span class="comment">#获取前6页的信息</span></span><br><span class="line">    page = <span class="built_in">str</span>(page)</span><br><span class="line">    data = &#123;</span><br><span class="line">        <span class="string">&#x27;on&#x27;</span>: <span class="string">&#x27; true&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;page&#x27;</span>: page,</span><br><span class="line">        <span class="string">&#x27;pageSize&#x27;</span>: <span class="string">&#x27; 15&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;productName&#x27;</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;conditionType&#x27;</span>: <span class="string">&#x27; 1&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;applyname&#x27;</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;applysn&#x27;</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    json_ids = requests.post(url=url, headers=headers, data=data).json()</span><br><span class="line">    <span class="keyword">for</span> dic <span class="keyword">in</span> json_ids[<span class="string">&#x27;list&#x27;</span>]:</span><br><span class="line">        id_list.append(dic[<span class="string">&#x27;ID&#x27;</span>])</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 获取企业详细数据</span></span><br><span class="line">    post_url = <span class="string">&#x27;http://scxk.nmpa.gov.cn:81/xk/itownet/portalAction.do?method=getXkzsById&#x27;</span></span><br><span class="line">    <span class="keyword">for</span> <span class="built_in">id</span> <span class="keyword">in</span> id_list:</span><br><span class="line">        data = &#123;</span><br><span class="line">            <span class="string">&#x27;id&#x27;</span>: <span class="built_in">id</span></span><br><span class="line">        &#125;</span><br><span class="line">        detail_json=requests.post(url=post_url,headers=headers,data=data).json()</span><br><span class="line">        all_data_list.append(detail_json)</span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;./allData.json&#x27;</span>,<span class="string">&#x27;w&#x27;</span>,encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> fp:</span><br><span class="line">    json.dump(all_data_list,fp=fp,ensure_ascii=<span class="literal">False</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;over!!!&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p>​                    </p>
<h1 id="数据解析"><a href="#数据解析" class="headerlink" title="数据解析"></a>数据解析</h1><p>聚焦爬虫：爬取页面中指定的页面内容</p>
<p>​    — 编码流程：</p>
<p>​            — 指定url</p>
<p>​            — 发起请求</p>
<p>​            — 获取相应数据</p>
<p>​            — 数据解析</p>
<p>​            — 持久化存储</p>
<p>数据解析分类：</p>
<ul>
<li>正则</li>
<li>bs4</li>
<li>xpath</li>
</ul>
<p>数据解析原理概述：</p>
<p>​    —— 解析的局部的文本内容都会在标签之间或者标签对应的属性中进行存储</p>
<ol>
<li>进行指定标签的定位</li>
<li>标签或者标签对应的属性中存储的数据值进行提取（解析）</li>
</ol>
<p>​         </p>
<h2 id="——-正则解析"><a href="#——-正则解析" class="headerlink" title="—— 正则解析"></a>—— 正则解析</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"><span class="comment"># 需求:爬取糗事百科中糗图板块下所有的糗图图片</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建一个文件夹，保存所有的图片</span></span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(<span class="string">&#x27;./qiutu/&#x27;</span>):</span><br><span class="line">    os.mkdir(<span class="string">&#x27;./qiutu/&#x27;</span>)</span><br><span class="line">url = <span class="string">&#x27;https://www.qiushibaike.com/imgrank/&#x27;</span></span><br><span class="line">headers = headers = &#123;</span><br><span class="line">    <span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36&#x27;</span>&#125;</span><br><span class="line"><span class="comment"># 使用通用爬虫对一整张页面进行爬取</span></span><br><span class="line">page_text = requests.get(url=url, headers=headers).text</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用聚焦爬虫将页面中所有的糗图进行解析/爬取</span></span><br><span class="line">ex = <span class="string">&#x27;&lt;div class=&quot;thumb&quot;&gt;.*?&lt;img src=&quot;(.*?)&quot; alt.*?&lt;/div&gt;&#x27;</span></span><br><span class="line">img_src_list = re.findall(ex, page_text, re.S)</span><br><span class="line"><span class="keyword">for</span> src <span class="keyword">in</span> img_src_list:</span><br><span class="line">    <span class="comment"># 拼接处一个完整的图片url</span></span><br><span class="line">    src = <span class="string">&#x27;https:&#x27;</span> + src</span><br><span class="line">    <span class="comment"># 请求到了图片的二进制数据</span></span><br><span class="line">    img_data = requests.get(url=src, headers=headers).content</span><br><span class="line">    <span class="comment"># 生成图片名称</span></span><br><span class="line">    img_name = src.split(<span class="string">&#x27;/&#x27;</span>)[-<span class="number">1</span>]</span><br><span class="line">    <span class="comment"># 图片存储的路径</span></span><br><span class="line">    imgPath = <span class="string">&#x27;./qiutu/&#x27;</span> + img_name</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(imgPath, <span class="string">&#x27;wb&#x27;</span>)<span class="keyword">as</span> fp:</span><br><span class="line">        fp.write(img_data)</span><br><span class="line">        <span class="built_in">print</span>(img_name, <span class="string">&#x27;下载成功!!!&#x27;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="——-BS4解析"><a href="#——-BS4解析" class="headerlink" title="—— BS4解析"></a>—— BS4解析</h2><p>​    </p>
<p>bs4进行数据解析</p>
<ul>
<li><p>数据解析的原理：</p>
<ul>
<li><p>1.标签定位</p>
</li>
<li><p>2.提取标签、标签属性中存储的数据值</p>
<ul>
<li>bs4数据解析的原理：</li>
</ul>
</li>
<li><p>1.实例化一个BeautifulSoup对象，并且将页面源码数据加载到该对象中</p>
</li>
<li><p>2.通过调用BeautifulSoup对象中相关的属性或者方法进行标签定位和数据提取</p>
<ul>
<li>环境安装：</li>
</ul>
</li>
<li><p>pip install bs4</p>
</li>
<li><p>pip install lxml</p>
<ul>
<li>如何实例化BeautifulSoup对象：</li>
</ul>
</li>
<li><p>from bs4 import BeautifulSoup</p>
</li>
<li><p>对象的实例化：</p>
<ul>
<li>1.将本地的html文档中的数据加载到该对象中<pre><code>  fp = open(&#39;./test.html&#39;,&#39;r&#39;,encoding=&#39;utf-8&#39;)
  soup = BeautifulSoup(fp,&#39;lxml&#39;)
</code></pre>
</li>
<li>2.将互联网上获取的页面源码加载到该对象中<pre><code>  page_text = response.text
  soup = BeatifulSoup(page_text,&#39;lxml&#39;)
</code></pre>
</li>
</ul>
</li>
<li><p>提供的用于数据解析的方法和属性：</p>
<ul>
<li>soup.tagName:返回的是文档中第一次出现的tagName对应的标签</li>
<li>soup.find():<ul>
<li>find(‘tagName’):等同于soup.div</li>
<li>属性定位：<br>  -soup.find(‘div’,class_/id/attr=’song’)</li>
</ul>
</li>
<li>soup.find_all(‘tagName’):返回符合要求的所有标签（列表）</li>
</ul>
</li>
<li><p>select：</p>
<ul>
<li>select(‘某种选择器（id，class，标签…选择器）’),返回的是一个列表。</li>
<li>层级选择器：<ul>
<li>soup.select(‘.tang &gt; ul &gt; li &gt; a’)：&gt;表示的是一个层级</li>
<li>oup.select(‘.tang &gt; ul a’)：空格表示的多个层级</li>
</ul>
</li>
</ul>
</li>
<li><p>获取标签之间的文本数据：</p>
<ul>
<li>soup.a.text/string/get_text()</li>
<li>text/get_text():可以获取某一个标签中所有的文本内容</li>
<li>string：只可以获取该标签下面直系的文本内容</li>
</ul>
</li>
<li><p>获取标签中属性值：</p>
<ul>
<li>soup.a[‘href’]</li>
</ul>
</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"><span class="comment">#需求：爬取三国演义小说所有的章节标题和章节内容http://www.shicimingju.com/book/sanguoyanyi.html</span></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    <span class="comment">#对首页的页面数据进行爬取</span></span><br><span class="line">    headers = &#123;</span><br><span class="line">        <span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_0) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/72.0.3626.121 Safari/537.36&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">    url = <span class="string">&#x27;http://www.shicimingju.com/book/sanguoyanyi.html&#x27;</span></span><br><span class="line">    page_text = requests.get(url=url,headers=headers).text</span><br><span class="line"></span><br><span class="line">    <span class="comment">#在首页中解析出章节的标题和详情页的url</span></span><br><span class="line">    <span class="comment">#1.实例化BeautifulSoup对象，需要将页面源码数据加载到该对象中</span></span><br><span class="line">    soup = BeautifulSoup(page_text,<span class="string">&#x27;lxml&#x27;</span>)</span><br><span class="line">    <span class="comment">#解析章节标题和详情页的url</span></span><br><span class="line">    li_list = soup.select(<span class="string">&#x27;.book-mulu &gt; ul &gt; li&#x27;</span>)</span><br><span class="line">    fp = <span class="built_in">open</span>(<span class="string">&#x27;./sanguo.txt&#x27;</span>,<span class="string">&#x27;w&#x27;</span>,encoding=<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">    <span class="keyword">for</span> li <span class="keyword">in</span> li_list:</span><br><span class="line">        title = li.a.string</span><br><span class="line">        detail_url = <span class="string">&#x27;http://www.shicimingju.com&#x27;</span>+li.a[<span class="string">&#x27;href&#x27;</span>]</span><br><span class="line">        <span class="comment">#对详情页发起请求，解析出章节内容</span></span><br><span class="line">        detail_page_text = requests.get(url=detail_url,headers=headers).text</span><br><span class="line">        <span class="comment">#解析出详情页中相关的章节内容</span></span><br><span class="line">        detail_soup = BeautifulSoup(detail_page_text,<span class="string">&#x27;lxml&#x27;</span>)</span><br><span class="line">        div_tag = detail_soup.find(<span class="string">&#x27;div&#x27;</span>,class_=<span class="string">&#x27;chapter_content&#x27;</span>)</span><br><span class="line">        <span class="comment">#解析到了章节的内容</span></span><br><span class="line">        content = div_tag.text</span><br><span class="line">        fp.write(title+<span class="string">&#x27;:&#x27;</span>+content+<span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line">        <span class="built_in">print</span>(title,<span class="string">&#x27;爬取成功！！！&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="——-Xpath解析"><a href="#——-Xpath解析" class="headerlink" title="—— Xpath解析"></a>—— Xpath解析</h2><ul>
<li>xpath解析原理：<ul>
<li>1.实例化一个etree的对象，且需要将被解析的页面源码数据加载到该对象中。</li>
<li>2.调用etree对象中的xpath方法结合着xpath表达式实现标签的定位和内容的捕获。</li>
</ul>
</li>
<li>环境的安装：<ul>
<li>pip install lxml</li>
</ul>
</li>
<li>如何实例化一个etree对象:from lxml import etree<ul>
<li>1.将本地的html文档中的源码数据加载到etree对象中：<br>  etree.parse(filePath)</li>
<li>2.可以将从互联网上获取的源码数据加载到该对象中<br>  etree.HTML(‘page_text’)</li>
<li>xpath(‘xpath表达式’)</li>
</ul>
</li>
<li>xpath表达式:<ul>
<li>/:表示的是从根节点开始定位。表示的是一个层级。</li>
<li>//:表示的是多个层级。可以表示从任意位置开始定位。</li>
<li>属性定位：//div[@class=’song’] tag[@attrName=”attrValue”]</li>
<li>索引定位：//div[@class=”song”]/p[3] 索引是从1开始的。</li>
<li>取文本：<ul>
<li>/text() 获取的是标签中直系的文本内容</li>
<li>//text() 标签中非直系的文本内容（所有的文本内容）</li>
</ul>
</li>
<li>取属性：<br>  /@attrName     ==&gt;img/src</li>
</ul>
</li>
</ul>
<h3 id="——-二手房标题获取"><a href="#——-二手房标题获取" class="headerlink" title="—— 二手房标题获取"></a>—— 二手房标题获取</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> lxml <span class="keyword">import</span> etree</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    headers = &#123;</span><br><span class="line">        <span class="string">&#x27;User-Agent&#x27;</span>:<span class="string">&#x27;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_0) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.103 Safari/537.36&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">url=<span class="string">&#x27;https://bj.58.com/ershoufang/&#x27;</span></span><br><span class="line">page_text=requests.get(url=url,headers=headers).text</span><br><span class="line">tree = etree.HTML(page_text)</span><br><span class="line">h3_list=tree.xpath(<span class="string">&#x27;//section[@class=&quot;list&quot;]//a//div[@class=&quot;property-content-title&quot;]/h3&#x27;</span>)</span><br><span class="line">fp = <span class="built_in">open</span>(<span class="string">&#x27;58text&#x27;</span>,<span class="string">&#x27;w&#x27;</span>,encoding=<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line"><span class="keyword">for</span> h3 <span class="keyword">in</span> h3_list:</span><br><span class="line">    title =h3.xpath(<span class="string">&#x27;./text()&#x27;</span>)[<span class="number">0</span>]</span><br><span class="line">    <span class="built_in">print</span>(title)</span><br><span class="line">    fp.write(title+<span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h3 id="——-4k美女图片获取"><a href="#——-4k美女图片获取" class="headerlink" title="—— 4k美女图片获取"></a>—— 4k美女图片获取</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python </span></span><br><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"><span class="comment">#需求：解析下载图片数据 http://pic.netbian.com/4kmeinv/</span></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> lxml <span class="keyword">import</span> etree</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    url = <span class="string">&#x27;http://pic.netbian.com/4kmeinv/&#x27;</span></span><br><span class="line">    headers = &#123;</span><br><span class="line">        <span class="string">&#x27;User-Agent&#x27;</span>:<span class="string">&#x27;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_0) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.103 Safari/537.36&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">    response = requests.get(url=url,headers=headers)</span><br><span class="line">    <span class="comment">#手动设定响应数据的编码格式</span></span><br><span class="line">    <span class="comment"># response.encoding = &#x27;utf-8&#x27;</span></span><br><span class="line">    page_text = response.text</span><br><span class="line"></span><br><span class="line">    <span class="comment">#数据解析：src的属性值  alt属性</span></span><br><span class="line">    tree = etree.HTML(page_text)</span><br><span class="line">    li_list = tree.xpath(<span class="string">&#x27;//div[@class=&quot;slist&quot;]/ul/li&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">#创建一个文件夹</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(<span class="string">&#x27;./picLibs&#x27;</span>):</span><br><span class="line">        os.mkdir(<span class="string">&#x27;./picLibs&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> li <span class="keyword">in</span> li_list:</span><br><span class="line">        img_src = <span class="string">&#x27;http://pic.netbian.com&#x27;</span>+li.xpath(<span class="string">&#x27;./a/img/@src&#x27;</span>)[<span class="number">0</span>]</span><br><span class="line">        img_name = li.xpath(<span class="string">&#x27;./a/img/@alt&#x27;</span>)[<span class="number">0</span>]+<span class="string">&#x27;.jpg&#x27;</span></span><br><span class="line">        <span class="comment">#通用处理中文乱码的解决方案</span></span><br><span class="line">        img_name = img_name.encode(<span class="string">&#x27;iso-8859-1&#x27;</span>).decode(<span class="string">&#x27;gbk&#x27;</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># print(img_name,img_src)</span></span><br><span class="line">        <span class="comment">#请求图片进行持久化存储</span></span><br><span class="line">        img_data = requests.get(url=img_src,headers=headers).content</span><br><span class="line">        img_path = <span class="string">&#x27;picLibs/&#x27;</span>+img_name</span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(img_path,<span class="string">&#x27;wb&#x27;</span>) <span class="keyword">as</span> fp:</span><br><span class="line">            fp.write(img_data)</span><br><span class="line">            <span class="built_in">print</span>(img_name,<span class="string">&#x27;下载成功！！！&#x27;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h1 id="异步爬虫"><a href="#异步爬虫" class="headerlink" title="异步爬虫"></a>异步爬虫</h1><p>高性能异步爬虫<br>目的：在爬虫中使用异步实现高性能的数据爬取操作。</p>
<p>异步爬虫的方式：</p>
<p>1.多线程，多进程（不建议）：<br>好处：可以为相关阻塞的操作单独开启线程或者进程，阻塞操作就可以异步执行。<br>弊端：无法无限制的开启多线程或者多进程。</p>
<p>2.线程池、进程池（适当的使用）：<br>好处：我们可以降低系统对进程或者线程创建和销毁的一个频率，从而很好的降低系统的开销。<br>弊端：池中线程或进程的数量是有上限。</p>
<h2 id="——-线程池"><a href="#——-线程池" class="headerlink" title="—— 线程池"></a>—— 线程池</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#线程池的基本使用</span></span><br><span class="line"><span class="comment"># import time</span></span><br><span class="line"><span class="comment"># #使用单线程串行方式执行</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># def get_page(str):</span></span><br><span class="line"><span class="comment">#     print(&quot;正在下载 ：&quot;,str)</span></span><br><span class="line"><span class="comment">#     time.sleep(2)</span></span><br><span class="line"><span class="comment">#     print(&#x27;下载成功：&#x27;,str)</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># name_list =[&#x27;xiaozi&#x27;,&#x27;aa&#x27;,&#x27;bb&#x27;,&#x27;cc&#x27;]</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># start_time = time.time()</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># for i in range(len(name_list)):</span></span><br><span class="line"><span class="comment">#     get_page(name_list[i])</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># end_time = time.time()</span></span><br><span class="line"><span class="comment"># print(&#x27;%d second&#x27;% (end_time-start_time))</span></span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="comment">#导入线程池模块对应的类</span></span><br><span class="line"><span class="keyword">from</span> multiprocessing.dummy <span class="keyword">import</span> Pool</span><br><span class="line"><span class="comment">#使用线程池方式执行</span></span><br><span class="line">start_time = time.time()</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_page</span>(<span class="params"><span class="built_in">str</span></span>):</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;正在下载 ：&quot;</span>,<span class="built_in">str</span>)</span><br><span class="line">    time.sleep(<span class="number">2</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;下载成功：&#x27;</span>,<span class="built_in">str</span>)</span><br><span class="line"></span><br><span class="line">name_list =[<span class="string">&#x27;xiaozi&#x27;</span>,<span class="string">&#x27;aa&#x27;</span>,<span class="string">&#x27;bb&#x27;</span>,<span class="string">&#x27;cc&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">#实例化一个线程池对象</span></span><br><span class="line">pool = Pool(<span class="number">4</span>)</span><br><span class="line"><span class="comment">#将列表中每一个列表元素传递给get_page进行处理。</span></span><br><span class="line">pool.<span class="built_in">map</span>(get_page,name_list)</span><br><span class="line">pool.close()</span><br><span class="line">pool.join()</span><br><span class="line">end_time = time.time()</span><br><span class="line"><span class="built_in">print</span>(end_time-start_time)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="——-梨视频爬取"><a href="#——-梨视频爬取" class="headerlink" title="—— 梨视频爬取"></a>—— 梨视频爬取</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> lxml <span class="keyword">import</span> etree</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">from</span> multiprocessing.dummy <span class="keyword">import</span> Pool</span><br><span class="line"><span class="comment">#需求：爬取梨视频的视频数据</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#原则：线程池处理的是阻塞且较为耗时的操作</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#对下述url发起请求解析出视频详情页的url和视频的名称</span></span><br><span class="line">url = <span class="string">&#x27;https://www.pearvideo.com/category_5&#x27;</span></span><br><span class="line">headers = &#123;</span><br><span class="line">    <span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_0) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/71.0.3578.98 Safari/537.36&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line">page_text = requests.get(url=url,headers=headers).text</span><br><span class="line"></span><br><span class="line">tree = etree.HTML(page_text)</span><br><span class="line">li_list = tree.xpath(<span class="string">&#x27;//ul[@id=&quot;listvideoListUl&quot;]/li&#x27;</span>)</span><br><span class="line">urls = [] <span class="comment">#存储所有视频的链接and名字</span></span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(<span class="string">&#x27;./LSP&#x27;</span>):</span><br><span class="line">    os.mkdir(<span class="string">&#x27;./LSP&#x27;</span>)</span><br><span class="line"><span class="keyword">for</span> li <span class="keyword">in</span> li_list:</span><br><span class="line">    <span class="built_in">id</span> = li.xpath(<span class="string">&#x27;./div/a/@href&#x27;</span>)[<span class="number">0</span>]</span><br><span class="line">    contId = <span class="built_in">id</span>.replace(<span class="string">&#x27;video_&#x27;</span>,<span class="string">&quot;&quot;</span>)</span><br><span class="line">    contId2 = <span class="string">&#x27;cont-&#x27;</span>+<span class="built_in">str</span>(contId)</span><br><span class="line">    headers = &#123;</span><br><span class="line">        <span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_0) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/71.0.3578.98 Safari/537.36&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;Referer&#x27;</span>: <span class="string">&#x27;https://www.pearvideo.com/video_&#x27;</span>+ <span class="built_in">str</span>(contId)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">#获取动态url(ajax)</span></span><br><span class="line">    dynamic_url = <span class="string">&#x27;https://www.pearvideo.com/videoStatus.jsp?contId=&#x27;</span>+contId</span><br><span class="line">    name = li.xpath(<span class="string">&#x27;./div/a/div[2]/text()&#x27;</span>)[<span class="number">0</span>]+<span class="string">&#x27;.mp4&#x27;</span></span><br><span class="line">    <span class="comment">#对动态url发起请求</span></span><br><span class="line">    dynamic_page_text = requests.get(url=dynamic_url,headers=headers).text</span><br><span class="line">    <span class="comment">#从动态页中解析出视频的伪url</span></span><br><span class="line">    ex = <span class="string">&#x27;&quot;srcUrl&quot;:&quot;(.*?)&quot;&#x27;</span></span><br><span class="line">    srcUrl=re.findall(ex,dynamic_page_text)[<span class="number">0</span>]</span><br><span class="line">    <span class="comment">#替换视频里面的时间戳，获取真url</span></span><br><span class="line">    video_url = srcUrl.replace(srcUrl.split(<span class="string">&quot;-&quot;</span>)[<span class="number">0</span>].split(<span class="string">&quot;/&quot;</span>)[-<span class="number">1</span>], contId2)</span><br><span class="line">    dic = &#123;</span><br><span class="line">        <span class="string">&#x27;name&#x27;</span>:name,</span><br><span class="line">        <span class="string">&#x27;url&#x27;</span>:video_url</span><br><span class="line">    &#125;</span><br><span class="line">    urls.append(dic)</span><br><span class="line"><span class="comment">#对视频链接发起请求获取视频的二进制数据，然后将视频数据进行返回</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_video_data</span>(<span class="params">dic</span>):</span></span><br><span class="line">    url = dic[<span class="string">&#x27;url&#x27;</span>]</span><br><span class="line">    <span class="built_in">print</span>(dic[<span class="string">&#x27;name&#x27;</span>],<span class="string">&#x27;正在下载......&#x27;</span>)</span><br><span class="line">    data = requests.get(url=url,headers=headers).content</span><br><span class="line">    <span class="comment">#持久化存储操作</span></span><br><span class="line">    path = <span class="string">&#x27;LSP/&#x27;</span>+dic[<span class="string">&#x27;name&#x27;</span>]</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(path,<span class="string">&#x27;wb&#x27;</span>) <span class="keyword">as</span> fp:</span><br><span class="line">        fp.write(data)</span><br><span class="line">        <span class="built_in">print</span>(dic[<span class="string">&#x27;name&#x27;</span>],<span class="string">&#x27;下载成功！&#x27;</span>)</span><br><span class="line"><span class="comment">#使用线程池对视频数据进行请求（较为耗时的阻塞操作）</span></span><br><span class="line">pool = Pool(<span class="number">4</span>)</span><br><span class="line">pool.<span class="built_in">map</span>(get_video_data,urls)</span><br><span class="line"></span><br><span class="line">pool.close()</span><br><span class="line">pool.join()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="——-异步协程（未完待续）"><a href="#——-异步协程（未完待续）" class="headerlink" title="—— 异步协程（未完待续）"></a>—— 异步协程（未完待续）</h2><p>​    3.单线程+异步协程（推荐）：<br>​    event_loop：事件循环，相当于一个无限循环，我们可以把一些函数注册到这个事件循环上，<br>​    当满足某些条件的时候，函数就会被循环执行。</p>
<p>​    coroutine：协程对象，我们可以将协程对象注册到事件循环中，它会被事件循环调用。<br>​    我们可以使用 async 关键字来定义一个方法，这个方法在调用时不会立即被执行，而是返回<br>​    一个协程对象。</p>
<p>​    task：任务，它是对协程对象的进一步封装，包含了任务的各个状态。</p>
<p>​    future：代表将来执行或还没有执行的任务，实际上和 task 没有本质区别。</p>
<p>​    async 定义一个协程.</p>
<p>​    await 用来挂起阻塞方法的执行。</p>
<h1 id="Selenium"><a href="#Selenium" class="headerlink" title="Selenium"></a>Selenium</h1><p>selenium库相关的知识和用法，有一位学长总结的非常好，在此附上链接</p>
<p><a target="_blank" rel="noopener" href="https://shu-chasing.github.io/WEB%E8%87%AA%E5%8A%A8%E5%8C%96%E7%AC%94%E8%AE%B0/">https://shu-chasing.github.io/WEB%E8%87%AA%E5%8A%A8%E5%8C%96%E7%AC%94%E8%AE%B0/</a></p>
<p>这里就记录用selenium库完成的一些实操：</p>
<h2 id="——-模拟QQ登录："><a href="#——-模拟QQ登录：" class="headerlink" title="—— 模拟QQ登录："></a>—— 模拟QQ登录：</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">from</span> time <span class="keyword">import</span> sleep</span><br><span class="line"></span><br><span class="line">bro = webdriver.Chrome(executable_path=<span class="string">&#x27;./chromedriver&#x27;</span>)</span><br><span class="line"></span><br><span class="line">bro.get(<span class="string">&#x27;https://qzone.qq.com/&#x27;</span>)</span><br><span class="line"></span><br><span class="line">bro.switch_to.frame(<span class="string">&#x27;login_frame&#x27;</span>)</span><br><span class="line"></span><br><span class="line">a_tag = bro.find_element_by_id(<span class="string">&quot;switcher_plogin&quot;</span>)</span><br><span class="line">a_tag.click()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">userName_tag = bro.find_element_by_id(<span class="string">&#x27;u&#x27;</span>)</span><br><span class="line">password_tag = bro.find_element_by_id(<span class="string">&#x27;p&#x27;</span>)</span><br><span class="line">sleep(<span class="number">1</span>)</span><br><span class="line">userName_tag.send_keys(<span class="string">&#x27;328410948&#x27;</span>)</span><br><span class="line">sleep(<span class="number">1</span>)</span><br><span class="line">password_tag.send_keys(<span class="string">&#x27;123456789&#x27;</span>)</span><br><span class="line">sleep(<span class="number">1</span>)</span><br><span class="line">btn = bro.find_element_by_id(<span class="string">&#x27;login_button&#x27;</span>)</span><br><span class="line">btn.click()</span><br><span class="line"></span><br><span class="line">sleep(<span class="number">3</span>)</span><br><span class="line"></span><br><span class="line">bro.quit()</span><br></pre></td></tr></table></figure>



<h2 id="——-无头浏览器-规避检测："><a href="#——-无头浏览器-规避检测：" class="headerlink" title="—— 无头浏览器+规避检测："></a>—— 无头浏览器+规避检测：</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">from</span> time <span class="keyword">import</span> sleep</span><br><span class="line"><span class="comment">#实现无可视化界面</span></span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.chrome.options <span class="keyword">import</span> Options</span><br><span class="line"><span class="comment">#实现规避检测</span></span><br><span class="line"><span class="keyword">from</span> selenium.webdriver <span class="keyword">import</span> ChromeOptions</span><br><span class="line"></span><br><span class="line"><span class="comment">#实现无可视化界面的操作</span></span><br><span class="line">chrome_options = Options()</span><br><span class="line">chrome_options.add_argument(<span class="string">&#x27;--headless&#x27;</span>)</span><br><span class="line">chrome_options.add_argument(<span class="string">&#x27;--disable-gpu&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#实现规避检测</span></span><br><span class="line">option = ChromeOptions()</span><br><span class="line">option.add_experimental_option(<span class="string">&#x27;excludeSwitches&#x27;</span>, [<span class="string">&#x27;enable-automation&#x27;</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment">#如何实现让selenium规避被检测到的风险</span></span><br><span class="line">bro = webdriver.Chrome(executable_path=<span class="string">&#x27;./chromedriver&#x27;</span>,chrome_options=chrome_options,options=option)</span><br><span class="line"></span><br><span class="line"><span class="comment">#无可视化界面（无头浏览器） phantomJs</span></span><br><span class="line">bro.get(<span class="string">&#x27;https://www.baidu.com&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(bro.page_source)</span><br><span class="line">sleep(<span class="number">2</span>)</span><br><span class="line">bro.quit()</span><br></pre></td></tr></table></figure>



<h2 id="——-12306模拟登录"><a href="#——-12306模拟登录" class="headerlink" title="—— 12306模拟登录"></a>—— 12306模拟登录</h2><pre><code>- 超级鹰：http://www.chaojiying.com/about.html
    - 注册：普通用户
    - 登录：普通用户
        - 题分查询：充值
        - 创建一个软件（id）
        - 下载示例代码

- 12306模拟登录编码流程：
    - 使用selenium打开登录页面
    - 对当前selenium打开的这张页面进行截图
    - 对当前图片局部区域（验证码图片）进行裁剪
        - 好处：将验证码图片和模拟登录进行一一对应。
    - 使用超级鹰识别验证码图片（坐标）
    - 使用动作链根据坐标实现点击操作
    - 录入用户名密码，点击登录按钮实现登录
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#下述代码为超级鹰提供的示例代码</span></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> hashlib <span class="keyword">import</span> md5</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Chaojiying_Client</span>(<span class="params"><span class="built_in">object</span></span>):</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, username, password, soft_id</span>):</span></span><br><span class="line">        self.username = username</span><br><span class="line">        password =  password.encode(<span class="string">&#x27;utf8&#x27;</span>)</span><br><span class="line">        self.password = md5(password).hexdigest()</span><br><span class="line">        self.soft_id = soft_id</span><br><span class="line">        self.base_params = &#123;</span><br><span class="line">            <span class="string">&#x27;user&#x27;</span>: self.username,</span><br><span class="line">            <span class="string">&#x27;pass2&#x27;</span>: self.password,</span><br><span class="line">            <span class="string">&#x27;softid&#x27;</span>: self.soft_id,</span><br><span class="line">        &#125;</span><br><span class="line">        self.headers = &#123;</span><br><span class="line">            <span class="string">&#x27;Connection&#x27;</span>: <span class="string">&#x27;Keep-Alive&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 5.1; Trident/4.0)&#x27;</span>,</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">PostPic</span>(<span class="params">self, im, codetype</span>):</span></span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        im: 图片字节</span></span><br><span class="line"><span class="string">        codetype: 题目类型 参考 http://www.chaojiying.com/price.html</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        params = &#123;</span><br><span class="line">            <span class="string">&#x27;codetype&#x27;</span>: codetype,</span><br><span class="line">        &#125;</span><br><span class="line">        params.update(self.base_params)</span><br><span class="line">        files = &#123;<span class="string">&#x27;userfile&#x27;</span>: (<span class="string">&#x27;ccc.jpg&#x27;</span>, im)&#125;</span><br><span class="line">        r = requests.post(<span class="string">&#x27;http://upload.chaojiying.net/Upload/Processing.php&#x27;</span>, data=params, files=files, headers=self.headers)</span><br><span class="line">        <span class="keyword">return</span> r.json()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">ReportError</span>(<span class="params">self, im_id</span>):</span></span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        im_id:报错题目的图片ID</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        params = &#123;</span><br><span class="line">            <span class="string">&#x27;id&#x27;</span>: im_id,</span><br><span class="line">        &#125;</span><br><span class="line">        params.update(self.base_params)</span><br><span class="line">        r = requests.post(<span class="string">&#x27;http://upload.chaojiying.net/Upload/ReportError.php&#x27;</span>, data=params, headers=self.headers)</span><br><span class="line">        <span class="keyword">return</span> r.json()</span><br><span class="line"></span><br><span class="line"><span class="comment"># chaojiying = Chaojiying_Client(&#x27;bobo328410948&#x27;, &#x27;bobo328410948&#x27;, &#x27;899370&#x27;)	#用户中心&gt;&gt;软件ID 生成一个替换 96001</span></span><br><span class="line"><span class="comment"># im = open(&#x27;12306.jpg&#x27;, &#x27;rb&#x27;).read()													#本地图片文件路径 来替换 a.jpg 有时WIN系统须要//</span></span><br><span class="line"><span class="comment"># print(chaojiying.PostPic(im, 9004)[&#x27;pic_str&#x27;])</span></span><br><span class="line"><span class="comment">#上述代码为超级鹰提供的示例代码</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#使用selenium打开登录页面</span></span><br><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver <span class="keyword">import</span> ActionChains</span><br><span class="line"></span><br><span class="line">bro = webdriver.Chrome(executable_path=<span class="string">&#x27;./chromedriver&#x27;</span>)</span><br><span class="line">bro.implicitly_wait(<span class="number">10</span>)</span><br><span class="line">bro.get(<span class="string">&#x27;https://kyfw.12306.cn/otn/resources/login.html&#x27;</span>)</span><br><span class="line"><span class="comment">#将窗口最大化</span></span><br><span class="line">bro.maximize_window()</span><br><span class="line">time.sleep(<span class="number">0.5</span>)</span><br><span class="line">bro.find_element_by_link_text(<span class="string">&#x27;账号登录&#x27;</span>).click()</span><br><span class="line">time.sleep(<span class="number">1</span>)</span><br><span class="line"><span class="comment">#save_screenshot就是将当前页面进行截图且保存</span></span><br><span class="line">bro.save_screenshot(<span class="string">&#x27;aa.png&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#确定验证码图片对应的左上角和右下角的坐标（裁剪的区域就确定）</span></span><br><span class="line">code_img_ele = bro.find_element_by_class_name(<span class="string">&#x27;imgCode&#x27;</span>)</span><br><span class="line">location = code_img_ele.location  <span class="comment"># 验证码图片左上角的坐标 x,y</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;location:&#x27;</span>,location)</span><br><span class="line">size = code_img_ele.size  <span class="comment">#验证码标签对应的长和宽</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;size:&#x27;</span>,size)</span><br><span class="line"><span class="comment">#左上角和右下角坐标</span></span><br><span class="line"><span class="comment">#根据屏幕缩放比例乘相应倍数</span></span><br><span class="line">rangle = (</span><br><span class="line"><span class="built_in">int</span>(location[<span class="string">&#x27;x&#x27;</span>])*<span class="number">1.25</span>, <span class="built_in">int</span>(location[<span class="string">&#x27;y&#x27;</span>])*<span class="number">1.25</span>, <span class="built_in">int</span>(location[<span class="string">&#x27;x&#x27;</span>] + size[<span class="string">&#x27;width&#x27;</span>])*<span class="number">1.25</span>, <span class="built_in">int</span>(location[<span class="string">&#x27;y&#x27;</span>] + size[<span class="string">&#x27;height&#x27;</span>])*<span class="number">1.25</span>)</span><br><span class="line"><span class="comment">#至此验证码图片区域就确定下来了</span></span><br><span class="line"></span><br><span class="line">i = Image.<span class="built_in">open</span>(<span class="string">&#x27;./aa.png&#x27;</span>)</span><br><span class="line">code_img_name = <span class="string">&#x27;./code.png&#x27;</span></span><br><span class="line"><span class="comment">#crop根据指定区域进行图片裁剪</span></span><br><span class="line">frame = i.crop(rangle)</span><br><span class="line">frame.save(code_img_name)</span><br><span class="line"></span><br><span class="line"><span class="comment">#将验证码图片提交给超级鹰进行识别</span></span><br><span class="line">chaojiying = Chaojiying_Client(<span class="string">&#x27;20121048&#x27;</span>, <span class="string">&#x27;Restart1128&#x27;</span>, <span class="string">&#x27;920781&#x27;</span>)	<span class="comment">#用户中心&gt;&gt;软件ID 生成一个替换 96001</span></span><br><span class="line">im = <span class="built_in">open</span>(<span class="string">&#x27;code.png&#x27;</span>, <span class="string">&#x27;rb&#x27;</span>).read()													<span class="comment">#本地图片文件路径 来替换 a.jpg 有时WIN系统须要//</span></span><br><span class="line"><span class="built_in">print</span>(chaojiying.PostPic(im, <span class="number">9004</span>)[<span class="string">&#x27;pic_str&#x27;</span>])</span><br><span class="line">result = chaojiying.PostPic(im, <span class="number">9004</span>)[<span class="string">&#x27;pic_str&#x27;</span>]</span><br><span class="line">all_list = [] <span class="comment">#要存储即将被点击的点的坐标  [[x1,y1],[x2,y2]]</span></span><br><span class="line"><span class="keyword">if</span> <span class="string">&#x27;|&#x27;</span> <span class="keyword">in</span> result:</span><br><span class="line">    list_1 = result.split(<span class="string">&#x27;|&#x27;</span>)</span><br><span class="line">    count_1 = <span class="built_in">len</span>(list_1)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(count_1):</span><br><span class="line">        xy_list = []</span><br><span class="line">        x = <span class="built_in">int</span>(list_1[i].split(<span class="string">&#x27;,&#x27;</span>)[<span class="number">0</span>])</span><br><span class="line">        y = <span class="built_in">int</span>(list_1[i].split(<span class="string">&#x27;,&#x27;</span>)[<span class="number">1</span>])</span><br><span class="line">        xy_list.append(x)</span><br><span class="line">        xy_list.append(y)</span><br><span class="line">        all_list.append(xy_list)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    x = <span class="built_in">int</span>(result.split(<span class="string">&#x27;,&#x27;</span>)[<span class="number">0</span>])</span><br><span class="line">    y = <span class="built_in">int</span>(result.split(<span class="string">&#x27;,&#x27;</span>)[<span class="number">1</span>])</span><br><span class="line">    xy_list = []</span><br><span class="line">    xy_list.append(x)</span><br><span class="line">    xy_list.append(y)</span><br><span class="line">    all_list.append(xy_list)</span><br><span class="line"><span class="built_in">print</span>(all_list)</span><br><span class="line"><span class="comment">#遍历列表，使用动作链对每一个列表元素对应的x,y指定的位置进行点击操作</span></span><br><span class="line"><span class="keyword">for</span> l <span class="keyword">in</span> all_list:</span><br><span class="line">    x = l[<span class="number">0</span>]</span><br><span class="line">    y = l[<span class="number">1</span>]</span><br><span class="line">    ActionChains(bro).move_to_element_with_offset(code_img_ele, x/<span class="number">1.25</span>, y/<span class="number">1.25</span>).click().perform()<span class="comment">#别忘了除以之前的倍数</span></span><br><span class="line">    time.sleep(<span class="number">0.5</span>)</span><br><span class="line"></span><br><span class="line">bro.find_element_by_id(<span class="string">&#x27;J-userName&#x27;</span>).send_keys(<span class="string">&#x27;Restart1128&#x27;</span>)</span><br><span class="line">time.sleep(<span class="number">2</span>)</span><br><span class="line">bro.find_element_by_id(<span class="string">&#x27;J-password&#x27;</span>).send_keys(<span class="string">&#x27;Restart1128666&#x27;</span>)</span><br><span class="line">time.sleep(<span class="number">2</span>)</span><br><span class="line">bro.find_element_by_id(<span class="string">&#x27;J-login&#x27;</span>).click()</span><br><span class="line">time.sleep(<span class="number">30</span>)</span><br></pre></td></tr></table></figure>



<h2 id="——-爬取梨视频"><a href="#——-爬取梨视频" class="headerlink" title="—— 爬取梨视频"></a>—— 爬取梨视频</h2><p>之前通过分析动态加载的页面，从ajax请求中获取mp4链接，还要辨别伪链接，十分麻烦，而通过使用selenium库，可以直接获取js渲染后的页面源码数据，不用再分析动态加载了。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> lxml <span class="keyword">import</span> etree</span><br><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="comment">#实现规避检测</span></span><br><span class="line"><span class="keyword">from</span> selenium.webdriver <span class="keyword">import</span> ChromeOptions</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    <span class="comment">#进行头部信息伪装</span></span><br><span class="line">    headers = &#123;</span><br><span class="line">        <span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/85.0.4183.102 Safari/537.36&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">    url = <span class="string">&#x27;https://www.pearvideo.com/category_8&#x27;</span></span><br><span class="line">    <span class="comment">#获取科技页面中最新的视频所包含的网站的li列表</span></span><br><span class="line">    page_text = requests.get(url=url,headers=headers).text</span><br><span class="line">    tree = etree.HTML(page_text)</span><br><span class="line">    li_list = tree.xpath(<span class="string">&#x27;//*[@id=&quot;listvideoListUl&quot;]/li&#x27;</span>)</span><br><span class="line">    <span class="comment">#print(li_list)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">#规避检测</span></span><br><span class="line">    option = ChromeOptions()</span><br><span class="line">    option.add_experimental_option(<span class="string">&#x27;excludeSwitches&#x27;</span>, [<span class="string">&#x27;enable-automation&#x27;</span>])</span><br><span class="line"></span><br><span class="line">    bro = webdriver.Chrome(executable_path=<span class="string">&#x27;./chromedriver&#x27;</span>, options=option)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> li <span class="keyword">in</span> li_list:</span><br><span class="line">        <span class="comment">#对li列表循环获取每个最新视频的url</span></span><br><span class="line">        deta_url = <span class="string">&#x27;https://www.pearvideo.com/&#x27;</span> + li.xpath(<span class="string">&#x27;./div/a/@href&#x27;</span>)[<span class="number">0</span>]</span><br><span class="line">        name = li.xpath(<span class="string">&#x27;./div/a/div[2]/text()&#x27;</span>)[<span class="number">0</span>] + <span class="string">&#x27;.mp4&#x27;</span></span><br><span class="line">        <span class="comment">#利用浏览器对象访问每个视频页面</span></span><br><span class="line">        bro.get(deta_url)</span><br><span class="line">        <span class="comment"># page_source获取视频页面源码数据</span></span><br><span class="line">        page_text_mp4 = bro.page_source</span><br><span class="line">        <span class="comment">#生成etree对象来进行xpath解析</span></span><br><span class="line">        tree = etree.HTML(page_text_mp4)</span><br><span class="line">        <span class="comment">#提取页面数据中的MP4连接</span></span><br><span class="line">        mp4_url = tree.xpath(<span class="string">&#x27;//*[@id=&quot;JprismPlayer&quot;]/video/@src&#x27;</span>)[<span class="number">0</span>]</span><br><span class="line">        <span class="comment">#获取MP4的二进制数据并存储</span></span><br><span class="line">        mp4_rar = requests.get(url=mp4_url,headers=headers).content</span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(name,<span class="string">&#x27;wb&#x27;</span>) <span class="keyword">as</span> fp:</span><br><span class="line">            fp.write(mp4_rar)</span><br><span class="line">            <span class="built_in">print</span>(name,<span class="string">&#x27;爬取成功!!&#x27;</span>)</span><br><span class="line">    <span class="comment">#关闭浏览器对象</span></span><br><span class="line">    bro.quit()</span><br></pre></td></tr></table></figure>


    

    

    

  </div>
  <div class="article-info article-info-index">
    
    
    

    
    <p class="article-more-link">
      <a class="article-more-a" href="/2021/09/01/%E7%88%AC%E8%99%AB/">展开全文 >></a>
    </p>
    

    
    <div class="clearfix"></div>
  </div>
  </div>
</article>

<aside class="wrap-side-operation">
    <div class="mod-side-operation">
        
        <div class="jump-container" id="js-jump-container" style="display:none;">
            <a href="javascript:void(0)" class="mod-side-operation__jump-to-top">
                <i class="icon-font icon-back"></i>
            </a>
            <div id="js-jump-plan-container" class="jump-plan-container" style="top: -11px;">
                <i class="icon-font icon-plane jump-plane"></i>
            </div>
        </div>
        
        
    </div>
</aside>




  
    <article id="post-Python" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
  <div class="article-entry" itemprop="articleBody">
    
    <h1 id="变量与数据类型"><a href="#变量与数据类型" class="headerlink" title="变量与数据类型"></a>变量与数据类型</h1><p>变量必须以字母或下滑线开头</p>
<p>其他字符可以是字母，数字或_</p>
<p>变量区分大小写</p>
<p>Python关键字不能用作变量名</p>
<table>
<thead>
<tr>
<th>Python关键字</th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>None</td>
<td>class</td>
<td>from</td>
<td>or</td>
</tr>
<tr>
<td>True</td>
<td>continue</td>
<td>global</td>
<td>pass</td>
</tr>
<tr>
<td>peg_parser</td>
<td>def</td>
<td>if</td>
<td>raise</td>
</tr>
<tr>
<td>and</td>
<td>del</td>
<td>import</td>
<td>return</td>
</tr>
<tr>
<td>as</td>
<td>elif</td>
<td>in</td>
<td>try</td>
</tr>
<tr>
<td>assert</td>
<td>else</td>
<td>is</td>
<td>while</td>
</tr>
<tr>
<td>async</td>
<td>except</td>
<td>lambda</td>
<td>with</td>
</tr>
<tr>
<td>await</td>
<td>finally</td>
<td>nonlocal</td>
<td>yield</td>
</tr>
</tbody></table>
<p><strong>命名规范：</strong></p>
<p>见名知意，尽量使用有语义的单词命名。如使用 password用作密码， username用户名。<br>小驼峰式命名法：第一个单词首字母小写其他单词首字母大写，如 userName<br>大驼峰式命名法：全部单词首字母都用大写，如 UserName<br>下划线命名法：每个单词用下划线连接，如 user_name</p>
<h1 id="算数与比较运算"><a href="#算数与比较运算" class="headerlink" title="算数与比较运算"></a>算数与比较运算</h1><p>a=7 b=3</p>
<table>
<thead>
<tr>
<th align="center">算术预算符</th>
<th align="center">作用描述</th>
<th align="center">示例</th>
</tr>
</thead>
<tbody><tr>
<td align="center">**指数</td>
<td align="center">左边的数是底数，右边的数是指数</td>
<td align="center">a**b=343</td>
</tr>
<tr>
<td align="center">//地板除</td>
<td align="center">x//y结果是忽略小数点后面的小数位，只保留整数位</td>
<td align="center">a//b=2</td>
</tr>
</tbody></table>
<h1 id="逻辑运算符"><a href="#逻辑运算符" class="headerlink" title="逻辑运算符"></a>逻辑运算符</h1><p>()—&gt;not—&gt;and—&gt;or</p>
<h1 id="输入和输出"><a href="#输入和输出" class="headerlink" title="输入和输出"></a>输入和输出</h1><p><strong>输出：</strong></p>
<ol>
<li><p>格式符+占位符</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">name=&quot;Restart&quot;</span><br><span class="line">age=18</span><br><span class="line">print(&quot;姓名:%s,年龄:%d&quot;%(name,age))</span><br></pre></td></tr></table></figure></li>
<li><p>.format()</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">name=&quot;Restart&quot;</span><br><span class="line">age=18</span><br><span class="line">print(&quot;姓名:&#123;&#125;,年龄:&#123;&#125;&quot;.format(name,age))</span><br></pre></td></tr></table></figure></li>
</ol>
<p><strong>输入</strong>：input(“:***”)  str类型</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">age=int(input(&quot;年龄:&quot;))</span><br></pre></td></tr></table></figure>



<h1 id="循环流程3"><a href="#循环流程3" class="headerlink" title="循环流程3"></a>循环流程3</h1><h2 id="——for循环"><a href="#——for循环" class="headerlink" title="——for循环"></a>——for循环</h2><p>语法特点：遍历循环，依次的取集合容器中的每个值</p>
<p>for 临时变量 in 容器：</p>
<p>​    执行代码块</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">tags=<span class="string">&quot;我是一个中国人&quot;</span></span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> tags:</span><br><span class="line">	<span class="built_in">print</span>（item)</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>​    range(start,stop,step)</p>
<ul>
<li>start: 计数从 start 开始。默认是从 0 开始。例如range（5）等价于range（0， 5）;</li>
<li>stop: 计数到 stop 结束，但不包括 stop。例如：range（0， 5） 是[0, 1, 2, 3, 4]没有5</li>
<li>step：步长，默认为1。例如：range（0， 5） 等价于 range(0, 5, 1)</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">for data in range(1,100)</span><br><span class="line">	print(data,end=&quot;&quot;)</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#for循环打印九九乘法表</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,<span class="number">10</span>):</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,i+<span class="number">1</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;%d*%d=%d&quot;</span>%(i,j,i*j),end=<span class="string">&quot;&quot;</span>)</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    <span class="built_in">print</span>()</span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>



<p>break:跳出整个循环</p>
<p>continue:跳过本次循环，继续下一次循环</p>
<p>#这两个关键字只能用于循环中</p>
<h1 id="字符串操作"><a href="#字符串操作" class="headerlink" title="字符串操作"></a>字符串操作</h1><h2 id="——字符串常用函数"><a href="#——字符串常用函数" class="headerlink" title="——字符串常用函数"></a>——字符串常用函数</h2><p><img src="Python.assets/%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0.png"></p>
<h2 id="——分片提取"><a href="#——分片提取" class="headerlink" title="——分片提取"></a>——分片提取</h2><p>​        string</p>
<ul>
<li>通常上边界不包括在提取字符串内</li>
<li>如果没有指定值，则分片的边界默认为0和序列的长度</li>
<li><strong>str[1:3</strong>]**获取从偏移为1的字符一直到偏移为3的字符串，不包括偏移为3的字符串 : “tr”</li>
<li><strong>str[1:]</strong> 获取从偏移为1的字符一直到字符串的最后一个字符（包括最后一个字符）: “tring”</li>
<li><strong>str[:3]</strong> 获取从偏移为0的字符一直到偏移为3的字符串，不包括偏移为3的字符串 : “str”</li>
<li><strong>str[:-1]</strong> 获取从偏移为0的字符一直到最后一个字符（不包括最后一个字符串）: “strin”</li>
<li><strong>str[:]</strong> 获取字符串从开始到结尾的所有元素 : “string”</li>
<li><strong>str[-3:-1]</strong> 获取偏移为 -3 到偏移为 -1 的字符，不包括偏移为 -1 的字符 : “in”</li>
<li><strong>str[-1:-3]</strong> 和 <strong>str[2:0]</strong> 获取的为空字符，系统不提示错误: “”</li>
<li>分片的时候还可以增加一个步长，<strong>str[::2]</strong> 输出的结果为: “srn”</li>
<li></li>
</ul>
<h1 id="列表操作"><a href="#列表操作" class="headerlink" title="列表操作"></a>列表操作</h1><p>列表常用函数</p>
<p><img src="Python.assets/%E5%88%97%E8%A1%A8%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0.png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#追加	.append()&amp;.entend()</span></span><br><span class="line">listA=[<span class="number">1</span>,<span class="number">2</span>]</span><br><span class="line">data=[<span class="number">3</span>]</span><br><span class="line">listA.append(data)</span><br><span class="line">——[<span class="number">1</span>,<span class="number">2</span>,[<span class="number">3</span>]]</span><br><span class="line">listA.extend(data)</span><br><span class="line">——[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">#删除</span></span><br><span class="line">listB=<span class="built_in">range</span>(<span class="number">0</span>,<span class="number">20</span>)</span><br><span class="line">de1 1istB[<span class="number">0</span>] <span class="comment">#删除列表中第一个元素</span></span><br><span class="line">de1 1istB[<span class="number">1</span>:<span class="number">3</span>] <span class="comment">#批量删除多项数据</span></span><br><span class="line">1istB.remove(<span class="number">20</span>) <span class="comment">#移除指定的元素 参数是具体的数据值</span></span><br><span class="line"><span class="built_in">list</span>.pop(<span class="number">1</span>) <span class="comment">#移除指定的项 参数是素引值</span></span><br></pre></td></tr></table></figure>



<h1 id="元组操作"><a href="#元组操作" class="headerlink" title="元组操作"></a>元组操作</h1><p>注意点：当元组中只有一个元素时，要加上逗号，不然后解释器会当做整形来处理</p>
<h1 id="字典操作"><a href="#字典操作" class="headerlink" title="字典操作"></a>字典操作</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(dictA.keys())	 <span class="comment">#获取所有的键</span></span><br><span class="line"><span class="built_in">print</span>(dictA.values())<span class="comment">#获取所有的值</span></span><br><span class="line"><span class="built_in">print</span>(dictA.items()) <span class="comment">#获取所有的键和值</span></span><br><span class="line"></span><br><span class="line">dictA.update(&#123;<span class="string">&quot;height&quot;</span>:<span class="number">1.8</span>&#125;) <span class="comment">#可以添加或更新</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#删除</span></span><br><span class="line"><span class="keyword">del</span> dictA[<span class="string">&#x27;name&#x27;</span>] <span class="comment">#通过指定键删除</span></span><br><span class="line">dicta.pop(<span class="string">&#x27;age&#x27;</span>)  <span class="comment">#通过指定键删除</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#排序</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">sorted</span>(<span class="built_in">list</span>,key=<span class="keyword">lambda</span> d:d[?]))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">sorted</span>(dictA.items(),key=<span class="keyword">lambda</span> d:d[<span class="number">0</span>])) <span class="comment">#按照key排序</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">sorted</span>(dictA.items(),key=<span class="keyword">lambda</span> d:d[<span class="number">1</span>])) <span class="comment">#按照value排序</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># &quot;+&quot; 合并</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># &quot;*&quot; 复制</span></span><br><span class="line">listA=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line"><span class="built_in">print</span>(listA*<span class="number">3</span>)</span><br><span class="line">——[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># &quot;in&quot;  对象是否存在，返回一个bool值</span></span><br><span class="line"><span class="built_in">print</span>(<span class="number">4</span> <span class="keyword">in</span> listA)</span><br><span class="line">——<span class="literal">False</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h1 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h1><p>函数的定义:</p>
<p>def 函数名():<br>         代码块    </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#带参数调用函数</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">printInfo</span>(<span class="params">name,age,height,weight</span>):</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;%s的身高是%f&#x27;</span>%(name,height))</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;%s的年龄是%f&#x27;</span>%(name,age))</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;%s的体重是%f&#x27;</span>%(name,weight))</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line">printInfo(<span class="string">&quot;Restart&quot;</span>,<span class="number">13</span>,<span class="number">175</span>,<span class="number">130</span>)</span><br></pre></td></tr></table></figure>

<p>参数的分类：必选参数、默认参数[缺省参数]、可选参数、关键字参数</p>
<h2 id="——必选参数"><a href="#——必选参数" class="headerlink" title="——必选参数"></a>——必选参数</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sum</span>(<span class="params">a,b</span>):</span><span class="comment">#形式参数：只是实际意义上的一种参数，在定义的时候不占内存地址</span></span><br><span class="line">	<span class="built_in">sum</span>=a+b</span><br><span class="line">	<span class="built_in">print</span>(<span class="built_in">sum</span>)</span><br><span class="line">	<span class="keyword">pass</span></span><br><span class="line"><span class="built_in">sum</span>(<span class="number">20</span>,<span class="number">15</span>) <span class="comment">#35</span></span><br></pre></td></tr></table></figure>

<h2 id="——默认参数-缺省参数"><a href="#——默认参数-缺省参数" class="headerlink" title="——默认参数[缺省参数]"></a>——默认参数[缺省参数]</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#始终存在于参数列表中的尾部</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sum</span>(<span class="params">a,b=<span class="number">10</span></span>):</span></span><br><span class="line">	<span class="built_in">print</span>(<span class="string">&quot;%d&quot;</span> %(a+b))</span><br><span class="line">	<span class="keyword">pass</span></span><br><span class="line"><span class="built_in">sum</span>(<span class="number">10</span>) <span class="comment">#20</span></span><br><span class="line"><span class="built_in">sum</span>(<span class="number">10</span>,<span class="number">20</span>) <span class="comment">#30</span></span><br></pre></td></tr></table></figure>

<h2 id="——可变长的参数类型"><a href="#——可变长的参数类型" class="headerlink" title="——可变长的参数类型"></a>——可变长的参数类型</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getComputer</span>(<span class="params">*args</span>):</span></span><br><span class="line">	result=<span class="number">0</span></span><br><span class="line">	<span class="keyword">for</span> item <span class="keyword">in</span> args:</span><br><span class="line">		result+=item</span><br><span class="line">		<span class="keyword">pass</span></span><br><span class="line">	<span class="built_in">print</span>(<span class="string">&#x27;result=%d&#x27;</span>%result)</span><br><span class="line">	<span class="keyword">pass</span></span><br><span class="line">getComputer(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>) <span class="comment">#15</span></span><br><span class="line">    </span><br><span class="line">	</span><br></pre></td></tr></table></figure>

<h2 id="——关键字参数类型"><a href="#——关键字参数类型" class="headerlink" title="——关键字参数类型"></a>——关键字参数类型</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># **来定义</span></span><br><span class="line"><span class="comment"># 在函数体内 参数关键字是一个字典类型</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">keyFunc</span>(<span class="params">**haHa</span>):</span></span><br><span class="line">	<span class="built_in">print</span>(haHa)</span><br><span class="line">dictA=&#123;<span class="string">&#x27;name&#x27;</span>:<span class="string">&#x27;Restart&#x27;</span>,<span class="string">&#x27;age&#x27;</span>:<span class="number">20</span>&#125;</span><br><span class="line">keyFunc(**dictA) <span class="comment">#&#123;&#x27;name&#x27;: &#x27;Restart&#x27;, &#x27;age&#x27;: 20&#125;</span></span><br><span class="line">keyFunc(name=<span class="string">&#x27;Restart&#x27;</span>,age=<span class="number">20</span>) <span class="comment">#&#123;&#x27;name&#x27;: &#x27;Restart&#x27;, &#x27;age&#x27;: 20&#125;</span></span><br></pre></td></tr></table></figure>



<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#混合使用</span></span><br><span class="line"><span class="comment">#可选参数必须放到关键字可选参数之前</span></span><br><span class="line"><span class="comment">#可选参数：接收的数据是一个元组类型</span></span><br><span class="line"><span class="comment">#关键字可选参数：接收到的数据是一个字典类型</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">complexFunc</span>(<span class="params">*args,**kwargs</span>):</span></span><br><span class="line">	<span class="built_in">print</span>(args)</span><br><span class="line">	<span class="built_in">print</span>(kwargs)</span><br><span class="line">	<span class="keyword">pass</span></span><br><span class="line">complexFunc(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,name=<span class="string">&quot;Restart&quot;</span>)</span><br></pre></td></tr></table></figure>



<h1 id="函数返回值"><a href="#函数返回值" class="headerlink" title="函数返回值"></a>函数返回值</h1><pre><code>概念：函数执行完以后会返回一个对象，如果在函数的内部有 return就可以返回实际的值，否则返回None
类型：可以返回任意类型，返回值类型应该取决于 return后面的类型
用途：给调用方返回数据
</code></pre>
<blockquote>
<p>在一个函数体内可以出现多个 return值：但是肯定只能返回一个 return<br>如果在一个函数体内执行了 return，意味着函数就退出了。return后面的代码语句不会执行 </p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">Sum</span>(<span class="params">a,b</span>):</span></span><br><span class="line">	<span class="built_in">sum</span>=a+b</span><br><span class="line">	<span class="keyword">return</span> <span class="built_in">sum</span></span><br><span class="line">value=Sum(<span class="number">10</span>,<span class="number">20</span>)</span><br><span class="line"><span class="built_in">print</span>(value)</span><br></pre></td></tr></table></figure>



<h1 id="全局变量和局部变量"><a href="#全局变量和局部变量" class="headerlink" title="全局变量和局部变量"></a>全局变量和局部变量</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#如果在函数的内部要想对全局变量进行修改的话，必须使用global关键字</span></span><br><span class="line">pro=<span class="string">&quot;计算机信息管理&quot;</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">changeGlobal</span>():</span></span><br><span class="line">    <span class="keyword">global</span> pro</span><br><span class="line">    pro=<span class="string">&quot;市场营销&quot;</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line">changeGlobal()</span><br><span class="line"><span class="built_in">print</span>(pro) <span class="comment">#&quot;市场营销&quot;</span></span><br><span class="line">		</span><br></pre></td></tr></table></figure>



<h1 id="匿名函数"><a href="#匿名函数" class="headerlink" title="匿名函数"></a>匿名函数</h1><p>Python中使用lambda关键字创建匿名函数，所谓匿名即这个函数没有名字不用def关键字创建标准的函数</p>
<blockquote>
<p>用法:</p>
<p>lambda 参数1,参数2,参数3:执行代码块</p>
<p>特点:</p>
<ol>
<li>使用lambda关键字创建函数</li>
<li>没有名字的函数</li>
<li>匿名函数后面的表达式只有一个,注意:是表达式,不是语句</li>
<li>匿名函数自带return,而这个return的结果就是表达式计算后的结果        </li>
</ol>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#通过变量调用匿名函数</span></span><br><span class="line">test=<span class="keyword">lambda</span> x,y:x+y</span><br><span class="line">test(<span class="number">1</span>,<span class="number">3</span>)</span><br><span class="line"><span class="comment">#换成普通函数为:</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test</span>(<span class="params">x,y</span>)	</span></span><br><span class="line"><span class="function"><span class="title">return</span> <span class="title">x</span>+<span class="title">y</span></span></span><br></pre></td></tr></table></figure>



<h1 id="递归函数"><a href="#递归函数" class="headerlink" title="递归函数"></a>递归函数</h1><p>定义:函数内部调用自身</p>
<blockquote>
<p>注意:递归函数必须要有一个结束条件,否则递归无法结束会一直递归下去,直到到达最大递归深度后报错</p>
<p>优点:逻辑简单,定义简单</p>
<p>缺点:容易导致栈溢出,内存资源紧张,甚至内存泄漏</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#递归阶乘</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">diguiJc</span>(<span class="params">n</span>):</span></span><br><span class="line">    <span class="keyword">if</span> n==<span class="number">1</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> n*diguiJc(n-<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;10的阶乘:&#123;&#125;&#x27;</span>.<span class="built_in">format</span>(diguiJc(<span class="number">10</span>)))</span><br></pre></td></tr></table></figure>





<h1 id="内置函数"><a href="#内置函数" class="headerlink" title="内置函数"></a>内置函数</h1><h2 id="——数学函数"><a href="#——数学函数" class="headerlink" title="——数学函数"></a>——数学函数</h2><p>常用数学运算函数</p>
<ul>
<li>abs()</li>
<li>round()</li>
<li>pow()</li>
<li>divmod()</li>
<li>max()</li>
<li>min()</li>
<li>sum()</li>
<li>eval()</li>
</ul>
<p><img src="Python.assets/image-20210626160245510.png" alt="image-20210626160245510"></p>
<h2 id="——类型转换"><a href="#——类型转换" class="headerlink" title="——类型转换"></a>——类型转换</h2><ul>
<li><p>int()</p>
</li>
<li><p>float()</p>
</li>
<li><p>str()</p>
</li>
<li><p>ord()</p>
</li>
<li><p>chr()</p>
</li>
<li><p>bool()</p>
</li>
<li><p>bin()</p>
</li>
<li><p>hex()</p>
</li>
<li><p>oct()</p>
</li>
<li><p>list()</p>
</li>
<li><p>tuple()</p>
</li>
<li><p>dict()</p>
</li>
<li><p>bytes()</p>
</li>
</ul>
<p><img src="Python.assets/image-20210627120851899.png" alt="image-20210627120851899"></p>
<p><img src="Python.assets/image-20210627120855865.png" alt="image-20210627120855865"></p>
<p><img src="Python.assets/image-20210627120857707.png" alt="image-20210627120857707"></p>
<p><img src="Python.assets/image-20210627120858499.png" alt="image-20210627120858499"></p>
<p><img src="Python.assets/image-20210627121002009.png" alt="image-20210627121002009"></p>
<p><img src="Python.assets/image-20210627121211539.png" alt="image-20210627121211539"></p>
<p><img src="Python.assets/image-20210627121504250.png" alt="image-20210627121504250"></p>
<p><img src="Python.assets/image-20210627121541775.png" alt="image-20210627121541775"></p>
<h2 id="——set"><a href="#——set" class="headerlink" title="——set"></a>——set</h2><blockquote>
<p>#set 不支持索引和切片,是一个无序的且不重复的容器</p>
<p>#类似于字典,但是只有key,没有value</p>
</blockquote>
<p>集合操作函数:</p>
<ul>
<li>add()</li>
<li>clear</li>
<li>difference</li>
<li>intersection</li>
<li>union</li>
<li>pop</li>
<li>discard</li>
<li>update</li>
</ul>
<p><img src="Python.assets/image-20210627122107251.png" alt="image-20210627122107251"><img src="Python.assets/image-20210627122109335.png" alt="image-20210627122109335"><img src="Python.assets/image-20210627122110321.png" alt="image-20210627122110321"><img src="Python.assets/image-20210627122111065.png" alt="image-20210627122111065"><img src="Python.assets/image-20210627122112743.png" alt="image-20210627122112743"></p>
<p><img src="Python.assets/image-20210627123729137.png" alt="image-20210627123729137"></p>
<p><img src="Python.assets/image-20210627123729731.png" alt="image-20210627123729731"></p>
<p><strong>应用:</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#指定一个列表，列表中含有唯一一个只出现过一次的数字。写程序找出这个“独一无二”的数字</span></span><br><span class="line">li = [<span class="number">1</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">2</span>, <span class="number">5</span>, <span class="number">2</span>]</span><br><span class="line">set1 = <span class="built_in">set</span>(li) <span class="comment">#去重</span></span><br><span class="line"><span class="comment">#获取有重复数字的集合</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> set1:</span><br><span class="line">    li.remove(i)</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line">set2 = <span class="built_in">set</span>(li)<span class="comment">#将带有重复数字的集合去重</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> set1:</span><br><span class="line">    <span class="keyword">if</span> i <span class="keyword">not</span> <span class="keyword">in</span> set2:</span><br><span class="line">        <span class="built_in">print</span>(i)</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>





<h1 id="序列操作"><a href="#序列操作" class="headerlink" title="序列操作"></a>序列操作</h1><p>序列操作函数:</p>
<ul>
<li><p>all()</p>
</li>
<li><p>any()</p>
</li>
<li><p>sorted()</p>
</li>
<li><p>reverse()</p>
</li>
<li><p>range()</p>
</li>
<li><p>zip()</p>
</li>
<li><p>enumerate</p>
</li>
</ul>
<p><img src="Python.assets/image-20210627155813686.png" alt="image-20210627155813686"></p>
<p><img src="Python.assets/image-20210627155829269.png" alt="image-20210627155829269"></p>
<p><img src="Python.assets/image-20210627155918407.png" alt="image-20210627155918407"></p>
<p><img src="Python.assets/image-20210627155922679.png" alt="image-20210627155922679"></p>
<p><img src="Python.assets/image-20210627155929877.png" alt="image-20210627155929877"></p>
<p><img src="Python.assets/image-20210627155933657.png" alt="image-20210627155933657"></p>
<p><img src="Python.assets/image-20210627155935905.png" alt="image-20210627155935905"></p>
<h1 id="面向对象"><a href="#面向对象" class="headerlink" title="面向对象"></a>面向对象</h1><h2 id="面向对象（上）"><a href="#面向对象（上）" class="headerlink" title="面向对象（上）"></a>面向对象（上）</h2><h3 id="——类和对象"><a href="#——类和对象" class="headerlink" title="——类和对象"></a>——类和对象</h3><blockquote>
<p>类由3个部分组成:</p>
<ul>
<li>类的名称:类名</li>
<li>类的属性:一组数据</li>
<li>类的方法:允许对进行操作的方法(行为)</li>
</ul>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建一个类 </span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>(<span class="params"><span class="built_in">object</span></span>):</span> </span><br><span class="line">    name = <span class="string">&#x27;xiaohong&#x27;</span></span><br><span class="line">    age = <span class="number">18</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">eat</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;吃饭&#x27;</span>)</span><br></pre></td></tr></table></figure>



<blockquote>
<p>创建对象:对象名=类名()</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建一个类 </span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>(<span class="params"><span class="built_in">object</span></span>):</span> </span><br><span class="line">    name = <span class="string">&#x27;Restart&#x27;</span></span><br><span class="line">    age = <span class="number">20</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">eat</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;吃饭&#x27;</span>)</span><br><span class="line">sb=Person()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;&#123;&#125;的年龄是&#123;&#125;&quot;</span>.<span class="built_in">format</span>(sb.name,sb.age))<span class="comment">#Restart的年龄是20</span></span><br><span class="line">sb.eat()<span class="comment">#吃饭</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<blockquote>
<p>实例方法:在类的内部,使用def关键字来定义,第一个参数默认是self(名字标识可以是其他的名字,但是这个位置必须被占用)</p>
<p>属性:</p>
<ol>
<li>类属性:定义在类里面,方法外面的属性</li>
<li>实例属性:定义在方法里面使用self等引用的属性</li>
</ol>
<p>#实例能访问实例属性和类属性(无实例属性时访问类属性),类不能访问实例属性</p>
</blockquote>
<p><img src="Python.assets/image-20210628194946183.png" alt="image-20210628194946183"></p>
<blockquote>
<p>初始化方法，实例化对象的时候自动调用，完成一些初始化设置。</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span>(<span class="params"><span class="built_in">object</span></span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self,name,colour</span>):</span></span><br><span class="line">        self.name=name</span><br><span class="line">        self.colour=colour</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line">dog=Animal(<span class="string">&quot;旺财&quot;</span>,<span class="string">&quot;white&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(dog.name)</span><br><span class="line"><span class="built_in">print</span>(dog.colour)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>self传参问题：所谓的self，可以理解为对象自己，某个对象调用其方法时，python解释器会把这个对象作为第一个参数传递给self，所以开发者只需要传递后面的参数即可（self也能用其他名称代替）</p>
</blockquote>
<p>——魔术方法</p>
<h4 id="1-str方法"><a href="#1-str方法" class="headerlink" title="1.str方法"></a>1.str方法</h4><p><img src="Python.assets/image-20210628194749830.png" alt="image-20210628194749830"></p>
<blockquote>
<p>定义了__str__方法，在打印对象的时候，会执行__str__方法。__str__方法只能return一个字符串。</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span>(<span class="params"><span class="built_in">object</span></span>):</span></span><br><span class="line"><span class="comment"># 创建一个初始化方法</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self,name,colour</span>):</span></span><br><span class="line">        self.name = name</span><br><span class="line">        self.colour = colour</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;我的名字是%s,我的颜色为%s&#x27;</span>%(self.name,self.colour)</span><br><span class="line"><span class="comment"># 实例化对象</span></span><br><span class="line">dog = Animal(<span class="string">&#x27;旺财&#x27;</span>,<span class="string">&#x27;white&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(dog)	<span class="comment">#我的名字是旺财,我的颜色为white</span></span><br></pre></td></tr></table></figure>



<h4 id="2-new方法："><a href="#2-new方法：" class="headerlink" title="2.new方法："></a>2.new方法：</h4><blockquote>
<p>#new和init函数的区别<br>#new类的实例化方法必须要返回该实例，否则对象就创建不成功<br>#init用来做数据属性的初始化工作，也可以认为是实例的构造方法，接受类的实例self并对其进行构造<br>#new至少有一个参数是cls代表要实例化的类，此参数在实例化时由 python解释器自动提供<br>#new函数执行要早于init函数</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">__new__</span>(<span class="params">cls,*args,**kwargs</span>):</span></span><br><span class="line">    <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">    创建对象实例的方法，每调用一次 就会生成一个新的对象cls  就是class的缩写</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    场景：可以控制创建对象的一些属性限定  经常用来做单例模式的时候来使用</span></span><br><span class="line"><span class="string">    &#x27;&#x27;&#x27;</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;---new---函数的执行&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">object</span>.__new__(cls)<span class="comment">#在这里是真正创建对象实例的</span></span><br><span class="line"><span class="keyword">pass</span></span><br></pre></td></tr></table></figure>

<h4 id="——单例模式"><a href="#——单例模式" class="headerlink" title="——单例模式"></a>——单例模式</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SingleCase</span>(<span class="params"><span class="built_in">object</span></span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__new__</span>(<span class="params">cls, *args, **kwargs</span>):</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> cls.__instance:<span class="comment">#如果不存在就开始创建</span></span><br><span class="line">            cls.__instance = <span class="built_in">super</span>().__new__(cls, *args, **kwargs) <span class="comment"># 调用父类__new__方法生成一个实例对象</span></span><br><span class="line">        <span class="keyword">return</span> cls.__instance</span><br><span class="line"></span><br><span class="line">obj1 = SingleCase(<span class="string">&#x27;xiaoming&#x27;</span>,<span class="number">18</span>)</span><br><span class="line">obj2 = SingleCase(<span class="string">&#x27;xiaoming&#x27;</span>,<span class="number">118</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">id</span>(obj1)) <span class="comment"># id相等，说明实例化两次对象，实际上都是同一个对象</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">id</span>(obj2))</span><br><span class="line"></span><br></pre></td></tr></table></figure>







<h3 id="应用：双人对战小游戏"><a href="#应用：双人对战小游戏" class="headerlink" title="应用：双人对战小游戏"></a>应用：双人对战小游戏</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Hero</span>(<span class="params"><span class="built_in">object</span></span>):</span></span><br><span class="line"><span class="comment">#创建初始化方法</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, name</span>):</span></span><br><span class="line">    <span class="comment"># 定义name, blood 属性</span></span><br><span class="line">        self.name = name</span><br><span class="line">        self.blood = <span class="number">100</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">tong</span>(<span class="params">self, enemy</span>):</span></span><br><span class="line">        <span class="string">&quot;&quot;&quot;捅对方一刀&quot;&quot;&quot;</span></span><br><span class="line">        enemy.blood -= <span class="number">15</span></span><br><span class="line">        info = <span class="string">&#x27;%s 捅了 %s 一刀&#x27;</span> % (self.name, enemy.name)</span><br><span class="line">        <span class="built_in">print</span>(info)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">kanren</span>(<span class="params">self, enemy</span>):</span></span><br><span class="line">        <span class="string">&quot;&quot;&quot;砍对方一刀&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">        enemy.blood -= <span class="number">15</span></span><br><span class="line">        info = <span class="string">&#x27;%s 砍了 %s 一刀&#x27;</span> % (self.name, enemy.name)</span><br><span class="line">        <span class="built_in">print</span>(info)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">chiyao</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="string">&quot;&quot;&quot;吃药不血&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">        self.blood += <span class="number">10</span></span><br><span class="line">        info = <span class="string">&#x27;%s 吃了一颗补血药，加10滴血&#x27;</span> % self.name</span><br><span class="line">        <span class="built_in">print</span>(info)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;%s 还剩下 %s 血&#x27;</span> % (self.name, self.blood)</span><br><span class="line"></span><br><span class="line">wjl=Hero(<span class="string">&#x27;wjl&#x27;</span>)</span><br><span class="line">wh=Hero(<span class="string">&#x27;wh&#x27;</span>)</span><br><span class="line">wh.tong(wjl)<span class="comment">#wh捅了wjl一刀</span></span><br><span class="line"><span class="built_in">print</span>(wjl)<span class="comment">#wh还剩下100滴血</span></span><br><span class="line"><span class="built_in">print</span>(wh)<span class="comment">#wjl还剩下90滴血</span></span><br></pre></td></tr></table></figure>





<h2 id="面向对象（中）"><a href="#面向对象（中）" class="headerlink" title="面向对象（中）"></a>面向对象（中）</h2><h3 id=""><a href="#" class="headerlink" title=""></a></h3><p>定义：当一个对象被删除或者被销毁时，python解释器也会默认调用一个方法，这个方法为__del__()方法，也称为析构方法</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span>(<span class="params"><span class="built_in">object</span></span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self,name</span>):</span></span><br><span class="line">        self.name = name</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;_init_方法被调用&#x27;</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment">#析构方法，当对象呗销毁时python解析器会自动调用</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__del__</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;_del_方法会被调用&#x27;</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;%s对象被销毁&#x27;</span>%self.name)</span><br><span class="line"></span><br><span class="line">dog = Animal(<span class="string">&quot;旺财&quot;</span>)</span><br><span class="line"><span class="comment">#将对象删除</span></span><br><span class="line"><span class="keyword">del</span> dog</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h3 id="——单继承"><a href="#——单继承" class="headerlink" title="——单继承"></a>——单继承</h3><blockquote>
<p>​    在定义子类时要继承父类，只需要类名后面的小括号()中写上父类的名字，那么父类的属性、方法，会被继承给子类。    </p>
<p>​    对于面向对象的继承来说，其实就是将多个类共有的方法提取到父类中，子类仅需继承父类而不必一一实现每个方法</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span>(<span class="params"><span class="built_in">object</span></span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">eat</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;正在吃饭&quot;</span>)</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cat</span>(<span class="params">Animal</span>):</span> <span class="comment">#Cat类继承Animal类，Cat是子类，也称派生类，Animal类是父类，也称为基类</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">mmj</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;喵喵叫&quot;</span>)</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span>(<span class="params">Animal</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">wwj</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;汪汪叫&quot;</span>)</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">dog=Dog()</span><br><span class="line">dog.eat()<span class="comment">#正在吃法</span></span><br><span class="line">cat=Cat()</span><br><span class="line">cat.eat()<span class="comment">#正在吃饭</span></span><br></pre></td></tr></table></figure>



<h3 id="——多继承"><a href="#——多继承" class="headerlink" title="——多继承"></a>——多继承</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span>(<span class="params"><span class="built_in">object</span></span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">eat</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;A.eat&quot;</span>)</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span>(<span class="params">A</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">eat</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;B.eat&quot;</span>)</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span>(<span class="params">A</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">eat</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;C.eat&quot;</span>)</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">D</span>(<span class="params">B,C</span>):</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">d=D()</span><br><span class="line">d.eat()</span><br><span class="line"><span class="comment">#方法的执行顺序可以用mro查看</span></span><br><span class="line"><span class="built_in">print</span>(D.__mro__)<span class="comment">#D-B-C-A</span></span><br></pre></td></tr></table></figure>





<h3 id="——继承的传递"><a href="#——继承的传递" class="headerlink" title="——继承的传递"></a>——继承的传递</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GrandFather</span>(<span class="params"><span class="built_in">object</span></span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">eat</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;吃饭&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#继承 GrandFather 类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Father</span>(<span class="params">GrandFather</span>):</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"><span class="comment">#继承 Father 类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Son</span>(<span class="params">Father</span>):</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">wh = Son()</span><br><span class="line">wh.eat()<span class="comment">#吃饭</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h3 id="——重写-amp-调用父类方法"><a href="#——重写-amp-调用父类方法" class="headerlink" title="——重写&amp;调用父类方法"></a>——重写&amp;调用父类方法</h3><blockquote>
<p>重写父类:所谓重写，就是子类中，有一个和父类相同名字的方法，在子类中的方法会覆盖掉父类中同名的方法</p>
</blockquote>
<blockquote>
<p>调用父类:如果在子类中有一个方法需要父类的功能，并且又要添加新的功能。如果直接重写父类方法，那么就要重复写很多代码。那么这就要调用父类方法</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span>(<span class="params"><span class="built_in">object</span></span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, name, color</span>):</span></span><br><span class="line">        self.name = name</span><br><span class="line">        self.color = color</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">bark</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Kejiquan</span>(<span class="params">Dog</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, name, color</span>):</span><span class="comment">#重写父类方法</span></span><br><span class="line">        Dog.__init__(self,name,color)</span><br><span class="line">        <span class="comment">#super().__init__(name,color) 自动找到父类进而找到方法</span></span><br><span class="line">        self.height = <span class="number">90</span></span><br><span class="line">        self.weight = <span class="number">20</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">return</span><span class="string">&quot;&#123;&#125;的颜色是&#123;&#125;，身高是&#123;&#125;cm，体重是&#123;&#125;kg&quot;</span>.<span class="built_in">format</span>(self.name,self.color,self.height,self.weight)</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">weijialang=Kejiquan(<span class="string">&#x27;柯基犬&#x27;</span>,<span class="string">&#x27;五颜六色&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(weijialang)<span class="comment">#柯基犬的颜色是五颜六色，身高是90cm，体重是20kg</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h3 id="——类方法"><a href="#——类方法" class="headerlink" title="——类方法"></a>——类方法</h3><p>定义：类对象所拥有的方法，需要用装饰器@classmethod来标识其为类方法，对于类方法，第一个参数必须是类对象，一般以cls作为第一个参数，类方法可以通过类对象，实例对象调用</p>
<blockquote>
<p>即用@classmethod将实例方法转变为类方法</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">People</span>(<span class="params"><span class="built_in">object</span></span>):</span></span><br><span class="line">    country = <span class="string">&quot;中国&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">    @classmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_country</span>(<span class="params">cls</span>):</span></span><br><span class="line">        <span class="keyword">return</span> cls.country</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="meta">    @classmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">change_country</span>(<span class="params">cls, data</span>):</span></span><br><span class="line">        cls.country = data</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(People.get_country())<span class="comment">#通过类对象去访问</span></span><br><span class="line">p = People()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;实例对象访问:&#123;&#125;&quot;</span>.<span class="built_in">format</span>(p.get_country()))</span><br><span class="line">People.change_country(<span class="string">&#x27;英国&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(People.get_country())<span class="comment">#通过类对象去引用</span></span><br></pre></td></tr></table></figure>



<h3 id="——静态方法"><a href="#——静态方法" class="headerlink" title="——静态方法"></a>——静态方法</h3><blockquote>
<p>​    静态方法(@staticmethod)中不需要额外定义参数，不需要定义实例对象,直接类对象调用,省资源</p>
</blockquote>
<h2 id="面向对象（下）"><a href="#面向对象（下）" class="headerlink" title="面向对象（下）"></a>面向对象（下）</h2><p>——私有化属性、方法</p>
<p>语法:在属性、方法前加两个下划线</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>(<span class="params"><span class="built_in">object</span></span>):</span> </span><br><span class="line">__age = <span class="number">18</span> <span class="comment"># 定义一个私有化属性，属性名字前面加两个下划线 </span></span><br></pre></td></tr></table></figure>



<blockquote>
<p>使用私有化属性的场景:</p>
<p>1.把特定的属性隐藏起来,不想让类的外部进行直接调用</p>
<p>2.我想保护这个属性,不想让属性的值随意的改变</p>
<p>3.不让派生类[子类]去继承</p>
<p>#可以在类的内部访问和修改私有属性，如用str魔术方法来返回属性</p>
</blockquote>
<h3 id="——Property属性函数（"><a href="#——Property属性函数（" class="headerlink" title="——Property属性函数（?)"></a>——Property属性函数（?)</h3><p>属性函数实现方式1：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>(<span class="params"><span class="built_in">object</span></span>):</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self</span>):</span></span><br><span class="line">        self.age = <span class="number">18</span> <span class="comment"># 定义一个私有实例属性</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_age</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">return</span> self.__age <span class="comment"># 访问私有实例属性</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">set_age</span>(<span class="params">self,age</span>):</span></span><br><span class="line">        self.__age = age <span class="comment"># 修改私有实例属性</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    age=<span class="built_in">property</span>(get_age,set_age)</span><br><span class="line"></span><br><span class="line">Restart=Person()</span><br><span class="line"><span class="built_in">print</span>(Restart.age)</span><br><span class="line">Restart.age=<span class="number">25</span></span><br><span class="line"><span class="built_in">print</span>(Restart.age)</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p>实现方式2：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>(<span class="params"><span class="built_in">object</span></span>):</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self</span>):</span></span><br><span class="line">        self.age = <span class="number">18</span> <span class="comment"># 定义一个私有实例属性</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">age</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">return</span> self.__age <span class="comment"># 访问私有实例属性</span></span><br><span class="line"><span class="meta">    @age.setter</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">age</span>(<span class="params">self,age</span>):</span></span><br><span class="line">        self.__age = age <span class="comment"># 修改私有实例属性</span></span><br><span class="line"></span><br><span class="line">Restart=Person()</span><br><span class="line"><span class="built_in">print</span>(Restart.age)</span><br><span class="line">Restart.age=<span class="number">25</span></span><br><span class="line"><span class="built_in">print</span>(Restart.age)</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h3 id="——异常处理"><a href="#——异常处理" class="headerlink" title="——异常处理(?)"></a>——异常处理(?)</h3><p>​    将可能出错的代码放到try里面，except可以指定类型捕获异常。except里面的代码是捕获到异常时执行,将错误捕获，这样程序就不会因为一段代码包异常而导致整个程序崩溃</p>
<p>语法：</p>
<p><img src="Python.assets/image-20210706215629672.png" alt="image-20210706215629672"></p>
<p>捕捉所有类型的异常：</p>
<p><img src="Python.assets/image-20210706215712630.png" alt="image-20210706215712630"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="built_in">print</span>(a)</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">    <span class="built_in">print</span>(e)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;hhh&quot;</span>)</span><br><span class="line"><span class="comment">#name &#x27;a&#x27; is not defined</span></span><br><span class="line"><span class="comment">#hhh</span></span><br></pre></td></tr></table></figure>



<p>自定义抛出异常类：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 自定义一个异常类 </span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LeNumExcept</span>(<span class="params">Exception</span>):</span>  <span class="comment"># 自定义异常类需要继承Exception</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;[error]你输入的数字小于0，请输入大于0的数字&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">NumTest</span>():</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        num = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&quot;请输入一个数字:&quot;</span>))</span><br><span class="line">        <span class="keyword">if</span> num &lt; <span class="number">0</span>:</span><br><span class="line">            <span class="comment"># raise 关键字抛出异常</span></span><br><span class="line">            <span class="keyword">raise</span> LeNumExcept()</span><br><span class="line">    <span class="keyword">except</span> LeNumExcept <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span>(e)  <span class="comment"># 捕获异常</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;没有异常&#x27;</span>)</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line">NumTest()</span><br><span class="line"><span class="comment">#请输入一个数字:-2</span></span><br><span class="line"><span class="comment">#[error]你输入的数字小于0，请输入大于0的数字</span></span><br></pre></td></tr></table></figure>



<h3 id="——动态绑定方法"><a href="#——动态绑定方法" class="headerlink" title="——动态绑定方法"></a>——动态绑定方法</h3><p>动态添加实例方法需要使用types</p>
<p>动态添加实例方法：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> types</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">DynamicMethod</span>(<span class="params">self</span>):</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;&#123;&#125;在&#123;&#125;读大学&#x27;</span>.<span class="built_in">format</span>(self.name,self.school))</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self,name,school</span>):</span></span><br><span class="line">        self.name=name</span><br><span class="line">        self.school=school</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">Restart=Student(<span class="string">&quot;Restart&quot;</span>,<span class="string">&quot;上海大学&quot;</span>)</span><br><span class="line">PrintInfo=types.MethodType(DynamicMethod,Restart)<span class="comment">#动态的绑定方法</span></span><br><span class="line">PrintInfo()<span class="comment">#调用动态绑定的方法</span></span><br><span class="line"><span class="comment">#Restart在上海大学读大学</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p>动态添加类、静态方法：</p>
<p><img src="Python.assets/image-20210707140434701.png" alt="image-20210707140434701"></p>
<p><img src="Python.assets/image-20210707140437468.png" alt="image-20210707140437468"></p>
<h3 id="——slot函数"><a href="#——slot函数" class="headerlink" title="——slot函数"></a>——slot函数</h3><ul>
<li>限制要填加的实例属性</li>
<li>将属性存储在slots变量里，只保存名字，（原本属性都存在dict魔术方法里，有键和值），因此可以节约内存资源</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>(<span class="params"><span class="built_in">object</span></span>):</span></span><br><span class="line">    __slots__ = (<span class="string">&#x27;name&#x27;</span>,<span class="string">&#x27;age&#x27;</span>)</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line">A=Person()</span><br><span class="line">A.name=<span class="string">&quot;Restart&quot;</span></span><br><span class="line">A.age=<span class="number">5</span></span><br><span class="line"><span class="built_in">print</span>(A.name,A.age)</span><br><span class="line"><span class="comment">#Restart 5</span></span><br></pre></td></tr></table></figure>



<blockquote>
<p>#子类未声明slots时，那么是不会继承父类的slots,此时子类是可以随意的属性赋值的</p>
<p>#子类声明了slots时，继承父类的slots,子类slots的范围是其自身+父类的slots</p>
</blockquote>
<h2 id="飞机大战"><a href="#飞机大战" class="headerlink" title="飞机大战"></a>飞机大战</h2><p>实现方式1（面向过程）（部分）：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pygame <span class="keyword">as</span> p</span><br><span class="line"><span class="keyword">import</span> pygame.mixer</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span>():</span></span><br><span class="line">    <span class="comment"># 首先创建一个窗口，用来显示内容</span></span><br><span class="line">    screen = p.display.set_mode((<span class="number">350</span>, <span class="number">500</span>))</span><br><span class="line">    <span class="comment"># 创建一个背景图片对象</span></span><br><span class="line">    background = p.image.load(<span class="string">&#x27;./feiji/background.png&#x27;</span>)</span><br><span class="line">    <span class="comment"># 设置一个title</span></span><br><span class="line">    p.display.set_caption(<span class="string">&quot;飞机小游戏&quot;</span>)</span><br><span class="line">    p.mixer.init()</span><br><span class="line">    p.mixer.music.load(<span class="string">&#x27;./feiji/background.mp3&#x27;</span>)</span><br><span class="line">    p.mixer.music.set_volume(<span class="number">0.5</span>)</span><br><span class="line">    p.mixer.music.play(-<span class="number">1</span>)  <span class="comment"># 表示无线循环播放</span></span><br><span class="line">    <span class="comment"># 载入玩家的飞机图片</span></span><br><span class="line">    hero = p.image.load(<span class="string">&#x27;./feiji/hero.png&#x27;</span>)</span><br><span class="line">    x, y = <span class="number">0</span>, <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 设定要显示的内容</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        screen.blit(background, (<span class="number">0</span>, <span class="number">0</span>))</span><br><span class="line">        screen.blit(hero, (x, y))</span><br><span class="line">        evenlist = p.event.get()</span><br><span class="line">        <span class="keyword">for</span> event <span class="keyword">in</span> evenlist:</span><br><span class="line">            <span class="keyword">if</span> event.<span class="built_in">type</span> == p.QUIT:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;退出&quot;</span>)</span><br><span class="line">                exit()</span><br><span class="line">                <span class="keyword">pass</span></span><br><span class="line">            <span class="keyword">elif</span> event.<span class="built_in">type</span> == p.KEYDOWN:</span><br><span class="line">                <span class="keyword">if</span> event.key == p.K_a <span class="keyword">or</span> event.key == p.K_LEFT:</span><br><span class="line">                    <span class="built_in">print</span>(<span class="string">&#x27;Left&#x27;</span>)</span><br><span class="line">                    <span class="keyword">if</span> x &gt; <span class="number">0</span>:</span><br><span class="line">                        x -= <span class="number">10</span></span><br><span class="line">                    <span class="keyword">pass</span></span><br><span class="line">                <span class="keyword">elif</span> event.key == p.K_d <span class="keyword">or</span> event.key == p.K_RIGHT:</span><br><span class="line">                    <span class="built_in">print</span>(<span class="string">&#x27;right&#x27;</span>)</span><br><span class="line">                    <span class="keyword">if</span> x &lt; <span class="number">350</span>:</span><br><span class="line">                        x += <span class="number">10</span></span><br><span class="line">                    <span class="keyword">pass</span></span><br><span class="line">                <span class="keyword">elif</span> event.key == p.K_SPACE:</span><br><span class="line">                    <span class="built_in">print</span>(<span class="string">&#x27;K_SPACE&#x27;</span>)</span><br><span class="line">                    <span class="keyword">pass</span></span><br><span class="line">                <span class="keyword">pass</span></span><br><span class="line">            <span class="comment"># 更新显示内容</span></span><br><span class="line">            p.display.update()</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    main()</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>实现方式2（面向对象）：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pygame <span class="keyword">as</span> p</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">from</span> pygame <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span>():</span></span><br><span class="line">    <span class="comment"># 首先创建一个窗口，用来显示内容</span></span><br><span class="line">    screen = p.display.set_mode((<span class="number">350</span>, <span class="number">500</span>))</span><br><span class="line">    <span class="comment"># 创建一个背景图片对象</span></span><br><span class="line">    background = p.image.load(<span class="string">&#x27;./feiji/background.png&#x27;</span>)</span><br><span class="line">    <span class="comment"># 设置一个title</span></span><br><span class="line">    p.display.set_caption(<span class="string">&quot;飞机小游戏&quot;</span>)</span><br><span class="line">    p.mixer.init()</span><br><span class="line">    p.mixer.music.load(<span class="string">&#x27;./feiji/background.mp3&#x27;</span>)</span><br><span class="line">    p.mixer.music.set_volume(<span class="number">0.5</span>)</span><br><span class="line">    p.mixer.music.play(-<span class="number">1</span>)  <span class="comment"># 表示无线循环播放</span></span><br><span class="line">    <span class="comment"># 创建一个飞机对象</span></span><br><span class="line">    hero = HeroPlane(screen)</span><br><span class="line">    <span class="comment"># 创建一个敌机对象</span></span><br><span class="line">    enemyplane = EnemyPlane(screen)</span><br><span class="line">    <span class="comment"># 设定要显示的内容</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        screen.blit(background, (<span class="number">0</span>, <span class="number">0</span>))</span><br><span class="line">        <span class="comment"># 显示玩家飞机的图片</span></span><br><span class="line">        hero.display()</span><br><span class="line">        enemyplane.display()  <span class="comment"># 显示敌机</span></span><br><span class="line">        enemyplane.move()  <span class="comment"># 敌机移动</span></span><br><span class="line">        enemyplane.shoot()  <span class="comment"># 敌机发射子弹</span></span><br><span class="line">        <span class="comment"># 获取键盘事件</span></span><br><span class="line">        key_control(hero)</span><br><span class="line">        <span class="comment"># 更新显示内容</span></span><br><span class="line">        p.display.update()</span><br><span class="line">        p.time.Clock().tick(<span class="number">20</span>)</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HeroPlane</span>(<span class="params"><span class="built_in">object</span></span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, screen</span>):</span></span><br><span class="line">        <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">        初始化函数</span></span><br><span class="line"><span class="string">        :param screen: 主窗体对象</span></span><br><span class="line"><span class="string">        &#x27;&#x27;&#x27;</span></span><br><span class="line">        <span class="comment"># 设置飞机默认的位置</span></span><br><span class="line">        self.x = <span class="number">150</span></span><br><span class="line">        self.y = <span class="number">450</span></span><br><span class="line">        <span class="comment"># 设置要显示内容的窗口</span></span><br><span class="line">        self.screen = screen</span><br><span class="line">        <span class="comment"># 生成飞机的图片对象</span></span><br><span class="line">        self.image = p.image.load(<span class="string">&#x27;./feiji/hero.png&#x27;</span>)</span><br><span class="line">        <span class="comment"># 用来存放子弹的列表</span></span><br><span class="line">        self.bulletList = []</span><br><span class="line"></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">MoveLeft</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">        左移动</span></span><br><span class="line"><span class="string">        :return:</span></span><br><span class="line"><span class="string">        &#x27;&#x27;&#x27;</span></span><br><span class="line">        <span class="keyword">if</span> self.x &gt; <span class="number">0</span>:</span><br><span class="line">            self.x -= <span class="number">20</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">MoveRight</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">        右移动</span></span><br><span class="line"><span class="string">        :return:</span></span><br><span class="line"><span class="string">        &#x27;&#x27;&#x27;</span></span><br><span class="line">        <span class="keyword">if</span> self.x &lt; <span class="number">310</span>:</span><br><span class="line">            self.x += <span class="number">20</span></span><br><span class="line">            <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">display</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">        在主窗体中显示飞机</span></span><br><span class="line"><span class="string">        :return:</span></span><br><span class="line"><span class="string">        &#x27;&#x27;&#x27;</span></span><br><span class="line">        self.screen.blit(self.image, (self.x, self.y))</span><br><span class="line">        <span class="comment"># 完善子弹的展示逻辑</span></span><br><span class="line">        needDelItemList = []</span><br><span class="line">        <span class="keyword">for</span> item <span class="keyword">in</span> self.bulletList:</span><br><span class="line">            <span class="keyword">if</span> item.judge():</span><br><span class="line">                needDelItemList.append(item)</span><br><span class="line">                <span class="keyword">pass</span></span><br><span class="line">            <span class="keyword">pass</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> needDelItemList:</span><br><span class="line">            self.bulletList.remove(i)</span><br><span class="line">            <span class="keyword">pass</span></span><br><span class="line">        <span class="keyword">for</span> bullet <span class="keyword">in</span> self.bulletList:</span><br><span class="line">            bullet.display()  <span class="comment"># 显示子弹的位置</span></span><br><span class="line">            bullet.move()  <span class="comment"># 让这个子弹进行移动 下次再显示的时候就会看到子弹再修改后的位置</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">shoot</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="comment"># 创建一个新的子弹对象</span></span><br><span class="line">        newBullet = Bullet(self.x, self.y, self.screen)</span><br><span class="line">        self.bulletList.append(newBullet)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">EnemyPlane</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, screen</span>):</span></span><br><span class="line">        <span class="comment"># 默认设置一个方向</span></span><br><span class="line">        self.direction = <span class="string">&#x27;right&#x27;</span></span><br><span class="line">        <span class="comment"># 敌机的默认位置</span></span><br><span class="line">        self.x = <span class="number">0</span></span><br><span class="line">        self.y = <span class="number">0</span></span><br><span class="line">        self.screen = screen</span><br><span class="line">        self.image = p.image.load(<span class="string">&#x27;./feiji/enemy0.png&#x27;</span>)</span><br><span class="line">        self.bulletList = []</span><br><span class="line"></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">move</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">        敌机移动 随机进行的</span></span><br><span class="line"><span class="string">        :return:</span></span><br><span class="line"><span class="string">        &#x27;&#x27;&#x27;</span></span><br><span class="line">        <span class="keyword">if</span> self.direction == <span class="string">&#x27;right&#x27;</span>:</span><br><span class="line">            self.x += <span class="number">2</span></span><br><span class="line">            <span class="keyword">pass</span></span><br><span class="line">        <span class="keyword">elif</span> self.direction == <span class="string">&#x27;left&#x27;</span>:</span><br><span class="line">            self.x -= <span class="number">2</span></span><br><span class="line">            <span class="keyword">pass</span></span><br><span class="line">        <span class="keyword">if</span> self.x &gt; <span class="number">350</span> - <span class="number">20</span>:</span><br><span class="line">            self.direction = <span class="string">&#x27;left&#x27;</span></span><br><span class="line">            <span class="keyword">pass</span></span><br><span class="line">        <span class="keyword">elif</span> self.x &lt; <span class="number">0</span>:</span><br><span class="line">            self.direction = <span class="string">&#x27;right&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">display</span>(<span class="params">self</span>):</span></span><br><span class="line">        self.screen.blit(self.image, (self.x, self.y))</span><br><span class="line">        <span class="comment"># 完善子弹的展示逻辑</span></span><br><span class="line">        needDelItemList = []</span><br><span class="line">        <span class="keyword">for</span> item <span class="keyword">in</span> self.bulletList:</span><br><span class="line">            <span class="keyword">if</span> item.judge():</span><br><span class="line">                needDelItemList.append(item)</span><br><span class="line">                <span class="keyword">pass</span></span><br><span class="line">            <span class="keyword">pass</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> needDelItemList:</span><br><span class="line">            self.bulletList.remove(i)</span><br><span class="line">            <span class="keyword">pass</span></span><br><span class="line">        <span class="keyword">for</span> bullet <span class="keyword">in</span> self.bulletList:</span><br><span class="line">            bullet.display()  <span class="comment"># 显示子弹的位置</span></span><br><span class="line">            bullet.move()  <span class="comment"># 让这个子弹进行移动 下次再显示的时候就会看到子弹再修改后的位置</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">shoot</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">        敌机随机的发射子弹</span></span><br><span class="line"><span class="string">        :return:</span></span><br><span class="line"><span class="string">        &#x27;&#x27;&#x27;</span></span><br><span class="line">        num = random.randint(<span class="number">1</span>, <span class="number">5</span>)</span><br><span class="line">        <span class="keyword">if</span> num == <span class="number">3</span>:</span><br><span class="line">            newBullet = EnemyBullet(self.x, self.y, self.screen)</span><br><span class="line">            self.bulletList.append(newBullet)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Bullet</span>(<span class="params"><span class="built_in">object</span></span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, x, y, screen</span>):</span></span><br><span class="line">        self.x = x + <span class="number">13</span></span><br><span class="line">        self.y = y - <span class="number">20</span></span><br><span class="line">        self.screen = screen</span><br><span class="line">        self.image = p.image.load(<span class="string">&#x27;./feiji/bullet.png&#x27;</span>)</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">display</span>(<span class="params">self</span>):</span></span><br><span class="line">        self.screen.blit(self.image, (self.x, self.y))</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">move</span>(<span class="params">self</span>):</span></span><br><span class="line">        self.y -= <span class="number">5</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">judge</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">if</span> self.y &lt; <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">EnemyBullet</span>(<span class="params"><span class="built_in">object</span></span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, x, y, screen</span>):</span></span><br><span class="line">        self.x = x</span><br><span class="line">        self.y = y + <span class="number">20</span></span><br><span class="line">        self.screen = screen</span><br><span class="line">        self.image = p.image.load(<span class="string">&#x27;./feiji/bullet1.png&#x27;</span>)</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">display</span>(<span class="params">self</span>):</span></span><br><span class="line">        self.screen.blit(self.image, (self.x, self.y))</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">move</span>(<span class="params">self</span>):</span></span><br><span class="line">        self.y += <span class="number">5</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">judge</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">if</span> self.y &gt; <span class="number">500</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">key_control</span>(<span class="params">HeroObj</span>):</span></span><br><span class="line">    <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">    定义普通的参数 用来实现家键盘的检测</span></span><br><span class="line"><span class="string">    :param Heroobj:课控制检测的对象</span></span><br><span class="line"><span class="string">    :return:</span></span><br><span class="line"><span class="string">    &#x27;&#x27;&#x27;</span></span><br><span class="line">    evenlist = p.event.get()</span><br><span class="line">    <span class="keyword">for</span> event <span class="keyword">in</span> evenlist:</span><br><span class="line">        <span class="keyword">if</span> event.<span class="built_in">type</span> == p.QUIT:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;退出&quot;</span>)</span><br><span class="line">            exit()</span><br><span class="line">            <span class="keyword">pass</span></span><br><span class="line">        <span class="keyword">elif</span> event.<span class="built_in">type</span> == p.KEYDOWN:</span><br><span class="line">            <span class="keyword">if</span> event.key == p.K_a <span class="keyword">or</span> event.key == p.K_LEFT:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&#x27;Left&#x27;</span>)</span><br><span class="line">                HeroObj.MoveLeft()  <span class="comment"># 调用函数实现左移动</span></span><br><span class="line">                <span class="keyword">pass</span></span><br><span class="line">            <span class="keyword">elif</span> event.key == p.K_d <span class="keyword">or</span> event.key == p.K_RIGHT:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&#x27;right&#x27;</span>)</span><br><span class="line">                HeroObj.MoveRight()  <span class="comment"># 调用函数实现右移动</span></span><br><span class="line"></span><br><span class="line">                <span class="keyword">pass</span></span><br><span class="line">            <span class="keyword">elif</span> event.key == p.K_SPACE:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&#x27;发射子弹&#x27;</span>)</span><br><span class="line">                HeroObj.shoot()</span><br><span class="line">                <span class="keyword">pass</span></span><br><span class="line">            <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">main()</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p>可使用继承优化：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pygame <span class="keyword">as</span> p</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">from</span> pygame <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span>():</span></span><br><span class="line">    <span class="comment"># 首先创建一个窗口，用来显示内容</span></span><br><span class="line">    screen = p.display.set_mode((<span class="number">350</span>, <span class="number">500</span>))</span><br><span class="line">    <span class="comment"># 创建一个背景图片对象</span></span><br><span class="line">    background = p.image.load(<span class="string">&#x27;./feiji/background.png&#x27;</span>)</span><br><span class="line">    <span class="comment"># 设置一个title</span></span><br><span class="line">    p.display.set_caption(<span class="string">&quot;飞机小游戏&quot;</span>)</span><br><span class="line">    p.mixer.init()</span><br><span class="line">    p.mixer.music.load(<span class="string">&#x27;./feiji/background.mp3&#x27;</span>)</span><br><span class="line">    p.mixer.music.set_volume(<span class="number">0.5</span>)</span><br><span class="line">    p.mixer.music.play(-<span class="number">1</span>)  <span class="comment"># 表示无线循环播放</span></span><br><span class="line">    <span class="comment"># 创建一个飞机对象</span></span><br><span class="line">    hero = HeroPlane(screen)</span><br><span class="line">    <span class="comment"># 创建一个敌机对象</span></span><br><span class="line">    enemyplane = EnemyPlane(screen)</span><br><span class="line">    <span class="comment"># 设定要显示的内容</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        screen.blit(background, (<span class="number">0</span>, <span class="number">0</span>))</span><br><span class="line">        <span class="comment"># 显示玩家飞机的图片</span></span><br><span class="line">        hero.display()</span><br><span class="line">        enemyplane.display()  <span class="comment"># 显示敌机</span></span><br><span class="line">        enemyplane.move()  <span class="comment"># 敌机移动</span></span><br><span class="line">        enemyplane.shoot()  <span class="comment"># 敌机发射子弹</span></span><br><span class="line">        <span class="comment"># 获取键盘事件</span></span><br><span class="line">        key_control(hero)</span><br><span class="line">        <span class="comment"># 更新显示内容</span></span><br><span class="line">        p.display.update()</span><br><span class="line">        p.time.Clock().tick(<span class="number">20</span>)</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BasePlane</span>(<span class="params"><span class="built_in">object</span></span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, screen, imagePath</span>):</span></span><br><span class="line">        <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">        初始化基类函数</span></span><br><span class="line"><span class="string">        :param screen: 主窗体对象</span></span><br><span class="line"><span class="string">        :param image: 加载的图片</span></span><br><span class="line"><span class="string">        &#x27;&#x27;&#x27;</span></span><br><span class="line">        self.screen = screen</span><br><span class="line">        self.image = p.image.load(imagePath)</span><br><span class="line">        self.bulletList = []  <span class="comment"># 存储所有的子弹</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">display</span>(<span class="params">self</span>):</span></span><br><span class="line">        self.screen.blit(self.image, (self.x, self.y))</span><br><span class="line">        <span class="comment"># 完善子弹的展示逻辑</span></span><br><span class="line">        needDelItemList = []</span><br><span class="line">        <span class="keyword">for</span> item <span class="keyword">in</span> self.bulletList:</span><br><span class="line">            <span class="keyword">if</span> item.judge():</span><br><span class="line">                needDelItemList.append(item)</span><br><span class="line">                <span class="keyword">pass</span></span><br><span class="line">            <span class="keyword">pass</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> needDelItemList:</span><br><span class="line">            self.bulletList.remove(i)</span><br><span class="line">            <span class="keyword">pass</span></span><br><span class="line">        <span class="keyword">for</span> bullet <span class="keyword">in</span> self.bulletList:</span><br><span class="line">            bullet.display()  <span class="comment"># 显示子弹的位置</span></span><br><span class="line">            bullet.move()  <span class="comment"># 让这个子弹进行移动 下次再显示的时候就会看到子弹再修改后的位置</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HeroPlane</span>(<span class="params">BasePlane</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, screen</span>):</span></span><br><span class="line">        <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">        初始化函数</span></span><br><span class="line"><span class="string">        :param screen: 主窗体对象</span></span><br><span class="line"><span class="string">        &#x27;&#x27;&#x27;</span></span><br><span class="line">        <span class="comment"># 设置飞机默认的位置</span></span><br><span class="line">        <span class="built_in">super</span>().__init__(screen, <span class="string">&#x27;./feiji/hero.png&#x27;</span>)  <span class="comment"># 调用父类的</span></span><br><span class="line">        self.x = <span class="number">150</span></span><br><span class="line">        self.y = <span class="number">450</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">MoveLeft</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">        左移动</span></span><br><span class="line"><span class="string">        :return:</span></span><br><span class="line"><span class="string">        &#x27;&#x27;&#x27;</span></span><br><span class="line">        <span class="keyword">if</span> self.x &gt; <span class="number">0</span>:</span><br><span class="line">            self.x -= <span class="number">20</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">MoveRight</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">        右移动</span></span><br><span class="line"><span class="string">        :return:</span></span><br><span class="line"><span class="string">        &#x27;&#x27;&#x27;</span></span><br><span class="line">        <span class="keyword">if</span> self.x &lt; <span class="number">310</span>:</span><br><span class="line">            self.x += <span class="number">20</span></span><br><span class="line">            <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">shoot</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="comment"># 创建一个新的子弹对象</span></span><br><span class="line">        newBullet = CommonBullet(self.x, self.y, self.screen, <span class="string">&#x27;hero&#x27;</span>)</span><br><span class="line">        self.bulletList.append(newBullet)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">EnemyPlane</span>(<span class="params">BasePlane</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, screen</span>):</span></span><br><span class="line">        <span class="built_in">super</span>().__init__(screen, <span class="string">&#x27;./feiji/enemy0.png&#x27;</span>)</span><br><span class="line">        <span class="comment"># 默认设置一个方向</span></span><br><span class="line">        self.direction = <span class="string">&#x27;right&#x27;</span></span><br><span class="line">        <span class="comment"># 敌机的默认位置</span></span><br><span class="line">        self.x = <span class="number">0</span></span><br><span class="line">        self.y = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">move</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">        敌机移动 随机进行的</span></span><br><span class="line"><span class="string">        :return:</span></span><br><span class="line"><span class="string">        &#x27;&#x27;&#x27;</span></span><br><span class="line">        <span class="keyword">if</span> self.direction == <span class="string">&#x27;right&#x27;</span>:</span><br><span class="line">            self.x += <span class="number">2</span></span><br><span class="line">            <span class="keyword">pass</span></span><br><span class="line">        <span class="keyword">elif</span> self.direction == <span class="string">&#x27;left&#x27;</span>:</span><br><span class="line">            self.x -= <span class="number">2</span></span><br><span class="line">            <span class="keyword">pass</span></span><br><span class="line">        <span class="keyword">if</span> self.x &gt; <span class="number">350</span> - <span class="number">20</span>:</span><br><span class="line">            self.direction = <span class="string">&#x27;left&#x27;</span></span><br><span class="line">            <span class="keyword">pass</span></span><br><span class="line">        <span class="keyword">elif</span> self.x &lt; <span class="number">0</span>:</span><br><span class="line">            self.direction = <span class="string">&#x27;right&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">shoot</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">        敌机随机的发射子弹</span></span><br><span class="line"><span class="string">        :return:</span></span><br><span class="line"><span class="string">        &#x27;&#x27;&#x27;</span></span><br><span class="line">        num = random.randint(<span class="number">1</span>, <span class="number">5</span>)</span><br><span class="line">        <span class="keyword">if</span> num == <span class="number">3</span>:</span><br><span class="line">            newBullet = CommonBullet(self.x, self.y, self.screen, <span class="string">&#x27;enemy&#x27;</span>)</span><br><span class="line">            self.bulletList.append(newBullet)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CommonBullet</span>(<span class="params"><span class="built_in">object</span></span>):</span></span><br><span class="line">    <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">    公共的子弹类</span></span><br><span class="line"><span class="string">    &#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, x, y,screen, bulletType</span>):</span></span><br><span class="line">        self.<span class="built_in">type</span> = bulletType</span><br><span class="line">        self.screen =screen</span><br><span class="line">        <span class="keyword">if</span> self.<span class="built_in">type</span> == <span class="string">&#x27;hero&#x27;</span>:</span><br><span class="line">            self.x = x + <span class="number">13</span></span><br><span class="line">            self.y = y - <span class="number">20</span></span><br><span class="line">            self.imagePath = <span class="string">&#x27;./feiji/bullet.Png&#x27;</span></span><br><span class="line">        <span class="keyword">elif</span> self.<span class="built_in">type</span> == <span class="string">&#x27;enemy&#x27;</span>:</span><br><span class="line">            self.x = x</span><br><span class="line">            self.y = y + <span class="number">10</span></span><br><span class="line">            self.imagePath = <span class="string">&#x27;./feiji/bullet1.Png&#x27;</span></span><br><span class="line">            <span class="keyword">pass</span></span><br><span class="line">        self.image=p.image.load(self.imagePath)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">move</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">        子弹的移动</span></span><br><span class="line"><span class="string">        :return:</span></span><br><span class="line"><span class="string">        &#x27;&#x27;&#x27;</span></span><br><span class="line">        <span class="keyword">if</span> self.<span class="built_in">type</span> == <span class="string">&#x27;hero&#x27;</span>:</span><br><span class="line">            self.y -= <span class="number">2</span></span><br><span class="line">            <span class="keyword">pass</span></span><br><span class="line">        <span class="keyword">elif</span> self.<span class="built_in">type</span> == <span class="string">&#x27;enemy&#x27;</span>:</span><br><span class="line">            self.y += <span class="number">2</span></span><br><span class="line">            <span class="keyword">pass</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">display</span>(<span class="params">self</span>):</span></span><br><span class="line">        self.screen.blit(self.image, (self.x, self.y))</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">judge</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">        判断子弹是否越界</span></span><br><span class="line"><span class="string">        :return:</span></span><br><span class="line"><span class="string">        &#x27;&#x27;&#x27;</span></span><br><span class="line">        <span class="keyword">if</span> self.y &gt; <span class="number">500</span> <span class="keyword">or</span> self.y &lt;= <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">key_control</span>(<span class="params">HeroObj</span>):</span></span><br><span class="line">    <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">    定义普通的参数 用来实现家键盘的检测</span></span><br><span class="line"><span class="string">    :param Heroobj:课控制检测的对象</span></span><br><span class="line"><span class="string">    :return:</span></span><br><span class="line"><span class="string">    &#x27;&#x27;&#x27;</span></span><br><span class="line">    evenlist = p.event.get()</span><br><span class="line">    <span class="keyword">for</span> event <span class="keyword">in</span> evenlist:</span><br><span class="line">        <span class="keyword">if</span> event.<span class="built_in">type</span> == p.QUIT:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;退出&quot;</span>)</span><br><span class="line">            exit()</span><br><span class="line">            <span class="keyword">pass</span></span><br><span class="line">        <span class="keyword">elif</span> event.<span class="built_in">type</span> == p.KEYDOWN:</span><br><span class="line">            <span class="keyword">if</span> event.key == p.K_a <span class="keyword">or</span> event.key == p.K_LEFT:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&#x27;Left&#x27;</span>)</span><br><span class="line">                HeroObj.MoveLeft()  <span class="comment"># 调用函数实现左移动</span></span><br><span class="line">                <span class="keyword">pass</span></span><br><span class="line">            <span class="keyword">elif</span> event.key == p.K_d <span class="keyword">or</span> event.key == p.K_RIGHT:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&#x27;right&#x27;</span>)</span><br><span class="line">                HeroObj.MoveRight()  <span class="comment"># 调用函数实现右移动</span></span><br><span class="line"></span><br><span class="line">                <span class="keyword">pass</span></span><br><span class="line">            <span class="keyword">elif</span> event.key == p.K_SPACE:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&#x27;发射子弹&#x27;</span>)</span><br><span class="line">                HeroObj.shoot()</span><br><span class="line">                <span class="keyword">pass</span></span><br><span class="line">            <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">main()</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h1 id="文件"><a href="#文件" class="headerlink" title="文件"></a>文件</h1><h2 id="——文件的读写"><a href="#——文件的读写" class="headerlink" title="——文件的读写"></a>——文件的读写</h2><p><img src="Python.assets/image-20210709123202035.png" alt="image-20210709123202035"></p>
<p>读文件</p>
<ul>
<li>readline() 按行读取，但是一次只读取一行。</li>
<li>readlines() 按行读取，一次性读取所有内容，返回一个列表，每一行内容作为一个元素。</li>
</ul>
<p>写文件</p>
<ul>
<li>写入文件 write() 方法，参数就是需要写入的内容</li>
<li>writelines() 可传一个可迭代对象</li>
</ul>
<blockquote>
<p>with 上下文管理:自动关闭文件</p>
</blockquote>
<p>demo:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span>():</span> </span><br><span class="line">	<span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;setup.py&#x27;</span>,<span class="string">&#x27;w&#x27;</span>) <span class="keyword">as</span> f: </span><br><span class="line">		content = f.read() </span><br><span class="line">		<span class="built_in">print</span>(content) </span><br><span class="line">main() </span><br></pre></td></tr></table></figure>

<blockquote>
<p>二进制读写的时候,要注意编码问题,默认情况下,我们写入文件的编码是gbk</p>
</blockquote>
<h2 id="——文件的备份"><a href="#——文件的备份" class="headerlink" title="——文件的备份"></a>——文件的备份</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">copyfile</span>():</span></span><br><span class="line">    <span class="comment"># 接收用户输入的文件名</span></span><br><span class="line">    old_file = <span class="built_in">input</span>(<span class="string">&#x27;请输入要备份的文件名:&#x27;</span>)</span><br><span class="line">    file_list = old_file.split(<span class="string">&quot;.&quot;</span>)</span><br><span class="line">    <span class="comment"># 构造新的文件名，加上备份后缀</span></span><br><span class="line">    new_file = file_list[<span class="number">0</span>] + <span class="string">&#x27;_备份.&#x27;</span> + file_list[<span class="number">1</span>]</span><br><span class="line">    old_f = <span class="built_in">open</span>(old_file, <span class="string">&#x27;r&#x27;</span>) <span class="comment"># 打开需要备份的文件</span></span><br><span class="line">    new_f = <span class="built_in">open</span>(new_file, <span class="string">&#x27;w&#x27;</span>) <span class="comment"># 以写的模式打开新文件,不存在则创建</span></span><br><span class="line">    content = old_f.read() <span class="comment"># 将文件内容读取出来</span></span><br><span class="line">    new_f.write(content) <span class="comment"># 将读取的内容写入备份文件</span></span><br><span class="line">    <span class="comment"># 将打开的文件关闭</span></span><br><span class="line">    old_f.close()</span><br><span class="line">    new_f.close()</span><br><span class="line">copyfile()</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p>​    如果处理超大文件，一次将全部内容读取出来显然是不合适的，在需求1的基础上改进下代码，让它备份大文件也不会导致内存被占满。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">copyfile</span>():</span></span><br><span class="line">    <span class="comment"># 接收用户输入的文件名</span></span><br><span class="line">    old_file = <span class="built_in">input</span>(<span class="string">&#x27;请输入要备份的文件名:&#x27;</span>)</span><br><span class="line">    file_list = old_file.split(<span class="string">&quot;.&quot;</span>)</span><br><span class="line">    <span class="comment"># 构造新的文件名，加上备份后缀</span></span><br><span class="line">    new_file = file_list[<span class="number">0</span>] + <span class="string">&#x27;_备份.&#x27;</span> + file_list[<span class="number">1</span>]</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="comment"># 同时打开需要备份的文件，新文件</span></span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(old_file, <span class="string">&#x27;r&#x27;</span>) <span class="keyword">as</span> old_f, <span class="built_in">open</span>(new_file, <span class="string">&#x27;a&#x27;</span>) <span class="keyword">as</span> new_f:</span><br><span class="line">            <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">            <span class="comment"># 一次读取1024字符</span></span><br><span class="line">                content = old_f.read(<span class="number">1024</span>)</span><br><span class="line">                new_f.write(content)</span><br><span class="line">                <span class="comment"># 当读取的内容字符长度小于1024说明已经读取完毕</span></span><br><span class="line">                <span class="keyword">if</span> <span class="built_in">len</span>(content) &lt; <span class="number">1024</span>:</span><br><span class="line">                    <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span>(e)</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line">copyfile()</span><br></pre></td></tr></table></figure>



<h2 id="——文件的定位"><a href="#——文件的定位" class="headerlink" title="——文件的定位"></a>——文件的定位</h2><p><strong>tell():</strong></p>
<p>文件定位，指的是当前文件指针读取到的位置，光标位置。在读写文件的过程中，如果想知道当前的位置，可以使用tell()来获取</p>
<p>truncate():截取前n个字符</p>
<p><strong>seek()</strong></p>
<ul>
<li><p>如果在操作文件的过程，需要定位到其他位置进行操作，用seek()。</p>
</li>
<li><p>seek(offset, from)有2个参数,offset，偏移量单位字节，负数是往回偏移，正数是往前偏移，from位置：0表示文件开头，1表示当前位置，2表示文件末尾</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 以读模式打开test.txt 文件 </span></span><br><span class="line">f = <span class="built_in">open</span>(<span class="string">&#x27;test.txt&#x27;</span>,’rb’)</span><br><span class="line">content = f.read(<span class="number">3</span>)  <span class="comment"># 读取三个字符 </span></span><br><span class="line"><span class="built_in">print</span>(content)</span><br><span class="line">f.seek(-<span class="number">2</span>, <span class="number">1</span>)  <span class="comment"># 在当前位置往回偏移两个字节 </span></span><br><span class="line"></span><br><span class="line">content = f.read(<span class="number">3</span>)  <span class="comment"># 读取三个字符 </span></span><br><span class="line"><span class="built_in">print</span>(content)</span><br><span class="line"></span><br><span class="line">f.seek(-<span class="number">5</span>, <span class="number">2</span>)  <span class="comment"># 定位到文章末尾，往回偏移5个字节</span></span><br><span class="line">content = f.read(<span class="number">3</span>)  <span class="comment"># 读取三个字符 </span></span><br><span class="line"><span class="built_in">print</span>(content)</span><br><span class="line"></span><br><span class="line">f.seek(<span class="number">5</span>, <span class="number">0</span>)  <span class="comment"># 定位到文章开头，往回偏移5个字节 </span></span><br><span class="line">content = f.read(<span class="number">3</span>)  <span class="comment"># 读取三个字符 </span></span><br><span class="line"><span class="built_in">print</span>(content)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 偏移量为负数，是往回偏移，正数是往前偏移</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h1 id="模块"><a href="#模块" class="headerlink" title="模块"></a>模块</h1><h2 id="——time模块"><a href="#——time模块" class="headerlink" title="——time模块"></a>——time模块</h2><p>time.sleep(num) ，让程序执行暂停，num单位是秒</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time </span><br><span class="line">time.sleep(<span class="number">5</span>)<span class="comment">#让程序暂停5秒</span></span><br></pre></td></tr></table></figure>

<p>常用函数：</p>
<p><img src="Python.assets/image-20210710174859942.png" alt="image-20210710174859942"></p>
<ul>
<li><p>时间格式化输出：</p>
<p><img src="Python.assets/image-20210710174951745.png" alt="image-20210710174951745"></p>
</li>
<li><p>实践格式化符号</p>
<p><img src="Python.assets/image-20210710175031699.png" alt="image-20210710175031699"></p>
</li>
</ul>
<h2 id="——datetime模块"><a href="#——datetime模块" class="headerlink" title="——datetime模块"></a>——datetime模块</h2><p> datetime模块主要用于时间计算</p>
<p><img src="Python.assets/image-20210710175130722.png" alt="image-20210710175130722"></p>
<h2 id="——os模块"><a href="#——os模块" class="headerlink" title="——os模块"></a>——os模块</h2><p>对文件进行重命名、删除等一些操作，在python中可以利用os模块</p>
<p>os模块提供一些系统级别的操作命令：</p>
<table>
<thead>
<tr>
<th>方法</th>
<th>解释</th>
</tr>
</thead>
<tbody><tr>
<td>os.getcwd()</td>
<td>获取当前工作目录，即当前python脚本工作的目录路径</td>
</tr>
<tr>
<td>os.chdir(“dirname”)</td>
<td>改变当前脚本工作目录；相当于shell下cd</td>
</tr>
<tr>
<td>os.curdir</td>
<td>返回当前目录: (‘.’)</td>
</tr>
<tr>
<td>os.pardir</td>
<td>获取当前目录的父目录字符串名：(‘..’)</td>
</tr>
<tr>
<td>os.makedirs(‘dir1/dir2’)</td>
<td>可生成多层递归目录</td>
</tr>
<tr>
<td>os.removedirs(‘dirname1’)</td>
<td>若目录为空，则删除，并递归到上一级目录，如若也为空，则删除，依此类推</td>
</tr>
<tr>
<td>os.mkdir(‘dirname’)</td>
<td>生成单级目录；相当于shell中mkdir dirname</td>
</tr>
<tr>
<td>os.rmdir(‘dirname’)</td>
<td>删除单级空目录，若目录不为空则无法删除，报错</td>
</tr>
<tr>
<td>os.listdir(‘dirname’)</td>
<td>列出指定目录下的所有文件和子目录，包括隐藏文件，并以列表方式打印</td>
</tr>
<tr>
<td>os.remove()</td>
<td>删除一个文件</td>
</tr>
<tr>
<td>os.rename(“oldname”,”new”)</td>
<td>重命名文件/目录</td>
</tr>
<tr>
<td>os.stat(‘path/filename’)</td>
<td>获取文件/目录信息</td>
</tr>
<tr>
<td>os.sep</td>
<td>操作系统特定的路径分隔符，win下为”\“,Linux下为”/“</td>
</tr>
<tr>
<td>os.linesep</td>
<td>当前平台使用的行终止符，win下为”\t\n”,Linux下为”\n”</td>
</tr>
<tr>
<td>os.pathsep</td>
<td>用于分割文件路径的字符串</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th>方法</th>
<th>解释</th>
</tr>
</thead>
<tbody><tr>
<td>os.name</td>
<td>字符串指示当前使用平台。win-&gt;’nt’; Linux-&gt;’posix’</td>
</tr>
<tr>
<td>os.system(“bash command”)</td>
<td>运行shell命令，直接显示</td>
</tr>
<tr>
<td>os.environ</td>
<td>获取系统环境变量</td>
</tr>
<tr>
<td>os.path.abspath(path)</td>
<td>返回path规范化的绝对路径</td>
</tr>
<tr>
<td>os.path.split(path)</td>
<td>将path分割成目录和文件名二元组返回</td>
</tr>
<tr>
<td>os.path.dirname(path)</td>
<td>返回path的目录。其实就是os.path.split(path)的第一个元素</td>
</tr>
<tr>
<td>os.path.basename(path)</td>
<td>返回path最后的文件名。如何path以／或\结尾，那么就会返回空值。即os.path.split(path)的第二个元素</td>
</tr>
<tr>
<td>os.path.exists(path)</td>
<td>如果path存在，返回True；如果path不存在，返回False</td>
</tr>
<tr>
<td>os.path.isabs(path)</td>
<td>如果path是绝对路径，返回True</td>
</tr>
<tr>
<td>os.path.isfile(path)</td>
<td>如果path是一个存在的文件，返回True。否则返回False</td>
</tr>
<tr>
<td>os.path.isdir(path)</td>
<td>如果path是一个存在的目录，则返回True。否则返回False</td>
</tr>
<tr>
<td>os.path.join(path1[, path2[, …]])</td>
<td>将多个路径组合后返回，第一个绝对路径之前的参数将被忽略</td>
</tr>
<tr>
<td>os.path.getatime(path)</td>
<td>返回path所指向的文件或者目录的最后存取时间</td>
</tr>
<tr>
<td>os.path.getmtime(path)</td>
<td>返回path所指向的文件或者目录的最后修改时间</td>
</tr>
</tbody></table>
<h2 id="——模块的制作、安装和发布"><a href="#——模块的制作、安装和发布" class="headerlink" title="——模块的制作、安装和发布"></a>——模块的制作、安装和发布</h2><blockquote>
<p>在main.py 导入test模块，执行时模块中的测试代码也执行了,为了避免这种情况使用到一个__name__的变量，因此可将测试的代码放到 if <strong>name</strong> = ‘<strong>main</strong>‘</p>
</blockquote>
<p><img src="Python.assets/image-20210710175805931.png" alt="image-20210710175805931"></p>
<p>  all魔术方法可限定模块中可被调用的函数（只对from…import*时生效）</p>
<p><img src="Python.assets/image-20210710175844092.png" alt="image-20210710175844092"></p>
<p>模块的发布：</p>
<ol>
<li><p>将写好的包放到一个jiaoxue/目录下</p>
</li>
<li><p>在jiaoxue/目录下创建一个文件setup.py文件</p>
<p> 文件里写入下面代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> distutils.core <span class="keyword">import</span> setup </span><br><span class="line"><span class="comment"># name 模块名称 </span></span><br><span class="line"><span class="comment"># version 版本号 </span></span><br><span class="line"><span class="comment"># description 描述 </span></span><br><span class="line"><span class="comment"># author 作者 </span></span><br><span class="line"><span class="comment"># py_modules 要发布的内容 </span></span><br><span class="line">setup(name=<span class="string">&quot;my_module&quot;</span>, version=<span class="string">&quot;1.0&quot;</span>, description=<span class="string">&quot;my module&quot;</span>, </span><br><span class="line">author=<span class="string">&quot;lilei&quot;</span>, py_modules=[<span class="string">&#x27;test1.A&#x27;</span>, <span class="string">&#x27;test1.B&#x27;</span>, <span class="string">&#x27;test2.C&#x27;</span>, <span class="string">&#x27;test2.D&#x27;</span>]) </span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>创建模块</p>
<p>   python setup.py build</p>
<p><img src="Python.assets/image-20210710180306570.png" alt="image-20210710180306570"></p>
</li>
</ol>
<ol start="4">
<li><p>生成压缩包</p>
<p>python setup.py sdist</p>
<p><img src="Python.assets/image-20210710180355147.png" alt="image-20210710180355147"></p>
</li>
</ol>
<ol start="5">
<li><p>tree 看下jiaoxue目录下的结构</p>
<p><img src="Python.assets/image-20210710180451128.png" alt="image-20210710180451128"></p>
</li>
</ol>
<p>模块的安装：</p>
<ol>
<li>将上一节生成的压缩包复制到桌面解压</li>
</ol>
<ul>
<li><p>tar -zxvf my_module-1.0.tar.gz</p>
</li>
<li><p>解压后在桌面会生成一个文件夹my_module-1.0</p>
</li>
</ul>
<ol start="2">
<li>进入my_module-1.0文件夹</li>
</ol>
<p>​        cd my_module-1.0</p>
<ol start="3">
<li><p>执行命令安装 python setup.py install </p>
</li>
<li><p>查看是否安装成功</p>
</li>
</ol>
<p>​        在python的安装目录下的site-packages目录下</p>
<p><img src="Python.assets/image-20210710180729435.png" alt="image-20210710180729435"></p>
<ol start="5">
<li>模块引入，可以导入说明安装成功</li>
</ol>
<h1 id="python垃圾回收机制（？）"><a href="#python垃圾回收机制（？）" class="headerlink" title="python垃圾回收机制（？）"></a>python垃圾回收机制（？）</h1><h1 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a>正则表达式</h1><h2 id="——re-match方法"><a href="#——re-match方法" class="headerlink" title="——re.match方法"></a>——<strong>re.match方法</strong></h2><p>re.match 尝试从字符串的起始位置匹配一个规则，匹配成功就返回match对象，否则返回None。可以使用group()获取匹配成功的字符串。</p>
<p>语法：re.match(pattern, string, flags=0)</p>
<p>参数说明：</p>
<table>
<thead>
<tr>
<th align="center">参数</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">pattern</td>
<td>匹配的正则表达式</td>
</tr>
<tr>
<td align="center">string</td>
<td>要匹配的字符串。</td>
</tr>
<tr>
<td align="center">flags</td>
<td>标志位，用于控制正则表达式的匹配方式，如：是否区分大小写，多行匹配等等。</td>
</tr>
</tbody></table>
<p>flags可选标志位:</p>
<table>
<thead>
<tr>
<th>修饰符</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>re.I</td>
<td>使匹配对大小写不敏感</td>
</tr>
<tr>
<td>re.L</td>
<td>做本地化识别（locale-aware）匹配</td>
</tr>
<tr>
<td>re.M</td>
<td>多行匹配，影响 ^ 和 $</td>
</tr>
<tr>
<td>re.S</td>
<td>使 . 匹配包括换行在内的所有字符</td>
</tr>
<tr>
<td>re.U</td>
<td>根据Unicode字符集解析字符。这个标志影响 \w, \W, \b, \B.</td>
</tr>
<tr>
<td>re.X</td>
<td>该标志通过给予你更灵活的格式以便你将正则表达式写得更易于理解。</td>
</tr>
</tbody></table>
<blockquote>
<p>如果同时使用多个标志位使用|分割，比如re.I | re.M </p>
</blockquote>
<p>我们可以使用group(num) 或 groups() 匹配对象函数来获取匹配表达式</p>
<table>
<thead>
<tr>
<th>匹配对象方法</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>group(num=0)</td>
<td>匹配的整个表达式的字符串，group() 可以一次输入多个组号，在这种情况下它将返回一个包含那些组所对应值的元组。</td>
</tr>
<tr>
<td>groups()</td>
<td>返回一个包含所有小组字符串的元组，从 1 到 所含的小组号。</td>
</tr>
</tbody></table>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="built_in">str</span> = <span class="string">&#x27;Python is the best language in the world&#x27;</span></span><br><span class="line">res = re.match(<span class="string">&#x27;(.*) is (.*?) .*&#x27;</span>, <span class="built_in">str</span>)</span><br><span class="line"><span class="built_in">print</span>(res.group())</span><br><span class="line"><span class="comment">#Python is the best language in the world</span></span><br><span class="line"><span class="built_in">print</span>(res.group(<span class="number">1</span>))</span><br><span class="line"><span class="comment">#Python</span></span><br><span class="line"><span class="built_in">print</span>(res.group(<span class="number">2</span>))</span><br><span class="line"><span class="comment">#the</span></span><br></pre></td></tr></table></figure>





<h2 id="——常用的匹配规则——匹配字符"><a href="#——常用的匹配规则——匹配字符" class="headerlink" title="——常用的匹配规则——匹配字符"></a>——<strong>常用的匹配规则</strong>——<strong>匹配字符</strong></h2><table>
<thead>
<tr>
<th>符号</th>
<th>匹配规则</th>
</tr>
</thead>
<tbody><tr>
<td>.（点）</td>
<td>匹配任意1个字符除了换行符\n</td>
</tr>
<tr>
<td>[abc ]</td>
<td>匹配abc中的任意一个字符</td>
</tr>
<tr>
<td>\d</td>
<td>匹配一个数字，即0-9</td>
</tr>
<tr>
<td>\D</td>
<td>匹配非数字，即不是数字</td>
</tr>
<tr>
<td>\s</td>
<td>匹配空白，即空格，tab键</td>
</tr>
<tr>
<td>\S</td>
<td>匹配非空白，除空格，tab键之类的</td>
</tr>
<tr>
<td>\w</td>
<td>匹配单词字符，即a-z、A-Z、0-9、_</td>
</tr>
<tr>
<td>\W</td>
<td>匹配非单词字符</td>
</tr>
</tbody></table>
<p>•(点）： 匹配任意除换行符之外的字符</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line">names=<span class="string">&#x27;李达&#x27;</span>,<span class="string">&#x27;李明&#x27;</span>,<span class="string">&#x27;小王&#x27;</span></span><br><span class="line"><span class="keyword">for</span> name <span class="keyword">in</span> names:</span><br><span class="line">    res=re.match(<span class="string">&#x27;李.&#x27;</span>,name)</span><br><span class="line">    <span class="keyword">if</span> res:</span><br><span class="line">        <span class="built_in">print</span>(res.group())</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"><span class="comment">#李达</span></span><br><span class="line"><span class="comment">#李明</span></span><br></pre></td></tr></table></figure>



<h2 id="——常用的匹配规则——匹配字符数量"><a href="#——常用的匹配规则——匹配字符数量" class="headerlink" title="——常用的匹配规则——匹配字符数量"></a>——<strong>常用的匹配规则——匹配字符数量</strong></h2><table>
<thead>
<tr>
<th align="left">符号</th>
<th align="left">匹配规则</th>
</tr>
</thead>
<tbody><tr>
<td align="left">*</td>
<td align="left">匹配前一个字符出现0次或者无限次，即可有可无</td>
</tr>
<tr>
<td align="left">+</td>
<td align="left">匹配前一个字符出现1次或者无限次，即至少有1次</td>
</tr>
<tr>
<td align="left">?</td>
<td align="left">匹配前一个字符出现1次或者0次，即要么有1次，要么没有</td>
</tr>
<tr>
<td align="left">{m}</td>
<td align="left">匹配前一个字符出现m次</td>
</tr>
<tr>
<td align="left">{m,}</td>
<td align="left">匹配前一个字符至少出现m次</td>
</tr>
<tr>
<td align="left">{n,m}</td>
<td align="left">匹配前一个字符出现从n到m次</td>
</tr>
</tbody></table>
<p> ‘*’的使用：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line">ret = re.match(<span class="string">&#x27;[A-Z][A-Z]*&#x27;</span>,<span class="string">&#x27;Mn&#x27;</span>)<span class="comment">#匹配0次</span></span><br><span class="line"><span class="built_in">print</span>(ret.group())</span><br><span class="line"><span class="comment">#M</span></span><br><span class="line">ret1 = re.match(<span class="string">&#x27;[A-Z][a-z]*&#x27;</span>,<span class="string">&#x27;Mn&#x27;</span>)<span class="comment">#匹配一次</span></span><br><span class="line"><span class="built_in">print</span>(ret1.group())</span><br><span class="line"><span class="comment">#Mn</span></span><br><span class="line">ret2 = re.match(<span class="string">&#x27;[A-Z][a-z]*&#x27;</span>,<span class="string">&#x27;Mnsdfsdfs&#x27;</span>)<span class="comment">#匹配无限次</span></span><br><span class="line"><span class="built_in">print</span>(ret2.group())</span><br><span class="line"><span class="comment">#Mnsdfsdfs</span></span><br></pre></td></tr></table></figure>



<p><strong>常用的匹配规则——匹配字符数量</strong></p>
<p>{n,m} ：匹配前一个字符出现从n到m次</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="built_in">print</span>(re.match(<span class="string">&#x27;[0-9]&#123;6,11&#125;@qq.com&#x27;</span>,<span class="string">&#x27;1236548@qq.com&#x27;</span>).group())</span><br><span class="line"><span class="comment">#1236548@qq.com</span></span><br></pre></td></tr></table></figure>



<h2 id="——常用的匹配规则——原生字符串"><a href="#——常用的匹配规则——原生字符串" class="headerlink" title="——常用的匹配规则——原生字符串"></a>——<strong>常用的匹配规则——原生字符串</strong></h2><p>python字符串中\作为转义字符开头，比如\n表示换行，\t表示tab键，为了表示\本身，再加一个\，成为\形式 </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line">mypath = <span class="string">&#x27;G:\\py资料\\1-上课资料\\4-正则表达式课件\\html&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(mypath) <span class="comment"># 将\转义之后正常</span></span><br><span class="line"><span class="comment">#G:\py资料\1-上课资料\4-正则表达式课件\html</span></span><br></pre></td></tr></table></figure>



<blockquote>
<ul>
<li><p>正则表达式里使用”&quot;作为转义字符，这就可能造成反斜杠困扰。假如你需要匹配文本中的字符”&quot;，那么使用编程语言表示的正则表达式里将需要4个反斜杠”&quot;。</p>
</li>
<li><p>在python中有原生字符串，在字符串前面加上r表示字符串中的\不转义。</p>
</li>
</ul>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="built_in">print</span>(re.match(<span class="string">&#x27;c:\\\\a.txt&#x27;</span>,<span class="string">&#x27;c:\\a.txt&#x27;</span>).group() )</span><br><span class="line"><span class="built_in">print</span>(re.match(<span class="string">r&#x27;c:\\a.txt&#x27;</span>,<span class="string">&#x27;c:\\a.txt&#x27;</span>).group() )</span><br><span class="line"><span class="comment">#c:\a.txt</span></span><br><span class="line"><span class="comment">#c:\a.txt</span></span><br></pre></td></tr></table></figure>



<h2 id="——常用的匹配规则——匹配开头结尾"><a href="#——常用的匹配规则——匹配开头结尾" class="headerlink" title="——常用的匹配规则——匹配开头结尾"></a><strong>——常用的匹配规则</strong>——<strong>匹配开头结尾</strong></h2><table>
<thead>
<tr>
<th>符号</th>
<th>匹配规则</th>
</tr>
</thead>
<tbody><tr>
<td>^</td>
<td>匹配字符串开头</td>
</tr>
<tr>
<td>$</td>
<td>匹配字符串结尾</td>
</tr>
</tbody></table>
<p>示例：匹配163.com的邮箱地址:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="comment"># 正确地址</span></span><br><span class="line">ret1 = re.match(<span class="string">&#x27;[\w]&#123;4,20&#125;@163\.com&#x27;</span>,<span class="string">&#x27;python@163.com&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(ret1.group() )</span><br><span class="line"><span class="comment">#&#x27;python@163.com’</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 不正确地址</span></span><br><span class="line">ret2 = re.match(<span class="string">&#x27;[\w]&#123;4,20&#125;@163\.com&#x27;</span>,<span class="string">&#x27;python@163.comsdsdds&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(ret2.group())</span><br><span class="line"><span class="comment">#&#x27;python@163.com’</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 通过$来限定结尾</span></span><br><span class="line">ret3 = re.match(<span class="string">&#x27;[\w]&#123;4,20&#125;@163\.com$&#x27;</span>,<span class="string">&#x27;python@163.comsdsdds&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(ret3.group())</span><br><span class="line"><span class="comment">#报错</span></span><br></pre></td></tr></table></figure>



<h2 id="——常用的匹配规则——分组匹配"><a href="#——常用的匹配规则——分组匹配" class="headerlink" title="——常用的匹配规则——分组匹配"></a>——<strong>常用的匹配规则</strong>——<strong>分组匹配</strong></h2><table>
<thead>
<tr>
<th>符号</th>
<th>匹配规则</th>
</tr>
</thead>
<tbody><tr>
<td>|</td>
<td>匹配左右任意一个表达式</td>
</tr>
<tr>
<td>(ab)</td>
<td>将括号中字符作为一个分组</td>
</tr>
<tr>
<td>\num</td>
<td>引用分组num匹配到的字符串</td>
</tr>
<tr>
<td>(?P)</td>
<td>分组起别名</td>
</tr>
<tr>
<td>(?P=name)</td>
<td>引用别名为name分组匹配到的字符串</td>
</tr>
</tbody></table>
<p>其实我们发现html的标签都是成对出现的，这样匹配规则html就可以引用组来实现，避免重复写。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="built_in">print</span>(re.match(<span class="string">r&#x27;&lt;([a-zA-Z]*)&gt;.*&lt;/\1&gt;&#x27;</span>,<span class="string">&#x27;&lt;div&gt;hello world&lt;/div&gt;&#x27;</span>).group())</span><br><span class="line"><span class="comment">#&lt;div&gt;hello world&lt;/div&gt;</span></span><br></pre></td></tr></table></figure>



<p>在使用组引用的时候如果有多个组就容易造成混乱,解决上面这个问题得给分组起别名</p>
<ul>
<li>(?P)分组起别名</li>
</ul>
<p>*　(?P=name)引用别名为name分组匹配到的字符串</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;&lt;h1&gt;www.baidu.com&lt;/h1&gt;&lt;/div&gt;</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line">ret = re.match(<span class="string">r&#x27;&lt;(?P&lt;name1&gt;\w*)&gt;&lt;(?P&lt;name2&gt;\w*)&gt;.*&lt;/(?P=name2)&gt;&lt;/(?P=name1)&gt;&#x27;</span></span><br><span class="line">               ,<span class="string">&#x27;&lt;div&gt;&lt;h1&gt;www.baidu.com&lt;/h1&gt;&lt;/div&gt;)&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(ret.group())</span><br><span class="line"><span class="comment">#&lt;div&gt;&lt;h1&gt;www.baidu.com&lt;/h1&gt;&lt;/div&gt;</span></span><br></pre></td></tr></table></figure>



<h2 id="——re-compile方法"><a href="#——re-compile方法" class="headerlink" title="——re.compile方法"></a>——<strong>re.compile方法</strong></h2><ul>
<li><p>compile 将正则表达式模式编译成一个正则表达式对象</p>
</li>
<li><p>使用re.compile()和保存所产生的正则表达式对象重用效率更高</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line">reobj=re.<span class="built_in">compile</span>(<span class="string">&#x27;\d&#123;4&#125;&#x27;</span>)</span><br><span class="line"><span class="comment">#开始去使用模式对象reobj</span></span><br><span class="line">rs=reobj.match(<span class="string">&#x27;1234566&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(rs.group())</span><br><span class="line"><span class="comment">#1234</span></span><br></pre></td></tr></table></figure>



<h2 id="——re-search方法"><a href="#——re-search方法" class="headerlink" title="——re.search方法"></a>——<strong>re.search方法</strong></h2><ul>
<li><p>search 在全文中匹配一次，匹配到就返回</p>
</li>
<li><p>语法：re.search(pattern, string, flags=0)</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line">res=re.search(<span class="string">&#x27;ab&#x27;</span>,<span class="string">&#x27;abcf&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(res.group())</span><br><span class="line"><span class="comment">#ab</span></span><br></pre></td></tr></table></figure>



<h2 id="——re-findall方法"><a href="#——re-findall方法" class="headerlink" title="——re.findall方法"></a>——<strong>re.findall方法</strong></h2><p>查询字符串中某个正则表达式全部非重复的情况,返回的是一个列表</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line">data=<span class="string">&#x27;华为是华人的骄傲&#x27;</span></span><br><span class="line">res=re.findall(<span class="string">&#x27;华.&#x27;</span>,data)</span><br><span class="line"><span class="built_in">print</span>(res)</span><br><span class="line"><span class="comment">#[&#x27;华为&#x27;, &#x27;华人&#x27;]</span></span><br></pre></td></tr></table></figure>



<h2 id="——res-sub方法"><a href="#——res-sub方法" class="headerlink" title="——res.sub方法"></a>——res.sub方法</h2><p>sub 将匹配到的数据进行替换</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line">data=<span class="string">&#x27;Python是很受欢迎的编程语言&#x27;</span></span><br><span class="line">pattern=<span class="string">&#x27;[a-zA-Z]+&#x27;</span></span><br><span class="line">res=re.sub(pattern,<span class="string">&#x27;PHP&#x27;</span>,data)</span><br><span class="line"><span class="built_in">print</span>(res)</span><br><span class="line"><span class="comment">#PHP是很受欢迎的编程语言</span></span><br></pre></td></tr></table></figure>



<h2 id="——re-split方法"><a href="#——re-split方法" class="headerlink" title="——re.split方法"></a>——<strong>re.split方法</strong></h2><p>split 根据匹配进行切割字符串，并返回一个列表</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="comment"># 以,切割字符串，并且最多2次</span></span><br><span class="line">ret = re.split(<span class="string">&#x27;,&#x27;</span>,<span class="string">&#x27;hello,world,hello,world&#x27;</span>,<span class="number">2</span>)</span><br><span class="line"><span class="built_in">print</span>(ret)</span><br><span class="line"><span class="comment">#[&#x27;hello&#x27;, &#x27;world&#x27;, &#x27;hello,world&#x27;]</span></span><br></pre></td></tr></table></figure>



<h2 id="——贪婪模式与非贪婪模式"><a href="#——贪婪模式与非贪婪模式" class="headerlink" title="——贪婪模式与非贪婪模式"></a>——贪婪模式与非贪婪模式</h2><p>概述:</p>
<ul>
<li><p>Python里数量词默认是贪婪的,总是尝试匹配尽可能多的字符,非贪婪则相反，总是尝试匹配尽可能少的字符。</p>
</li>
<li><p>在”*”,”?”,”+”,”{m,n}”后面加上？，使贪婪变成非贪婪.</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="built_in">print</span>(re.match(<span class="string">&#x27;.*\d&#x27;</span>,<span class="string">&#x27;a2222&#x27;</span>).group())</span><br><span class="line"><span class="comment">#a2222</span></span><br><span class="line"><span class="built_in">print</span>(re.match(<span class="string">&#x27;.*?\d&#x27;</span>,<span class="string">&#x27;a2222&#x27;</span>).group())</span><br><span class="line"><span class="comment">#a2</span></span><br></pre></td></tr></table></figure>


    

    

    

  </div>
  <div class="article-info article-info-index">
    
    
    

    
    <p class="article-more-link">
      <a class="article-more-a" href="/2021/09/01/Python/">展开全文 >></a>
    </p>
    

    
    <div class="clearfix"></div>
  </div>
  </div>
</article>

<aside class="wrap-side-operation">
    <div class="mod-side-operation">
        
        <div class="jump-container" id="js-jump-container" style="display:none;">
            <a href="javascript:void(0)" class="mod-side-operation__jump-to-top">
                <i class="icon-font icon-back"></i>
            </a>
            <div id="js-jump-plan-container" class="jump-plan-container" style="top: -11px;">
                <i class="icon-font icon-plane jump-plane"></i>
            </div>
        </div>
        
        
    </div>
</aside>




  
    <article id="post-Mysql" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
  <div class="article-entry" itemprop="articleBody">
    
    <h1 id="Mysql-基础"><a href="#Mysql-基础" class="headerlink" title="Mysql 基础"></a>Mysql 基础</h1><h1 id="一-数据库的相关概念"><a href="#一-数据库的相关概念" class="headerlink" title="一.数据库的相关概念"></a>一.数据库的相关概念</h1><ul>
<li><p>DB：数据库（database）：存储数据的“仓库”。它保存了一系列有组织的数据。</p>
</li>
<li><p>DBMS</p>
<ul>
<li>数据库管理系统（Database Management System）。数据库是通过DBMS创建和操作的容器</li>
<li>常见的数据库管理系统：MySQL、Oracle、DB2、SqlServer等。</li>
</ul>
</li>
<li><p>SQL</p>
<ul>
<li>结构化查询语言（Structure Query Language）：专门用来与数据库通信的语言。</li>
<li>SQL的优点：①简单易学；②不是某个特定数据库供应商专有的语言，几乎所有DBMS都支持SQL；③虽然简单，但实际上是一种强有力的语言，灵活使用其语言元素，可以进行非常复杂和高级的数据库操作。</li>
</ul>
</li>
</ul>
<p>以上三者之间的关系：</p>
<p><img src="https://img-blog.csdnimg.cn/20200703091454466.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQ2MTUzOTQ5,size_16,color_FFFFFF,t_70#pic_center" alt="img"></p>
<p>SQL语言分类</p>
<ol>
<li><p>DML（Data Manipulation Language):数据操纵语句，用于添<br>加、删除、修改、查询数据库记录，并检查数据完整性</p>
</li>
<li><p>DDL（Data Definition Language):数据定义语句，用于库和<br>表的创建、修改、删除。</p>
</li>
<li><p>DCL（Data Control Language):数据控制语句，用于定义用<br>户的访问权限和安全级别。</p>
</li>
</ol>
<p>DML用于查询与修改数据记录，包括如下SQL语句：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">INSERT：添加数据到数据库中</span><br><span class="line">UPDATE：修改数据库中的数据</span><br><span class="line">DELETE：删除数据库中的数据</span><br><span class="line">SELECT：选择（查询）数据</span><br><span class="line">SELECT是SQL语言的基础，最为重要。</span><br></pre></td></tr></table></figure>

<p>DDL用于定义数据库的结构，比如创建、修改或删除</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">数据库对象，包括如下SQL语句：</span><br><span class="line">CREATE TABLE：创建数据库表</span><br><span class="line">ALTER TABLE：更改表结构、添加、删除、修改列长度</span><br><span class="line">DROP TABLE：删除表</span><br><span class="line">CREATE INDEX：在表上建立索引</span><br><span class="line">DROP INDEX：删除索引</span><br></pre></td></tr></table></figure>

<p>DCL用来控制数据库的访问，包括如下SQL语句：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">GRANT：授予访问权限</span><br><span class="line">REVOKE：撤销访问权限</span><br><span class="line">COMMIT：提交事务处理</span><br><span class="line">ROLLBACK：事务处理回退</span><br><span class="line">SAVEPOINT：设置保存点</span><br><span class="line">LOCK：对数据库的特定部分进行锁定</span><br></pre></td></tr></table></figure>



<h1 id="二-常见用法"><a href="#二-常见用法" class="headerlink" title="二.常见用法"></a>二.常见用法</h1><h2 id="2-1-启动和停止MySQL服务"><a href="#2-1-启动和停止MySQL服务" class="headerlink" title="2.1 启动和停止MySQL服务"></a>2.1 启动和停止MySQL服务</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">方式一：通过计算机管理方式</span><br><span class="line">右击计算机—管理—服务—启动或停止MySQL服务</span><br><span class="line">方式二：通过命令行方式</span><br><span class="line">启动：net start mysql服务名</span><br><span class="line">停止：net stop mysql服务名</span><br></pre></td></tr></table></figure>



<h2 id="2-2-MySQL服务端的登录和退出"><a href="#2-2-MySQL服务端的登录和退出" class="headerlink" title="2.2 MySQL服务端的登录和退出"></a>2.2 MySQL服务端的登录和退出</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">登录</span><br><span class="line">mysql –h 主机名 –u用户名 –p密码</span><br><span class="line">退出</span><br><span class="line">exit或ctrl+C</span><br></pre></td></tr></table></figure>



<h2 id="2-3-MySQL的常见命令"><a href="#2-3-MySQL的常见命令" class="headerlink" title="2.3 MySQL的常见命令"></a>2.3 MySQL的常见命令</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">查看当前所有的数据库</span><br><span class="line">show databases;</span><br><span class="line"></span><br><span class="line">查询当前使用的数据库</span><br><span class="line">select  database();</span><br><span class="line"></span><br><span class="line">打开指定的库</span><br><span class="line">use 库名</span><br><span class="line"></span><br><span class="line">导入数据</span><br><span class="line">source  D:\ bjpowernode.sql</span><br><span class="line"></span><br><span class="line">查看当前库的所有表</span><br><span class="line">show tables;</span><br><span class="line"></span><br><span class="line">查看其它库的所有表</span><br><span class="line">show tables from 库名;</span><br><span class="line"></span><br><span class="line">创建表</span><br><span class="line">create table 表名(</span><br><span class="line"></span><br><span class="line">	列名 列类型,</span><br><span class="line">	列名 列类型，</span><br><span class="line">	。。。</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">删除数据表</span><br><span class="line">drop table 表名;</span><br><span class="line">例：drop table math;</span><br><span class="line"></span><br><span class="line">查看表结构</span><br><span class="line">desc 表名;</span><br><span class="line"></span><br><span class="line">查看建表语句</span><br><span class="line">show create table &lt;table name&gt;;</span><br><span class="line"></span><br><span class="line">查看服务器的版本</span><br><span class="line">方式一：登录到mysql服务端</span><br><span class="line">select version();</span><br><span class="line">方式二：没有登录到mysql服务端</span><br><span class="line">mysql --version</span><br><span class="line">或</span><br><span class="line">mysql --V</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="2-4-MySQL的语法规范"><a href="#2-4-MySQL的语法规范" class="headerlink" title="2.4 MySQL的语法规范"></a>2.4 MySQL的语法规范</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">1.不区分大小写,但建议关键字大写，表名、列名小写</span><br><span class="line">2.每条命令最好用分号结尾</span><br><span class="line">3.每条命令根据需要，可以进行缩进 或换行</span><br><span class="line">4.注释</span><br><span class="line">单行注释：#注释文字</span><br><span class="line">单行注释：-- 注释文字</span><br><span class="line">多行注释：/* 注释文字  */</span><br></pre></td></tr></table></figure>

<h1 id="DQL语言"><a href="#DQL语言" class="headerlink" title="DQL语言"></a>DQL语言</h1><h1 id="三-普通查询"><a href="#三-普通查询" class="headerlink" title="三.普通查询"></a>三.普通查询</h1><h2 id="3-1-基础查询"><a href="#3-1-基础查询" class="headerlink" title="3.1 基础查询"></a>3.1 基础查询</h2><ul>
<li>语法：select 查询列表 from 表名;</li>
<li>类似于System.out.println(打印东西);</li>
<li>特点：<ul>
<li>1.查询列表可以是：表中的字段、常量值、表达式、函数</li>
<li>2.查询的结果可以是一个虚拟表格;</li>
</ul>
</li>
<li>案例</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line">USE myemployees;</span><br><span class="line"></span><br><span class="line">#1.查询表中的单个字段</span><br><span class="line">SELECT last_name FROM employees;</span><br><span class="line"></span><br><span class="line">#2.查询表中多个字段</span><br><span class="line">SELECT last_name,salary,email FROM employees;</span><br><span class="line"></span><br><span class="line">#3.查询表中的所有字段</span><br><span class="line">SELECT * FROM employees;</span><br><span class="line"></span><br><span class="line">#4.查询常量</span><br><span class="line"># select 常量值;</span><br><span class="line"># 注意：字符型和日期型的常量值必须用单引号引起来，数值型不需要</span><br><span class="line">SELECT 100;</span><br><span class="line">SELECT &#x27;join&#x27;;</span><br><span class="line"></span><br><span class="line">#5.查询函数</span><br><span class="line">#select 函数名(实参列表);</span><br><span class="line">SELECT VERSION();</span><br><span class="line"></span><br><span class="line">#6.查询表达式 </span><br><span class="line">SELECT 100%98;</span><br><span class="line"></span><br><span class="line">#7.起别名</span><br><span class="line">/*</span><br><span class="line">1.便于理解</span><br><span class="line">2.如果要查询的字段有重名的情况,使用别名区分</span><br><span class="line">*/</span><br><span class="line">#方式一:使用AS</span><br><span class="line">SELECT 100%98 AS 结果;</span><br><span class="line">SELECT last_name AS 姓,first_name AS 名 FROM employees;</span><br><span class="line"></span><br><span class="line">#方式二:使用空格</span><br><span class="line">SELECT last_name 姓,first_name 名 FROM employees;</span><br><span class="line"></span><br><span class="line">#案例:查询salary,结果显示 out put</span><br><span class="line">SELECT salary AS &quot;out put&quot; FROM employees;</span><br><span class="line"></span><br><span class="line">#8.去重</span><br><span class="line"># select distinct 字段名 from 表名;</span><br><span class="line">#案例:查询员工表中涉及的所有部门编号</span><br><span class="line">SELECT DISTINCT department_id FROM employees;</span><br><span class="line"></span><br><span class="line">#9.+号的作用</span><br><span class="line">#案例:查询员工的名和姓,并显示为姓名</span><br><span class="line">/*</span><br><span class="line">java中的+号:</span><br><span class="line">1.运算符:两个操作数都为数据型</span><br><span class="line">2.连接符:只要有一个操作数为字符串</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">mysql中的+号:</span><br><span class="line">只能作为运算符</span><br><span class="line"></span><br><span class="line">select 100+90; 两个操作数都为数值型,做加法运算</span><br><span class="line">select &#x27;123+90&#x27;;其中一方为字符型,试图将字符型数值转换为数值型</span><br><span class="line">		如果转换成功,则继续做加法运算</span><br><span class="line">select &#x27;john&#x27;+90; 如果转换失败,则将字符型数值转换成0</span><br><span class="line"></span><br><span class="line">select null+0; 只要其中一方为null,则结果肯定为null.</span><br><span class="line">*/</span><br><span class="line">SELECT last_name+first_name AS 姓名 FROM employees; </span><br><span class="line"></span><br><span class="line">#10.【补充】concat函数 </span><br><span class="line">/*</span><br><span class="line">功能：拼接字符</span><br><span class="line">select concat(字符1，字符2，字符3,...);</span><br><span class="line">*/</span><br><span class="line">SELECT CONCAT(&#x27;a&#x27;,&#x27;b&#x27;,&#x27;c&#x27;) AS 结果 FROM employees;</span><br><span class="line"></span><br><span class="line">SELECT CONCAT(last_name,first_name) AS 姓名 FROM employees;</span><br><span class="line"></span><br><span class="line">#11.【补充】ifnull函数</span><br><span class="line">#功能：判断某字段或表达式是否为null，如果为null 返回指定的值，否则返回原本的值</span><br><span class="line"></span><br><span class="line">SELECT IFNULL(commission_pct,0) FROM employees;</span><br><span class="line"></span><br><span class="line">#12.【补充】isnull函数</span><br><span class="line">#功能：判断某字段或表达式是否为null，如果是，则返回1，否则返回0</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="3-2-条件查询"><a href="#3-2-条件查询" class="headerlink" title="3.2 条件查询"></a>3.2 条件查询</h2><ul>
<li>语法：select 查询列表 from 表名 where 筛选条件;</li>
<li>分类</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">一、按条件表达式筛选</span><br><span class="line">	条件运算符:&gt; &lt; = != &lt;&gt; &gt;= &lt;= &lt;=&gt;安全等于</span><br><span class="line">二、按逻辑表达式筛选</span><br><span class="line">	逻辑运算符:&amp;&amp; || |</span><br><span class="line">	and or not</span><br><span class="line">	</span><br><span class="line">	&amp;&amp; 和 and:两个条件都为true，结果为true，反之为false</span><br><span class="line">	|| 和 or:只要有一个条件为true，结果为true，反之为false</span><br><span class="line">	! 或 not:如果连接的条件本身为false，结果为true，反之为false	</span><br><span class="line">	</span><br><span class="line">三、模糊查询</span><br><span class="line">	like:一般搭配通配符使用，可以判断字符型或数值型</span><br><span class="line">	通配符：%任意多个字符，_任意单个字符</span><br><span class="line">	like、between and、in、is null</span><br></pre></td></tr></table></figure>

<ul>
<li>案例</li>
</ul>
<h3 id="3-2-1-按条件表达式筛选"><a href="#3-2-1-按条件表达式筛选" class="headerlink" title="3.2.1 按条件表达式筛选"></a>3.2.1 按条件表达式筛选</h3><ul>
<li>条件运算符:&gt; &lt; = != &lt;&gt; &gt;= &lt;= &lt;=&gt;安全等于</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#案例1:查询工资&gt;12000的员工信息</span><br><span class="line">SELECT * FROM employees WHERE salary&gt;12000;</span><br><span class="line"></span><br><span class="line">#案例2:查询部门编号不等于90号的员工名和部门编号</span><br><span class="line">SELECT last_name,department_id FROM employees WHERE department_id &lt;&gt; 90;</span><br></pre></td></tr></table></figure>

<h3 id="3-2-2-按逻辑表达式筛选"><a href="#3-2-2-按逻辑表达式筛选" class="headerlink" title="3.2.2 按逻辑表达式筛选"></a>3.2.2 按逻辑表达式筛选</h3><ul>
<li><p>逻辑运算符:&amp;&amp;(and) ||(or) |(not)</p>
</li>
<li><p>&amp;&amp; 和 and:两个条件都为true，结果为true，反之为false<br>|| 和 or:只要有一个条件为true，结果为true，反之为false<br>! 或 not:如果连接的条件本身为false，结果为true，反之为false</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#案例1:查询工资z在10000到20000之间的员工名、工资及奖金</span><br><span class="line">SELECT last_name,salary,commission_pct FROM employees WHERE salary&gt;=10000 AND salary&lt;=20000;</span><br><span class="line"></span><br><span class="line">#案例2:查询部门编号不是在90-110之间,或者工资高于15000的员工信息</span><br><span class="line">SELECT * FROM employees WHERE department_id &lt;90 OR department_id&gt;110 OR salary&gt;15000;</span><br></pre></td></tr></table></figure>

<p>​    </p>
<h3 id="3-2-3-模糊查询"><a href="#3-2-3-模糊查询" class="headerlink" title="3.2.3 模糊查询"></a>3.2.3 模糊查询</h3><ol>
<li>like</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#案例1:查询员工名中包含字符a的员工信息</span><br><span class="line">SELECT * FROM employees WHERE last_name LIKE &#x27;%a%&#x27;;</span><br><span class="line"></span><br><span class="line">#案例2:查询员工名中第三个字符为b，第五个字符为a的员工名和工资</span><br><span class="line">SELECT last_name,salary FROM employees WHERE last_name LIKE &#x27;__b_a%&#x27;;</span><br><span class="line"></span><br><span class="line">#案例3:查询员工名种第二个字符为_的员工名</span><br><span class="line">SELECT last_name FROM employees WHERE last_name LIKE &#x27;_\_%&#x27;;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>between and</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">#案例1:查询员工编号在100到120之间的员工信息</span><br><span class="line">SELECT * FROM employees WHERE employee_id&gt;=100 AND employee_id&lt;=120;</span><br><span class="line"></span><br><span class="line">SELECT * FROM employees WHERE employee_id BETWEEN 100 AND 120;</span><br><span class="line"></span><br><span class="line">/*注意事项：</span><br><span class="line">1.提高语句简洁度</span><br><span class="line">2.包含临界值</span><br><span class="line">3.两个临界值不能调换顺序</span><br><span class="line">*/</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>in</li>
</ol>
<ul>
<li><p>含义:判断某字段的值是否属于in列表中的某一项</p>
</li>
<li><p>特点:<br> 1.使用in提高语句简洁度<br> 2.in列表的值类型必须一致或兼容</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#案例1:查询员工的工种编号是IT_PROG、AD_VP、AD_PRES中的一个员工名和工种编号</span><br><span class="line"></span><br><span class="line">SELECT last_name,job_id FROM employees WHERE job_id=&#x27;IT_PROG&#x27; OR job_id=&#x27;AD_PRES&#x27; OR job_id=&#x27;AD_VP&#x27;;</span><br><span class="line"></span><br><span class="line">SELECT last_name,job_id FROM employees WHERE job_id IN(&#x27;IT_PROG&#x27;,&#x27;AD_PRES&#x27;,&#x27;AD_VP&#x27;);</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>is null</li>
</ol>
<ul>
<li>=或&lt;&gt;不能用于判断null值<br>is null 或 is not null 可以判断null值</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#案例1:查询没有奖金的员工名和奖金率</span><br><span class="line">SELECT last_name,commission_pct FROM employees WHERE commission_pct IS NULL;</span><br><span class="line">SELECT last_name,commission_pct FROM employees WHERE commission_pct IS NOT NULL;</span><br></pre></td></tr></table></figure>

<ol start="5">
<li>&lt;=&gt;</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">#案例1:查询没有奖金的员工名和奖金率</span><br><span class="line"></span><br><span class="line">SELECT last_name,commission_pct FROM employees WHERE commission_pct &lt;=&gt; NULL;</span><br><span class="line"></span><br><span class="line">#案例2:查询工资为12000的员工信息</span><br><span class="line">SELECT last_name,commission_pct FROM employees WHERE salary &lt;=&gt; 12000;</span><br><span class="line"></span><br><span class="line">#is null PK &lt;=&gt;</span><br><span class="line">#	     普通类型的数值	null值		可读性</span><br><span class="line"># is null	 ×		      √		      √</span><br><span class="line"># &lt;=&gt;		√		     √		     ×</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="3-3-排序查询"><a href="#3-3-排序查询" class="headerlink" title="3.3 排序查询"></a>3.3 排序查询</h2><ul>
<li><p>引入：select * from employees;</p>
</li>
<li><p>语法：select 查询列表 from 表 【where 筛选条件】 order by</p>
</li>
<li><p>特点：</p>
<ul>
<li> asc代表的是升序，desc代表降序，不写默认为升序</li>
<li>order by子句中可以支持单个字段、多个字段、表达式、函数、别名</li>
<li>order by子句一般是放在查询语句的最后面,limit子句除外</li>
</ul>
</li>
<li><p>案例</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">#案例1:查询员工信息,要求工资从高到低排序</span><br><span class="line">SELECT * FROM employees ORDER BY salary DESC;</span><br><span class="line">SELECT * FROM employees ORDER BY salary;</span><br><span class="line"></span><br><span class="line">#案例2:查询部门编号是&gt;=90，按入职时间的先后进行排序</span><br><span class="line">SELECT * FROM employees WHERE department_id&gt;=90 ORDER BY hiredate ASC;</span><br><span class="line"></span><br><span class="line">#案例3:按年薪的高低显示员工的信息和年薪【按表达式排序】</span><br><span class="line">SELECT *,salary*12*(1+IFNULL(commission_pct,0)) 年薪 FROM employees </span><br><span class="line">ORDER BY salary*12*(1+IFNULL(commission_pct,0)) DESC; </span><br><span class="line"></span><br><span class="line">#案例4:按年薪的高低显示员工的信息和年薪【按别名排序】</span><br><span class="line">SELECT *,salary*12*(1+IFNULL(commission_pct,0)) 年薪 FROM employees </span><br><span class="line">ORDER BY salary*12*(1+IFNULL(commission_pct,0)) 年薪 DESC;</span><br><span class="line"></span><br><span class="line">#案例5:按姓名的长度显示员工的姓名和工资【按函数排序】</span><br><span class="line">SELECT LENGTH(last_name) 字节长度,last_name,salary</span><br><span class="line">FROM employees</span><br><span class="line">ORDER BY LENGTH(last_name) DESC;</span><br><span class="line"></span><br><span class="line">#案例6:查询员工共信息,要求按工资排序，再按员工编号排序【按多个字段排序】</span><br><span class="line">SELECT * FROM employees</span><br><span class="line">ORDER BY salary ASC,employee_id DESC;</span><br></pre></td></tr></table></figure>



<h1 id="四-常见函数"><a href="#四-常见函数" class="headerlink" title="四.常见函数"></a>四.常见函数</h1><h2 id="4-1-单行函数"><a href="#4-1-单行函数" class="headerlink" title="4.1 单行函数"></a>4.1 单行函数</h2><h3 id="4-1-1-字符函数"><a href="#4-1-1-字符函数" class="headerlink" title="4.1.1 字符函数"></a>4.1.1 字符函数</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">#1.length 获取参数值的字节值</span><br><span class="line">SELECT LENGTH(&#x27;subei&#x27;);</span><br><span class="line">SELECT LENGTH(&#x27;鬼谷子qwe&#x27;);</span><br><span class="line"></span><br><span class="line">SHOW VARIABLES LIKE &#x27;%char%&#x27;;</span><br><span class="line"></span><br><span class="line">#2.concat 拼接字符串</span><br><span class="line">SELECT CONCAT(last_name,&#x27;_&#x27;,first_name) 姓名 FROM employees;</span><br><span class="line"></span><br><span class="line">#3.upper:变大写、lower：变小写</span><br><span class="line"></span><br><span class="line">SELECT UPPER(&#x27;ton&#x27;);</span><br><span class="line">SELECT LOWER(&#x27;ton&#x27;);</span><br><span class="line"></span><br><span class="line">#示例：将姓变大写，名变小写，然后拼接</span><br><span class="line">SELECT CONCAT(UPPER(last_name),LOWER(first_name)) 姓名 FROM employees;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#4.substr、substring</span><br><span class="line">#注意:索引从1开始</span><br><span class="line"></span><br><span class="line">#截取从指定所有处后面的所以字符</span><br><span class="line">SELECT SUBSTR(&#x27;吴刚伐桂在天上&#x27;,4) out_put;</span><br><span class="line"></span><br><span class="line">#截取从指定索引处指定字符长度的字符</span><br><span class="line">SELECT SUBSTR(&#x27;吴刚伐桂在天上&#x27;,1,2) out_put;</span><br><span class="line"></span><br><span class="line">#案例:姓名中首字符大写,其他字符小写，然后用_拼接,显示出来</span><br><span class="line">SELECT CONCAT(UPPER(SUBSTR(last_name,1,1)),&#x27;_&#x27;,LOWER(SUBSTR(last_name,2))) out_put FROM employees;</span><br><span class="line"></span><br><span class="line">#5.instr:获取子串第一次出现的索引,找不到返回0</span><br><span class="line">SELECT INSTR(&#x27;MySQL技术进阶&#x27;,&#x27;技术&#x27;) AS out_put;</span><br><span class="line"></span><br><span class="line">#6.trim:去前后空格</span><br><span class="line"></span><br><span class="line">SELECT LENGTH(TRIM(&#x27;	霍山	&#x27;)) AS out_put;</span><br><span class="line"></span><br><span class="line">SELECT TRIM(&#x27;+&#x27; FROM &#x27;++++李刚+++刘邦+++&#x27;) AS out_put;</span><br><span class="line"></span><br><span class="line">#7.lpad:用指定的字符实现左填充指定长度</span><br><span class="line">SELECT LPAD(&#x27;梅林&#x27;,8,&#x27;+&#x27;) AS out_put;</span><br><span class="line"></span><br><span class="line">#8.rpad:用指定的字符实现右填充指定长度</span><br><span class="line">SELECT RPAD(&#x27;梅林&#x27;,5,&#x27;&amp;&#x27;) AS out_put;</span><br><span class="line"></span><br><span class="line">#9.replace:替换</span><br><span class="line">SELECT REPLACE(&#x27;莉莉伊万斯的青梅竹马是詹姆&#x27;,&#x27;詹姆&#x27;,&#x27;斯内普&#x27;) AS out_put;</span><br></pre></td></tr></table></figure>



<h3 id="4-1-2-数学函数"><a href="#4-1-2-数学函数" class="headerlink" title="4.1.2 数学函数"></a>4.1.2 数学函数</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">#1.round:四舍五入</span><br><span class="line">SELECT ROUND(1.45);</span><br><span class="line">SELECT ROUND(1.567,2);</span><br><span class="line"></span><br><span class="line">#2.ceil:向上取整,返回&gt;=该参数的最小整数</span><br><span class="line">SELECT CEIL(1.005);</span><br><span class="line">SELECT CEIL(-1.002);</span><br><span class="line"></span><br><span class="line">#3.floor:向下取整,返回&lt;=该参数的最大整数</span><br><span class="line">SELECT FLOOR(-9.99);</span><br><span class="line"></span><br><span class="line">#4.truncate:截断</span><br><span class="line">SELECT TRUNCATE(1.65,1);</span><br><span class="line"></span><br><span class="line">#5.mod:取余</span><br><span class="line">SELECT MOD(10,3);</span><br><span class="line"></span><br><span class="line">#6.rand:获取随机数，返回0-1之间的小数</span><br><span class="line">SELECT RAND();</span><br></pre></td></tr></table></figure>

<h3 id="4-1-3-日期函数"><a href="#4-1-3-日期函数" class="headerlink" title="4.1.3 日期函数"></a>4.1.3 日期函数</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">#1.now:返回当前系统时间+日期</span><br><span class="line">SELECT NOW();</span><br><span class="line"></span><br><span class="line">#2.year:返回年</span><br><span class="line">SELECT YEAR(NOW());</span><br><span class="line">SELECT YEAR(hiredate) 年 FROM employees;</span><br><span class="line"></span><br><span class="line">#3.month:返回月</span><br><span class="line">#MONTHNAME:以英文形式返回月</span><br><span class="line">SELECT MONTH(NOW());</span><br><span class="line">SELECT MONTHNAME(NOW());</span><br><span class="line"></span><br><span class="line">#4.day:返回日</span><br><span class="line">#DATEDIFF:返回两个日期相差的天数</span><br><span class="line">SELECT DAY(NOW());</span><br><span class="line">SELECT DATEDIFF(&#x27;2020/06/30&#x27;,&#x27;2020/06/21&#x27;);</span><br><span class="line"></span><br><span class="line">#5.str_to_date:将字符通过指定格式转换成日期</span><br><span class="line">SELECT STR_TO_DATE(&#x27;2020-5-13&#x27;,&#x27;%Y-%c-%d&#x27;) AS out_put;</span><br><span class="line"></span><br><span class="line">#6.date_format:将日期转换成字符</span><br><span class="line">SELECT DATE_FORMAT(&#x27;2020/6/6&#x27;,&#x27;%Y年%m月%d日&#x27;) AS out_put;</span><br><span class="line">SELECT DATE_FORMAT(NOW(),&#x27;%Y年%m月%d日&#x27;) AS out_put;</span><br><span class="line"></span><br><span class="line">#7.curdate:返回当前日期</span><br><span class="line">SELECT CURDATE();</span><br><span class="line"></span><br><span class="line">#8.curtime:返回当前时间</span><br><span class="line">SELECT CURTIME();</span><br></pre></td></tr></table></figure>

<h3 id="4-1-4-流程控制函数"><a href="#4-1-4-流程控制函数" class="headerlink" title="4.1.4 流程控制函数"></a>4.1.4 流程控制函数</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line">#1.if函数: if else效果</span><br><span class="line"></span><br><span class="line">SELECT IF(10&lt;5,&#x27;大&#x27;,&#x27;小&#x27;);</span><br><span class="line"></span><br><span class="line">SELECT last_name,commission_pct,IF(commission_pct IS NULL,&#x27;没奖金！！！&#x27;,&#x27;有奖金!!!&#x27;) 备注 FROM employees;</span><br><span class="line"></span><br><span class="line">#2.case函数</span><br><span class="line">#使用一:switch case 的效果</span><br><span class="line">/*</span><br><span class="line">java中</span><br><span class="line">switch(变量或表达式)&#123;</span><br><span class="line">	case 常量1:语句1;break;</span><br><span class="line">	...</span><br><span class="line">	default:语句n;break;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">mysql中</span><br><span class="line"></span><br><span class="line">case 要判断的变量或表达式</span><br><span class="line">when 常量1 then 要显示的值1或语句1</span><br><span class="line">when 常量2 then 要显示的值2或语句2</span><br><span class="line">...</span><br><span class="line">else 要显示的值n或语句n</span><br><span class="line">end</span><br><span class="line"></span><br><span class="line">#案例:查询员工的工资,要求:</span><br><span class="line"></span><br><span class="line">部门号=30,显示的工资为1.1倍</span><br><span class="line">部门号=40,显示的工资为1.2倍</span><br><span class="line">部门号=50,显示的工资为1.3倍</span><br><span class="line">其他部门,显示的工资为原工资</span><br><span class="line"></span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line">SELECT salary 原始工资,department_id,</span><br><span class="line">CASE department_id</span><br><span class="line">WHEN 30 THEN salary*1.1</span><br><span class="line">WHEN 40 THEN salary*1.2</span><br><span class="line">WHEN 50 THEN salary*1.3</span><br><span class="line">ELSE salary</span><br><span class="line">END AS 新工资</span><br><span class="line">FROM employees;</span><br><span class="line"></span><br><span class="line">#3.case函数的使用二:类似于多重if</span><br><span class="line">/*</span><br><span class="line">java中:</span><br><span class="line">if(条件1)&#123;</span><br><span class="line">	语句1;</span><br><span class="line">&#125;else if(条件2)&#123;</span><br><span class="line">	语句2;</span><br><span class="line">&#125;</span><br><span class="line">...</span><br><span class="line">else&#123;</span><br><span class="line">	语句n;</span><br><span class="line">&#125;	</span><br><span class="line"></span><br><span class="line">mysql中:</span><br><span class="line">case </span><br><span class="line">when 条件1 then 要显示的值1或语句1</span><br><span class="line">when 条件2 then 要显示的值2或语句2</span><br><span class="line">...</span><br><span class="line">else 要显示的值n或语句n</span><br><span class="line">end</span><br><span class="line"></span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line">#案例:查询员工的工资的情况</span><br><span class="line">/*</span><br><span class="line">如果工资&gt;20000，显示A级别</span><br><span class="line">如果工资&gt;15000，显示B级别</span><br><span class="line">如果工资&gt;10000，显示c级别</span><br><span class="line">否则，显示D级别</span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line">SELECT salary,</span><br><span class="line">CASE</span><br><span class="line">WHEN salary&gt;20000 THEN &#x27;A&#x27;</span><br><span class="line">WHEN salary&gt;15000 THEN &#x27;B&#x27;</span><br><span class="line">WHEN salary&gt;10000 THEN &#x27;C&#x27;</span><br><span class="line">ELSE &#x27;D&#x27;</span><br><span class="line">END AS 工资等级</span><br><span class="line">FROM employees;</span><br></pre></td></tr></table></figure>



<h3 id="4-1-5-其他函数"><a href="#4-1-5-其他函数" class="headerlink" title="4.1.5 其他函数"></a>4.1.5 其他函数</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">#version 当前数据库服务器的版本</span><br><span class="line">SELECT VERSION();</span><br><span class="line"></span><br><span class="line">#database 当前打开的数据库</span><br><span class="line">SELECT DATABASE();</span><br><span class="line"></span><br><span class="line">#user当前用户</span><br><span class="line">SELECT USER();</span><br><span class="line"></span><br><span class="line">#password(&#x27;字符&#x27;)：返回该字符的密码形式</span><br><span class="line">SELECT PASSWORD(&#x27;a&#x27;);</span><br><span class="line"></span><br><span class="line">#md5(&#x27;字符&#x27;):返回该字符的md5加密形式</span><br><span class="line">SELECT MD5(&#x27;a&#x27;);</span><br></pre></td></tr></table></figure>



<h2 id="4-2-分组函数"><a href="#4-2-分组函数" class="headerlink" title="4.2 分组函数"></a>4.2 分组函数</h2><p>分组函数</p>
<ul>
<li><p> 功能：用作统计使用，又称为聚合函数或统计函数或组函数</p>
</li>
<li><p>分类：sum 求和、avg 平均值、max 最大值、min最小值count 计算个数</p>
</li>
<li><p>特点:</p>
<ul>
<li>sum和avg一般用于处理数值型<br>max、min、count可以处理任何数据类型</li>
<li>以上分组函数都忽略null</li>
<li>都可以搭配distinct使用，实现去重的统计<br>select sum(distinct 字段) from 表;</li>
<li>count函数<br>count(字段)：统计该字段非空值的个数<br>count(*):统计结果集的行数</li>
<li>和分组函数一同查询的字段，要求是group by后出现的字段</li>
</ul>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">#1.简单使用</span><br><span class="line">SELECT SUM(salary) FROM employees;</span><br><span class="line">SELECT AVG(salary) FROM employees;</span><br><span class="line">SELECT MAX(salary) FROM employees;</span><br><span class="line">SELECT MIN(salary) FROM employees;</span><br><span class="line">SELECT COUNT(salary) FROM employees;</span><br><span class="line"></span><br><span class="line">SELECT SUM(salary) 和,ROUND(AVG(salary),2) 平均,MAX(salary) 最高,MIN(salary) 最低,COUNT(salary) 个数</span><br><span class="line">FROM employees;</span><br><span class="line"></span><br><span class="line">#2.参数支持哪些数据类型</span><br><span class="line"></span><br><span class="line">SELECT SUM(last_name),AVG(last_name) FROM employees;</span><br><span class="line">SELECT SUM(hiredate),AVG(hiredate) FROM employees;</span><br><span class="line"></span><br><span class="line">SELECT MAX(last_name),MIN(last_name) FROM employees;</span><br><span class="line">SELECT MAX(hiredate),MIN(hiredate) FROM employees;</span><br><span class="line"></span><br><span class="line">SELECT COUNT(commission_pct) FROM employees;</span><br><span class="line">SELECT COUNT(last_name) FROM employees;</span><br><span class="line"></span><br><span class="line">#3.是否忽略null</span><br><span class="line"></span><br><span class="line">SELECT SUM(commission_pct),AVG(commission_pct) FROM employees;</span><br><span class="line"></span><br><span class="line">SELECT commission_pct FROM employees;</span><br><span class="line"></span><br><span class="line">SELECT SUM(commission_pct),AVG(commission_pct),SUM(commission_pct)/35,AVG(commission_pct)/107 FROM employees;</span><br><span class="line"></span><br><span class="line">SELECT MAX(commission_pct),MIN(commission_pct) FROM employees;</span><br><span class="line"></span><br><span class="line">SELECT COUNT(commission_pct) FROM employees;</span><br><span class="line"></span><br><span class="line">#4.和distinct搭配</span><br><span class="line"></span><br><span class="line">SELECT SUM(DISTINCT salary),SUM(salary) FROM employees;</span><br><span class="line"></span><br><span class="line">SELECT COUNT(DISTINCT salary),COUNT(salary) FROM employees;</span><br><span class="line"></span><br><span class="line">#5.count函数详解</span><br><span class="line"></span><br><span class="line">SELECT COUNT(salary) FROM employees;</span><br><span class="line">SELECT COUNT(*) FROM employees;</span><br><span class="line">SELECT COUNT(1) FROM employees;</span><br><span class="line">/*</span><br><span class="line">效率上：</span><br><span class="line">MyISAM存储引擎，count(*)最高</span><br><span class="line">InnoDB存储引擎，count(*)和count(1)效率&gt;count(字段)</span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line">#6.和分组函数一同查询的字段有限制</span><br><span class="line"></span><br><span class="line">SELECT AVG(salary),employee_id FROM employees;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>五. 分组查询</p>
<ul>
<li>语法</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">select 分组函数,分组后的字段</span><br><span class="line">from 表</span><br><span class="line">【where 筛选条件】</span><br><span class="line">group by 分组的字段</span><br><span class="line">【having 分组后的筛选】</span><br><span class="line">【order by 排序列表】</span><br></pre></td></tr></table></figure>

<blockquote>
<p>注意:查询列表必须特殊,要求是分组函数和group by后出现的字段</p>
</blockquote>
<ul>
<li><p>特点</p>
<ul>
<li>分组查询中的筛选条件分为两类</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">			使用关键字	筛选的表	位置</span><br><span class="line">分组前筛选	where		原始表		group by的前面</span><br><span class="line">分组后筛选	having		分组后的结果	group by的后面</span><br><span class="line">1.分组函数做条件肯定是放在having子句中</span><br><span class="line">2.能用分组前筛选的，就优先考虑使用分组前筛选</span><br></pre></td></tr></table></figure>



<ul>
<li>group by子句支持单个字段分组，多个字段分组(多个字段之间用逗号隔开没有顺序要求),表达式或函数(使用较少)</li>
<li>也可以添加排序(排序放在整个分组查询的最后</li>
</ul>
</li>
<li><p>案例</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line">#引入:查询每个部门的平均工资</span><br><span class="line">SELECT AVG(salary) FROM employees;</span><br><span class="line"></span><br><span class="line">#案例1:查询每个工种的最高工资</span><br><span class="line">SELECT MAX(salary),job_id FROM employees </span><br><span class="line">GROUP BY job_id;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#案例2:查询每个位置上的部门个数</span><br><span class="line">SELECT COUNT(*),location_id</span><br><span class="line">FROM departments</span><br><span class="line">GROUP BY location_id;</span><br><span class="line"></span><br><span class="line">#添加筛选条件</span><br><span class="line">#案例1:查询邮箱中包含a字符的，每个部门的平均工资</span><br><span class="line">SELECT AVG(salary),department_id FROM employees</span><br><span class="line">WHERE email LIKE &#x27;%a%&#x27; GROUP BY department_id;</span><br><span class="line"></span><br><span class="line">#案例2:查询有奖金的每个领导手下员工的最高工资</span><br><span class="line">SELECT MAX(salary),manager_id FROM employees</span><br><span class="line">WHERE commission_pct IS NOT NULL</span><br><span class="line">GROUP BY manager_id;</span><br><span class="line"></span><br><span class="line">#添加复杂的筛选条件</span><br><span class="line">#案例1:查询哪个部门的员工个数&gt;2</span><br><span class="line">#1.查询每个部门的员工个数</span><br><span class="line">SELECT COUNT(*),department_id FROM employees</span><br><span class="line">GROUP BY department_id;</span><br><span class="line"></span><br><span class="line">#2.根据1的结果进行筛选，查询哪个部门的员工个数大于2</span><br><span class="line">SELECT COUNT(*),department_id FROM employees</span><br><span class="line">GROUP BY department_id HAVING COUNT(*)&gt;2;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#案例2:查询每个工种有奖金的员工的最高工资&gt;12000的工种编号和最高工资 </span><br><span class="line">#1.查询每个工种有奖金的员工的最高工资 </span><br><span class="line">SELECT MAX(salary),job_id FROM employees </span><br><span class="line">WHERE commission_pct IS NOT NULL GROUP BY job_id; </span><br><span class="line"></span><br><span class="line">#2.根据结果继续筛选，最高工资&gt;12000 </span><br><span class="line"></span><br><span class="line">SELECT MAX(salary), job_id FROM employees </span><br><span class="line">WHERE commission_pct IS NOT NULL GROUP BY job_id </span><br><span class="line">HAVING MAX(salary)&gt;12000; </span><br><span class="line"></span><br><span class="line">#按表达式或函数分组</span><br><span class="line"></span><br><span class="line">#案例:按员工姓名的长度分组,查询每一组的员工个数,筛选员工个数&gt;5</span><br><span class="line"></span><br><span class="line">#1.查询每个长度的员工个数 </span><br><span class="line">SELECT COUNT(*),LENGTH(last_name) len_name </span><br><span class="line">FROM employees GROUP BY LENGTH(last_name); </span><br><span class="line"></span><br><span class="line">#2.添加筛选条件</span><br><span class="line">SELECT COUNT(*) c,LENGTH(last_name) len_name </span><br><span class="line">FROM employees GROUP BY len_name HAVING c&gt;5;</span><br><span class="line"></span><br><span class="line">#按多个字段查询</span><br><span class="line">#案例:查询每个部门每个工种的员工的平均工资</span><br><span class="line"></span><br><span class="line">SELECT AVG(salary),department_id,job_id</span><br><span class="line">FROM employees GROUP BY department_id,job_id;</span><br><span class="line"></span><br><span class="line">#添加排序</span><br><span class="line">#案例:查询每个部门每个工种的员工的平均工资,按平均工资的高低查询</span><br><span class="line"></span><br><span class="line">SELECT AVG(salary),department_id,job_id</span><br><span class="line">FROM employees GROUP BY department_id,job_id</span><br><span class="line">ORDER BY AVG(salary) DESC;</span><br></pre></td></tr></table></figure>



<h1 id="五-进阶查询"><a href="#五-进阶查询" class="headerlink" title="五.进阶查询"></a>五.进阶查询</h1><h2 id="5-1-连接查询"><a href="#5-1-连接查询" class="headerlink" title="5.1 连接查询"></a>5.1 连接查询</h2><ul>
<li>含义:又称多表查询,当查询的数据来自多个表时,就会用到连接查询</li>
<li>笛卡尔乘积现象：表1 有m行，表2有n行，结果=m*n行</li>
<li>发生原因：没有有效的连接条件</li>
<li>如何避免：添加有效的连接条件</li>
<li>分类</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">按年代分类：</span><br><span class="line">	sql92标准:仅仅支持内连接</span><br><span class="line">	sql99标准【推荐】：支持内连接+外连接（左外和右外）+交叉连接</span><br><span class="line">	</span><br><span class="line">按功能分类：</span><br><span class="line">	内连接：</span><br><span class="line">	等值连接</span><br><span class="line">	非等值连接</span><br><span class="line">	自连接</span><br><span class="line">外连接：</span><br><span class="line">	左外连接</span><br><span class="line">	右外连接</span><br><span class="line">	全外连接</span><br><span class="line">		</span><br><span class="line">交叉连接</span><br></pre></td></tr></table></figure>

<h3 id="sql92标准案例"><a href="#sql92标准案例" class="headerlink" title="sql92标准案例"></a>sql92标准案例</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br></pre></td><td class="code"><pre><span class="line">#1、等值连接</span><br><span class="line"></span><br><span class="line">/*</span><br><span class="line">1.多表等值连接的结果为多表的交集部分</span><br><span class="line">2.n表连接，至少需要n-1个连接条件</span><br><span class="line">3.多表的顺序没有要求</span><br><span class="line">4.一般需要为表起别名</span><br><span class="line">5.可以搭配前面介绍的所有子句使用，比如排序、分组、筛选</span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line">#案例1：查询女神名和对应的男神名</span><br><span class="line">SELECT NAME,boyName FROM boys,beauty</span><br><span class="line">WHERE beauty.boyfriend_id= boys.id;</span><br><span class="line"></span><br><span class="line">#案例2：查询员工名和对应的部门名</span><br><span class="line"></span><br><span class="line">SELECT last_name,department_name </span><br><span class="line">FROM employees,departments</span><br><span class="line">WHERE employees.`department_id`=departments.`department_id`;</span><br><span class="line"></span><br><span class="line">#2、为表起别名</span><br><span class="line">/*</span><br><span class="line">1.提高语句的简洁度</span><br><span class="line">2.区分多个重名的字段</span><br><span class="line"></span><br><span class="line">注意：如果为表起了别名，则查询的字段就不能使用原来的表名去限定</span><br><span class="line">*/</span><br><span class="line">#查询员工名、工种号、工种名</span><br><span class="line">SELECT e.last_name,e.job_id,j.job_title</span><br><span class="line">FROM employees  e,jobs j</span><br><span class="line">WHERE e.`job_id`=j.`job_id`;</span><br><span class="line"></span><br><span class="line">#3、两个表的顺序是否可以调换</span><br><span class="line">#查询员工名、工种号、工种名</span><br><span class="line"></span><br><span class="line">SELECT e.last_name,e.job_id,j.job_title</span><br><span class="line">FROM jobs j,employees e</span><br><span class="line">WHERE e.`job_id`=j.`job_id`;</span><br><span class="line"></span><br><span class="line">#4、可以加筛选</span><br><span class="line">#案例：查询有奖金的员工名、部门名</span><br><span class="line"></span><br><span class="line">SELECT last_name,department_name,commission_pct</span><br><span class="line">FROM employees e,departments d</span><br><span class="line">WHERE e.`department_id`=d.`department_id`</span><br><span class="line">AND e.`commission_pct` IS NOT NULL;</span><br><span class="line"></span><br><span class="line">#案例2：查询城市名中第二个字符为o的部门名和城市名</span><br><span class="line"></span><br><span class="line">SELECT department_name,city</span><br><span class="line">FROM departments d,locations l</span><br><span class="line">WHERE d.`location_id` = l.`location_id`</span><br><span class="line">AND city LIKE &#x27;_o%&#x27;;</span><br><span class="line"></span><br><span class="line">#5、可以加分组</span><br><span class="line">#案例1：查询每个城市的部门个数</span><br><span class="line"></span><br><span class="line">SELECT COUNT(*) 个数,city</span><br><span class="line">FROM departments d,locations l</span><br><span class="line">WHERE d.`location_id`=l.`location_id`</span><br><span class="line">GROUP BY city;</span><br><span class="line"></span><br><span class="line">#案例2：查询有奖金的每个部门的部门名和部门的领导编号和该部门的最低工资</span><br><span class="line">SELECT department_name,d.`manager_id`,MIN(salary)</span><br><span class="line">FROM departments d,employees e</span><br><span class="line">WHERE d.`department_id`=e.`department_id`</span><br><span class="line">AND commission_pct IS NOT NULL</span><br><span class="line">GROUP BY department_name,d.`manager_id`;</span><br><span class="line"></span><br><span class="line">#6、可以加排序</span><br><span class="line">#案例：查询每个工种的工种名和员工的个数，并且按员工个数降序</span><br><span class="line"></span><br><span class="line">SELECT job_title,COUNT(*)</span><br><span class="line">FROM employees e,jobs j</span><br><span class="line">WHERE e.`job_id`=j.`job_id`</span><br><span class="line">GROUP BY job_title</span><br><span class="line">ORDER BY COUNT(*) DESC;</span><br><span class="line"></span><br><span class="line">#7、可以实现三表连接？</span><br><span class="line">#案例：查询员工名、部门名和所在的城市</span><br><span class="line"></span><br><span class="line">SELECT last_name,department_name,city</span><br><span class="line">FROM employees e,departments d,locations l</span><br><span class="line">WHERE e.`department_id`=d.`department_id`</span><br><span class="line">AND d.`location_id`=l.`location_id`</span><br><span class="line">AND city LIKE &#x27;s%&#x27;</span><br><span class="line">ORDER BY department_name DESC;</span><br><span class="line"></span><br><span class="line">#2、非等值连接</span><br><span class="line">#案例1：查询员工的工资和工资级别</span><br><span class="line"></span><br><span class="line">SELECT salary,grade_level</span><br><span class="line">FROM employees e,job_grades g</span><br><span class="line">WHERE salary BETWEEN g.`lowest_sal` AND g.`highest_sal`</span><br><span class="line">AND g.`grade_level`=&#x27;A&#x27;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#3、自连接</span><br><span class="line">#案例：查询 员工名和上级的名称</span><br><span class="line"></span><br><span class="line">SELECT e.employee_id,e.last_name,m.employee_id,m.last_name</span><br><span class="line">FROM employees e,employees m</span><br><span class="line">WHERE e.`manager_id`=m.`employee_id`;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h3 id="sql99标准案例（常用）"><a href="#sql99标准案例（常用）" class="headerlink" title="sql99标准案例（常用）"></a>sql99标准案例（常用）</h3><ul>
<li>语法</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">select 查询列表</span><br><span class="line">from 表1 别名 【连接类型】</span><br><span class="line">join 表2 别名 </span><br><span class="line">on 连接条件</span><br><span class="line">【where 筛选条件】</span><br><span class="line">【group by 分组】</span><br><span class="line">【having 筛选条件】</span><br><span class="line">【order by 排序列表】</span><br></pre></td></tr></table></figure>

<ul>
<li><p>分类</p>
<ul>
<li><p>内连接（★）：inner</p>
</li>
<li><p>外连接</p>
<pre><code>左外(★):left 【outer】
右外(★)：right 【outer】
全外：full【outer】
</code></pre>
</li>
<li><p>交叉连接：cross </p>
</li>
</ul>
</li>
</ul>
<h4 id="5-1-1内连接"><a href="#5-1-1内连接" class="headerlink" title="5.1.1内连接"></a>5.1.1内连接</h4><ul>
<li>语法：</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">select 查询列表</span><br><span class="line">from 表1 别名</span><br><span class="line">inner join 表2 别名</span><br><span class="line">on 连接条件;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>分类</p>
<ul>
<li>等值</li>
<li>非等值</li>
<li>自连接</li>
</ul>
</li>
<li><p>特点</p>
<ul>
<li><p>添加排序、分组、筛选</p>
</li>
<li><p>inner可以省略</p>
</li>
<li><p> 筛选条件放在where后面，连接条件放在on后面，提高分离性，便于阅读</p>
</li>
<li><p>inner join连接和sql92语法中的等值连接效果是一样的，都是查询多表的交集</p>
</li>
</ul>
</li>
</ul>
<ol>
<li>等值连接</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">#案例1.查询员工名、部门名</span><br><span class="line"></span><br><span class="line">SELECT last_name,department_name FROM departments d</span><br><span class="line">INNER JOIN  employees e</span><br><span class="line">ON e.`department_id` = d.`department_id`;</span><br><span class="line"></span><br><span class="line">#案例2.查询名字中包含e的员工名和工种名（添加筛选）</span><br><span class="line">SELECT last_name,job_title FROM employees e</span><br><span class="line">INNER JOIN jobs j ON e.`job_id`=  j.`job_id`</span><br><span class="line">WHERE e.`last_name` LIKE &#x27;%e%&#x27;;</span><br><span class="line"></span><br><span class="line">#案例3.查询部门个数&gt;3的城市名和部门个数，（添加分组+筛选）</span><br><span class="line"></span><br><span class="line">#1.查询每个城市的部门个数</span><br><span class="line">#2.在1结果上筛选满足条件的</span><br><span class="line">SELECT city,COUNT(*) 部门个数</span><br><span class="line">FROM departments d</span><br><span class="line">INNER JOIN locations l</span><br><span class="line">ON d.`location_id`=l.`location_id`</span><br><span class="line">GROUP BY city</span><br><span class="line">HAVING COUNT(*)&gt;3;</span><br><span class="line"></span><br><span class="line">#案例4.查询哪个部门的员工个数&gt;3的部门名和员工个数，并按个数降序（添加排序）</span><br><span class="line"></span><br><span class="line">#1.查询每个部门的员工个数</span><br><span class="line">SELECT COUNT(*),department_name</span><br><span class="line">FROM employees e</span><br><span class="line">INNER JOIN departments d</span><br><span class="line">ON e.`department_id`=d.`department_id`</span><br><span class="line">GROUP BY department_name;</span><br><span class="line"></span><br><span class="line">#2.在1结果上筛选员工个数&gt;3的记录，并排序</span><br><span class="line"></span><br><span class="line">SELECT COUNT(*) 个数,department_name</span><br><span class="line">FROM employees e</span><br><span class="line">INNER JOIN departments d</span><br><span class="line">ON e.`department_id`=d.`department_id`</span><br><span class="line">GROUP BY department_name</span><br><span class="line">HAVING COUNT(*)&gt;3</span><br><span class="line">ORDER BY COUNT(*) DESC;</span><br><span class="line"></span><br><span class="line">#案例5.查询员工名、部门名、工种名，并按部门名降序（添加三表连接）</span><br><span class="line"></span><br><span class="line">SELECT last_name,department_name,job_title</span><br><span class="line">FROM employees e</span><br><span class="line">INNER JOIN departments d ON e.`department_id`=d.`department_id`</span><br><span class="line">INNER JOIN jobs j ON e.`job_id` = j.`job_id`</span><br><span class="line">ORDER BY department_name DESC;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<ol start="2">
<li>非等值连接</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">#查询员工的工资级别</span><br><span class="line"></span><br><span class="line">SELECT salary,grade_level</span><br><span class="line">FROM employees e</span><br><span class="line">JOIN job_grades g</span><br><span class="line">ON e.`salary` BETWEEN g.`lowest_sal` AND g.`highest_sal`;</span><br><span class="line"> </span><br><span class="line">#查询工资级别的个数&gt;20的个数，并且按工资级别降序</span><br><span class="line">SELECT COUNT(*),grade_level</span><br><span class="line">FROM employees e</span><br><span class="line">JOIN job_grades g</span><br><span class="line">ON e.`salary` BETWEEN g.`lowest_sal` AND g.`highest_sal`</span><br><span class="line">GROUP BY grade_level</span><br><span class="line">HAVING COUNT(*)&gt;20</span><br><span class="line">ORDER BY grade_level DESC;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>自连接</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">#查询员工的名字、上级的名字</span><br><span class="line">SELECT e.last_name,m.last_name</span><br><span class="line">FROM employees e</span><br><span class="line">JOIN employees m</span><br><span class="line">ON e.`manager_id`= m.`employee_id`;</span><br><span class="line"> </span><br><span class="line">#查询姓名中包含字符k的员工的名字、上级的名字</span><br><span class="line">SELECT e.last_name,m.last_name</span><br><span class="line">FROM employees e</span><br><span class="line">JOIN employees m</span><br><span class="line">ON e.`manager_id`= m.`employee_id`</span><br><span class="line">WHERE e.`last_name` LIKE &#x27;%k%&#x27;;</span><br></pre></td></tr></table></figure>

<h4 id="5-1-2-外连接"><a href="#5-1-2-外连接" class="headerlink" title="5.1.2 外连接"></a>5.1.2 外连接</h4><ul>
<li><p>应用场景：用于查询一个表中有，另一个表没有的记录</p>
</li>
<li><p>特点：</p>
<ul>
<li><p>外连接的查询结果为主表中的所有记录<br>如果从表中有和它匹配的，则显示匹配的值<br>如果从表中没有和它匹配的，则显示null<br>外连接查询结果=内连接结果+主表中有而从表没有的记录</p>
</li>
<li><p>左外连接，left join左边的是主表<br>右外连接，right join右边的是主表</p>
</li>
<li><p>左外和右外交换两个表的顺序，可以实现同样的效果 </p>
</li>
<li><p>全外连接=内连接的结果+表1中有但表2没有的+表2中有但表1没有的</p>
</li>
</ul>
</li>
</ul>
<ol>
<li>左外连接</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># 查询男朋友 不在男神表的的女神名</span><br><span class="line">SELECT b.*,bo.* FROM boys bo</span><br><span class="line">LEFT OUTER JOIN beauty b</span><br><span class="line">ON b.`boyfriend_id` = bo.`id`</span><br><span class="line">WHERE b.`id` IS NULL;</span><br><span class="line"> </span><br><span class="line">#案例1：查询哪个部门没有员工</span><br><span class="line">SELECT d.*,e.employee_id</span><br><span class="line">FROM departments d</span><br><span class="line">LEFT OUTER JOIN employees e</span><br><span class="line">ON d.`department_id` = e.`department_id`</span><br><span class="line">WHERE e.`employee_id` IS NULL;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>右外连接</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SELECT d.*,e.employee_id</span><br><span class="line">FROM employees e</span><br><span class="line">RIGHT OUTER JOIN departments d</span><br><span class="line">ON d.`department_id` = e.`department_id`</span><br><span class="line">WHERE e.`employee_id` IS NULL;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>全外连接</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">USE girls;</span><br><span class="line">SELECT b.*,bo.* FROM beauty b</span><br><span class="line">FULL OUTER JOIN boys bo</span><br><span class="line">ON b.`boyfriend_id` = bo.id;</span><br></pre></td></tr></table></figure>

<h4 id="5-1-3-交叉连接"><a href="#5-1-3-交叉连接" class="headerlink" title="5.1.3 交叉连接"></a>5.1.3 交叉连接</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT b.*,bo.* FROM beauty b</span><br><span class="line">CROSS JOIN boys bo;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>交叉连接相当于92语法的笛卡尔乘积</p>
</blockquote>
<p><strong>sql92和sql99对比</strong></p>
<ul>
<li>功能：sql99支持的较多</li>
<li>可读性：sql99实现连接条件和筛选条件的分离，可读性较高</li>
</ul>
<h2 id="5-2-子查询"><a href="#5-2-子查询" class="headerlink" title="5.2 子查询"></a>5.2 子查询</h2><ul>
<li>含义:出现在其他语句中的select语句,称为子查询或内查询外部的查询语句，称为主查询或外查询。</li>
<li>分类</li>
</ul>
<p><img src="https://img-blog.csdnimg.cn/20200703113430918.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQ2MTUzOTQ5,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<h3 id="5-2-1-where-or-having-后面"><a href="#5-2-1-where-or-having-后面" class="headerlink" title="5.2.1 where or having 后面"></a>5.2.1 where or having 后面</h3><p>1、标量子查询（单行子查询）<br>2、列子查询（多行子查询）<br>3、行子查询（多列多行）</p>
<p>特点：<br>①子查询放在小括号内<br>②子查询一般放在条件的右侧<br>③标量子查询，一般搭配着单行操作符使用</p>
<p>&lt; &gt;= &lt;= = &lt;&gt;</p>
<p>④列子查询，一般搭配着多行操作符使用<br>in、any/some、all</p>
<p>⑤子查询的执行优先于主查询执行，主查询的条件用到了子查询的结果</p>
<ol>
<li>标量子查询（★）</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line">#案例1：谁的工资比 Abel 高?</span><br><span class="line"></span><br><span class="line">#①查询Abel的工资</span><br><span class="line">SELECT salary</span><br><span class="line">FROM employees</span><br><span class="line">WHERE last_name = &#x27;Abel&#x27;;</span><br><span class="line"></span><br><span class="line">#②查询员工的信息，满足 salary&gt;①结果</span><br><span class="line">SELECT *</span><br><span class="line">FROM employees</span><br><span class="line">WHERE salary&gt;(</span><br><span class="line"></span><br><span class="line">	SELECT salary</span><br><span class="line">	FROM employees</span><br><span class="line">	WHERE last_name = &#x27;Abel&#x27;</span><br><span class="line">	</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">#案例2：返回job_id与141号员工相同，salary比143号员工多的员工 姓名，job_id 和工资</span><br><span class="line"></span><br><span class="line">#①查询141号员工的job_id</span><br><span class="line">SELECT job_id FROM employees</span><br><span class="line">WHERE employee_id = 141;</span><br><span class="line"></span><br><span class="line">#②查询143号员工的salary</span><br><span class="line">SELECT salary FROM employees</span><br><span class="line">WHERE employee_id = 143;</span><br><span class="line"></span><br><span class="line">#③查询员工的姓名，job_id 和工资，要求job_id=①并且salary&gt;②</span><br><span class="line"></span><br><span class="line">SELECT last_name,job_id,salary</span><br><span class="line">FROM employees</span><br><span class="line">WHERE job_id = (</span><br><span class="line">	SELECT job_id</span><br><span class="line">	FROM employees</span><br><span class="line">	WHERE employee_id = 141</span><br><span class="line">) AND salary&gt;(</span><br><span class="line">	SELECT salary</span><br><span class="line">	FROM employees</span><br><span class="line">	WHERE employee_id = 143</span><br><span class="line"></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">#案例3：返回公司工资最少的员工的last_name,job_id和salary</span><br><span class="line"></span><br><span class="line">#①查询公司的最低工资</span><br><span class="line">SELECT MIN(salary) FROM employees;</span><br><span class="line"></span><br><span class="line">#②查询last_name,job_id和salary，要求salary=①</span><br><span class="line">SELECT last_name,job_id,salary</span><br><span class="line">FROM employees</span><br><span class="line">WHERE salary=(</span><br><span class="line">	SELECT MIN(salary)</span><br><span class="line">	FROM employees</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">#案例4：查询最低工资大于50号部门最低工资的部门id和其最低工资</span><br><span class="line"></span><br><span class="line">#①查询50号部门的最低工资</span><br><span class="line">SELECT  MIN(salary)</span><br><span class="line">FROM employees</span><br><span class="line">WHERE department_id = 50;</span><br><span class="line"></span><br><span class="line">#②查询每个部门的最低工资</span><br><span class="line"></span><br><span class="line">SELECT MIN(salary),department_id</span><br><span class="line">FROM employees</span><br><span class="line">GROUP BY department_id;</span><br><span class="line"></span><br><span class="line">#③ 在②基础上筛选，满足min(salary)&gt;①</span><br><span class="line">SELECT MIN(salary),department_id</span><br><span class="line">FROM employees</span><br><span class="line">GROUP BY department_id</span><br><span class="line">HAVING MIN(salary)&gt;(</span><br><span class="line">	SELECT  MIN(salary)</span><br><span class="line">	FROM employees</span><br><span class="line">	WHERE department_id = 50</span><br><span class="line">);</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<ol start="2">
<li>列子查询（多行子查询）（★）</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line">#案例1：返回location_id是1400或1700的部门中的所有员工姓名</span><br><span class="line"></span><br><span class="line">#①查询location_id是1400或1700的部门编号</span><br><span class="line">SELECT DISTINCT department_id</span><br><span class="line">FROM departments</span><br><span class="line">WHERE location_id IN(1400,1700);</span><br><span class="line"></span><br><span class="line">#②查询员工姓名，要求部门号是①列表中的某一个</span><br><span class="line"></span><br><span class="line">SELECT last_name</span><br><span class="line">FROM employees</span><br><span class="line">WHERE department_id  &lt;&gt;ALL(</span><br><span class="line">	SELECT DISTINCT department_id</span><br><span class="line">	FROM departments</span><br><span class="line">	WHERE location_id IN(1400,1700)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#案例2：返回其它工种中比job_id为‘IT_PROG’工种任一工资低的员工的员工号、姓名、job_id 以及salary</span><br><span class="line"></span><br><span class="line">#①查询job_id为‘IT_PROG’部门任一工资</span><br><span class="line"></span><br><span class="line">SELECT DISTINCT salary FROM employees</span><br><span class="line">WHERE job_id = &#x27;IT_PROG&#x27;;</span><br><span class="line"></span><br><span class="line">#②查询员工号、姓名、job_id 以及salary，salary&lt;(①)的任意一个</span><br><span class="line">SELECT last_name,employee_id,job_id,salary</span><br><span class="line">FROM employees</span><br><span class="line">WHERE salary&lt;ANY(</span><br><span class="line">	SELECT DISTINCT salary</span><br><span class="line">	FROM employees</span><br><span class="line">	WHERE job_id = &#x27;IT_PROG&#x27;</span><br><span class="line"></span><br><span class="line">) AND job_id&lt;&gt;&#x27;IT_PROG&#x27;;</span><br><span class="line"></span><br><span class="line">#或</span><br><span class="line">SELECT last_name,employee_id,job_id,salary</span><br><span class="line">FROM employees</span><br><span class="line">WHERE salary&lt;(</span><br><span class="line">	SELECT MAX(salary)</span><br><span class="line">	FROM employees</span><br><span class="line">	WHERE job_id = &#x27;IT_PROG&#x27;</span><br><span class="line"></span><br><span class="line">) AND job_id&lt;&gt;&#x27;IT_PROG&#x27;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#案例3：返回其它部门中比job_id为‘IT_PROG’部门所有工资都低的员工   的员工号、姓名、job_id 以及salary</span><br><span class="line"></span><br><span class="line">SELECT last_name,employee_id,job_id,salary</span><br><span class="line">FROM employees</span><br><span class="line">WHERE salary&lt;ALL(</span><br><span class="line">	SELECT DISTINCT salary</span><br><span class="line">	FROM employees</span><br><span class="line">	WHERE job_id = &#x27;IT_PROG&#x27;</span><br><span class="line"></span><br><span class="line">) AND job_id&lt;&gt;&#x27;IT_PROG&#x27;;</span><br><span class="line"></span><br><span class="line">#或</span><br><span class="line"></span><br><span class="line">SELECT last_name,employee_id,job_id,salary</span><br><span class="line">FROM employees</span><br><span class="line">WHERE salary&lt;(</span><br><span class="line">	SELECT MIN( salary)</span><br><span class="line">	FROM employees</span><br><span class="line">	WHERE job_id = &#x27;IT_PROG&#x27;</span><br><span class="line"></span><br><span class="line">) AND job_id&lt;&gt;&#x27;IT_PROG&#x27;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<ol start="3">
<li>行子查询（结果集一行多列或多行多列）</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">#案例：查询员工编号最小并且工资最高的员工信息</span><br><span class="line"></span><br><span class="line">SELECT * FROM employees</span><br><span class="line">WHERE (employee_id,salary)=(</span><br><span class="line">	SELECT MIN(employee_id),MAX(salary)</span><br><span class="line">	FROM employees</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">#①查询最小的员工编号</span><br><span class="line">SELECT MIN(employee_id) FROM employees;</span><br><span class="line"></span><br><span class="line">#②查询最高工资</span><br><span class="line">SELECT MAX(salary) FROM employees;</span><br><span class="line"></span><br><span class="line">#③查询员工信息</span><br><span class="line">SELECT * FROM employees</span><br><span class="line">WHERE employee_id=(</span><br><span class="line">	SELECT MIN(employee_id)</span><br><span class="line">	FROM employees</span><br><span class="line">)AND salary=(</span><br><span class="line">	SELECT MAX(salary)</span><br><span class="line">	FROM employees</span><br><span class="line">);</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h3 id="5-2-2-select后面"><a href="#5-2-2-select后面" class="headerlink" title="5.2.2 select后面"></a>5.2.2 select后面</h3><blockquote>
<p>仅仅支持标量子查询</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">#案例：查询每个部门的员工个数</span><br><span class="line"></span><br><span class="line">SELECT d.*,(</span><br><span class="line">	SELECT COUNT(*)</span><br><span class="line">	FROM employees e</span><br><span class="line">	WHERE e.department_id = d.`department_id`</span><br><span class="line"> ) 个数</span><br><span class="line"> FROM departments d;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">#案例2：查询员工号=102的部门名</span><br><span class="line"> </span><br><span class="line">SELECT (</span><br><span class="line">	SELECT department_name,e.department_id</span><br><span class="line">	FROM departments d</span><br><span class="line">	INNER JOIN employees e</span><br><span class="line">	ON d.department_id=e.department_id</span><br><span class="line">	WHERE e.employee_id=102</span><br><span class="line">	</span><br><span class="line">) 部门名;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="5-2-3-from后面"><a href="#5-2-3-from后面" class="headerlink" title="5.2.3 from后面"></a>5.2.3 from后面</h3><ul>
<li><p>注意点：将子查询结果充当一张表，要求必须起别名</p>
</li>
<li><p>案例</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">#案例：查询每个部门的平均工资的工资等级</span><br><span class="line">#①查询每个部门的平均工资</span><br><span class="line">SELECT AVG(salary),department_id</span><br><span class="line">FROM employees GROUP BY department_id;</span><br><span class="line"></span><br><span class="line">SELECT * FROM job_grades;</span><br><span class="line"></span><br><span class="line">#②连接①的结果集和job_grades表，筛选条件平均工资 between lowest_sal and highest_sal</span><br><span class="line"></span><br><span class="line">SELECT  ag_dep.*,g.`grade_level`</span><br><span class="line">FROM (</span><br><span class="line">	SELECT AVG(salary) ag,department_id</span><br><span class="line">	FROM employees</span><br><span class="line">	GROUP BY department_id</span><br><span class="line">) ag_dep</span><br><span class="line">INNER JOIN job_grades g</span><br><span class="line">ON ag_dep.ag BETWEEN lowest_sal AND highest_sal;</span><br></pre></td></tr></table></figure>



<h3 id="5-2-4-exist-后面"><a href="#5-2-4-exist-后面" class="headerlink" title="5.2.4 exist 后面"></a>5.2.4 exist 后面</h3><ul>
<li>语法： exists(完整的查询语句) 结果： 1或0</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT EXISTS(SELECT employee_id FROM employees WHERE salary=300000)</span><br></pre></td></tr></table></figure>

<ul>
<li>案例</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">#案例1：查询有员工的部门名</span><br><span class="line"></span><br><span class="line">#in</span><br><span class="line">SELECT department_name</span><br><span class="line">FROM departments d</span><br><span class="line">WHERE d.`department_id` IN(</span><br><span class="line">	SELECT department_id</span><br><span class="line">	FROM employees</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">#exists</span><br><span class="line">SELECT department_name</span><br><span class="line">FROM departments d</span><br><span class="line">WHERE EXISTS(</span><br><span class="line">	SELECT *</span><br><span class="line">	FROM employees e</span><br><span class="line">	WHERE d.`department_id`=e.`department_id`</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">#案例2：查询没有女朋友的男神信息</span><br><span class="line"></span><br><span class="line">#in</span><br><span class="line">SELECT bo.*</span><br><span class="line">FROM boys bo</span><br><span class="line">WHERE bo.id NOT IN(</span><br><span class="line">	SELECT boyfriend_id</span><br><span class="line">	FROM beauty</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">#exists</span><br><span class="line">SELECT bo.*</span><br><span class="line">FROM boys bo</span><br><span class="line">WHERE NOT EXISTS(</span><br><span class="line">	SELECT boyfriend_id</span><br><span class="line">	FROM beauty b</span><br><span class="line">	WHERE bo.`id`=b.`boyfriend_id`</span><br><span class="line">);</span><br></pre></td></tr></table></figure>



<h2 id="5-3-分页查询"><a href="#5-3-分页查询" class="headerlink" title="5.3 分页查询"></a>5.3 分页查询</h2><ul>
<li>应用场景：当要显示的数据，一页显示不全，需要分页提交sql请求。</li>
<li>语法</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">	select 查询列表</span><br><span class="line">	from 表</span><br><span class="line">	【join type join 表2</span><br><span class="line">	on 连接条件</span><br><span class="line">	where 筛选条件</span><br><span class="line">	group by 分组字段</span><br><span class="line">	having 分组后的筛选</span><br><span class="line">	order by 排序的字段】</span><br><span class="line">	limit 【offset,】size;</span><br><span class="line">注意</span><br><span class="line">	offset要显示条目的起始索引（起始索引从0开始）</span><br><span class="line">	size 要显示的条目个数</span><br></pre></td></tr></table></figure>

<ul>
<li>特点</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">①limit语句放在查询语句的最后</span><br><span class="line">②公式</span><br><span class="line">	要显示的页数 page，每页的条目数size</span><br><span class="line">	</span><br><span class="line">select 查询列表 from 表</span><br><span class="line">limit (page-1)*size,size;</span><br><span class="line">	</span><br><span class="line">size=10</span><br><span class="line">page  </span><br><span class="line">1	0</span><br><span class="line">2  	10</span><br><span class="line">3	20</span><br></pre></td></tr></table></figure>

<ul>
<li>案例</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">#案例1：查询前五条员工信息</span><br><span class="line">SELECT * FROM  employees LIMIT 0,5;</span><br><span class="line">SELECT * FROM  employees LIMIT 5;</span><br><span class="line"></span><br><span class="line">#案例2：查询第11条——第25条</span><br><span class="line">SELECT * FROM employees LIMIT 10,15;</span><br><span class="line"></span><br><span class="line">#案例3：有奖金的员工信息，并且工资较高的前10名显示出来</span><br><span class="line">SELECT * FROM employees </span><br><span class="line">WHERE commission_pct IS NOT NULL </span><br><span class="line">ORDER BY salary DESC LIMIT 10 ;</span><br></pre></td></tr></table></figure>





<h2 id="5-4-联合查询"><a href="#5-4-联合查询" class="headerlink" title="5.4 联合查询"></a>5.4 联合查询</h2><ul>
<li>含义：union (联合、合并)：将多条查询语句的结果合并成一个结果。</li>
<li>语法</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">查询语句<span class="number">1</span></span><br><span class="line"><span class="keyword">union</span> 【<span class="keyword">all</span>】</span><br><span class="line">查询语句<span class="number">2</span></span><br><span class="line"><span class="keyword">union</span> 【<span class="keyword">all</span>】</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<ul>
<li><p>意义</p>
<ul>
<li>将一条比较复杂的查询语句拆分成多条语句</li>
<li>适用于查询多个表的时候，查询的列基本是一致。    </li>
</ul>
</li>
<li><p>特点</p>
<ul>
<li>要求多条查询语句的查询列数是一致的！</li>
<li>要求多条查询语句的查询的每一列的类型和顺序最好一致</li>
<li>union关键字默认去重，如果使用union all 可以包含重复项</li>
</ul>
</li>
<li><p>案例</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">#引入的案例：查询部门编号&gt;90或邮箱包含a的员工信息</span><br><span class="line"></span><br><span class="line">SELECT * FROM employees WHERE email LIKE &#x27;%a%&#x27; OR department_id&gt;90;</span><br><span class="line"></span><br><span class="line">SELECT * FROM employees  WHERE email LIKE &#x27;%a%&#x27;</span><br><span class="line">UNION</span><br><span class="line">SELECT * FROM employees  WHERE department_id&gt;90;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#案例：查询中国用户中男性的信息以及外国用户中年男性的用户信息</span><br><span class="line"></span><br><span class="line">SELECT id,cname,csex FROM t_ca WHERE csex=&#x27;男&#x27;</span><br><span class="line">UNION</span><br><span class="line">SELECT t_id,tName,tGender FROM t_ua WHERE tGender=&#x27;male&#x27;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>此处用到的数据库文件</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line"> Navicat MySQL Data Transfer</span><br><span class="line"></span><br><span class="line"> Source Server         : localhost</span><br><span class="line"> Source Server Type    : MySQL</span><br><span class="line"> Source Server Version : 50145</span><br><span class="line"> Source Host           : localhost:3306</span><br><span class="line"> Source Schema         : test</span><br><span class="line"></span><br><span class="line"> Target Server Type    : MySQL</span><br><span class="line"> Target Server Version : 50145</span><br><span class="line"> File Encoding         : 65001</span><br><span class="line"></span><br><span class="line"> Date: 03/07/2020 11:08:32</span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line">SET NAMES utf8mb4;</span><br><span class="line">SET FOREIGN_KEY_CHECKS = 0;</span><br><span class="line"></span><br><span class="line">-- ----------------------------</span><br><span class="line">-- Table structure for t_ca</span><br><span class="line">-- ----------------------------</span><br><span class="line">DROP TABLE IF EXISTS `t_ca`;</span><br><span class="line">CREATE TABLE `t_ca`  (</span><br><span class="line">  `id` int(20) NOT NULL,</span><br><span class="line">  `cname` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,</span><br><span class="line">  `csex` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,</span><br><span class="line">  PRIMARY KEY (`id`) USING BTREE</span><br><span class="line">) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;</span><br><span class="line"></span><br><span class="line">-- ----------------------------</span><br><span class="line">-- Records of t_ca</span><br><span class="line">-- ----------------------------</span><br><span class="line">INSERT INTO `t_ca` VALUES (1, &#x27;韩梅梅&#x27;, &#x27;女&#x27;);</span><br><span class="line">INSERT INTO `t_ca` VALUES (2, &#x27;李雷&#x27;, &#x27;男&#x27;);</span><br><span class="line">INSERT INTO `t_ca` VALUES (3, &#x27;李明&#x27;, &#x27;男&#x27;);</span><br><span class="line"></span><br><span class="line">SET FOREIGN_KEY_CHECKS = 1;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">/*</span><br><span class="line"> Navicat MySQL Data Transfer</span><br><span class="line"></span><br><span class="line"> Source Server         : localhost</span><br><span class="line"> Source Server Type    : MySQL</span><br><span class="line"> Source Server Version : 50145</span><br><span class="line"> Source Host           : localhost:3306</span><br><span class="line"> Source Schema         : test</span><br><span class="line"></span><br><span class="line"> Target Server Type    : MySQL</span><br><span class="line"> Target Server Version : 50145</span><br><span class="line"> File Encoding         : 65001</span><br><span class="line"></span><br><span class="line"> Date: 03/07/2020 11:09:05</span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line">SET NAMES utf8mb4;</span><br><span class="line">SET FOREIGN_KEY_CHECKS = 0;</span><br><span class="line"></span><br><span class="line">-- ----------------------------</span><br><span class="line">-- Table structure for t_ua</span><br><span class="line">-- ----------------------------</span><br><span class="line">DROP TABLE IF EXISTS `t_ua`;</span><br><span class="line">CREATE TABLE `t_ua`  (</span><br><span class="line">  `t_id` int(11) NOT NULL,</span><br><span class="line">  `tName` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,</span><br><span class="line">  `tGender` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,</span><br><span class="line">  PRIMARY KEY (`t_id`) USING BTREE</span><br><span class="line">) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;</span><br><span class="line"></span><br><span class="line">-- ----------------------------</span><br><span class="line">-- Records of t_ua</span><br><span class="line">-- ----------------------------</span><br><span class="line">INSERT INTO `t_ua` VALUES (1, &#x27;john&#x27;, &#x27;male&#x27;);</span><br><span class="line">INSERT INTO `t_ua` VALUES (2, &#x27;lucy&#x27;, &#x27;female&#x27;);</span><br><span class="line">INSERT INTO `t_ua` VALUES (3, &#x27;lily&#x27;, &#x27;female&#x27;);</span><br><span class="line">INSERT INTO `t_ua` VALUES (4, &#x27;jack&#x27;, &#x27;male&#x27;);</span><br><span class="line">INSERT INTO `t_ua` VALUES (5, &#x27;rose&#x27;, &#x27;female&#x27;);</span><br><span class="line"></span><br><span class="line">SET FOREIGN_KEY_CHECKS = 1;</span><br></pre></td></tr></table></figure>

<h1 id="DML语言"><a href="#DML语言" class="headerlink" title="DML语言"></a>DML语言</h1><h1 id="六-增删改"><a href="#六-增删改" class="headerlink" title="六. 增删改"></a>六. 增删改</h1><p>DML语言<br>数据操作语言<br>插入：insert<br>修改：update<br>删除：delete</p>
<h2 id="6-1-插入语句"><a href="#6-1-插入语句" class="headerlink" title="6.1 插入语句"></a>6.1 插入语句</h2><p>方式一：经典的插入</p>
<ul>
<li><p>语法：insert into 表名(字段名,…) values(值,…);</p>
</li>
<li><p>特点</p>
<ul>
<li>要求值的类型和字段的类型要一致或兼容；</li>
<li>字段的个数和顺序不一定与原始表中的字段个数和顺序一致但必须保证值和字段一一对应；</li>
<li>假如表中有可以为null的字段，注意可以通过以下两种方式插入null值<ul>
<li>字段和值都省略</li>
<li>字段写上，值使用null</li>
</ul>
</li>
<li>字段和值的个数必须一致</li>
<li>字段名可以省略，默认所有列</li>
</ul>
</li>
<li><p>具体案例</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM beauty;</span><br><span class="line">#1.插入的值的类型要与列的类型一致或兼容</span><br><span class="line">INSERT INTO beauty(id,NAME,sex,borndate,phone,photo,boyfriend_id)</span><br><span class="line">VALUES(13,&#x27;唐艺昕&#x27;,&#x27;女&#x27;,&#x27;1990-4-23&#x27;,&#x27;1898888888&#x27;,NULL,2);</span><br><span class="line"></span><br><span class="line">#2.不可以为null的列必须插入值。可以为null的列如何插入值？</span><br><span class="line">    #方法一：</span><br><span class="line">    INSERT INTO beauty(id,NAME,sex,borndate,phone,photo,boyfriend_id)</span><br><span class="line">    VALUES(13,&#x27;唐艺昕&#x27;,&#x27;女&#x27;,&#x27;1990-4-23&#x27;,&#x27;1898888888&#x27;,NULL,2);</span><br><span class="line"></span><br><span class="line">    #方法二：</span><br><span class="line">    INSERT INTO beauty(id,NAME,sex,phone)</span><br><span class="line">    VALUES(15,&#x27;娜扎&#x27;,&#x27;女&#x27;,&#x27;1388888888&#x27;);</span><br><span class="line"></span><br><span class="line">#3.列的顺序是否可以调换</span><br><span class="line">INSERT INTO beauty(NAME,sex,id,phone)</span><br><span class="line">VALUES(&#x27;蒋欣&#x27;,&#x27;女&#x27;,16,&#x27;110&#x27;);</span><br><span class="line"></span><br><span class="line">#4.列数和值的个数必须一致</span><br><span class="line"></span><br><span class="line">INSERT INTO beauty(NAME,sex,id,phone)</span><br><span class="line">VALUES(&#x27;关晓彤&#x27;,&#x27;女&#x27;,17,&#x27;110&#x27;);</span><br><span class="line"></span><br><span class="line">#5.可以省略列名，默认所有列，而且列的顺序和表中列的顺序一致</span><br><span class="line"></span><br><span class="line">INSERT INTO beauty</span><br><span class="line">VALUES(18,&#x27;张飞&#x27;,&#x27;男&#x27;,NULL,&#x27;119&#x27;,NULL,NULL);</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p>方式二</p>
<ul>
<li>语法：insert into 表名 set 列名=值,列名=值,…</li>
</ul>
<ul>
<li>INSERT INTO beauty SET id=19,NAME=‘刘涛’,phone=‘999’;</li>
<li>两种方式的区别</li>
<li>案例</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">1.方式一支持一次插入多行，语法如下：</span><br><span class="line">insert into 表名【(字段名,..)】 values(值，..),(值，...),...;</span><br><span class="line">2.方式一支持子查询，语法如下：</span><br><span class="line">    insert into 表名 查询语句;</span><br><span class="line">    </span><br><span class="line">#1、方式一支持插入多行,方式二不支持</span><br><span class="line"></span><br><span class="line">INSERT INTO beauty</span><br><span class="line">VALUES(23,&#x27;唐艺昕1&#x27;,&#x27;女&#x27;,&#x27;1990-4-23&#x27;,&#x27;1898888888&#x27;,NULL,2)</span><br><span class="line">,(24,&#x27;唐艺昕2&#x27;,&#x27;女&#x27;,&#x27;1990-4-23&#x27;,&#x27;1898888888&#x27;,NULL,2)</span><br><span class="line">,(25,&#x27;唐艺昕3&#x27;,&#x27;女&#x27;,&#x27;1990-4-23&#x27;,&#x27;1898888888&#x27;,NULL,2);</span><br><span class="line"></span><br><span class="line">#2、方式一支持子查询，方式二不支持</span><br><span class="line"></span><br><span class="line">INSERT INTO beauty(id,NAME,phone) SELECT 26,&#x27;宋茜&#x27;,&#x27;11809866&#x27;;</span><br><span class="line"></span><br><span class="line">INSERT INTO beauty(id,NAME,phone) </span><br><span class="line">SELECT id,boyname,&#x27;1234567&#x27; FROM boys WHERE id&lt;3;  </span><br></pre></td></tr></table></figure>

<h2 id="6-2-修改语句"><a href="#6-2-修改语句" class="headerlink" title="6.2 修改语句"></a>6.2 修改语句</h2><ul>
<li>修改单表的记录（★）</li>
<li>语法：update 表名 set 列=新值,列=新值,… where 筛选条件;</li>
<li>案例</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">#1.修改单表的记录</span><br><span class="line">#案例1：修改beauty表中姓唐的女神的电话为13899888899</span><br><span class="line">UPDATE beauty SET phone = &#x27;13899888899&#x27;</span><br><span class="line">WHERE NAME LIKE &#x27;唐%&#x27;;</span><br><span class="line"></span><br><span class="line">#案例2：修改boys表中id好为2的名称为张飞，魅力值 10</span><br><span class="line">UPDATE boys SET boyname=&#x27;张飞&#x27;,usercp=10</span><br><span class="line">WHERE id=2;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li><p>修改多表的记录【补充】</p>
</li>
<li><p>sql92语法：update 表1 别名,表2 别名 set 列=值,… where 连接条件 and 筛选条件;</p>
</li>
<li><p>sql99语法：update 表1 别名 inner|left|right join 表2 别名 on 连接条件 set 列=值,… where 筛选条件;</p>
</li>
<li><p>案例</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">#2.修改多表的记录</span><br><span class="line">#案例 1：修改张无忌的女朋友的手机号为114</span><br><span class="line">UPDATE boys bo</span><br><span class="line">INNER JOIN beauty b ON bo.`id`=b.`boyfriend_id`</span><br><span class="line">SET b.`phone`=&#x27;119&#x27;,bo.`userCP`=1000</span><br><span class="line">WHERE bo.`boyName`=&#x27;张无忌&#x27;;</span><br><span class="line"></span><br><span class="line">#案例2：修改没有男朋友的女神的男朋友编号都为2号</span><br><span class="line">UPDATE boys bo</span><br><span class="line">RIGHT JOIN beauty b ON bo.`id`=b.`boyfriend_id`</span><br><span class="line">SET b.`boyfriend_id`=2 WHERE bo.`id` IS NULL;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="6-3-删除语句"><a href="#6-3-删除语句" class="headerlink" title="6.3 删除语句"></a>6.3 删除语句</h2><p>方式一：delete</p>
<ul>
<li>语法</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">1、单表的删除【★】</span><br><span class="line">delete from 表名 where 筛选条件</span><br><span class="line"></span><br><span class="line">2、多表的删除【补充】</span><br><span class="line"></span><br><span class="line">sql92语法：</span><br><span class="line">delete 表1的别名,表2的别名</span><br><span class="line">from 表1 别名,表2 别名</span><br><span class="line">where 连接条件</span><br><span class="line">and 筛选条件;</span><br><span class="line"></span><br><span class="line">sql99语法：</span><br><span class="line">delete 表1的别名,表2的别名</span><br><span class="line">from 表1 别名</span><br><span class="line">inner|left|right join 表2 别名 on 连接条件</span><br><span class="line">where 筛选条件;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>方式二：truncate</p>
<ul>
<li>语法:truncate table 表名;</li>
<li>案例</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#将魅力值&gt;100的男神信息删除</span><br><span class="line">TRUNCATE TABLE boys ;</span><br></pre></td></tr></table></figure>

<ul>
<li>两种方式的区别【面试题】</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1.delete 可以加where 条件，truncate不能加</span><br><span class="line">2.truncate删除，效率高一点</span><br><span class="line">3.假如要删除的表中有自增长列，</span><br><span class="line">  如果用delete删除后，再插入数据，自增长列的值从断点开始，而truncate删除后，再插入数据，自增长列的值从1开始。</span><br><span class="line">4.truncate删除没有返回值，delete删除有返回值</span><br><span class="line">5.truncate删除不能回滚，delete删除可以回滚.</span><br></pre></td></tr></table></figure>



<h1 id="DDL语言"><a href="#DDL语言" class="headerlink" title="DDL语言"></a>DDL语言</h1><h1 id="七-库、表的管理"><a href="#七-库、表的管理" class="headerlink" title="七.库、表的管理"></a>七.库、表的管理</h1><h2 id="7-1-库的管理"><a href="#7-1-库的管理" class="headerlink" title="7.1 库的管理"></a>7.1 库的管理</h2><ul>
<li><p>创建库</p>
<ul>
<li>语法：create database 【if not exists】 库名【 character set 字符集名】;</li>
<li>案例</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#案例：创建库Books</span><br><span class="line">CREATE DATABASE IF NOT EXISTS books ;</span><br></pre></td></tr></table></figure></li>
<li><p>修改库</p>
<ul>
<li>语法：alter database 库名 character set 字符集名;</li>
<li>案例</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#案例：更改库的字符集</span><br><span class="line">ALTER DATABASE books CHARACTER SET gbk;</span><br></pre></td></tr></table></figure></li>
<li><p>删除库</p>
<ul>
<li>语法：drop database 【if exists】 库名;</li>
<li>案例</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#案例：库的删除</span><br><span class="line">DROP DATABASE IF EXISTS books;</span><br></pre></td></tr></table></figure>

<h2 id=""><a href="#" class="headerlink" title=""></a></h2></li>
</ul>
<h2 id="7-2-表的管理"><a href="#7-2-表的管理" class="headerlink" title="7.2 表的管理"></a>7.2 表的管理</h2><ul>
<li><p>表的创建</p>
<ul>
<li>语法</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">create table 表名(</span><br><span class="line">	列名 列的类型【(长度) 约束】,</span><br><span class="line">	列名 列的类型【(长度) 约束】,</span><br><span class="line">	列名 列的类型【(长度) 约束】,</span><br><span class="line">	...</span><br><span class="line">	列名 列的类型【(长度) 约束】</span><br><span class="line">)</span><br></pre></td></tr></table></figure>


<ul>
<li>案例</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">*/</span><br><span class="line">#案例：创建表Book</span><br><span class="line">CREATE TABLE book (</span><br><span class="line">  id INT,</span><br><span class="line">  #编号</span><br><span class="line">  bName VARCHAR (20),</span><br><span class="line">  #图书名</span><br><span class="line">  price DOUBLE,</span><br><span class="line">  #价格</span><br><span class="line">  authorId INT,</span><br><span class="line">  #作者编号</span><br><span class="line">  publishDate DATETIME#出版日期</span><br><span class="line">) ;</span><br><span class="line"></span><br><span class="line">DESC book;</span><br><span class="line"></span><br><span class="line">#案例：创建表author</span><br><span class="line">CREATE TABLE IF NOT EXISTS author (</span><br><span class="line">  id INT,</span><br><span class="line">  au_n`author`ame VARCHAR (20),</span><br><span class="line">  nation VARCHAR (10)</span><br><span class="line">);</span><br><span class="line">DESC author ;</span><br></pre></td></tr></table></figure></li>
<li><p>表的修改</p>
<ul>
<li>常用命令</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">1.添加列</span><br><span class="line">alter table 表名 add column 列名 类型 【first|after 字段名】;</span><br><span class="line">2.修改列的类型或约束</span><br><span class="line">alter table 表名 modify column 列名 新类型 【新约束】;</span><br><span class="line">3.修改列名</span><br><span class="line">alter table 表名 change column 旧列名 新列名 类型;</span><br><span class="line">4 .删除列</span><br><span class="line">alter table 表名 drop column 列名;</span><br><span class="line">5.修改表名</span><br><span class="line">alter table 表名 rename 【to】 新表名;</span><br></pre></td></tr></table></figure>


<ul>
<li>案例</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">#①修改列名</span><br><span class="line">ALTER TABLE book CHANGE COLUMN publishdate pubDate DATETIME ;</span><br><span class="line"></span><br><span class="line">#②修改列的类型或约束</span><br><span class="line">ALTER TABLE book MODIFY COLUMN pubdate TIMESTAMP;</span><br><span class="line"></span><br><span class="line">#③添加新列</span><br><span class="line">ALTER TABLE author ADD COLUMN annual DOUBLE; </span><br><span class="line"></span><br><span class="line">#④删除列</span><br><span class="line">ALTER TABLE book_author DROP COLUMN  annual;</span><br><span class="line"></span><br><span class="line">#⑤修改表名</span><br><span class="line">ALTER TABLE book_author RENAME TO author;</span><br><span class="line"></span><br><span class="line">DESC book;</span><br></pre></td></tr></table></figure></li>
<li><p>表的删除</p>
<ul>
<li>语法</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">drop table【if exists】 表名;</span><br><span class="line">#通用的写法：</span><br><span class="line">DROP DATABASE IF EXISTS 旧库名;</span><br><span class="line">CREATE DATABASE 新库名 ;</span><br><span class="line"></span><br><span class="line">DROP TABLE IF EXISTS 旧表名;</span><br><span class="line">CREATE TABLE  表名();</span><br></pre></td></tr></table></figure>
<ul>
<li>案例</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">DROP TABLE IF EXISTS book_author;</span><br><span class="line">SHOW TABLES;</span><br></pre></td></tr></table></figure></li>
<li><p>表的复制</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">1、复制表的结构</span><br><span class="line">create table 表名 like 旧表;</span><br><span class="line">2、复制表的结构+数据</span><br><span class="line">create table 表名 </span><br><span class="line">select 查询列表 from 旧表【where 筛选】;</span><br><span class="line"></span><br><span class="line">案例</span><br><span class="line">INSERT INTO author VALUES</span><br><span class="line">(1,&#x27;村上春树&#x27;,&#x27;日本&#x27;),</span><br><span class="line">(2,&#x27;莫言&#x27;,&#x27;中国&#x27;),</span><br><span class="line">(3,&#x27;冯唐&#x27;,&#x27;中国&#x27;),</span><br><span class="line">(4,&#x27;金庸&#x27;,&#x27;中国&#x27;);</span><br><span class="line"></span><br><span class="line">SELECT * FROM Author;</span><br><span class="line">SELECT * FROM copy2;</span><br><span class="line"></span><br><span class="line">#1.仅仅复制表的结构</span><br><span class="line">CREATE TABLE copy LIKE author;</span><br><span class="line"></span><br><span class="line">#2.复制表的结构+数据</span><br><span class="line">CREATE TABLE copy2 SELECT * FROM author;</span><br><span class="line"></span><br><span class="line">#只复制部分数据</span><br><span class="line">CREATE TABLE copy3 SELECT id,au_name</span><br><span class="line">FROM author WHERE nation=&#x27;中国&#x27;;</span><br><span class="line"></span><br><span class="line">#仅仅复制某些字段</span><br><span class="line">CREATE TABLE copy4 SELECT id,au_name</span><br><span class="line">FROM author WHERE 0;</span><br></pre></td></tr></table></figure>



<h1 id="八-数据类型"><a href="#八-数据类型" class="headerlink" title="八.数据类型"></a>八.数据类型</h1><h3 id="8-1-整型"><a href="#8-1-整型" class="headerlink" title="8.1 整型"></a>8.1 整型</h3><ul>
<li>分类</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tinyint、smallint、mediumint、int/integer、bigint</span><br><span class="line">1	     2		   3	    4		 8</span><br></pre></td></tr></table></figure>

<ul>
<li>特点<ul>
<li>如果不设置无符号还是有符号，默认是有符号，如果想设置无符号，需要添加unsigned关键字</li>
<li>如果插入的数值超出了整型的范围,会报out of range异常，并且插入临界值</li>
<li>如果不设置长度，会有默认的长度<br>长度代表了显示的最大宽度，如果不够会用0在左边填充，但必须搭配zerofill使用！</li>
</ul>
</li>
<li>案例</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">DROP TABLE IF EXISTS tab_int ;</span><br><span class="line"></span><br><span class="line">CREATE TABLE tab_int (t1 INT (7) ZEROFILL, t2 INT (7) ZEROFILL) ;</span><br><span class="line"></span><br><span class="line">DESC tab_int ;</span><br><span class="line"></span><br><span class="line">INSERT INTO tab_int VALUES (- 123456) ;</span><br><span class="line"></span><br><span class="line">INSERT INTO tab_int VALUES (- 123456, - 123456) ;</span><br><span class="line"></span><br><span class="line">INSERT INTO tab_int VALUES (2147483648, 4294967296) ;</span><br><span class="line"></span><br><span class="line">INSERT INTO tab_int VALUES (123, 123) ;</span><br><span class="line"></span><br><span class="line">SELECT * FROM tab_int ;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h3 id="8-2-浮点型"><a href="#8-2-浮点型" class="headerlink" title="8.2 浮点型"></a>8.2 浮点型</h3><ul>
<li><p>定点数：dec(M,D)；decimal(M,D)</p>
</li>
<li><p>浮点数：float(M,D) 4；double(M,D) 8</p>
</li>
<li><p>特点：</p>
<ul>
<li>M代表整数部位+小数部位的个数，D代表小数部位</li>
<li>如果超出范围，则报out or range异常，并且插入临界值</li>
<li>M和D都可以省略，但对于定点数，M默认为10，D默认为0</li>
<li>如果精度要求较高，则优先考虑使用定点数</li>
</ul>
</li>
<li><p>案例</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">#测试M和D</span><br><span class="line">DROP TABLE tab_float ;</span><br><span class="line"></span><br><span class="line">CREATE TABLE tab_float (f1 FLOAT, f2 DOUBLE, f3 DECIMAL) ;</span><br><span class="line"></span><br><span class="line">SELECT * FROM tab_float ;</span><br><span class="line"></span><br><span class="line">DESC tab_float ;</span><br><span class="line"></span><br><span class="line">INSERT INTO tab_float VALUES(123.4523,123.4523,123.4523);</span><br><span class="line">INSERT INTO tab_float VALUES(123.456,123.456,123.456);</span><br><span class="line">INSERT INTO tab_float VALUES(123.4,123.4,123.4);</span><br><span class="line">INSERT INTO tab_float VALUES(1523.4,1523.4,1523.4);</span><br><span class="line"></span><br><span class="line">#原则：</span><br><span class="line">#所选择的类型越简单越好，能保存数值的类型越小越好</span><br></pre></td></tr></table></figure>



<h3 id="8-3-字符型"><a href="#8-3-字符型" class="headerlink" title="8.3 字符型"></a>8.3 字符型</h3><ul>
<li>较短的文本：char、varchar</li>
<li>其他：<ul>
<li>binary和varbinary用于保存较短的二进制</li>
<li>enum用于保存枚举</li>
<li>set用于保存集合</li>
</ul>
</li>
<li>较长的文本：text、blob(较大的二进制)</li>
<li>特点</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">  写法			M的意思					特点		空间的耗费     效率</span><br><span class="line">char/char(M)	最大的字符数，可以省略，默认为1 固定长度的字符	比较耗费	 高</span><br><span class="line"></span><br><span class="line">varchar/varchar(M)	最大的字符数，不可以省略	可变长度的字符	   比较节省	   低</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE tab_char(</span><br><span class="line">	c1 ENUM(&#x27;a&#x27;,&#x27;b&#x27;,&#x27;c&#x27;)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">INSERT INTO tab_char VALUES(&#x27;a&#x27;);</span><br><span class="line">INSERT INTO tab_char VALUES(&#x27;b&#x27;);</span><br><span class="line">INSERT INTO tab_char VALUES(&#x27;c&#x27;);</span><br><span class="line">INSERT INTO tab_char VALUES(&#x27;m&#x27;);</span><br><span class="line">INSERT INTO tab_char VALUES(&#x27;A&#x27;);</span><br><span class="line"></span><br><span class="line">SELECT * FROM tab_set;</span><br><span class="line"></span><br><span class="line">CREATE TABLE tab_set(</span><br><span class="line">	s1 SET(&#x27;a&#x27;,&#x27;b&#x27;,&#x27;c&#x27;,&#x27;d&#x27;)</span><br><span class="line">);</span><br><span class="line">INSERT INTO tab_set VALUES(&#x27;a&#x27;);</span><br><span class="line">INSERT INTO tab_set VALUES(&#x27;A,B&#x27;);</span><br><span class="line">INSERT INTO tab_set VALUES(&#x27;a,c,d&#x27;);</span><br></pre></td></tr></table></figure>

<h3 id="8-4-日期型"><a href="#8-4-日期型" class="headerlink" title="8.4 日期型"></a>8.4 日期型</h3><ul>
<li>分类：<ul>
<li>date只保存日期；</li>
<li>time 只保存时间；</li>
<li>year只保存年；</li>
<li>datetime保存日期+时间；</li>
<li>timestamp保存日期+时间；</li>
</ul>
</li>
<li>特点</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">		   字节		范围			时区等的影响</span><br><span class="line">datetime	 8		1000——9999	      不受</span><br><span class="line">timestamp	 4	    1970-2038	        受</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>案例</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE tab_date(</span><br><span class="line">	t1 DATETIME,</span><br><span class="line">	t2 TIMESTAMP</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">INSERT INTO tab_date VALUES(NOW(),NOW());</span><br><span class="line"></span><br><span class="line">SELECT * FROM tab_date;</span><br><span class="line"></span><br><span class="line">SHOW VARIABLES LIKE &#x27;time_zone&#x27;;</span><br><span class="line"></span><br><span class="line">SET time_zone=&#x27;+9:00&#x27;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h1 id="九-常见约束"><a href="#九-常见约束" class="headerlink" title="九.常见约束"></a>九.常见约束</h1><ul>
<li>含义：一种限制，用于限制表中的数据，为了保证表中的数据的准确和可靠性。</li>
</ul>
<ul>
<li>分类</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">六大约束</span><br><span class="line">	NOT NULL：非空，用于保证该字段的值不能为空</span><br><span class="line">	比如姓名、学号等</span><br><span class="line">	DEFAULT:默认，用于保证该字段有默认值</span><br><span class="line">	比如性别</span><br><span class="line">	PRIMARY KEY:主键，用于保证该字段的值具有唯一性，并且非空</span><br><span class="line">	比如学号、员工编号等</span><br><span class="line">	UNIQUE:唯一，用于保证该字段的值具有唯一性，可以为空</span><br><span class="line">	比如座位号</span><br><span class="line">	CHECK:检查约束【mysql中不支持】</span><br><span class="line">	比如年龄、性别</span><br><span class="line">	FOREIGN KEY:外键，用于限制两个表的关系，用于保证该字段的值必须来自于主表的关联列的值</span><br><span class="line">		在从表添加外键约束，用于引用主表中某列的值</span><br><span class="line">	比如学生表的专业编号，员工表的部门编号，员工表的工种编号</span><br></pre></td></tr></table></figure>

<ul>
<li><p>添加约束的时机：1.创建表时；2.修改表时</p>
</li>
<li><p>约束的添加分类：</p>
<ul>
<li>列级约束：六大约束语法上都支持，但外键约束没有效果</li>
<li>表级约束：除了非空、默认，其他的都支持</li>
</ul>
</li>
<li><p>语法</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE 表名&#123;</span><br><span class="line">	字段名 字段类型 列级约束,</span><br><span class="line">	字段名 字段类型,</span><br><span class="line">	表级约束</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>



<h2 id="9-1-创建表时添加约束"><a href="#9-1-创建表时添加约束" class="headerlink" title="9.1 创建表时添加约束"></a>9.1 创建表时添加约束</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#先新建一个库</span><br><span class="line">CREATE DATABASE students;</span><br></pre></td></tr></table></figure>

<ol>
<li>添加列级约束</li>
</ol>
<ul>
<li>语法：直接在字段名和类型后面追加 约束类型即可。只支持：默认、非空、主键、唯一</li>
<li>案例</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">USE students;</span><br><span class="line"></span><br><span class="line">DROP TABLE stuinfo;</span><br><span class="line"></span><br><span class="line">CREATE TABLE stuinfo(</span><br><span class="line">	id INT PRIMARY KEY,#主键</span><br><span class="line">	stuName VARCHAR(20) NOT NULL UNIQUE,#非空</span><br><span class="line">	gender CHAR(1) CHECK(gender=&#x27;男&#x27; OR gender =&#x27;女&#x27;),#检查</span><br><span class="line">	seat INT UNIQUE,#唯一</span><br><span class="line">	age INT DEFAULT  18,#默认约束</span><br><span class="line">	majorId INT REFERENCES major(id)#外键</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">CREATE TABLE major(</span><br><span class="line">	id INT PRIMARY KEY,</span><br><span class="line">	majorName VARCHAR(20)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">#查看stuinfo中的所有索引，包括主键、外键、唯一</span><br><span class="line">SHOW INDEX FROM stuinfo;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>添加表级约束</li>
</ol>
<ul>
<li>语法：在各个字段的最下面 【constraint 约束名】 约束类型(字段名)</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">TABLE IF EXISTS stuinfo;</span><br><span class="line">CREATE TABLE stuinfo(</span><br><span class="line">	id INT,</span><br><span class="line">	stuname VARCHAR(20),</span><br><span class="line">	gender CHAR(1),</span><br><span class="line">	seat INT,</span><br><span class="line">	age INT,</span><br><span class="line">	majorid INT,</span><br><span class="line">	</span><br><span class="line">	CONSTRAINT pk PRIMARY KEY(id),#主键</span><br><span class="line">	CONSTRAINT uq UNIQUE(seat),#唯一键</span><br><span class="line">	CONSTRAINT ck CHECK(gender =&#x27;男&#x27; OR gender  = &#x27;女&#x27;),#检查</span><br><span class="line">	CONSTRAINT fk_stuinfo_major FOREIGN KEY(majorid) REFERENCES major(id)#外键	</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">SHOW INDEX FROM stuinfo;</span><br></pre></td></tr></table></figure>

<ul>
<li>通用的写法</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE IF NOT EXISTS stuinfo(</span><br><span class="line">	id INT PRIMARY KEY,</span><br><span class="line">	stuname VARCHAR(20),</span><br><span class="line">	sex CHAR(1),</span><br><span class="line">	age INT DEFAULT 18,</span><br><span class="line">	seat INT UNIQUE,</span><br><span class="line">	majorid INT,</span><br><span class="line">	CONSTRAINT fk_stuinfo_major FOREIGN KEY(majorid) REFERENCES major(id)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">create table 表名(</span><br><span class="line">  	字段名 字段类型 not null,#非空</span><br><span class="line">  	字段名 字段类型 primary key,#主键</span><br><span class="line">  	字段名 字段类型 unique,#唯一</span><br><span class="line">  	字段名 字段类型 default 值,#默认</span><br><span class="line">  	constraint 约束名 foreign key(字段名) references 主表（被引用列）</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">注意：</span><br><span class="line">  			   支持类型		      可以起约束名			</span><br><span class="line">列级约束		除了外键		     不可以</span><br><span class="line">表级约束		除了非空和默认	  可以，但对主键无效</span><br><span class="line">  </span><br><span class="line">列级约束可以在一个字段上追加多个，中间用空格隔开，没有顺序要求</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<ul>
<li>主键和唯一的区别</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">		保证唯一性  是否允许为空    一个表中可以有多少个   是否允许组合</span><br><span class="line">主键		√				×			至多有1个           √，但不推荐</span><br><span class="line">唯一		√				√			可以有多个          √，但不推荐</span><br></pre></td></tr></table></figure>



<h2 id="9-2-修改表时添加约束"><a href="#9-2-修改表时添加约束" class="headerlink" title="9.2 修改表时添加约束"></a>9.2 修改表时添加约束</h2><ul>
<li>语法</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1、添加列级约束</span><br><span class="line">alter table 表名 modify column 字段名 字段类型 新约束;</span><br><span class="line"></span><br><span class="line">2、添加表级约束</span><br><span class="line">alter table 表名 add 【constraint 约束名】 约束类型(字段名) 【外键的引用】;</span><br></pre></td></tr></table></figure>

<ul>
<li>案例</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">DROP TABLE IF EXISTS stuinfo;</span><br><span class="line">CREATE TABLE stuinfo(</span><br><span class="line">	id INT,</span><br><span class="line">	stuname VARCHAR(20),</span><br><span class="line">	gender CHAR(1),</span><br><span class="line">	seat INT,</span><br><span class="line">	age INT,</span><br><span class="line">	majorid INT</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">DESC stuinfo;</span><br><span class="line">#1.添加非空约束</span><br><span class="line">ALTER TABLE stuinfo MODIFY COLUMN stuname VARCHAR(20)  NOT NULL;</span><br><span class="line"></span><br><span class="line">#2.添加默认约束</span><br><span class="line">ALTER TABLE stuinfo MODIFY COLUMN age INT DEFAULT 18;</span><br><span class="line"></span><br><span class="line">#3.添加主键</span><br><span class="line">    #①列级约束</span><br><span class="line">    ALTER TABLE stuinfo MODIFY COLUMN id INT PRIMARY KEY;</span><br><span class="line">    #②表级约束</span><br><span class="line">    ALTER TABLE stuinfo ADD PRIMARY KEY(id);</span><br><span class="line"></span><br><span class="line">#4.添加唯一</span><br><span class="line">    #①列级约束</span><br><span class="line">    ALTER TABLE stuinfo MODIFY COLUMN seat INT UNIQUE;</span><br><span class="line">    #②表级约束</span><br><span class="line">    ALTER TABLE stuinfo ADD UNIQUE(seat);</span><br><span class="line"></span><br><span class="line">#5.添加外键</span><br><span class="line">ALTER TABLE stuinfo ADD CONSTRAINT fk_stuinfo_major FOREIGN KEY(majorid) REFERENCES major(id); </span><br></pre></td></tr></table></figure>



<h2 id="9-3-修改表时删除约束"><a href="#9-3-修改表时删除约束" class="headerlink" title="9.3 修改表时删除约束"></a>9.3 修改表时删除约束</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">#1.删除非空约束</span><br><span class="line">ALTER TABLE stuinfo MODIFY COLUMN stuname VARCHAR(20) NULL;</span><br><span class="line"></span><br><span class="line">#2.删除默认约束</span><br><span class="line">ALTER TABLE stuinfo MODIFY COLUMN age INT ;</span><br><span class="line"></span><br><span class="line">#3.删除主键</span><br><span class="line">ALTER TABLE stuinfo DROP PRIMARY KEY;</span><br><span class="line"></span><br><span class="line">#4.删除唯一</span><br><span class="line">ALTER TABLE stuinfo DROP INDEX seat;</span><br><span class="line"></span><br><span class="line">#5.删除外键</span><br><span class="line">ALTER TABLE stuinfo DROP FOREIGN KEY fk_stuinfo_major;</span><br><span class="line"></span><br><span class="line">SHOW INDEX FROM stuinfo;</span><br></pre></td></tr></table></figure>

<ul>
<li>修改表时添加或删除约束的具体语法总结：</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">1、非空</span><br><span class="line">添加非空</span><br><span class="line">alter table 表名 modify column 字段名 字段类型 not null;</span><br><span class="line">删除非空</span><br><span class="line">alter table 表名 modify column 字段名 字段类型 ;</span><br><span class="line"></span><br><span class="line">2、默认</span><br><span class="line">添加默认</span><br><span class="line">alter table 表名 modify column 字段名 字段类型 default 值;</span><br><span class="line">删除默认</span><br><span class="line">alter table 表名 modify column 字段名 字段类型 ;</span><br><span class="line"></span><br><span class="line">3、主键</span><br><span class="line">添加主键</span><br><span class="line">alter table 表名 add【 constraint 约束名】 primary key(字段名);</span><br><span class="line">删除主键</span><br><span class="line">alter table 表名 drop primary key;</span><br><span class="line"></span><br><span class="line">4、唯一</span><br><span class="line">添加唯一</span><br><span class="line">alter table 表名 add【 constraint 约束名】 unique(字段名);</span><br><span class="line">删除唯一</span><br><span class="line">alter table 表名 drop index 索引名;</span><br><span class="line"></span><br><span class="line">5、外键</span><br><span class="line">添加外键</span><br><span class="line">alter table 表名 add【 constraint 约束名】 foreign key(字段名) references 主表（被引用列）;</span><br><span class="line">删除外键</span><br><span class="line">alter table 表名 drop foreign key 约束名;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="9-4-自增长列（标识列）"><a href="#9-4-自增长列（标识列）" class="headerlink" title="9.4 自增长列（标识列）"></a>9.4 自增长列（标识列）</h2><ul>
<li>含义：可以不用手动的插入值，系统提供默认的序列值</li>
<li>特点</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">1.不用手动插入值，可以自动提供序列值，默认从1开始，步长为1</span><br><span class="line">  auto_increment_increment</span><br><span class="line">  如果要更改起始值：手动插入值</span><br><span class="line">  如果要更改步长：更改系统变量</span><br><span class="line">  set auto_increment_increment=值;</span><br><span class="line">2.一个表至多有一个自增长列</span><br><span class="line">3.自增长列只能支持数值型</span><br><span class="line">4.自增长列必须为一个key</span><br></pre></td></tr></table></figure>

<ul>
<li>案例</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">#一、创建表时设置标识列</span><br><span class="line">DROP TABLE IF EXISTS tab_identity;</span><br><span class="line"></span><br><span class="line">CREATE TABLE tab_identity(</span><br><span class="line">	id INT  ,</span><br><span class="line">	NAME FLOAT UNIQUE AUTO_INCREMENT,</span><br><span class="line">	seat INT </span><br><span class="line">) TRUNCATE TABLE tab_identity;</span><br><span class="line"></span><br><span class="line">INSERT INTO tab_identity(id,NAME) VALUES(NULL,&#x27;john&#x27;);</span><br><span class="line"></span><br><span class="line">INSERT INTO tab_identity(NAME) VALUES(&#x27;lucy&#x27;);</span><br><span class="line"></span><br><span class="line">SELECT * FROM tab_identity;</span><br><span class="line"></span><br><span class="line">SHOW VARIABLES LIKE &#x27;%auto_increment%&#x27;;</span><br><span class="line"></span><br><span class="line">SET auto_increment_increment=3;</span><br></pre></td></tr></table></figure>

<ul>
<li>语法总结</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">一、创建表时设置自增长列</span><br><span class="line">create table 表(</span><br><span class="line">	字段名 字段类型 约束 auto_increment</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">二、修改表时设置自增长列</span><br><span class="line">alter table 表 modify column 字段名 字段类型 约束 auto_increment;</span><br><span class="line"></span><br><span class="line">三、删除自增长列</span><br><span class="line">alter table 表 modify column 字段名 字段类型 约束;</span><br></pre></td></tr></table></figure>



<h1 id="TCL语言"><a href="#TCL语言" class="headerlink" title="TCL语言"></a>TCL语言</h1><h1 id="十-事务"><a href="#十-事务" class="headerlink" title="十. 事务"></a>十. 事务</h1><h2 id="10-1-事务的用法"><a href="#10-1-事务的用法" class="headerlink" title="10.1 事务的用法"></a>10.1 事务的用法</h2><ul>
<li>事务：一个或一组sql语句组成一个执行单元，这个执行单元要么全部执行，要么全部不执行。</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">案例：转账</span><br><span class="line"></span><br><span class="line">张三丰  1000</span><br><span class="line">郭襄	1000</span><br><span class="line"></span><br><span class="line">update 表 set 张三丰的余额=500 where name=&#x27;张三丰&#x27;</span><br><span class="line">意外</span><br><span class="line">update 表 set 郭襄的余额=1500 where name=&#x27;郭襄&#x27;</span><br></pre></td></tr></table></figure>

<ul>
<li>事务的特点</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">案例：转账</span><br><span class="line"></span><br><span class="line">张三丰  1000</span><br><span class="line">郭襄	1000</span><br><span class="line"></span><br><span class="line">update 表 set 张三丰的余额=500 where name=&#x27;张三丰&#x27;</span><br><span class="line">意外</span><br><span class="line">update 表 set 郭襄的余额=1500 where name=&#x27;郭襄&#x27;</span><br></pre></td></tr></table></figure>



<ul>
<li>事务的特性(ACID)<ul>
<li>原子性：一个事务不可再分割，要么都执行要么都不执行</li>
<li>一致性：一个事务执行会使数据从一个一致状态切换到另外一个一致状态</li>
<li>隔离性：一个事务的执行不受其他事务的干扰</li>
<li>持久性：一个事务一旦提交，则会永久的改变数据库的数据.</li>
</ul>
</li>
</ul>
<p>事务的使用步骤 （★）</p>
<ul>
<li>了解<ul>
<li>隐式（自动）事务：没有明显的开启和结束，本身就是一条事务可以自动提交，比如insert、update、delete</li>
<li>显式事务：事务具有明显的开启和结束的标记；前提：必须先设置自动提交功能为禁用</li>
</ul>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">开启事务的语句;</span><br><span class="line">update 表 set 张三丰的余额=500 where name=&#x27;张三丰&#x27;</span><br><span class="line"></span><br><span class="line">update 表 set 郭襄的余额=1500 where name=&#x27;郭襄&#x27; </span><br><span class="line">结束事务的语句;</span><br></pre></td></tr></table></figure>

<ul>
<li>具体步骤</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">步骤1：开启事务</span><br><span class="line">set autocommit=0;</span><br><span class="line">start transaction;可选的</span><br><span class="line"></span><br><span class="line">步骤2：编写事务中的sql语句(select insert update delete)</span><br><span class="line">语句1;</span><br><span class="line">语句2;</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">步骤3：结束事务</span><br><span class="line">commit;提交事务</span><br><span class="line">rollback;回滚事务</span><br></pre></td></tr></table></figure>

<ul>
<li>案例</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">SHOW VARIABLES LIKE &#x27;autocommit&#x27;;</span><br><span class="line">SHOW ENGINES;</span><br><span class="line"></span><br><span class="line">#1.演示事务的使用步骤</span><br><span class="line">DROP TABLE IF EXISTS account;</span><br><span class="line">CREATE TABLE account(</span><br><span class="line">	id INT PRIMARY KEY AUTO_INCREMENT,</span><br><span class="line">	username VARCHAR(20),</span><br><span class="line">	balance DOUBLE</span><br><span class="line">);</span><br><span class="line">INSERT INTO account(username,balance)</span><br><span class="line">VALUES(&#x27;张无忌&#x27;,1000),(&#x27;赵敏&#x27;,1000);</span><br><span class="line"></span><br><span class="line">#开启事务</span><br><span class="line">SET autocommit=0;</span><br><span class="line">START TRANSACTION;</span><br><span class="line">#编写一组事务的语句</span><br><span class="line">UPDATE account SET balance = 1000 WHERE username=&#x27;张无忌&#x27;;</span><br><span class="line">UPDATE account SET balance = 1000 WHERE username=&#x27;赵敏&#x27;;</span><br><span class="line"></span><br><span class="line">#结束事务</span><br><span class="line">ROLLBACK;</span><br><span class="line">#commit;</span><br><span class="line"></span><br><span class="line">SELECT * FROM account;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="10-2-并发事务"><a href="#10-2-并发事务" class="headerlink" title="10.2 并发事务"></a>10.2 <strong>并发事务</strong></h2><p>1、事务的并发问题是如何发生的？</p>
<p>多个事务同时操作 同一个数据库的相同数据时</p>
<p>2、并发问题都有哪些？</p>
<ul>
<li><p>对于同时运行的多个事务, 当这些事务访问数据库中相同的数据时, 如果没有采取必要的隔离机制, 就会导致各种并发问题：</p>
</li>
<li><p>脏读：一个事务读取了其他事务还没有提交的数据，读到的是其他事务“更新”的数据；<br>不可重复读：一个事务多次读取，结果不一样；</p>
</li>
<li><p>幻读：一个事务读取了其他事务还没有提交的数据，只是读到的是 其他事务“插入”的数据。</p>
</li>
<li><p>数据库事务的隔离性: 数据库系统必须具有隔离并发运行各个事务的能力, 使它们不会相互影响, 避免各种并发问题.</p>
</li>
</ul>
<p>一个事务与其他事务隔离的程度称为隔离级别. 数据库规定了多种事务隔离级别, 不同隔离级别对应不同的干扰程度, 隔离级别越高, 数据一致性就越好, 但并发性越弱</p>
<p>3、如何解决并发问题？</p>
<p>通过设置隔离级别来解决并发问题<br>4、隔离级别</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">							脏读			不可重复读		     幻读</span><br><span class="line">read uncommitted:读未提交     ×              ×              ×       </span><br><span class="line">read committed：读已提交      √              ×              ×</span><br><span class="line">repeatable read：可重复读     √              √              ×</span><br><span class="line">serializable：串行化         √             √              √</span><br></pre></td></tr></table></figure>

<ul>
<li>Oracle 支持的2 种事务隔离级别：READ COMMITED, SERIALIZABLE。Oracle 默认的事务隔离级别为: READ COMMITED</li>
<li>Mysql 支持4 种事务隔离级别. Mysql 默认的事务隔离级别为: REPEATABLE READ</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">查看隔离级别</span><br><span class="line">select @@tx_isolation;</span><br><span class="line">设置隔离级别</span><br><span class="line">set session|global transaction isolation level 隔离级别;</span><br><span class="line"></span><br><span class="line">#2.演示事务对于delete和truncate的处理的区别</span><br><span class="line">SET autocommit=0;</span><br><span class="line">START TRANSACTION;</span><br><span class="line"></span><br><span class="line">DELETE FROM account;</span><br><span class="line">ROLLBACK;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="10-3-回滚点用法"><a href="#10-3-回滚点用法" class="headerlink" title="10.3 回滚点用法"></a>10.3 回滚点用法</h2><ul>
<li>savepoint 节点名;设置保存点</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">#3.演示savepoint 的使用</span><br><span class="line">SET autocommit=0;</span><br><span class="line"></span><br><span class="line">START TRANSACTION;</span><br><span class="line">DELETE FROM account WHERE id=25;</span><br><span class="line">SAVEPOINT a;#设置保存点</span><br><span class="line">DELETE FROM account WHERE id=28;</span><br><span class="line">ROLLBACK TO a;#回滚到保存点</span><br><span class="line"></span><br><span class="line">SELECT * FROM account;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h1 id="十一-视图"><a href="#十一-视图" class="headerlink" title="十一. 视图"></a>十一. 视图</h1><ul>
<li>视图：虚拟表,和普通表一样使用。mysql5.1版本出现的新特性，是通过表动态生成的数据。</li>
<li>应用场景<ul>
<li>多个地方用到同样的查询结果</li>
<li>该查询结果使用的sql语句较复杂</li>
</ul>
</li>
<li>案例</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">SELECT stuname,majorname FROM stuinfo s</span><br><span class="line">INNER JOIN major m ON s.`majorid`= m.`id`</span><br><span class="line">WHERE s.`stuname` LIKE &#x27;张%&#x27;;</span><br><span class="line"></span><br><span class="line">CREATE VIEW v1 AS</span><br><span class="line">SELECT stuname,majorname</span><br><span class="line">FROM stuinfo s</span><br><span class="line">INNER JOIN major m ON s.`majorid`= m.`id`;</span><br><span class="line"></span><br><span class="line">SELECT * FROM v1 WHERE stuname LIKE &#x27;张%&#x27;;</span><br></pre></td></tr></table></figure>



<h2 id="11-1-视图的创建"><a href="#11-1-视图的创建" class="headerlink" title="11.1 视图的创建"></a>11.1 <strong>视图的创建</strong></h2><ul>
<li>语法：create view 视图名 as 查询语句;</li>
<li>案例</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">USE myemployees;</span><br><span class="line"></span><br><span class="line">#1.查询姓名中包含a字符的员工名、部门名和工种信息</span><br><span class="line">    #①创建</span><br><span class="line">    CREATE VIEW myv1 AS</span><br><span class="line">    SELECT last_name,department_name,job_title</span><br><span class="line">    FROM employees e</span><br><span class="line">    JOIN departments d ON e.department_id  = d.department_id</span><br><span class="line">    JOIN jobs j ON j.job_id  = e.job_id;</span><br><span class="line"></span><br><span class="line">    #②使用</span><br><span class="line">    SELECT * FROM myv1 WHERE last_name LIKE &#x27;%a%&#x27;;</span><br><span class="line"></span><br><span class="line">#2.查询各部门的平均工资级别</span><br><span class="line">    #①创建视图查看每个部门的平均工资</span><br><span class="line">    CREATE VIEW myv2 AS</span><br><span class="line">    SELECT AVG(salary) ag,department_id</span><br><span class="line">    FROM employees GROUP BY department_id;</span><br><span class="line"></span><br><span class="line">    #②使用</span><br><span class="line">    SELECT myv2.`ag`,g.grade_level FROM myv2</span><br><span class="line">    JOIN job_grades g</span><br><span class="line">    ON myv2.`ag` BETWEEN g.`lowest_sal` AND g.`highest_sal`;</span><br><span class="line"></span><br><span class="line">#3.查询平均工资最低的部门信息</span><br><span class="line">SELECT * FROM myv2 ORDER BY ag LIMIT 1;</span><br><span class="line"></span><br><span class="line">#4.查询平均工资最低的部门名和工资</span><br><span class="line">    CREATE VIEW myv3 AS</span><br><span class="line">    SELECT * FROM myv2 ORDER BY ag LIMIT 1;</span><br><span class="line"></span><br><span class="line">    SELECT d.*,m.ag FROM myv3 m</span><br><span class="line">    JOIN departments d</span><br><span class="line">    ON m.`department_id`=d.`department_id`;</span><br></pre></td></tr></table></figure>



<ul>
<li>视图的好处<ul>
<li>重用sql语句</li>
<li>简化复杂的sql操作，不必知道它的查询细节</li>
<li>保护数据，提高安全性</li>
</ul>
</li>
</ul>
<h2 id="11-2-视图的修改"><a href="#11-2-视图的修改" class="headerlink" title="11.2 视图的修改"></a>11.2 <strong>视图的修改</strong></h2><ul>
<li>语法</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">方式一：</span><br><span class="line">create or replace view 视图名 as 查询语句;</span><br><span class="line">方式二：</span><br><span class="line">alter view 视图名 as 查询语句;</span><br></pre></td></tr></table></figure>

<ul>
<li>案例</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">#方式一：</span><br><span class="line">/*</span><br><span class="line">create or replace view  视图名 as 查询语句;</span><br><span class="line">*/</span><br><span class="line">SELECT * FROM myv3 </span><br><span class="line"></span><br><span class="line">CREATE OR REPLACE VIEW myv3 AS</span><br><span class="line">SELECT AVG(salary),job_id</span><br><span class="line">FROM employees GROUP BY job_id;</span><br><span class="line"></span><br><span class="line">#方式二：</span><br><span class="line">/*</span><br><span class="line">语法：</span><br><span class="line">alter view 视图名 as 查询语句;</span><br><span class="line">*/</span><br><span class="line">ALTER VIEW myv3 AS SELECT * FROM employees;</span><br></pre></td></tr></table></figure>



<h2 id="11-3-视图的删除"><a href="#11-3-视图的删除" class="headerlink" title="11.3 视图的删除"></a>11.3 视图的删除</h2><ul>
<li>用户可以一次删除一个或者多个视图，前提是必须有该视图的drop权限。</li>
<li>语法：drop view 视图1，视图2,…;</li>
<li>案例</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line">语法：drop view 视图名,视图名,...;</span><br><span class="line">*/</span><br><span class="line">DROP VIEW emp_v1,emp_v2,myv3;</span><br></pre></td></tr></table></figure>



<h2 id="11-4-视图的查看"><a href="#11-4-视图的查看" class="headerlink" title="11.4 视图的查看"></a>11.4 <strong>视图的查看</strong></h2><ul>
<li>语法</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">desc 视图名;</span><br><span class="line">show create view 视图名;</span><br></pre></td></tr></table></figure>

<ul>
<li>案例</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">DESC myv3;</span><br><span class="line">SHOW CREATE VIEW myv3;</span><br></pre></td></tr></table></figure>

<h2 id="11-5-视图的更新"><a href="#11-5-视图的更新" class="headerlink" title="11.5 视图的更新"></a>11.5 <strong>视图的更新</strong></h2><ul>
<li>插入：insert</li>
<li>修改：update</li>
<li>删除：delete</li>
<li>查看：select</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">CREATE OR REPLACE VIEW myv1</span><br><span class="line">AS</span><br><span class="line">SELECT last_name,email,salary*12*(1+IFNULL(commission_pct,0)) &quot;annual salary&quot;</span><br><span class="line">FROM employees;</span><br><span class="line"></span><br><span class="line">CREATE OR REPLACE VIEW myv1</span><br><span class="line">AS</span><br><span class="line">SELECT last_name,email</span><br><span class="line">FROM employees;</span><br><span class="line"></span><br><span class="line">SELECT * FROM myv1;</span><br><span class="line">SELECT * FROM employees;</span><br><span class="line">#1.插入</span><br><span class="line"></span><br><span class="line">INSERT INTO myv1 VALUES(&#x27;张飞&#x27;,&#x27;zf@qq.com&#x27;);</span><br><span class="line"></span><br><span class="line">#2.修改</span><br><span class="line">UPDATE myv1 SET last_name = &#x27;张无忌&#x27; WHERE last_name=&#x27;张飞&#x27;;</span><br><span class="line"></span><br><span class="line">#3.删除</span><br><span class="line">DELETE FROM myv1 WHERE last_name = &#x27;张无忌&#x27;;</span><br></pre></td></tr></table></figure>



<p>注意：视图一般用于查询的，而不是更新的，所以具备以下特点的视图都不允许更新</p>
<ul>
<li>包含以下关键字的sql语句：分组函数、distinct、group by、having、union或者union all</li>
<li>常量视图</li>
<li>Select中包含子查询</li>
<li>join</li>
<li>from一个不能更新的视图</li>
<li>where子句的子查询引用了from子句中的表</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line">#具备以下特点的视图不允许更新</span><br><span class="line">#①包含以下关键字的sql语句：分组函数、distinct、group  by、having、union或者union all</span><br><span class="line"></span><br><span class="line">CREATE OR REPLACE VIEW myv1</span><br><span class="line">AS</span><br><span class="line">SELECT MAX(salary) m,department_id</span><br><span class="line">FROM employees</span><br><span class="line">GROUP BY department_id;</span><br><span class="line"></span><br><span class="line">SELECT * FROM myv1;</span><br><span class="line"></span><br><span class="line">#更新</span><br><span class="line">UPDATE myv1 SET m=9000 WHERE department_id=10;</span><br><span class="line"></span><br><span class="line">#②常量视图</span><br><span class="line">CREATE OR REPLACE VIEW myv2</span><br><span class="line">AS</span><br><span class="line">SELECT &#x27;john&#x27; NAME;</span><br><span class="line"></span><br><span class="line">SELECT * FROM myv2;</span><br><span class="line"></span><br><span class="line">#更新</span><br><span class="line">UPDATE myv2 SET NAME=&#x27;lucy&#x27;;</span><br><span class="line"></span><br><span class="line">#③Select中包含子查询</span><br><span class="line"></span><br><span class="line">CREATE OR REPLACE VIEW myv3</span><br><span class="line">AS</span><br><span class="line">SELECT department_id,(SELECT MAX(salary) FROM employees) 最高工资</span><br><span class="line">FROM departments;</span><br><span class="line"></span><br><span class="line">#更新</span><br><span class="line">SELECT * FROM myv3;</span><br><span class="line">UPDATE myv3 SET 最高工资=100000;</span><br><span class="line"></span><br><span class="line">#④join</span><br><span class="line">CREATE OR REPLACE VIEW myv4</span><br><span class="line">AS</span><br><span class="line">SELECT last_name,department_name</span><br><span class="line">FROM employees e</span><br><span class="line">JOIN departments d</span><br><span class="line">ON e.department_id  = d.department_id;</span><br><span class="line"></span><br><span class="line">#更新</span><br><span class="line">SELECT * FROM myv4;</span><br><span class="line">UPDATE myv4 SET last_name  = &#x27;张飞&#x27; WHERE last_name=&#x27;Whalen&#x27;;</span><br><span class="line">INSERT INTO myv4 VALUES(&#x27;陈真&#x27;,&#x27;xxxx&#x27;);</span><br><span class="line"></span><br><span class="line">#⑤from一个不能更新的视图</span><br><span class="line">CREATE OR REPLACE VIEW myv5</span><br><span class="line">AS SELECT * FROM myv3;</span><br><span class="line"></span><br><span class="line">#更新</span><br><span class="line">SELECT * FROM myv5;</span><br><span class="line">UPDATE myv5 SET 最高工资=10000 WHERE department_id=60;</span><br><span class="line"></span><br><span class="line">#⑥where子句的子查询引用了from子句中的表</span><br><span class="line"></span><br><span class="line">CREATE OR REPLACE VIEW myv6</span><br><span class="line">AS</span><br><span class="line">SELECT last_name,email,salary</span><br><span class="line">FROM employees</span><br><span class="line">WHERE employee_id IN(</span><br><span class="line">	SELECT  manager_id</span><br><span class="line">	FROM employees</span><br><span class="line">	WHERE manager_id IS NOT NULL</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">#更新</span><br><span class="line">SELECT * FROM myv6;</span><br><span class="line">UPDATE myv6 SET salary=10000 WHERE last_name = &#x27;k_ing&#x27;;</span><br></pre></td></tr></table></figure>



<p><strong>视图和表的对比</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">		 关键字	  是否占用物理空间			    使用</span><br><span class="line">视图		view		占用较小，只保存sql逻辑	  一般用于查询</span><br><span class="line">表	    table		保存实际的数据			     增删改查</span><br></pre></td></tr></table></figure>





<h1 id="十二-变量"><a href="#十二-变量" class="headerlink" title="十二.变量"></a>十二.变量</h1><h2 id="12-1-系统变量"><a href="#12-1-系统变量" class="headerlink" title="12.1 系统变量"></a>12.1 系统变量</h2><ul>
<li>系统变量：<ul>
<li>全局变量</li>
<li>会话变量</li>
</ul>
</li>
<li>自定义变量：<ul>
<li>用户变量</li>
<li>局部变量</li>
</ul>
</li>
</ul>
<p>系统变量的介绍和语法</p>
<ul>
<li><p>说明：变量由系统定义，不是用户定义，属于服务器层面</p>
</li>
<li><p>注意：全局变量需要添加global关键字，会话变量需要添加session关键字，如果不写，默认会话级别</p>
</li>
<li><p>使用步骤：</p>
<ul>
<li>查看所有系统变量</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show global|【session】variables;</span><br></pre></td></tr></table></figure>

<ul>
<li>查看满足条件的部分系统变量</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show global|【session】 variables like &#x27;%char%&#x27;;</span><br></pre></td></tr></table></figure>

<ul>
<li>查看指定的系统变量的值</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select @@global|【session】系统变量名;</span><br></pre></td></tr></table></figure>

<ul>
<li>为某个系统变量赋值</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">方式一：</span><br><span class="line">set global|【session】系统变量名=值;</span><br><span class="line">方式二：</span><br><span class="line">set @@global|【session】系统变量名=值;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="12-1-1-全局变量"><a href="#12-1-1-全局变量" class="headerlink" title="12.1.1 全局变量"></a>12.1.1 全局变量</h3><ul>
<li>作用域：针对于所有会话（连接）有效，但不能跨重启</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">#①查看所有全局变量</span><br><span class="line">SHOW GLOBAL VARIABLES;</span><br><span class="line">#②查看满足条件的部分系统变量</span><br><span class="line">SHOW GLOBAL VARIABLES LIKE &#x27;%char%&#x27;;</span><br><span class="line">#③查看指定的系统变量的值</span><br><span class="line">SELECT @@global.autocommit;</span><br><span class="line">#④为某个系统变量赋值</span><br><span class="line">SET @@global.autocommit=0;</span><br><span class="line">SET GLOBAL autocommit=0;</span><br></pre></td></tr></table></figure>

<h3 id="12-1-2-会话变量"><a href="#12-1-2-会话变量" class="headerlink" title="12.1.2 会话变量"></a>12.1.2 会话变量</h3><ul>
<li>作用域：针对于当前会话（连接）有效*</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">#①查看所有会话变量</span><br><span class="line">SHOW SESSION VARIABLES;</span><br><span class="line">#②查看满足条件的部分会话变量</span><br><span class="line">SHOW SESSION VARIABLES LIKE &#x27;%char%&#x27;;</span><br><span class="line">#③查看指定的会话变量的值</span><br><span class="line">SELECT @@autocommit;</span><br><span class="line">SELECT @@session.tx_isolation;</span><br><span class="line">#④为某个会话变量赋值</span><br><span class="line">SET @@session.tx_isolation=&#x27;read-uncommitted&#x27;;</span><br><span class="line">SET SESSION tx_isolation=&#x27;read-committed&#x27;;</span><br></pre></td></tr></table></figure>

<h2 id="12-2-自定义变量"><a href="#12-2-自定义变量" class="headerlink" title="12.2 自定义变量"></a>12.2 自定义变量</h2><h3 id="12-2-1用户变量"><a href="#12-2-1用户变量" class="headerlink" title="12.2.1用户变量"></a>12.2.1用户变量</h3><ul>
<li><p>说明：变量由用户自定义，而不是系统提供的 </p>
</li>
<li><p>使用步骤： 1、声明 2、赋值 3、使用（查看、比较、运算等）</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">#赋值操作符：=或:=</span><br><span class="line">#①声明并初始化</span><br><span class="line">SET @变量名=值;</span><br><span class="line">SET @变量名:=值;</span><br><span class="line">SELECT @变量名:=值;</span><br><span class="line"></span><br><span class="line">#②赋值（更新变量的值）</span><br><span class="line">#方式一：</span><br><span class="line">	SET @变量名=值;</span><br><span class="line">	SET @变量名:=值;</span><br><span class="line">	SELECT @变量名:=值;</span><br><span class="line">#方式二：</span><br><span class="line">	SELECT 字段 INTO @变量名</span><br><span class="line">	FROM 表;</span><br><span class="line">#③使用（查看变量的值）</span><br><span class="line">SELECT @变量名;</span><br></pre></td></tr></table></figure>



<h3 id="12-2-2-局部变量"><a href="#12-2-2-局部变量" class="headerlink" title="12.2.2 局部变量"></a>12.2.2 局部变量</h3><ul>
<li>作用域：仅仅在定义它的begin end块中有效 应用在 begin end中的第一句话</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">#①声明</span><br><span class="line">DECLARE 变量名 类型;</span><br><span class="line">DECLARE 变量名 类型 【DEFAULT 值】;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#②赋值（更新变量的值）</span><br><span class="line"></span><br><span class="line">#方式一：</span><br><span class="line">	SET 局部变量名=值;</span><br><span class="line">	SET 局部变量名:=值;</span><br><span class="line">	SELECT 局部变量名:=值;</span><br><span class="line">#方式二：</span><br><span class="line">	SELECT 字段 INTO 具备变量名</span><br><span class="line">	FROM 表;</span><br><span class="line">#③使用（查看变量的值）</span><br><span class="line">SELECT 局部变量名;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#案例：声明两个变量，求和并打印</span><br><span class="line">#用户变量</span><br><span class="line">SET @m=1;</span><br><span class="line">SET @n=1;</span><br><span class="line">SET @sum=@m+@n;</span><br><span class="line">SELECT @sum;</span><br><span class="line"></span><br><span class="line">#局部变量</span><br><span class="line">DECLARE m INT DEFAULT 1;</span><br><span class="line">DECLARE n INT DEFAULT 1;</span><br><span class="line">DECLARE SUM INT;</span><br><span class="line">SET SUM=m+n;</span><br><span class="line">SELECT SUM;</span><br></pre></td></tr></table></figure>



<p>用户变量和局部变量的对比</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">		    作用域			    定义位置		         语法</span><br><span class="line">用户变量	当前会话		    会话的任何地方		  加@符号，不用指定类型</span><br><span class="line">局部变量	定义它的BEGIN END中 	BEGIN END的第一句话	 一般不用加@,需要指定类型</span><br></pre></td></tr></table></figure>



<h1 id="十三-存储过程和函数"><a href="#十三-存储过程和函数" class="headerlink" title="十三.存储过程和函数"></a>十三.存储过程和函数</h1><h2 id="13-1-存储过程"><a href="#13-1-存储过程" class="headerlink" title="13.1 存储过程"></a>13.1 存储过程</h2><ul>
<li>说明：都类似于java中的方法，将一组完成特定功能的逻辑语句包装起来，对外暴露名字</li>
<li>好处<ul>
<li>1、提高代码的重用性</li>
<li>2、简化操作</li>
<li>3、减少了编译次数并且减少了和数据库服务器的连接次数，提高了效率</li>
</ul>
</li>
</ul>
<ul>
<li>含义：一组预先编译好的SQL语句的集合，理解成批处理语句</li>
</ul>
<ol>
<li>创建</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">CREATE PROCEDURE 存储过程名(参数列表)</span><br><span class="line">BEGIN</span><br><span class="line">	存储过程体（一组合法的SQL语句）</span><br><span class="line">END</span><br><span class="line"></span><br><span class="line">注意：</span><br><span class="line">1、参数列表包含三部分</span><br><span class="line">参数模式  参数名  参数类型</span><br><span class="line">举例：</span><br><span class="line">in stuname varchar(20)</span><br><span class="line"></span><br><span class="line">参数模式：</span><br><span class="line">in：该参数可以作为输入，也就是该参数需要调用方传入值</span><br><span class="line">out：该参数可以作为输出，也就是该参数可以作为返回值</span><br><span class="line">inout：该参数既可以作为输入又可以作为输出，也就是该参数既需要传入值，又可以返回值</span><br><span class="line"></span><br><span class="line">2、如果存储过程体仅仅只有一句话，begin end可以省略</span><br><span class="line">存储过程体中的每条sql语句的结尾要求必须加分号。</span><br><span class="line">存储过程的结尾可以使用 delimiter 重新设置</span><br><span class="line">语法：</span><br><span class="line">delimiter 结束标记</span><br><span class="line">案例：</span><br><span class="line">delimiter $</span><br></pre></td></tr></table></figure>

<ol start="2">
<li><p>调用</p>
<ul>
<li>语法</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">CALL 存储过程名(实参列表);</span><br><span class="line"></span><br><span class="line">举例：</span><br><span class="line">调用in模式的参数：call sp1（‘值’）;</span><br><span class="line">调用out模式的参数：set @name; call sp1(@name);select @name;</span><br><span class="line">调用inout模式的参数：set @name=值; call sp1(@name); select @name;</span><br></pre></td></tr></table></figure>

<ul>
<li>案例</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><span class="line">#1.空参列表</span><br><span class="line">#案例：插入到admin表中五条记录</span><br><span class="line"></span><br><span class="line">SELECT * FROM admin;</span><br><span class="line"></span><br><span class="line">DELIMITER $</span><br><span class="line">CREATE PROCEDURE myp1()</span><br><span class="line">BEGIN</span><br><span class="line">	INSERT INTO admin(username,`password`) </span><br><span class="line">	VALUES(&#x27;john1&#x27;,&#x27;0000&#x27;),(&#x27;lily&#x27;,&#x27;0000&#x27;),(&#x27;rose&#x27;,&#x27;0000&#x27;),(&#x27;jack&#x27;,&#x27;0000&#x27;),(&#x27;tom&#x27;,&#x27;0000&#x27;);</span><br><span class="line">END $</span><br><span class="line"></span><br><span class="line">#调用</span><br><span class="line">CALL myp1()$</span><br><span class="line"></span><br><span class="line">#2.创建带in模式参数的存储过程</span><br><span class="line"></span><br><span class="line">#案例1：创建存储过程实现 根据女神名，查询对应的男神信息</span><br><span class="line"></span><br><span class="line">CREATE PROCEDURE myp2(IN beautyName VARCHAR(20))</span><br><span class="line">BEGIN</span><br><span class="line">	SELECT bo.*</span><br><span class="line">	FROM boys bo</span><br><span class="line">	RIGHT JOIN beauty b ON bo.id = b.boyfriend_id</span><br><span class="line">	WHERE b.name=beautyName;</span><br><span class="line">END $</span><br><span class="line"></span><br><span class="line">#调用</span><br><span class="line">CALL myp2(&#x27;柳岩&#x27;)$</span><br><span class="line"></span><br><span class="line">#案例2 ：创建存储过程实现，用户是否登录成功</span><br><span class="line"></span><br><span class="line">CREATE PROCEDURE myp3(IN username VARCHAR(20),IN PASSWORD VARCHAR(20))</span><br><span class="line">BEGIN</span><br><span class="line">	DECLARE result VARBINARY(20) DEFAULT &#x27;&#x27;;#声明并初始化</span><br><span class="line">	</span><br><span class="line">	SELECT COUNT(*) INTO result#赋值</span><br><span class="line">	FROM admin</span><br><span class="line">	WHERE admin.username = username</span><br><span class="line">	AND admin.password = PASSWORD;</span><br><span class="line">	</span><br><span class="line">	SELECT result;#使用</span><br><span class="line">END $</span><br><span class="line"></span><br><span class="line">CALL myp3(&#x27;张飞&#x27;,&#x27;8888&#x27;)$</span><br><span class="line"></span><br><span class="line">CREATE PROCEDURE myp4(IN username VARCHAR(20),IN PASSWORD VARCHAR(20))</span><br><span class="line">BEGIN</span><br><span class="line">	DECLARE result INT DEFAULT 0;#声明并初始化</span><br><span class="line">	</span><br><span class="line">	SELECT COUNT(*) INTO result#赋值</span><br><span class="line">	FROM admin</span><br><span class="line">	WHERE admin.username = username</span><br><span class="line">	AND admin.password = PASSWORD;</span><br><span class="line">	</span><br><span class="line">	SELECT IF(result&gt;0,&#x27;成功&#x27;,&#x27;失败&#x27;);#使用</span><br><span class="line">END $</span><br><span class="line"></span><br><span class="line">#调用</span><br><span class="line">CALL myp4(&#x27;张飞&#x27;,&#x27;8888&#x27;)$</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#3.创建out 模式参数的存储过程</span><br><span class="line">#案例1：根据输入的女神名，返回对应的男神名</span><br><span class="line"></span><br><span class="line">CREATE PROCEDURE myp6(IN beautyName VARCHAR(20),OUT boyName VARCHAR(20))</span><br><span class="line">BEGIN</span><br><span class="line">	SELECT bo.boyname INTO boyname</span><br><span class="line">	FROM boys bo</span><br><span class="line">	RIGHT JOIN</span><br><span class="line">	beauty b ON b.boyfriend_id = bo.id</span><br><span class="line">	WHERE b.name=beautyName ;</span><br><span class="line">	</span><br><span class="line">END $</span><br><span class="line"></span><br><span class="line">#案例2：根据输入的女神名，返回对应的男神名和魅力值</span><br><span class="line"></span><br><span class="line">CREATE PROCEDURE myp7(IN beautyName VARCHAR(20),OUT boyName VARCHAR(20),OUT usercp INT) </span><br><span class="line">BEGIN</span><br><span class="line">	SELECT boys.boyname ,boys.usercp INTO boyname,usercp</span><br><span class="line">	FROM boys </span><br><span class="line">	RIGHT JOIN</span><br><span class="line">	beauty b ON b.boyfriend_id = boys.id</span><br><span class="line">	WHERE b.name=beautyName ;</span><br><span class="line">	</span><br><span class="line">END $</span><br><span class="line"></span><br><span class="line">#调用</span><br><span class="line">CALL myp7(&#x27;小昭&#x27;,@name,@cp)$</span><br><span class="line">SELECT @name,@cp$</span><br><span class="line"></span><br><span class="line">#4.创建带inout模式参数的存储过程</span><br><span class="line">#案例1：传入a和b两个值，最终a和b都翻倍并返回</span><br><span class="line"></span><br><span class="line">CREATE PROCEDURE myp8(INOUT a INT ,INOUT b INT)</span><br><span class="line">BEGIN</span><br><span class="line">	SET a=a*2;</span><br><span class="line">	SET b=b*2;</span><br><span class="line">END $</span><br><span class="line"></span><br><span class="line">#调用</span><br><span class="line">SET @m=10$</span><br><span class="line">SET @n=20$</span><br><span class="line">CALL myp8(@m,@n)$</span><br><span class="line">SELECT @m,@n$</span><br></pre></td></tr></table></figure></li>
<li><p>查看</p>
</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">show create procedure 存储过程名;</span><br><span class="line"></span><br><span class="line">案例</span><br><span class="line">DESC myp2;×</span><br><span class="line">SHOW CREATE PROCEDURE  myp2;</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>删除</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">drop procedure 存储过程名;</span><br><span class="line"></span><br><span class="line">案例:</span><br><span class="line">DROP PROCEDURE p1;</span><br><span class="line">DROP PROCEDURE p2,p3;#×</span><br></pre></td></tr></table></figure>



<h2 id="13-2-函数"><a href="#13-2-函数" class="headerlink" title="13.2 函数"></a>13.2 函数</h2><ul>
<li>含义：一组预先编译好的SQL语句的集合，理解成批处理语句</li>
<li>区别：<ul>
<li>存储过程：可以有0个返回，也可以有多个返回，适合做批量插入、批量更新；</li>
<li>函数：有且仅有1 个返回，适合做处理数据后返回一个结果。</li>
</ul>
</li>
</ul>
<ol>
<li>创建</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">CREATE FUNCTION 函数名(参数列表) RETURNS 返回类型</span><br><span class="line">BEGIN</span><br><span class="line">	函数体</span><br><span class="line">END</span><br><span class="line"></span><br><span class="line">/*</span><br><span class="line">注意：</span><br><span class="line">1.参数列表 包含两部分：</span><br><span class="line">参数名 参数类型</span><br><span class="line">2.函数体：肯定会有return语句，如果没有会报错</span><br><span class="line">如果return语句没有放在函数体的最后也不报错，但不建议</span><br><span class="line"></span><br><span class="line">return 值;</span><br><span class="line">3.函数体中仅有一句话，则可以省略begin end</span><br><span class="line">4.使用 delimiter语句设置结束标记</span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line">DELIMITER $</span><br></pre></td></tr></table></figure>



<p>二、调用</p>
<ul>
<li>SELECT 函数名(参数列表);</li>
<li>案例</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">use employees $</span><br><span class="line">#1.无参有返回</span><br><span class="line">#案例：返回公司的员工个数</span><br><span class="line">CREATE FUNCTION myf1() RETURNS INT</span><br><span class="line">BEGIN	</span><br><span class="line">	DECLARE c INT DEFAULT 0;</span><br><span class="line">	SELECT COUNT(*) INTO c</span><br><span class="line">	FROM employees;</span><br><span class="line">	RETURN c;</span><br><span class="line">END $</span><br><span class="line"></span><br><span class="line">SELECT myf1()$</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#2.有参有返回</span><br><span class="line">#案例1：根据员工名，返回它的工资</span><br><span class="line"></span><br><span class="line">CREATE FUNCTION myf2(empName VARCHAR(20)) RETURNS DOUBLE</span><br><span class="line">BEGIN</span><br><span class="line">	SET @sal=0;#定义用户变量 </span><br><span class="line">	SELECT salary INTO @sal   #赋值</span><br><span class="line">	FROM employees</span><br><span class="line">	WHERE last_name = empName;</span><br><span class="line">	</span><br><span class="line">	RETURN @sal;</span><br><span class="line">END $</span><br><span class="line"></span><br><span class="line">SELECT myf2(&#x27;kochhor&#x27;) $</span><br><span class="line"></span><br><span class="line">#案例2：根据部门名，返回该部门的平均工资</span><br><span class="line"></span><br><span class="line">CREATE FUNCTION myf3(deptName VARCHAR(20)) RETURNS DOUBLE</span><br><span class="line">BEGIN</span><br><span class="line">	DECLARE sal DOUBLE ;</span><br><span class="line">	SELECT AVG(salary) INTO sal</span><br><span class="line">	FROM employees e</span><br><span class="line">	JOIN departments d ON e.department_id = d.department_id</span><br><span class="line">	WHERE d.department_name=deptName;</span><br><span class="line">	RETURN sal;</span><br><span class="line">END $</span><br><span class="line"></span><br><span class="line">SELECT myf3(&#x27;IT&#x27;)$</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>查看</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">show create function 函数名;</span><br><span class="line"></span><br><span class="line">SHOW CREATE FUNCTION myf3 $</span><br></pre></td></tr></table></figure>



<ol start="4">
<li>删除</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">drop function 函数名;</span><br><span class="line"></span><br><span class="line">DROP FUNCTION myf3 $</span><br></pre></td></tr></table></figure>



<h1 id="十四-流程控制结构"><a href="#十四-流程控制结构" class="headerlink" title="十四. 流程控制结构"></a>十四. 流程控制结构</h1><ul>
<li>顺序结构：程序从上往下依次执行</li>
<li>分支结构：程序按条件进行选择执行，从两条或多条路径中选择一条执行</li>
<li>循环结构：程序满足一定条件下，重复执行一组语句</li>
</ul>
<h2 id="14-1-分支结构"><a href="#14-1-分支结构" class="headerlink" title="14.1 分支结构"></a>14.1 分支结构</h2><ol>
<li>if函数</li>
</ol>
<ul>
<li>语法：if(条件,值1，值2)；</li>
<li>功能：实现双分支；</li>
<li>应用：可以作为表达式放在任何位置</li>
</ul>
<ol start="2">
<li>case结构</li>
</ol>
<ul>
<li>语法</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">情况1：类似于switch，一般用于实现等值判断。</span><br><span class="line">语法：</span><br><span class="line">case 变量或表达式</span><br><span class="line">when 值1 then 语句1;</span><br><span class="line">when 值2 then 语句2;</span><br><span class="line">...</span><br><span class="line">else 语句n;</span><br><span class="line">end </span><br><span class="line"></span><br><span class="line">情况2：类似于多重if语句，一般用于实现区间判断。</span><br><span class="line">语法：</span><br><span class="line">case </span><br><span class="line">when 条件1 then 语句1;</span><br><span class="line">when 条件2 then 语句2;</span><br><span class="line">...</span><br><span class="line">else 语句n;</span><br><span class="line">end </span><br></pre></td></tr></table></figure>

<ul>
<li><p>特点</p>
<ul>
<li><p>可以作为表达式，嵌套在其他语句中使用。</p>
</li>
<li><p>可以放在任何地方，BEGIN END 中或BEGIN END 的外面可以作为独立的语句去使用，只能放在BEGIN END中如果wHEN中的值满足或条件成立，则执行对应的THzN后面的语句，并且结束CASE如果都不满足，则执行E1SE中的语句或值。</p>
</li>
<li><p>ELSE可以省略，如果ELSE省略了，并且所有WHEN条件都不满足，则返回NULL。</p>
</li>
</ul>
</li>
<li><p>位置</p>
<ul>
<li>可以放在任何位置，</li>
<li>如果放在begin end 外面，作为表达式结合着其他语句使用</li>
<li>如果放在begin end 里面，一般作为独立的语句使用</li>
</ul>
</li>
<li><p>案例</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">#案例 </span><br><span class="line">#创建存储过程，根据传入的成绩，来显示等级，比如传入的成绩：90-100, 显示A，80-90，显示B，60-80，显示c，否则，显示D</span><br><span class="line"></span><br><span class="line">CREATE PROCEDURE test_case (IN score INT) </span><br><span class="line">BEGIN </span><br><span class="line">	CASE </span><br><span class="line">	WHEN score&gt;=90 AND score&lt;=100 THEN SELECT &#x27;A&#x27;; </span><br><span class="line">	WHEN score&gt;=80 THEN SELECT &#x27;B&#x27;;</span><br><span class="line">	WHEN score&gt;=60 THEN SELECT &#x27;C&#x27;; </span><br><span class="line">	ELSE SELECT &#x27;D&#x27;;</span><br><span class="line">	END CASE; </span><br><span class="line">END $</span><br><span class="line">CALL test_case(95)$</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<ol start="3">
<li>if结构 </li>
</ol>
<ul>
<li>语法</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">if 条件1 then 语句1;</span><br><span class="line">elseif 条件2 then 语句2;</span><br><span class="line">....</span><br><span class="line">else 语句n;</span><br><span class="line">end if;</span><br></pre></td></tr></table></figure>

<ul>
<li>功能：类似于多重if；只能应用在begin end 中</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">#案例1：创建函数，实现传入成绩，如果成绩&gt;90,返回A，如果成绩&gt;80,返回B，如果成绩&gt;60,返回C，否则返回D</span><br><span class="line"></span><br><span class="line">CREATE FUNCTION test_case(score FLOAT) RETURNS CHAR</span><br><span class="line">BEGIN </span><br><span class="line">	DECLARE ch CHAR DEFAULT &#x27;A&#x27;;</span><br><span class="line">	</span><br><span class="line">	CASE </span><br><span class="line">	WHEN score&gt;90 THEN SET ch=&#x27;A&#x27;;</span><br><span class="line">	WHEN score&gt;80 THEN SET ch=&#x27;B&#x27;;</span><br><span class="line">	WHEN score&gt;60 THEN SET ch=&#x27;C&#x27;;</span><br><span class="line">	ELSE SET ch=&#x27;D&#x27;;</span><br><span class="line">	END CASE;</span><br><span class="line">	</span><br><span class="line">	RETURN ch;</span><br><span class="line">END $</span><br><span class="line"></span><br><span class="line">SELECT test_case(56)$</span><br></pre></td></tr></table></figure>



<h2 id="14-2-循环结构"><a href="#14-2-循环结构" class="headerlink" title="14.2 循环结构"></a>14.2 循环结构</h2><ul>
<li>位置：只能放在begin end中</li>
<li>特点：都能实现循环结构</li>
<li>语法</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">1、while</span><br><span class="line">语法：</span><br><span class="line">【名称:】while 循环条件 do</span><br><span class="line">		循环体</span><br><span class="line">end while 【名称】;</span><br><span class="line">2、loop</span><br><span class="line">语法：</span><br><span class="line">【名称：】loop</span><br><span class="line">		循环体</span><br><span class="line">end loop 【名称】;</span><br><span class="line"></span><br><span class="line">3、repeat</span><br><span class="line">语法：</span><br><span class="line">【名称:】repeat</span><br><span class="line">		循环体</span><br><span class="line">until 结束条件 </span><br><span class="line">end repeat 【名称】;</span><br></pre></td></tr></table></figure>

<ul>
<li>对比</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">①这三种循环都可以省略名称，但如果循环中添加了循环控制语句（leave或iterate）则必须添加名称</span><br><span class="line">②</span><br><span class="line">loop 一般用于实现简单的死循环</span><br><span class="line">while 先判断后执行</span><br><span class="line">repeat 先执行后判断，无条件至少执行一次</span><br></pre></td></tr></table></figure>

<ul>
<li>案例</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line">#1.没有添加循环控制语句</span><br><span class="line">#案例：批量插入，根据次数插入到admin表中多条记录</span><br><span class="line">USE girls$</span><br><span class="line">DROP PROCEDURE pro_while1$</span><br><span class="line">CREATE PROCEDURE pro_while1(IN insertCount INT)</span><br><span class="line">BEGIN</span><br><span class="line">	DECLARE i INT DEFAULT 1;</span><br><span class="line">	WHILE i&lt;=insertCount DO</span><br><span class="line">		INSERT INTO admin(username,`password`) VALUES(CONCAT(&#x27;Rose&#x27;,i),&#x27;666&#x27;);</span><br><span class="line">		SET i=i+1;</span><br><span class="line">	END WHILE;</span><br><span class="line">	</span><br><span class="line">END $</span><br><span class="line"></span><br><span class="line">CALL pro_while1(158)$</span><br><span class="line"></span><br><span class="line">select * from admin $</span><br><span class="line">/*</span><br><span class="line">int i=1;</span><br><span class="line">while(i&lt;=insertcount)&#123;</span><br><span class="line">	//插入</span><br><span class="line">	i++;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line">#2.添加leave语句</span><br><span class="line">#案例：批量插入，根据次数插入到admin表中多条记录，如果次数&gt;20则停止</span><br><span class="line">TRUNCATE TABLE admin$</span><br><span class="line">DROP PROCEDURE test_while1$</span><br><span class="line">CREATE PROCEDURE test_while1(IN insertCount INT)</span><br><span class="line">BEGIN</span><br><span class="line">	DECLARE i INT DEFAULT 1;</span><br><span class="line">	a:WHILE i&lt;=insertCount DO</span><br><span class="line">		INSERT INTO admin(username,`password`) VALUES(CONCAT(&#x27;xiaohua&#x27;,i),&#x27;0000&#x27;);</span><br><span class="line">		IF i&gt;=20 THEN LEAVE a;</span><br><span class="line">		END IF;</span><br><span class="line">		SET i=i+1;</span><br><span class="line">	END WHILE a;</span><br><span class="line">END $</span><br><span class="line"></span><br><span class="line">CALL test_while1(100)$</span><br><span class="line"></span><br><span class="line">select * from admin $</span><br><span class="line"></span><br><span class="line">#3.添加iterate语句</span><br><span class="line">#案例：批量插入，根据次数插入到admin表中多条记录，只插入偶数次</span><br><span class="line">TRUNCATE TABLE admin$</span><br><span class="line">DROP PROCEDURE test_while1$</span><br><span class="line">CREATE PROCEDURE test_while1(IN insertCount INT)</span><br><span class="line">BEGIN</span><br><span class="line">	DECLARE i INT DEFAULT 0;</span><br><span class="line">	a:WHILE i&lt;=insertCount DO</span><br><span class="line">		SET i=i+1;</span><br><span class="line">		IF MOD(i,2)!=0 THEN ITERATE a;</span><br><span class="line">		END IF;</span><br><span class="line">		</span><br><span class="line">		INSERT INTO admin(username,`password`) VALUES(CONCAT(&#x27;xiaohua&#x27;,i),&#x27;0000&#x27;);</span><br><span class="line">		</span><br><span class="line">	END WHILE a;</span><br><span class="line">END $</span><br><span class="line"></span><br><span class="line">CALL test_while1(100)$</span><br><span class="line"></span><br><span class="line">/*</span><br><span class="line">int i=0;</span><br><span class="line">while(i&lt;=insertCount)&#123;</span><br><span class="line">	i++;</span><br><span class="line">	if(i%2==0)&#123;</span><br><span class="line">		continue;</span><br><span class="line">	&#125;</span><br><span class="line">	插入</span><br><span class="line">&#125;</span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line">select * from admin $</span><br></pre></td></tr></table></figure>



<p><strong>循环控制语句</strong></p>
<ul>
<li>leave：类似于break，用于跳出所在的循环</li>
<li>iterate：类似于continue，用于结束本次循环，继续下一次</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">#2.添加leave语句</span><br><span class="line"></span><br><span class="line">#案例：批量插入，根据次数插入到admin表中多条记录，如果次数&gt;20则停止</span><br><span class="line">TRUNCATE TABLE admin$</span><br><span class="line">DROP PROCEDURE test_while1$</span><br><span class="line">CREATE PROCEDURE test_while1(IN insertCount INT)</span><br><span class="line">BEGIN</span><br><span class="line">	DECLARE i INT DEFAULT 1;</span><br><span class="line">	a:WHILE i&lt;=insertCount DO</span><br><span class="line">		INSERT INTO admin(username,`password`) VALUES(CONCAT(&#x27;xiaohua&#x27;,i),&#x27;0000&#x27;);</span><br><span class="line">		IF i&gt;=20 THEN LEAVE a;</span><br><span class="line">		END IF;</span><br><span class="line">		SET i=i+1;</span><br><span class="line">	END WHILE a;</span><br><span class="line">END $</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">CALL test_while1(100)$</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#3.添加iterate语句</span><br><span class="line"></span><br><span class="line">#案例：批量插入，根据次数插入到admin表中多条记录，只插入偶数次</span><br><span class="line">TRUNCATE TABLE admin$</span><br><span class="line">DROP PROCEDURE test_while1$</span><br><span class="line">CREATE PROCEDURE test_while1(IN insertCount INT)</span><br><span class="line">BEGIN</span><br><span class="line">	DECLARE i INT DEFAULT 0;</span><br><span class="line">	a:WHILE i&lt;=insertCount DO</span><br><span class="line">		SET i=i+1;</span><br><span class="line">		IF MOD(i,2)!=0 THEN ITERATE a;</span><br><span class="line">		END IF;</span><br><span class="line">		</span><br><span class="line">		INSERT INTO admin(username,`password`) VALUES(CONCAT(&#x27;xiaohua&#x27;,i),&#x27;0000&#x27;);</span><br><span class="line">		</span><br><span class="line">	END WHILE a;</span><br><span class="line">END $</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">CALL test_while1(100)$</span><br><span class="line"></span><br></pre></td></tr></table></figure>


    

    

    

  </div>
  <div class="article-info article-info-index">
    
    
    

    
    <p class="article-more-link">
      <a class="article-more-a" href="/2021/09/01/Mysql/">展开全文 >></a>
    </p>
    

    
    <div class="clearfix"></div>
  </div>
  </div>
</article>

<aside class="wrap-side-operation">
    <div class="mod-side-operation">
        
        <div class="jump-container" id="js-jump-container" style="display:none;">
            <a href="javascript:void(0)" class="mod-side-operation__jump-to-top">
                <i class="icon-font icon-back"></i>
            </a>
            <div id="js-jump-plan-container" class="jump-plan-container" style="top: -11px;">
                <i class="icon-font icon-plane jump-plane"></i>
            </div>
        </div>
        
        
    </div>
</aside>




  
    <article id="post-linux" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
  <div class="article-entry" itemprop="articleBody">
    
    <h1 id="第一章-Linux起源"><a href="#第一章-Linux起源" class="headerlink" title="第一章 Linux起源"></a>第一章 Linux起源</h1><p>unix，C语言，TCP-IP 可以看作三胞胎，他们结合在一起相互诞生，其他具体自行可以看：计算机组成原理，计算机网络，以及C语言。可以结合在一起来学习，效果更佳。</p>
<h1 id="第二章-系统分区"><a href="#第二章-系统分区" class="headerlink" title="第二章 系统分区"></a>第二章 系统分区</h1><p>Linux与Windows一样，它的主分区和拓展分区加起来不能超过四个，而且拓展分区最多一个且不能放入数据文件以及它不能格式化，拓展分区里放的逻辑分区可以放数据和格式化。<br>Linux 硬件全为文件 这一点与Windows不一样，下面介绍一些Linux的主要硬件文件名以及存放路径：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">IDE硬盘 /dev/hd[a-d]</span><br><span class="line"></span><br><span class="line">SCSI/SATA/USB硬盘 /dev/sd[a-p]</span><br><span class="line"></span><br><span class="line">光驱 /dev/cdrom或/dev/sr0</span><br><span class="line"></span><br><span class="line">软盘 /dev/fd[0-1]</span><br><span class="line"></span><br><span class="line">打印机（25针） /dev/lp[0-2]</span><br><span class="line"></span><br><span class="line">打印机（USB） /dev/usb/lp[0-15]</span><br><span class="line"></span><br><span class="line">鼠标 /dev/mouse</span><br></pre></td></tr></table></figure>



<p>分区：把大硬盘分为小的逻辑分区<br>格式化：写入文件系统<br>分区设备文件名：给每个分区定义设备文件名<br>挂载：给每个分区分配挂载点<br>注意：根分区 “/ ” 以下的子分区可以单独使用硬盘<br>在虚拟机安装中 swap 的大小为内存的两倍但是超过2G没有意义，建议1000MB合适<br>/boot路径是为了让Linux系统可以顺利运行 里面最好不要存放数据 在虚拟机安装中分配200M左右大小就可以了</p>
<h1 id="第三章-Linux的目录结构"><a href="#第三章-Linux的目录结构" class="headerlink" title="第三章 Linux的目录结构"></a>第三章 Linux的目录结构</h1><p>在Linux远程登录管理配置IP时，需要的一些简单命令：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ifconfig  查询当前网卡信息</span><br><span class="line">ifconfig eth0  配置网卡 </span><br><span class="line">ifconfig eth0 后+ VmNAT8的网络IP   </span><br><span class="line">df    查看系统分区</span><br><span class="line">ls /bin/   里面存放的为Linux命令文件  </span><br></pre></td></tr></table></figure>



<h2 id="3-1-基本介绍"><a href="#3-1-基本介绍" class="headerlink" title="3.1 基本介绍"></a><strong>3.1 基本介绍</strong></h2><p>linux 的文件系统是采用级层式的树状目录结构，在此结构中的最上层是根目录“/”，然后在此目录下再创建其他的目录。</p>
<p> 在 Linux 世界里，一切皆文件。</p>
<p>​                 <img src="https://qqadapt.qpic.cn/txdocpic/0/830b609c2b6085bd3fb3d61641806b54/0?w=462&h=186" alt="img">        </p>
<h2 id="3-2-Linux具体目录结构"><a href="#3-2-Linux具体目录结构" class="headerlink" title="3.2 Linux具体目录结构"></a><strong>3.2 Linux具体目录结构</strong></h2><ul>
<li><p><strong>/lib</strong>（<strong>需备份</strong>）</p>
</li>
<li><ul>
<li>系统开机所需要最基本的动态链接共享库，其作用类似于Windows里的DLL文件。几乎所有的应用程序都需要用到这些共享库。</li>
</ul>
</li>
<li><p><strong>/lost+found</strong></p>
</li>
<li><ul>
<li>一般情况下是空的，当系统非法关机后，这里就存放了一些文件。</li>
</ul>
</li>
<li><p>**/etc **</p>
</li>
<li><ul>
<li>所有系统管理所需要的配置文件（如账户，密码）和子目录，。my.conf</li>
</ul>
</li>
<li><p><strong>/usr</strong>（<strong>需备份</strong>）</p>
</li>
<li><ul>
<li>用户的很多应用程序和文件都放在这个目录下。类似于Windows下的program.files目录</li>
</ul>
</li>
<li><p><strong>/bin</strong> (usr/bin、/usr/local/bin) <strong>[usr:Unix System Resource，即Unix系统资源的缩写]</strong></p>
</li>
<li><ul>
<li>bin的意思是二进制可执行文件</li>
<li>是Binary的缩写，这个目录存放着经常使用的命令</li>
</ul>
</li>
<li><p><strong>/sbin (usr/sbin、/usr/local/sbin)</strong></p>
</li>
<li><ul>
<li>s就是per user的意思，这里存放的是系统管理员使用的系统管理程序</li>
</ul>
</li>
<li><p>**/home **</p>
</li>
<li><ul>
<li>存放普通用户的主目录，在Linux中的每个用户都有一个自己的目录，一般该目录一用户的账号名命名</li>
</ul>
</li>
<li><p>**/root **</p>
</li>
<li><ul>
<li>该目录为系统管理员，超级权限者的用户目录</li>
</ul>
</li>
<li><p><strong>/boot</strong>（<strong>需备份</strong>）</p>
</li>
<li><ul>
<li>存放了启动Linux时使用的一些核心文件，包括一些链接文件和镜像文件</li>
<li>系统启动相关数据。需要备份时 /boot目录（也需备份）</li>
</ul>
</li>
<li><p><strong>/proc</strong> </p>
</li>
<li><ul>
<li>虚拟目录，是系统内存的映射，访问这个目录来获取系统信息。</li>
<li>不能存放文件没有意义，内存占满死机，没满重启消失</li>
</ul>
</li>
<li><p><strong>/srv</strong> </p>
</li>
<li><ul>
<li>service 的缩写，该目录是存放一些服务启动之后需要提取的数据</li>
</ul>
</li>
<li><p><strong>/sys</strong></p>
</li>
<li><ul>
<li>Linux2.6内核的一个很大变化，该目录安装了2.6内核中新出现的一个文件系统</li>
<li>与proc一样 是在内存里的 不可以写东西 放内核信息</li>
</ul>
</li>
<li><p><strong>/tmp</strong></p>
</li>
<li><ul>
<li>存放临时文件</li>
</ul>
</li>
<li><p><strong>/dev</strong></p>
</li>
<li><ul>
<li>类似于 windows的设备管理器,把所有的硬件用文件的形式存储</li>
</ul>
</li>
<li><p>**/media **</p>
</li>
<li><ul>
<li>Linux系统会自动识别一些设备,例如U盘、光驱等等,当识别后,Linux 会把识别的设备挂载到这个目录下。</li>
</ul>
</li>
<li><p>**/mnt **</p>
<ul>
<li>系统提供该目录是为了让用户临时挂载别的文件系统的,我们可以将外部的存储挂载在/mnt/上,然后进入该目录就可以查看里的内容了。d:/ myshare</li>
</ul>
</li>
<li><p><strong>/opt</strong></p>
</li>
<li><ul>
<li>这是给主机额外安装软件所摆放的目录。如安装 ORACLE数据库就可放到该目录下。默认为空。</li>
</ul>
</li>
</ul>
<ul>
<li><strong>/usr</strong>（需备份）<ul>
<li>系统软件资源目录</li>
</ul>
</li>
</ul>
<ul>
<li><p>**/usr/local **</p>
</li>
<li><ul>
<li>这是另个给主机额外安装软件所安装的目录。一般是通过编译源码方式安装的程序。</li>
</ul>
</li>
<li><p><strong>/var <strong>（</strong>需备份</strong>）</p>
</li>
<li><ul>
<li>保存动态数据 、缓存、日志以及软件运行产生的文件</li>
</ul>
</li>
<li><p><strong>/selinux [security-enhanced linux] 类似 360</strong></p>
</li>
<li><ul>
<li>Selinux是一种安全子系统,它能控制程序只能访同特定文件。</li>
</ul>
</li>
</ul>
<h2 id="3-3-Linux-目录总结"><a href="#3-3-Linux-目录总结" class="headerlink" title="3.3 Linux 目录总结"></a><strong>3.3 Linux 目录总结</strong></h2><ol>
<li>linux 的目录中有且只要一个根目录 / </li>
<li>linux 的各个目录存放的内容是规划好，不用乱放文件。</li>
<li>linux 是以文件的形式管理我们的设备，因此 linux 系统，一切皆为文件。</li>
<li>linux 的各个文件目录下存放什么内容，大家必须有一个认识。</li>
<li>学习后，你脑海中应该有一颗 linux 目录树。</li>
</ol>
<h1 id="第四章Linux常用命令"><a href="#第四章Linux常用命令" class="headerlink" title="第四章Linux常用命令"></a><strong>第四</strong>章<strong>Linux常用命令</strong></h1><h2 id="4-1-文件处理命令"><a href="#4-1-文件处理命令" class="headerlink" title="4.1 文件处理命令"></a><strong>4.1 文件处理命令</strong></h2><h3 id="4-1-1-命令格式与目录处理命令ls"><a href="#4-1-1-命令格式与目录处理命令ls" class="headerlink" title="4.1.1 命令格式与目录处理命令ls"></a><strong>4.1.1 命令格式与目录处理命令ls</strong></h3><p>命令格式 ：命令 [-选项] [参数] </p>
<p>例 ： ls -la /etc </p>
<p>说明：1）个别命令使用不遵循此格式</p>
<pre><code>    2）当有多个选项时，可以写在一起
   
    3）简化选项与完整选项-a 等于 --all
</code></pre>
<p>命令名称：ls </p>
<p>命令英文原意：list </p>
<p>命令所在路径：/bin/ls </p>
<p>执行权限：所有用户</p>
<p>功能描述：显示目录文件</p>
<p>语法：ls  选项[-ald]  [文件或目录] </p>
<p>常用命令<br>ls -a 查看隐藏文件<br>ls -l 长显示,显示文件或者目录详细信息包括大小 修改时间<br>ls -d 显示目录<br>ls -h 更加人性化显示 比如字节转换为MB，GB 不用自己算<br>ls -i 查询文件inode号(inode存储文件的详细信息) 信息编号，类似于人的身份证号码</p>
<p>tip：</p>
<p>-rw-r–r– </p>
<ul>
<li>- 文件类型（- 文件 d 目录 l 软链接文件）</li>
<li>rw- r– r– </li>
</ul>
<p>u g o </p>
<p>u所有者 g所属组 o其他人</p>
<p>r读 w写 x执行</p>
<h3 id="4-1-2-目录处理命令"><a href="#4-1-2-目录处理命令" class="headerlink" title="4.1.2 目录处理命令"></a><strong>4.1.2 目录处理命令</strong></h3><p>命令名称：mkdir</p>
<p>命令英文原意：make directories </p>
<p>命令所在路径：/bin/mkdir </p>
<p>执行权限：所有用户</p>
<p>语法：mkdir -p  [目录名] </p>
<p>功能描述：创建新目录-p  递归创建</p>
<p>范例： $ mkdir -p /tmp/Japan/boduo </p>
<pre><code>   $ mkdir /tmp/Japan/longze /tmp/Japan/cangjing
</code></pre>
<p>命令名称：cd </p>
<p>命令英文原意：change directory </p>
<p>命令所在路径：shell内置</p>
<p>命令执行权限：所有用户</p>
<p>语法：cd [目录] </p>
<p>功能描述：切换目录</p>
<p>范例： $ cd  /tmp/Japan/boduo     切换到指定目录</p>
<pre><code>   $ cd  ..        回到上一级目录
</code></pre>
<p>命令名称：pwd </p>
<p>命令英文原意： print working directory </p>
<p>命令所在路径：/bin/pwd </p>
<p>执行权限：所有用户</p>
<p>语法：pwd </p>
<p>功能描述：显示当前目录</p>
<p>范例：$ pwd </p>
<p>  /tmp/Japan</p>
<p>命令名称：rmdir </p>
<p>命令英文原意：remove empty directories </p>
<p>命令所在路径：/bin/rmdir </p>
<p>执行权限：所有用户</p>
<p>语法：rmdir [目录名] </p>
<p>功能描述： 删除空目录</p>
<p>范例： $ rmdir /tmp/Japan/boduo</p>
<p>命令名称：cp</p>
<p>命令英文原意：copy </p>
<p>命令所在路径：/bin/cp </p>
<p>执行权限：所有用户</p>
<p>语法：cp  -rp  [原文件或目录] [目标目录] </p>
<p>-r  复制目录</p>
<p>-p  保留文件属性</p>
<p>功能描述：复制文件或目录</p>
<p>范例：$ cp  -r /tmp/Japan/cangjing  /root </p>
<p>将目录/tmp/Japan/cangjing复制到目录/root下</p>
<p>$ cp  -rp  /tmp/Japan/boduo  /tmp/Japan/longze /root </p>
<p>将/tmp/Japan目录下的boduo和longze目录复制到/root下，保持目录属性</p>
<p> 命令名称：mv </p>
<p>命令英文原意：move </p>
<p>命令所在路径：/bin/mv </p>
<p>执行权限：所有用户 </p>
<p>语法：mv [原文件或目录][目标目录] </p>
<p>功能描述：剪切文件、改名 可在剪切的同时改名 </p>
<p>范例：mv /tmp/japan/longze /root/nvshen</p>
<p>若在当前目录下改名 直接在相应目录下面移动加改名 mv cangjing canglaoshi</p>
<p>命令名称：rm </p>
<p>命令英文原意：remove </p>
<p>命令所在路径：/bin/rm </p>
<p>执行权限：所有用户</p>
<p>语法：rm  -rf   [文件或目录] </p>
<p>-r  删除目录</p>
<p>-f  强制执行</p>
<p>功能描述：删除文件</p>
<p>范例：$ rm  /tmp/yum.log </p>
<p>删除文件/tmp/yum.log </p>
<p>$ rm -rf  /tmp/Japan/longze </p>
<p>删除目录/tmp/Japan/longze</p>
<p>注意：<br>rm -rf 使用时一定要谨慎 切记 ！！！<br>使用时一定要谨慎 切记 ！！！<br>使用时一定要谨慎 切记 ！！！<br>rm -rf /* 系统直接全部被删除！！！</p>
<h3 id="4-1-3-文件处理命令"><a href="#4-1-3-文件处理命令" class="headerlink" title="4.1.3 文件处理命令"></a><strong>4.1.3 文件处理命令</strong></h3><p>命令名称：touch </p>
<p>命令所在路径：/bin/touch </p>
<p>执行权限：所有用户 </p>
<p>语法：touch  [文件名]                 </p>
<p>功能描述：在当前目录下创建空文件 </p>
<p>范例： $ touch Japanlovestory.list</p>
<p>注意：</p>
<ul>
<li>“Program files” 加双引号创建带空格的文件名 不推荐使用 以后的查询，操作都需要用到 除了代表根分区的/ 以外 其他符号都可以</li>
<li>  touch[绝对路径+文件名]。 指明绝对路径，在绝对路径处创建文件</li>
</ul>
<p>命令名称：cat</p>
<p>命令所在路径：/bin/cat </p>
<p>执行权限：所有用户 </p>
<p>语法：cat [文件名] </p>
<p>功能描述：显示文件内容            </p>
<p>cat -n [文件名] 显示行号 给文件内容的每一行标号<br>cat -A [文件名] 显示隐藏字符</p>
<p>tac [文件名] 逆序显示文件内容 倒着来 不支持-n</p>
<p>范例： $ cat  /etc/issue              $ cat  -n /etc/services</p>
<p>命令名称：more </p>
<p>命令所在路径：/bin/more </p>
<p>执行权限：所有用户 </p>
<p>语法：more  [文件名]                  </p>
<p> (空格) 或f        翻页               </p>
<p> (Enter)           换行                 </p>
<p> q或Q             退出 </p>
<p>功能描述：分页显示文件内容 </p>
<p>范例：   $ more  /etc/services</p>
<p>命令名称：less </p>
<p>命令所在路径：/usr/bin/less </p>
<p>执行权限：所有用户 </p>
<p>语法：less  [文件名] </p>
<p>功能描述：分页显示文件内容（可向上翻页） </p>
<p>范例：   $  less  /etc/services</p>
<p>tips: 其他操作和more命令一样 在less命令中 可以按/+需要查找文件内容的关键字 查询内容，高亮内容即为含有关键字的内容，按n（表示next）可以查看下一个含有关键字的内容,按q退出</p>
<p>命令名称：head</p>
<p>命令所在路径：/usr/bin/head </p>
<p>执行权限：所有用户 </p>
<p>语法：head  [文件名] </p>
<p>功能描述：显示文件前面几行    </p>
<p>-n 指定行数  （默认10行）</p>
<p>范例：$ head -n 20 /etc/services</p>
<p>命令名称：tail </p>
<p>命令所在路径：/usr/bin/tail </p>
<p>执行权限：所有用户 </p>
<p>语法：tail  [文件名] </p>
<p>功能描述：显示文件后面几行    </p>
<p>​    -n 指定行数 （默认10行）</p>
<p>   -f  动态显示文件末尾内容 </p>
<p>范例：   $ tail -n 18 /etc/services</p>
<h3 id="4-1-4-链接命令"><a href="#4-1-4-链接命令" class="headerlink" title="4.1.4 链接命令"></a><strong>4.1.4 链接命令</strong></h3><p>命令名称：ln</p>
<p>命令英文原意：link </p>
<p>命令所在路径：/bin/ln </p>
<p>执行权限：所有用户 </p>
<p>语法：ln  -s  [原文件]  [目标文件]                 </p>
<p> -s  创建软链接 </p>
<p>功能描述：生成链接文件</p>
<p>范例：        </p>
<p>$ ln -s  /etc/issue  /tmp/issue.soft        </p>
<p> 创建文件/etc/issue的软链接/tmp/issue.soft        </p>
<p>$ ln  /etc/issue  /tmp/issue.hard        </p>
<p> 创建文件/etc/issue的硬链接/tmp/issue.hard</p>
<p><strong>软链接特征：</strong></p>
<p>类似Windows快捷方式 </p>
<p>1、lrwxrwxrwx    l 软链接 </p>
<p>软链接文件权限都为rwxrwxrwx </p>
<p>2、文件大小-只是符号链接 </p>
<p>3、/tmp/issue.soft -&gt; /etc/issue 箭头指向原文件</p>
<p><strong>硬链接特征：</strong> </p>
<p>1、拷贝cp -p + 同步更新 </p>
<p>echo “this is a test” &gt;&gt; /etc/motd </p>
<p>2、可通过i节点识别 </p>
<p>3、不能跨分区</p>
<p>4、不能针对目录使用</p>
<h2 id="4-2-权限管理命令"><a href="#4-2-权限管理命令" class="headerlink" title="4.2 权限管理命令"></a><strong>4.2 权限管理命令</strong></h2><h3 id="4-2-1-权限管理命令chmod"><a href="#4-2-1-权限管理命令chmod" class="headerlink" title="4.2.1 权限管理命令chmod"></a><strong>4.2.1 权限管理命令chmod</strong></h3><p>命令名称：chmod </p>
<p>命令英文原意：change the permissions mode of a file </p>
<p>命令所在路径：/bin/chmod </p>
<p>执行权限：所有用户 </p>
<p>语法：chmod  [{ugoa}{+-=}{rwx}] [文件或目录]                         </p>
<p>  [mode=421 ]  [文件或目录]                          </p>
<p> -R  递归修改 </p>
<p>功能描述：改变文件或目录权限</p>
<p>权限的数字表示      </p>
<p>r  —- 4      w —- 2      x  —- 1</p>
<p>rwxrw-r–    7   6    4</p>
<p>范例：       </p>
<p> $ chmod  g+w  testfile         </p>
<p>赋予文件testfile所属组写权限      </p>
<p>  $ chmod  -R 777  testdir         </p>
<p>修改目录testfile及其目录下文件为所有用户具有全部权限</p>
<table>
<thead>
<tr>
<th>代表字符</th>
<th>权限</th>
<th>对文件的含义</th>
<th>对目录的含义</th>
</tr>
</thead>
<tbody><tr>
<td>r</td>
<td>读权限</td>
<td>可以查看文件内容,可以cat/more/head/tail/less</td>
<td>可以列出目录中的内容,可以ls</td>
</tr>
<tr>
<td>w</td>
<td>写权限</td>
<td>可以修改文件内容,可以vim</td>
<td>可以在目录中创建、删除文件,可以touch/mkdir/rmdir/rm</td>
</tr>
<tr>
<td>x</td>
<td>执行权限</td>
<td>可以执行文件,可以script(脚本) command(命令</td>
<td>可以进入目录,可以cd</td>
</tr>
</tbody></table>
<p>tips:</p>
<p><strong>1.rwx作用在文件时</strong></p>
<ol>
<li><p>r:read，可以读取，查看</p>
</li>
<li><p>w:writte, 可以修改，但是不代表可以删除该文件，删除一个文件的前提是对该文件所在的目录（文件夹）具有写的权限，才能删该文件</p>
</li>
<li><p>x:execute，可以被执行</p>
</li>
</ol>
<p><strong>2.rwx作用在目录时</strong></p>
<ol>
<li><p>r，ls查看目录内容</p>
</li>
<li><p>w, 可以修改，目录内创建+删除+重命名目录</p>
</li>
<li><p>x, 可以进入该目录 </p>
</li>
</ol>
<h3 id="4-2-2-其他权限管理命令"><a href="#4-2-2-其他权限管理命令" class="headerlink" title="4.2.2 其他权限管理命令"></a><strong>4.2.2 其他权限管理命令</strong></h3><p>命令名称：chown </p>
<p>命令英文原意：change file ownership</p>
<p>命令所在路径：/bin/chown </p>
<p>执行权限：所有用户 </p>
<p>语法：chown  [用户] [文件或目录]  </p>
<p>功能描述：改变文件或目录的所有者 范例：$ chown  shenchao fengjie               </p>
<p> 改变文件fengjie的所有者为shenchao</p>
<p>命令名称：chgrp</p>
<p>命令英文原意：change file group ownership </p>
<p>命令所在路径：/bin/chgrp</p>
<p>执行权限：所有用户 </p>
<p>语法：chgrp  [用户组]  [文件或目录]  </p>
<p>功能描述：改变文件或目录的所属组</p>
<p>范例：$ chgrp lampbrother fengjie            </p>
<p>​    改变文件fengjie的所属组为lampbrother</p>
<p>命令名称：umask </p>
<p>命令英文原意：the user file-creation mask </p>
<p>命令所在路径：Shell内置命令 </p>
<p>执行权限：所有用户 </p>
<p>语法：umask [-S]             </p>
<p>-S   以rwx形式显示新建文件缺省权限 </p>
<p>功能描述：显示、设置文件的缺省权限 </p>
<p>范例： $ umask -S</p>
<blockquote>
<p>tips: 新建文件是默认没有x权限（比如：防止木马病毒攻击）</p>
</blockquote>
<p>umask 指令直接输入之后会显示 0022<br>其中 0代表特殊权限<br>022代表 777与022之间的一种逻辑与的关系<br>他会进行逻辑比对，两者重复的不能保留，把没有的写下来</p>
<p>777 rwx rwx rwx<br>022 — -w- -w-<br>—————————<br>755 rwx r-x r-x 目录<br>rw- r— r— 二进制文件<br>如果想把默认创建的文件改为700<br>700 rwx — — 目录<br>rw- — — 二进制文件<br>这样运算 进行逻辑与比对<br>777 rwx rwx rwx<br>X<br>—————————<br>700 rwx — —<br>这就像一个解方程 求X<br>X=— rwx rwx 077</p>
<h2 id="4-3-文件搜索命令"><a href="#4-3-文件搜索命令" class="headerlink" title="4.3 文件搜索命令"></a><strong>4.3 文件搜索命令</strong></h2><h3 id="4-3-1-文件搜索命令-find"><a href="#4-3-1-文件搜索命令-find" class="headerlink" title="4.3.1 文件搜索命令 find"></a><strong>4.3.1 文件搜索命令 find</strong></h3><p>命令名称：find</p>
<p>命令所在路径：/bin/find </p>
<p>执行权限：所有用户 </p>
<p>语法：find  [搜索范围]  [匹配条件] </p>
<p>功能描述：文件搜索</p>
<p>范例：</p>
<ul>
<li><p>find [搜索范围] -name [关键字] 在特定路径下搜索文件名作为关键字的文件或者目录</p>
</li>
<li><p>find [搜索范围] -name [关键字]* 这样为带有关键字开头的任何文件都可以被搜索出来</p>
</li>
<li><p>find [搜索范围] -name * [关键字] * 这样为带有关键字的任何文件都可以被搜索出来<br>匹配任意字符 加通配符*</p>
</li>
<li><p>find [搜索范围] -name [关键字]??? 这样搜索的是关键字后带三个字符的 几个问号为几个字符</p>
</li>
<li><p>find [搜索范围] -iname [关键字] 不区分大小写搜索<br>注意：不能在服务区高峰时候使用查找命令。太占内存资源，搜索的范围路径越小越好，搜索条件越精准越好</p>
</li>
<li><p>find [搜索范围] -size [数据块] 根据文件大小查找<br>数据块前面加+表示查找大于这个大小的文件，-表示查找小于这个大小的文件，不加表示查找等于这个大小的文件(一般不常用)<br>1个数据块=512字节=0.5K<br>size后接的数据只能为数据块 需要换算，比如需要查找大于100MB的文件<br>100MB=102400KB=204800<br>find /etc -size +204800<br>数据块为Linux存储文件最小单位</p>
</li>
<li><p>find [搜索范围] -user [所有者名] 根据所有者查找</p>
</li>
<li><p>find [搜索范围] -group [所属组名] 根据所属组查找</p>
</li>
<li><p>find [搜索范围] -amin [时间] 查找时间以内被访问过的文件和目录 a：access</p>
</li>
<li><p>find [搜索范围] -cmin [时间] 查找时间以内被修改过属性的文件和目录 c：change</p>
</li>
<li><p>find [搜索范围] -mmin [时间] 查找时间以内被修改过内容的文件和目录 m：modift<br>+：超过多长时间 -：多长时间以内</p>
</li>
<li><p>find [搜索范围] -size [数据块] -a -size [数据块]<br>-a：两个条件同时满足<br>-o：两个条件满足任意一个即可</p>
<p>find /etc -size +163840 -a -size -204800<br>在/etc下查找大于80MB小于100MB的文件</p>
</li>
<li><p>find [搜索范围] -name [关键字] -a -type f<br>在特定路径下搜索文件名作为关键字的文件<br>-type 根据不同类型查找<br>f：文件<br>d：目录<br>l：软链接</p>
</li>
<li><p>find [搜索范围] -name [关键字] -exec ls -l {} \ ;<br>查找到文件之后并且对其进行查看ls操作。<br>-exec：查找到文件之后并且对其进行各种操作 {} \ ;不能丢<br>-ok：用于询问确认 一般在删除操作的时候使用，比如：</p>
<p>find -user yangyang -ok rm {} \ ;<br>删除yangyang用户的文件 他会挨个询问你是不是确定删除</p>
</li>
<li><p>find [搜索范围] -inum [i节点值] 根据i节点查询<br>find /etc -inum 12345 -exec rm {} \ ;<br>删除这个i节点文件 非常方便<br>也可以用来查询一个文件的硬链接<br>find /etc inum 12345 -exec ls -l {} \ ;<br>因为硬链接和文件肯定在同一个分区，并且i节点一样</p>
</li>
</ul>
<h3 id="4-3-2-其他搜索命令"><a href="#4-3-2-其他搜索命令" class="headerlink" title="4.3.2 其他搜索命令"></a><strong>4.3.2 其他搜索命令</strong></h3><p><strong>命令名称：locate</strong></p>
<p>命令所在路径：/usr/bin/locate </p>
<p>执行权限：所有用户 </p>
<p>语法：locate  文件名 </p>
<p>功能描述：在文件资料库中查找文件 </p>
<p>范例：$ locate inittab</p>
<blockquote>
<p>tips:新建文件locate不到，可以updatedb,更新文件资料库后查找[tmp不在文件资料库内]</p>
</blockquote>
<p>$  locate -i masichun.json // -i 作用:你不区分大小写 类似 -i name</p>
<p><strong>命令名称：which</strong> </p>
<p>命令所在路径：/usr/bin/which</p>
<p>执行权限：所有用户 </p>
<p>语法：which  命令 </p>
<p>功能描述：搜索命令所在目录及别名信息 </p>
<p>范例：$ which ls</p>
<p><strong>命令名称：whereis</strong> </p>
<p>命令所在路径：/usr/bin/whereis </p>
<p>执行权限：所有用户 </p>
<p>语法：whereis  [命令名称]  </p>
<p>功能描述：搜索命令所在目录及帮助文档路径 </p>
<p>范例：$ whereis ls</p>
<p><strong>命令名称：grep</strong> </p>
<p>命令所在路径：/bin/grep </p>
<p>执行权限：所有用户 </p>
<p>语法：grep  -iv [指定字串] [文件] </p>
<p>功能描述：在文件中搜寻字串匹配的行并输出             </p>
<p>-i  不区分大小写             </p>
<p> -v 排除指定字串 </p>
<p>​       范例：# grep  mysql  /root/install.log</p>
<p>   # grep -v ^# /etc/inittab 去除以#开头的所有行信息,^表示以XXX开头 </p>
<h2 id="4-4-帮助命令"><a href="#4-4-帮助命令" class="headerlink" title="4.4 帮助命令"></a><strong>4.4 帮助命令</strong></h2><p><strong>命令名称：man</strong> </p>
<p>命令英文原意：manual </p>
<p>命令所在路径：/usr/bin/man </p>
<p>执行权限：所有用户 </p>
<p>语法：man  [命令或配置文件] </p>
<p>  (空格) 或f       翻页               </p>
<p>   (Enter)             换行                 </p>
<p>  q或Q              退出 </p>
<p>功能描述：获得帮助信息</p>
<p>范例： $ man ls                </p>
<p>查看ls命令的帮助信息             </p>
<p> $ man services                </p>
<p>查看配置文件services的帮助信息</p>
<p>​                 <img src="https://qqadapt.qpic.cn/txdocpic/0/aae46524d8aca9c0a79007dd05f27047/0?w=1670&h=124" alt="img">        </p>
<p>1 命令的帮助  5配置文件的帮助</p>
<p>man 5 passwd -&gt; 查看配置文件的帮助</p>
<p><strong>命令：whatis</strong></p>
<p>语法：whatis 命令</p>
<p>功能描述：获得命令的简单介绍信息</p>
<p>范例：whatis ls</p>
<p>​                 <img src="https://qqadapt.qpic.cn/txdocpic/0/07402759bd54dd342f46abba2ccb1602/0?w=862&h=80" alt="img">        </p>
<p>类似的：apropos</p>
<p>语法：apropos 配置文件</p>
<p>whatis 类似于精确查找</p>
<p>apropos 模糊查找关键字 [功能等于 man -k ][可以tab快速补全]</p>
<p><strong>命令名称：help</strong></p>
<p>命令所在路径：Shell内置命令 </p>
<p>执行权限：所有用户 </p>
<p>语法：help 命令 </p>
<p>功能描述：获得Shell内置命令的帮助信息 </p>
<p>范例： $ help umask                </p>
<p>查看umask命令的帮助信息</p>
<h2 id="4-5-用户管理命令"><a href="#4-5-用户管理命令" class="headerlink" title="4.5 用户管理命令"></a><strong>4.5 用户管理命令</strong></h2><p><strong>命令名称：useradd</strong> </p>
<p>命令所在路径：/usr/sbin/useradd </p>
<p>执行权限：root </p>
<p>语法：useradd 用户名 </p>
<p>功能描述：添加新用户 </p>
<p>范例： $ useradd yangmi</p>
<p><strong>命令名称：passwd</strong> </p>
<p>命令所在路径：/usr/bin/passwd </p>
<p>执行权限：所有用户 </p>
<p>语法：passwd 用户名 </p>
<p>功能描述：设置用户</p>
<p>范例： $ passwd yangmi</p>
<p>普通用户只能更改自己密码，root用户可以更好所有人密码</p>
<p><strong>命令名称：who</strong> </p>
<p>命令所在路径：/usr/bin/who </p>
<p>执行权限：所有用户 </p>
<p>语法：who </p>
<p>功能描述：查看登录用户信息 </p>
<p>范例： $ who</p>
<p>​                 <img src="https://qqadapt.qpic.cn/txdocpic/0/ef1bce2aea82a3c63634c1d4bd441d7c/0?w=800&h=244" alt="img">        </p>
<p>参数分别为：</p>
<p>用户名  登录终端[tty本地终端/pts远程终端]  登录时间 IP地址[没有表示本地登录]</p>
<p><strong>命令名称：w</strong> </p>
<p>命令所在路径：/usr/bin/w </p>
<p>执行权限：所有用户 </p>
<p>语法：w </p>
<p>功能描述：查看登录用户详细信息 </p>
<p>范例： $ w</p>
<p>第一行显示<br><strong>17:04:55 up 22 days, 21:32, | 2 users,| load average: 0.02, 0.02, 0.05</strong><br>第一个表示当前时间<br>第二个表示服务区系统连续运行时间没有重启或者关机，衡量服务区稳定性<br>第三个表示当前总共有多少个用户登陆<br>第四个表示负载均衡指数，分别记录了过去一分钟，五分钟，十五分钟系统的负载情况，加起来除以三就是平均负载指数，系统的负载情况主要是指 CPU和内存的负载情况，数字大表示负载严重<br>uptime 命令也可以显示此项数据<br>第二行显示<br><strong>USER TTY FROM LOGIN@ IDLE JCPU PCPU WHAT</strong><br>其中IDLE表示用户登陆过来后空闲多久<br>PCPU 表示用户登陆后执行的操作占用的CPU的时间 CPU时间<br>JCPU 表示累计占用的CPU时间<br>WHAT 表示执行的操作</p>
<h2 id="4-6-压缩解压命令"><a href="#4-6-压缩解压命令" class="headerlink" title="4.6 压缩解压命令"></a><strong>4.6 压缩解压命令</strong></h2><p><strong>命令名称：gzip</strong> </p>
<p>命令英文原意：GNU zip </p>
<p>命令所在路径：/bin/gzip </p>
<p>执行权限：所有用户 </p>
<p>语法：gzip [文件]  </p>
<p>功能描述：压缩文件 </p>
<p>压缩后文件格式：.gz</p>
<p><strong>命令名称：gunzip  [= gzip -d]</strong></p>
<p>命令英文原意：GNU unzip </p>
<p>命令所在路径：/bin/gunzip </p>
<p>执行权限：所有用户 </p>
<p>语法：gunzip [压缩文件] </p>
<p>功能描述：解压缩.gz的压缩文件 </p>
<p>范例： $ gunzip boduo.gz</p>
<blockquote>
<p>tips:只能压缩文件不能压缩目录</p>
</blockquote>
<p><strong>命令名称：tar</strong> </p>
<p>命令所在路径：/bin/tar </p>
<p>执行权限：所有用户 </p>
<p>语法：tar  选项[-zcf] [压缩后文件名] [目录]                                   </p>
<p>-c    打包                 </p>
<p>-v    显示详细信息                 </p>
<p>-f     指定文件名            </p>
<p>-z     打包同时压缩 </p>
<p>功能描述：打包目录 压缩后文件格式：.tar.gz</p>
<p>范例：        </p>
<p>$ tar  -zcf   Japan.tar.gz  Japan        </p>
<p>将目录Japan打包并压缩为.tar.gz文件</p>
<p>tar命令解压缩语法：           </p>
<p>-x     解包           </p>
<p>-v    显示详细信息           </p>
<p>-f     指定解压文件           </p>
<p>-z     解压缩 </p>
<p>范例：$ tar  -zxvf  Japan.tar.gz</p>
<p><strong>命令名称：zip</strong> </p>
<p>命令所在路径：/usr/bin/zip </p>
<p>执行权限：所有用户 </p>
<p>语法：     </p>
<p>zip  选项[-r]  [压缩后文件名]  [文件或目录]            </p>
<p>-r    压缩目录 </p>
<p>功能描述：压缩文件或目录 </p>
<p>压缩后文件格式：.zip</p>
<p>范例：          </p>
<p>$ zip  buduo.zip  boduo             </p>
<p>压缩文件          </p>
<p>$ zip  -r  Japan.zip  Japan             </p>
<p>压缩目录</p>
<blockquote>
<p>tips：会保留原文件</p>
<p>​         没有gzip压缩比大，不常用</p>
</blockquote>
<p><strong>命令名称：unzip</strong> </p>
<p>命令所在路径：/usr/bin/unzip </p>
<p>执行权限：所有用户 </p>
<p>语法：unzip  [压缩文件] </p>
<p>功能描述：解压.zip的压缩文件 </p>
<p>范例：$ unzip test.zip</p>
<p><strong>命令名称：bzip2</strong> </p>
<p>命令所在路径：/usr/bin/bzip2 </p>
<p>执行权限：所有用户 </p>
<p>语法： bzip2  选项 [-k] [文件]                        </p>
<p>   -k   产生压缩文件后保留原文件 </p>
<p>功能描述：压缩文件 </p>
<p>压缩后文件格式：.bz2 </p>
<p>范例：$ bzip2 -k boduo               </p>
<p> $ tar -cjf  Japan.tar.bz2 Japan</p>
<p><strong>命令名称：bunzip2</strong> </p>
<p>命令所在路径：/usr/bin/bunzip2 </p>
<p>执行权限：所有用户 </p>
<p>语法： bunzip2  选项 [-k] [压缩文件]                               </p>
<p>-k   解压缩后保留原文件 </p>
<p>功能描述：解压缩 </p>
<p>范例：$ bunzip2  -k boduo.bz2           </p>
<p>   $ tar -xjf  Japan.tar.bz2</p>
<h2 id="4-7-网络命令"><a href="#4-7-网络命令" class="headerlink" title="4.7 网络命令"></a><strong>4.7 网络命令</strong></h2><p><strong>指令名称：write</strong> </p>
<p>指令所在路径：/usr/bin/write </p>
<p>执行权限：所有用户 </p>
<p>语法：write  &lt;用户名&gt;    </p>
<p>功能描述：给用户发信息，以Ctrl+D保存结束 </p>
<p>范例：   # write linzhiling</p>
<blockquote>
<p>可以用w查询用户在线情况 不在线发不出去</p>
</blockquote>
<p><strong>指令名称：wall</strong> </p>
<p>命令英文原意：write all </p>
<p>指令所在路径：/usr/bin/wall </p>
<p>执行权限：所有用户 </p>
<p>语法：wall  [message]   </p>
<p>功能描述：发广播信息 </p>
<p>范例：   # wall  ShenChao is a honest man!</p>
<p><strong>命令名称：ping</strong> </p>
<p>命令所在路径：/bin/ping </p>
<p>执行权限：所有用户 </p>
<p>语法：ping  选项  IP地址                      </p>
<p> -c  指定发送次数 </p>
<p>功能描述：测试网络连通性 </p>
<p>范例：  #  ping 192.168.1.156</p>
<p><strong>命令名称：ifconfig</strong> </p>
<p>命令英文原意：(network) interface configuring</p>
<p>命令所在路径：/sbin/ifconfig </p>
<p>执行权限：root </p>
<p>语法：ifconfig  网卡名称  IP地址 </p>
<p>功能描述：查看和设置网卡信息 </p>
<p>范例：# ifconfig  eth0 192.168.8.250</p>
<p><strong>命令名称：mail</strong> </p>
<p>命令所在路径：/bin/mail </p>
<p>执行权限：所有用户 </p>
<p>语法：mail [用户名] </p>
<p>功能描述：查看发送电子邮件 </p>
<p>范例：# mail root</p>
<p><strong>命令名称：last</strong> </p>
<p>命令所在路径：/usr/bin/last </p>
<p>执行权限：所有用户 </p>
<p>语法：last </p>
<p>功能描述：列出目前与过去登入系统的用户信息 </p>
<p>范例：# last</p>
<p><strong>命令名称：lastlog</strong> </p>
<p>命令所在路径：/usr/bin/lastlog </p>
<p>执行权限：所有用户 </p>
<p>语法：lastlog </p>
<p>功能描述：检查某特定用户上次登录的时间 </p>
<p>范例：# lastlog             </p>
<p># lastlog -u 502</p>
<p><strong>命令名称：traceroute</strong> </p>
<p>命令所在路径：/bin/traceroute </p>
<p>执行权限：所有用户 </p>
<p>语法：traceroute </p>
<p>功能描述：显示数据包到主机间的路径 ,可以检查网络哪个节点出现问题</p>
<p>范例：# traceroute <a target="_blank" rel="noopener" href="http://www.lampbrother.net/">www.lampbrother.net</a></p>
<p><strong>命令名称：netstat</strong> </p>
<p>命令所在路径：/bin/netstat </p>
<p>执行权限：所有用户 </p>
<p>语法：netstat  [选项] </p>
<p>功能描述：显示网络相关信息</p>
<p>选项： </p>
<p> -t  ： TCP协议  </p>
<p> -u ： UDP协议  </p>
<pre><code>        -l ： 监听  
</code></pre>
<p> -r ： 路由 :开关</p>
<p> -n ： 显示IP地址和端口号 </p>
<p>范例：  </p>
<p>#  netstat -tlun  查看本机监听的端口 </p>
<p>#  netstat -an  查看本机所有的网络连接  </p>
<p>#  netstat -rn  查看本机路由表</p>
<p>查看某一端口是否被占用：netstat -tunlp |grep 2181</p>
<p><strong>命令名称：setup</strong> </p>
<p>命令所在路径：/usr/bin/setup </p>
<p>执行权限：root </p>
<p>语法：setup </p>
<p>功能描述：配置网络 </p>
<p>范例：# setup</p>
<blockquote>
<p>他是永久生效的 和刚开始介绍的ifconfig命令不一样</p>
</blockquote>
<p><strong>命令名称：mount</strong> </p>
<p>命令位置：/bin/mount </p>
<p>执行权限：所有用户 </p>
<p>命令语法：mount [-t 文件系统] 设备文件名 挂载点 </p>
<p>范例：# mount -t iso9660 /dev/sr0 /mnt/cdrom</p>
<p>mount 设备文件名/挂载点 卸载光盘，设备文件名和挂载点两者任选其一<br>第一步：放入光盘，虚拟机中放入，或者服务器下载ios文件<br>第二步：创建一个空目录，设为挂载点<br>mkdir /media/cdrom /media用来做光盘挂载的，/mnt 也可以<br>第三步：输入命令<br>mount -t iso9660 /dev/sr0 /media/cdrom<br>设备文件名默认就是/dev/sr0，文件系统为iso9660 它是国际标准的cd文件格式，它告诉mount命令，我要挂载的是一个标准的cd。需要死记！！！<br>/dev/cdrom也可以写 /dev/sr0<br>/dev/cdrom是sr0的软链接。<br>第四步：进入挂载后的盘符<br>cd /media/cdrom<br>第五步：卸载光盘<br>先退出/media/cdrom，输入命令：cd；然后再输入命令：umount /dev/sr0<br>注意：如果之前挂载过其他盘，需要卸载之后才能挂载，输入命令：<br>umount /dev/sr0</p>
<h2 id="4-8-关机重启命令"><a href="#4-8-关机重启命令" class="headerlink" title="4.8 关机重启命令"></a><strong>4.8 关机重启命令</strong></h2><h3 id="4-8-1-shutdown命令"><a href="#4-8-1-shutdown命令" class="headerlink" title="4.8.1 shutdown命令"></a><strong>4.8.1 shutdown命令</strong></h3><p>shutdown [选项] 时间<br>时间选项里可以填具体时间比如：<br>now 现在关机<br>20:30 八点半关机<br>-c：取消前一个关机命令<br>-h：关机<br>-r：重启</p>
<blockquote>
<p>在服务器上重启需要谨慎，需要先停掉服务，否则物理内存会坏<br>而且远程服务器只能重启，关机后需要管理员手动开机，会被揍噢</p>
</blockquote>
<h3 id="4-8-2-其他关机命令"><a href="#4-8-2-其他关机命令" class="headerlink" title="4.8.2  其他关机命令"></a><strong>4.8.2  其他关机命令</strong></h3><p>[root@localhost ~]# halt </p>
<p>[root@localhost ~]# poweroff </p>
<p>[root@localhost ~]# init 0</p>
<h3 id="4-8-3-其他重启命令"><a href="#4-8-3-其他重启命令" class="headerlink" title="4.8.3 其他重启命令"></a><strong>4.8.3 其他重启命令</strong></h3><p>[root@localhost ~]# reboot  </p>
<p>[root@localhost ~]# init 6</p>
<h3 id="4-8-4-系统运行级别"><a href="#4-8-4-系统运行级别" class="headerlink" title="4.8.4 系统运行级别"></a><strong>4.8.4 系统运行级别</strong></h3><p>0   关机 </p>
<p>1  单用户 </p>
<p>2  不完全多用户，不含NFS服务 </p>
<p>3  完全多用户</p>
<p>4  未分配 </p>
<p>5  图形界面</p>
<p>6  重启</p>
<p>[root@localhost ~]# cat /etc/inittab  </p>
<p>#修改系统默认运行级别 </p>
<p>id:3:initdefault: </p>
<p>[root@localhost ~]# runlevel </p>
<p>#查询系统运行级别</p>
<h3 id="4-8-5-退出登录命令"><a href="#4-8-5-退出登录命令" class="headerlink" title="4.8.5 退出登录命令"></a><strong>4.8.5 退出登录命令</strong></h3><p> [root@localhost ~]# logout</p>
<h1 id="第五章-文本编辑器Vim"><a href="#第五章-文本编辑器Vim" class="headerlink" title="第五章 文本编辑器Vim"></a>第五<strong>章</strong> 文本编辑器Vim</h1><h2 id="5-1-Vim常用操作"><a href="#5-1-Vim常用操作" class="headerlink" title="5.1 Vim常用操作"></a><strong>5.1 Vim常用操作</strong></h2><p><strong>Vim 简介：</strong></p>
<p>Vim是一个功能强大的全屏幕文本编辑器， 是Linux/UNIX上最常用的文本编辑器， 它的作用是建立、编辑、显示文本文件。 </p>
<p>Vim  没有菜单，只有命令。</p>
<p>​                 <img src="https://qqadapt.qpic.cn/txdocpic/0/cad0b8ef40edbf55eb8a5502ae410dfb/0?w=888&h=604" alt="img">        </p>
<p><strong>插入命令</strong></p>
<table>
<thead>
<tr>
<th>命令</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td><strong>a</strong></td>
<td>在光标所在字符后插入</td>
</tr>
<tr>
<td><strong>A</strong></td>
<td>在光标所在行尾插入</td>
</tr>
<tr>
<td><strong>i</strong></td>
<td>在光标所在字符前插入</td>
</tr>
<tr>
<td><strong>I</strong></td>
<td>在光标所在行行首插入</td>
</tr>
<tr>
<td><strong>o</strong></td>
<td>在光标下插入新行</td>
</tr>
<tr>
<td><strong>O</strong></td>
<td>在光标上插入新行</td>
</tr>
</tbody></table>
<p><strong>定位命令</strong></p>
<table>
<thead>
<tr>
<th>命令</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>: set nu</td>
<td>设置行号</td>
</tr>
<tr>
<td>: set nonu</td>
<td>取消行号</td>
</tr>
<tr>
<td>gg</td>
<td>到第一行</td>
</tr>
<tr>
<td>GG</td>
<td>到最后一行</td>
</tr>
<tr>
<td>ng</td>
<td>到第n行</td>
</tr>
<tr>
<td>:n</td>
<td>到第n行</td>
</tr>
<tr>
<td>$</td>
<td>移至行尾</td>
</tr>
<tr>
<td>0</td>
<td>移至行首</td>
</tr>
</tbody></table>
<p><strong>删除命令</strong></p>
<table>
<thead>
<tr>
<th>命令</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>x</td>
<td>删除光标所在处字符</td>
</tr>
<tr>
<td>nx</td>
<td>删除光标所在处后n个字符</td>
</tr>
<tr>
<td>dd</td>
<td>删除光标所在行，ndd删除n行</td>
</tr>
<tr>
<td>dG</td>
<td>删除光标所在行到文件末尾内容</td>
</tr>
<tr>
<td>D</td>
<td>删除光标所在处到行尾内容</td>
</tr>
<tr>
<td>:n1,n2d</td>
<td>删除指定范围的行</td>
</tr>
</tbody></table>
<p><strong>复制和剪切命令</strong></p>
<p><strong>命令        作用</strong></p>
<p>yy        复制当前行</p>
<p>nyy        复制当前行以下n行</p>
<p>dd        剪切当前行</p>
<p>ndd        剪切当前行以下n行</p>
<p>p、P        粘贴在当前光标所在行下或行上</p>
<p><strong>替换和取消命令</strong></p>
<p><strong>命令        作用</strong></p>
<p>r        取代光标所在处字符</p>
<p>R        从光标所在处开始替换字符，按Esc结束</p>
<p>u        取消上一步操作</p>
<p><strong>搜索和搜索替换命令</strong></p>
<p><strong>命令        作用</strong></p>
<p>/String     搜索指定字符串; 搜索时忽略大小写 :set ic</p>
<p>n        搜索指定字符串的下一个出现位置</p>
<p>:%s/old/new/g    全文替换指定字符串        tips:    %s 全文替换</p>
<p>:n1,n2s/old/new/g    在一定范围内替换指定字符串</p>
<p>起始行,终止行s    /要替换的字符串/替换的新的字符串/g</p>
<p>/c    询问确认</p>
<p><strong>保存和退出命令</strong></p>
<p><strong>命令            作用</strong></p>
<p>:w            保存修改</p>
<p>:w new_filename    另存为指定文件</p>
<p>:wq            保存修改并退出</p>
<p>ZZ            快捷键，保存修改并退出</p>
<p>:q!            不保存修改退出</p>
<p>:wq!            保存修改并退出（文件所有者及root可使用）</p>
<p>总结:</p>
<p>​                 <img src="https://qqadapt.qpic.cn/txdocpic/0/46688c1d5a4f5a6703249a58831a905e/0?w=1318&h=400" alt="img">        </p>
<h2 id="5-2-Vim使用技巧"><a href="#5-2-Vim使用技巧" class="headerlink" title="5.2 Vim使用技巧"></a><strong>5.2 Vim使用技巧</strong></h2><p>导入命令执行结果  :r !命令 </p>
<p>定义快捷键  :map  快捷键 触发命令       </p>
<p>范例    : map  ^P  I#                   </p>
<p>​           : map  ^B  0x </p>
<p>连续行注释 :n1,n2s/^/#/g                            </p>
<p> 取消注释   :n1,n2s/^#//g</p>
<p> 给行首加// （需先设置行号） :n1,n2s/^////g      tips:\转义字符</p>
<p>替换  :    ab mymail <a href="samlee@lampbrother.net">samlee@lampbrother.net</a>  [输入mymail会自动替换成后面的内容]</p>
<blockquote>
<p>tips：定义的快捷键或者ab的内容重启后会消失。</p>
</blockquote>
<p>保存在：文件 .vimrc 中</p>
<p>root用户    -&gt;   /root/.vimrc</p>
<p>普通用户    -&gt;   /home/username/.vimrc</p>
<p>​                 <img src="https://qqadapt.qpic.cn/txdocpic/0/4d14f9cbcfacefa7947912fcede327dc/0?w=1024&h=724?type=image/gif" alt="img">        </p>
<h1 id="第六章-Linux软件安装"><a href="#第六章-Linux软件安装" class="headerlink" title="第六章 Linux软件安装"></a>第六章 Linux软件安装</h1><h2 id="6-1-软件包管理简介"><a href="#6-1-软件包管理简介" class="headerlink" title="6.1 软件包管理简介"></a><strong>6.1 软件包管理简介</strong></h2><p>软件包分类</p>
<ul>
<li><p>源码包 </p>
<p>   脚本安装包 </p>
</li>
<li><p>二进制包（RPM包、系统默认包）</p>
</li>
</ul>
<p>源码包 </p>
<p>源码包的优点是： </p>
<ul>
<li><p>开源，如果有足够的能力，可以修改源代码 </p>
</li>
<li><p>可以自由选择所需的功能 </p>
</li>
<li><p>软件是编译安装，所以更加适合自己的系统，更加稳定也效率更高 </p>
</li>
<li><p>卸载方便</p>
</li>
</ul>
<p>源码包的缺点 </p>
<ul>
<li><p>安装过程步骤较多，尤其安装较大的软件集合时（如LAMP环境搭建），容易出现拼写错误</p>
</li>
<li><p>编译过程时间较长，安装比二进制安装时间长 </p>
</li>
<li><p>因为是编译安装，安装过程中一旦报错新手很难解决</p>
</li>
</ul>
<p>RPM包 </p>
<p>二进制包的优点 </p>
<ul>
<li><p>包管理系统简单，只通过几个命令就可以实现包的安装、升级、查询和卸载 </p>
</li>
<li><p>安装速度比源码包安装快的多</p>
</li>
</ul>
<p>二进制包缺点：</p>
<ul>
<li>经过编译，不再可以看到源代码 </li>
<li>功能选择不如源码包灵活 </li>
<li>依赖性   依赖性指的是要想安装A包就得先安装B包，要想安装B包又得先安装C包，所以只能以CBA的顺序安装RPM包，删除的时候得按ABC顺序删除安装包，基本上所有的RPM包全有依赖性</li>
</ul>
<h2 id="6-2-RPM包管理-rpm命令管理"><a href="#6-2-RPM包管理-rpm命令管理" class="headerlink" title="6.2 RPM包管理-rpm命令管理"></a><strong>6.2 RPM包管理-rpm命令管理</strong></h2><p><strong>rpm</strong>是由红帽公司开发的软件包管理方式，使用rpm我们可以方便的进行软件的安装、查询、卸载、升级等工作。但是rpm软件包之间的依赖性问题往往会很繁琐,尤其是软件由多个rpm包组成时。</p>
<p><strong>yum</strong>（全称为 Yellow dog Updater, Modified）是一个在Fedora和RedHat以及SUSE中的Shell前端软件包管理器。基於RPM包管理，能够从指定的服务器自动下载RPM包并且安装，可以自动处理依赖性关系，并且一次安装所有依赖的软体包，无须繁琐地一次次下载、安装。</p>
<h3 id="6-2-1-软件包管理-rpm命令管理-包命名与依赖性"><a href="#6-2-1-软件包管理-rpm命令管理-包命名与依赖性" class="headerlink" title="6.2.1 软件包管理-rpm命令管理-包命名与依赖性"></a><strong>6.2.1 软件包管理-rpm命令管理-包命名与依赖性</strong></h3><p>RPM包命名原则  </p>
<p>httpd-2.2.15-15.el6.centos.1.i686.rpm </p>
<p>httpd   软件包名 </p>
<p>2.2.15  软件版本 </p>
<p>15   软件发布的次数 </p>
<p>el6.centos  适合的Linux平台 </p>
<p>i686   适合的硬件平台 </p>
<p>rpm   rpm包扩展名</p>
<p>RPM包依赖性 </p>
<ul>
<li>树形依赖： a→b→c </li>
<li>环形依赖： a→b→c→a </li>
</ul>
<blockquote>
<p>遇到环形依赖的解决方法是把所有的RPM包放在一条命令中进行安装。</p>
</blockquote>
<ul>
<li>模块依赖： 模块依赖查询网站：<a target="_blank" rel="noopener" href="http://www.rpmfind.net/">www.rpmfind.net</a></li>
</ul>
<blockquote>
<p>如果安装时遇到问题，出现依赖性错误，被依赖文件以.so.[数字]结尾的为库依赖，需要直接安装这个软件，错误会自动解决，安装这个包时需要进入网站 <a target="_blank" rel="noopener" href="https://blog.csdn.net/yy150122/article/details/www.rpmfind.net">www.rpmfind.net</a>. 查询被依赖文件</p>
</blockquote>
<h3 id="6-2-2-软件包管理-rpm命令管理-安装升级与卸载"><a href="#6-2-2-软件包管理-rpm命令管理-安装升级与卸载" class="headerlink" title="6.2.2 软件包管理-rpm命令管理-安装升级与卸载"></a><strong>6.2.2 软件包管理-rpm命令管理-安装升级与卸载</strong></h3><p>包全名与包名 </p>
<ul>
<li>包全名：操作的包是没有安装的软件包时， 使用包全名。而且要注意路径</li>
<li>包名：操作已经安装的软件包时，使用包名。</li>
</ul>
<p>​        是搜索/var/lib/rpm/中的数据库</p>
<p>RPM安装 </p>
<p>rpm –ivh 包全名 </p>
<p>选项：  </p>
<p>-i（install）   安装   </p>
<p>-v（verbose） 显示详细信息     </p>
<p>-h（hash）  显示进度   </p>
<p>–nodeps  不检测依赖性</p>
<p>RPM包升级 </p>
<p>rpm  -Uvh  包全名 </p>
<p>选项：   </p>
<p>-U（upgrade）   升级</p>
<p>卸载 </p>
<p>rpm  -e  包名 </p>
<p>选项：   </p>
<p>-e（erase） 卸载   </p>
<p>–nodeps  不检查依赖性</p>
<h3 id="6-2-3-软件包管理-rpm命令管理-查询"><a href="#6-2-3-软件包管理-rpm命令管理-查询" class="headerlink" title="6.2.3 软件包管理-rpm命令管理-查询"></a><strong>6.2.3 软件包管理-rpm命令管理-查询</strong></h3><p>查询是否安装 </p>
<p>[root@localhost ~]# rpm  -q  包名 </p>
<p><em>#查询包是否安装</em> </p>
<p>选项：  </p>
<p> -q 查询（query） </p>
<p>[root@localhost ~]# rpm –qa </p>
<p><em>#查询所有已经安装的RPM包</em> </p>
<p>选项：   </p>
<p>-a 所有（all）</p>
<p>rpm -qa | grep [关键字]<br>查询所有含义关键字的包，| 为管道符 。作用是管道符左边命令的输出就会作为管道符右边命令的操作对象<br>注意：<br>1、管道命令只处理前一个命令正确输出，不处理错误输出。<br>2、管道命令右边命令，必须能够接收标准输入流命令才行。</p>
<p>查询软件包详细信息 </p>
<p>[root@localhost ~]#  rpm –qi 包名 </p>
<p>选项：   </p>
<p>-i 查询软件信息（information）   </p>
<p>-p 查询未安装包信息（package）</p>
<p>查询包中文件安装位置 </p>
<p>[root@localhost ~]#  rpm –ql 包名 </p>
<p>选项：   </p>
<p>-l 列表（list）   </p>
<p>-p 查询未安装包信息（package）</p>
<p>查询系统文件属于哪个RPM包 </p>
<p>[root@localhost ~]#  rpm –qf 系统文件名 </p>
<p>选项：  </p>
<p>-f 查询系统文件属于哪个软件包（file）</p>
<p>查询软件包的依赖性  </p>
<p>[root@localhost ~]# rpm –qR 包名 </p>
<p>选项：  </p>
<p>-R 查询软件包的依赖性（requires）  </p>
<p>-p 查询未安装包信息（package）</p>
<h3 id="6-2-4-软件包管理-rpm命令管理-校验和文件提取"><a href="#6-2-4-软件包管理-rpm命令管理-校验和文件提取" class="headerlink" title="6.2.4 软件包管理-rpm命令管理-校验和文件提取"></a><strong>6.2.4 软件包管理-rpm命令管理-校验和文件提取</strong></h3><p> RPM包校验 </p>
<p>[root@localhost ~]# rpm –V 已安装的包名</p>
<p>选项：  </p>
<p>-V 校验指定RPM包中的文件（verify）</p>
<p>验证内容中的8个信息的具体内容如下：</p>
<ul>
<li>S 文件大小是否改变 </li>
<li>M 文件的类型或文件的权限（rwx）是否被改变 </li>
<li>5 文件MD5校验和是否改变（可以看成文件内容是否改变） </li>
<li>D 设备的中，从代码是否改变 </li>
<li>L 文件路径是否改变 </li>
<li>U 文件的属主（所有者）是否改变 </li>
<li>G 文件的属组是否改变 </li>
<li>T 文件的修改时间是否改变</li>
</ul>
<p>文件类型 </p>
<ul>
<li>c 配置文件（config file） </li>
<li>d 普通文档（documentation） </li>
<li>g “鬼”文件（ghost file），很少见，就是该文件不应该被这个RPM包包含</li>
<li> l 授权文件（license file） </li>
<li>r 描述文件（read me）</li>
</ul>
<p>RPM包中文件提取</p>
<p> [root@localhost ~]# rpm2cpio 包全名  |  \ </p>
<p>cpio -idv .文件绝对路径   </p>
<blockquote>
<p>\ 代表命令太长，需要换一行写</p>
</blockquote>
<p>rpm2cpio     </p>
<p><em>#将rpm包转换为cpio格式的命令</em> </p>
<p>cpio        </p>
<p><em>#是一个标准工具，它用于创建软件档案文件和从档案文件中提取文件</em></p>
<p>[root@localhost ~]# cpio 选项 &lt; [文件|设备] </p>
<p>选项：   </p>
<p>-i：copy-in模式，还原   </p>
<p>-d：还原时自动新建目录  </p>
<p> -v：显示还原过程</p>
<p>[root@localhost ~]# rpm -qf /bin/ls </p>
<p>#查询ls命令属于哪个软件包 </p>
<p>[root@localhost ~]# mv /bin/ls /tmp/ </p>
<p>#造成ls命令误删除假象</p>
<p>[root@localhost ~]# rpm2cpio /mnt/cdrom/Packages/coreutils- 8.4-19.el6.i686.rpm | cpio -idv  ./bin/ls </p>
<p>#提取RPM包中ls命令到当前目录的/bin/ls下 </p>
<p>[root@localhost ~]# cp /root/bin/ls  /bin/ </p>
<p>#把ls命令复制会/bin/目录，修复文件丢失</p>
<h2 id="6-3-RPM包管理-yum在线管理"><a href="#6-3-RPM包管理-yum在线管理" class="headerlink" title="6.3 RPM包管理-yum在线管理"></a><strong>6.3 RPM包管理-yum在线管理</strong></h2><h3 id="6-3-1-IP地址配置和网络yum源"><a href="#6-3-1-IP地址配置和网络yum源" class="headerlink" title="6.3.1 IP地址配置和网络yum源"></a><strong>6.3.1 IP地址配置和网络yum源</strong></h3><p><strong>1、IP地址配置</strong> </p>
<p>[root@localhost ~]# setup </p>
<p>#使用setup工具 </p>
<blockquote>
<p> tips:CentOS7、8中是nmtui命令</p>
</blockquote>
<p> [root@localhost ~]# vi /etc/sysconfig/network-scripts/ifcfg-eth0 </p>
<p>把<strong>ONBOOT=“no”</strong> 改为</p>
<p>   <strong>ONBOOT=“yes“</strong> </p>
<p>#启动网卡  </p>
<p>[root@localhost ~]# service network restart </p>
<p>#重启网络服务</p>
<blockquote>
<p>centos 7后 service都改为systemctl</p>
</blockquote>
<p><strong>2、网络yum源</strong> </p>
<p>[root@localhost yum.repos.d]# vi /etc/yum.repos.d/CentOS-Base.repo </p>
<ul>
<li>[base]  容器名称，一定要放在[]中 </li>
<li>name  容器说明，可以自己随便写 </li>
<li>mirrorlist 镜像站点，这个可以注释掉 </li>
<li>baseurl 我们的yum源服务器的地址。默认是CentOS官方的yum源服务器，是可以使用的，如果你觉得慢可以改成你喜欢的yum源地址 </li>
<li>enabled 此容器是否生效，如果不写或写成enable=1都是生效，写成  enable=0就是不生效</li>
<li>gpgcheck 如果是1是指RPM的数字证书生效，如果是0则不生效 </li>
<li>gpgkey 数字证书的公钥文件保存位置。不用修改</li>
</ul>
<p>​                 <img src="https://qqadapt.qpic.cn/txdocpic/0/bccd4338c6aaa00b130a49acc00f0356/0?w=1392&h=276" alt="img">        </p>
<h3 id="6-3-2-yum命令"><a href="#6-3-2-yum命令" class="headerlink" title="6.3.2 yum命令"></a><strong>6.3.2 yum命令</strong></h3><p><strong>1.常用yum命令</strong> </p>
<p><strong>1）查询</strong> </p>
<p>[root@localhost yum.repos.d]# yum list </p>
<p>#查询所有可用软件包列表  </p>
<p>[root@localhost yum.repos.d]# yum search 关键字 </p>
<p>#搜索服务器上所有和关键字相关的包</p>
<p><strong>2）安装</strong> </p>
<p>[root@localhost yum.repos.d]# yum –y install 包名 </p>
<p>选项：  install 安装  </p>
<p>-y  自动回答yes</p>
<p><strong>3）升级</strong></p>
<p>[root@localhost yum.repos.d]# yum -y update 包名 </p>
<p>选项：  update 升级  </p>
<p>-y  自动回答yes</p>
<p><strong>4）卸载</strong> </p>
<p>[root@localhost yum.repos.d]# yum -y remove 包名 </p>
<p>选项：   remove  卸载  </p>
<p>-y  自动回答y e s</p>
<p>tips:update 不加包名全部升级（包括Linux内核，会导致服务器挂掉）</p>
<p>卸载同理（尽量不要卸载）</p>
<p><strong>2、YUM软件组管理命令</strong> </p>
<p>[root@localhost~]# yum grouplist</p>
<p>#列出所有可用的软件组列表  </p>
<p>[root@localhost~]# yum groupinstall  软件组名 </p>
<p>#安装指定软件组，组名可以由grouplist查询出来 </p>
<p>[root@localhost~]# yum groupremove  软件组名 </p>
<p>#卸载指定软件组</p>
<p>tips:安装软件包组 有空格 用””括起来</p>
<h3 id="6-3-2-光盘yum源搭建"><a href="#6-3-2-光盘yum源搭建" class="headerlink" title="6.3.2 光盘yum源搭建"></a><strong>6.3.2 光盘yum源搭建</strong></h3><p>光盘yum源搭建步骤 </p>
<p><strong>1）挂载光盘</strong> </p>
<p>[root@localhost ~]# mount /dev/cdrom  /mnt/cdrom/  </p>
<p><strong>2）让网络yum源文件失效 （视频内改名处理）</strong></p>
<p>[root@localhost ~]# cd /etc/yum.repos.d/ </p>
<p>[root@localhost yum.repos.d]# mv CentOS-Base.repo  \ CentOS-Base.repo.bak </p>
<p>[root@localhost yum.repos.d]# mv CentOS-Debuginfo.repo \  CentOS-Debuginfo.repo.bak </p>
<p>[root@localhost yum.repos.d]# mv CentOS-Vault.repo  \ CentOS-Vault.repo.bak</p>
<p><strong>3）修改光盘yum源文件</strong> </p>
<p>[root@localhost yum.repos.d]# vim CentOS-Media.repo </p>
<p>[c6-media] </p>
<p>name=CentOS-$releasever - Media </p>
<p>baseurl=file:///mnt/cdrom </p>
<p>#地址为你自己的光盘挂载地址 </p>
<p>#        file:///media/cdrom/</p>
<p>#        file:///media/cdrecorder/ </p>
<p>#注释这两个不存在的地址 （ 不注释也没事，但是会显示报错）</p>
<p>gpgcheck=1 </p>
<p><strong>enabled=1</strong> </p>
<p>#把enabled=0改为enabled=1，让这个yum源配置文件生效 gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-6</p>
<blockquote>
<p>注意：千万不要随意改配置文件格式，加注释，加空格缩紧 都会造成命令错误！！！！！</p>
</blockquote>
<h2 id="6-4-源码包管理"><a href="#6-4-源码包管理" class="headerlink" title="6.4 源码包管理"></a><strong>6.4 源码包管理</strong></h2><h3 id="6-4-1-源码包和RPM包的区别"><a href="#6-4-1-源码包和RPM包的区别" class="headerlink" title="6.4.1 源码包和RPM包的区别"></a><strong>6.4.1 源码包和RPM包的区别</strong></h3><ol>
<li>区别 </li>
</ol>
<ul>
<li>安装之前的区别：概念上的区别 </li>
<li>安装之后的区别：安装位置不同</li>
</ul>
<ol start="2">
<li>RPM包安装位置 </li>
</ol>
<ul>
<li>是安装在默认位置中</li>
</ul>
<table>
<thead>
<tr>
<th><strong>RPM包默认安装路径</strong></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>/etc/</td>
<td>配置文件安装目录</td>
</tr>
<tr>
<td>/usr/bin/</td>
<td>可执行的命令安装目录</td>
</tr>
<tr>
<td>/usr/lib/</td>
<td>程序所使用的函数库保存位置</td>
</tr>
<tr>
<td>/usr/share/doc/</td>
<td>基本的软件使用手册保存位置</td>
</tr>
<tr>
<td>/usr/share/man/</td>
<td>帮助文件保存位置</td>
</tr>
</tbody></table>
<ol start="3">
<li>源码包安装位置 </li>
</ol>
<ul>
<li>安装在指定位置当中，一般是  /usr/local/软件名/</li>
</ul>
<ol start="4">
<li>安装位置不同带来的影响 </li>
</ol>
<ul>
<li><p>RPM包安装的服务可以使用系统服务管理命令（service）来管理，例如RPM包安装的apache的启动方法是： </p>
</li>
<li><ul>
<li>/etc/rc.d/init.d/httpd start </li>
<li>service httpd start</li>
</ul>
</li>
<li><blockquote>
<p>centos 7后 service都改为systemctl</p>
</blockquote>
</li>
<li><p>而源码包安装的服务则不能被服务管理命令管理，因为没有安装到默认路径中。所以只能用绝对路径进行服务的管理，如： </p>
<ul>
<li>/usr/local/apache2/bin/apachectl start</li>
</ul>
</li>
</ul>
<h3 id="6-4-2-源码包安装过程"><a href="#6-4-2-源码包安装过程" class="headerlink" title="6.4.2 源码包安装过程"></a><strong>6.4.2 源码包安装过程</strong></h3><ol>
<li>安装准备</li>
</ol>
<ul>
<li><p>安装C语言编译器</p>
</li>
<li><p>下载源码包      <a target="_blank" rel="noopener" href="http://mirror.bit.edu.cn/apache/httpd/">http://mirror.bit.edu.cn/apache/httpd/</a></p>
</li>
</ul>
<ol start="2">
<li>安装注意事项 </li>
</ol>
<ul>
<li><p>源代码保存位置：/usr/local/src/ </p>
</li>
<li><p>软件安装位置：/usr/local/ </p>
</li>
<li><p>如何确定安装过程报错： </p>
</li>
<li><ul>
<li>安装过程停止</li>
<li>并出现error、warning或no的提示</li>
</ul>
</li>
</ul>
<ol start="3">
<li>源码包安装过程 </li>
</ol>
<ul>
<li><p>下载源码包 </p>
</li>
<li><p>解压缩下载的源码包 </p>
</li>
<li><p>进入解压缩目录</p>
</li>
<li><p>./configure  软件配置与检查 </p>
</li>
<li><ul>
<li>定义需要的功能选项。 </li>
<li>检测系统环境是否符合安装要求。</li>
<li>把定义好的功能选项和检测系统环境的信息都写入Makefile文件，用于后续的编辑</li>
</ul>
</li>
<li><p>make 编译 </p>
</li>
<li><p>make  clean (前面的命令报错，安装失败的话)</p>
</li>
<li><p>make install    编译安装</p>
</li>
</ul>
<ol start="4">
<li>源码包的卸载 </li>
</ol>
<ul>
<li>不需要卸载命令，直接删除安装目录即可。不会遗留任何垃圾文件。</li>
</ul>
<h2 id="6-5-脚本安装包"><a href="#6-5-脚本安装包" class="headerlink" title="6.5 脚本安装包"></a><strong>6.5 脚本安装包</strong></h2><ol>
<li>脚本安装包 </li>
</ol>
<ul>
<li>脚本安装包并不是独立的软件包类型，常见安装的是源码包。 </li>
<li>是人为把安装过程写成了自动安装的脚本，只要执行脚本，定义简单的参数，就可以完成安装。 </li>
<li>非常类似于Windows下软件的安装方式。</li>
</ul>
<ol start="2">
<li>Webmin的作用 </li>
</ol>
<ul>
<li>Webmin 是一个基于 Web 的 Linux 系统管理界面。您就可以通过图形化的方式设置用户帐号、Apache、DNS、文件共享等服务。</li>
</ul>
<ol start="3">
<li>Webmin安装过程 </li>
</ol>
<ul>
<li><p>下载软件 </p>
</li>
<li><ul>
<li><a target="_blank" rel="noopener" href="http://sourceforge.net/projects/webadmin/files/webmin/">http://sourceforge.net/projects/webadmin/files/webmin/</a> </li>
</ul>
</li>
<li><p>解压缩，并进入加压缩目录</p>
</li>
<li><p>执行安装脚本</p>
</li>
</ul>
<p>没有安装perl的需要先安装perl</p>
<p>安装步骤：</p>
<ul>
<li>通过浏览器打开 <a target="_blank" rel="noopener" href="http://www.perl.org/get.html%E3%80%82">http://www.perl.org/get.html。</a></li>
</ul>
<p><em>(</em> <a target="_blank" rel="noopener" href="https://pan.baidu.com/s/1tenkC16krTUv1dwMzJQl2Q">https://pan.baidu.com/s/1tenkC16krTUv1dwMzJQl2Q</a>  <em>密码:hh1x</em><em>)</em></p>
<ul>
<li>下载适用于 Unix/Linux 的源码包。</li>
<li>下载 <strong>perl-5.x.y.tar.gz</strong> 文件后执行以下操作。</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ tar -xzf perl-5.x.y.tar.gz</span><br><span class="line">$ cd perl-5.x.y</span><br><span class="line">$ ./Configure -de</span><br><span class="line">$ make</span><br><span class="line">$ make test</span><br><span class="line">$ make install</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p>接下来我们如果 <strong>perl -v</strong> 命令查看是否安装成功。</p>
<p>安装成功后，Perl 的安装路径为 <em>/usr/local/bin</em> ，库安装在 <em>/usr/local/lib/perlXX</em>, XX 为版本号。</p>
<p>1.941版本(202-01-05发布)</p>
<p>下载地址: </p>
<p> <a target="_blank" rel="noopener" href="https://pan.baidu.com/s/1tenkC16krTUv1dwMzJQl2Q">https://pan.baidu.com/s/1tenkC16krTUv1dwMzJQl2Q</a></p>
<p>  密码:hh1x</p>
<p>ip:10000 访问</p>
<p>​                 <img src="https://qqadapt.qpic.cn/txdocpic/0/cb040a5db8b1671dbc10d755e17e54aa/0?w=888&h=596" alt="img">        </p>
<p>出现上面情况可能是</p>
<p>未关闭防火墙：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ systemctl stop firewalld</span><br></pre></td></tr></table></figure>

<p>参考：</p>
<p><strong>1.启动防火墙</strong></p>
<p>systemctl start firewalld</p>
<p><strong>2.禁用防火墙</strong></p>
<p>systemctl stop firewalld</p>
<p><strong>3.查看状态</strong></p>
<p>systemctl status firewalld或者 firewall-cmd –state</p>
<p>(<a target="_blank" rel="noopener" href="https://blog.csdn.net/root_miss/article/details/83000159">https://blog.csdn.net/root_miss/article/details/83000159</a>)</p>
<p>(<a target="_blank" rel="noopener" href="https://blog.csdn.net/baidu_36124158/article/details/90603496">https://blog.csdn.net/baidu_36124158/article/details/90603496</a>)</p>
<h1 id="第七章-用户和用户组管理"><a href="#第七章-用户和用户组管理" class="headerlink" title="第七章 用户和用户组管理"></a><strong>第七章 用户和用户组管理</strong></h1><h2 id="7-1、用户配置文件"><a href="#7-1、用户配置文件" class="headerlink" title="7.1、用户配置文件"></a><strong>7.1、用户配置文件</strong></h2><p><strong>7.1.1 用户信息文件/etc/passwd</strong></p>
<ol>
<li>用户管理简介 </li>
</ol>
<ul>
<li><p>越是对服务器安全性要求高的服务器，越需要建立合理的用户权限等级制度和服务器操作规范。 </p>
</li>
<li><p>在Linux中主要是通过用户配置文件来查看和修改用户信息</p>
</li>
<li><p>通过命令：man 5 passwd 来查看passwd配置文件帮助信息 5代表配置文件</p>
</li>
</ul>
<ol start="2">
<li>/etc/passwd </li>
</ol>
<ul>
<li><p>第1字段：用户名称</p>
</li>
<li><p>第2字段：密码标志 </p>
</li>
<li><p>第3字段：UID（用户ID） </p>
</li>
<li><ul>
<li>0：   超级用户 </li>
<li>1-499：  系统用户（伪用户）</li>
<li>500-65535： 普通用户(centos7 从1000开始计算)</li>
</ul>
</li>
<li><p>第4字段：GID（用户初始组ID）[不推荐修改初始组]</p>
</li>
<li><p>第5字段：用户说明 </p>
</li>
<li><p>第6字段：家目录 </p>
</li>
<li><ul>
<li>普通用户：/home/用户名/ </li>
<li>超级用户：/root/ </li>
</ul>
</li>
<li><p>第7字段：登录之后的Shell</p>
</li>
</ul>
<p>​                 <img src="https://qqadapt.qpic.cn/txdocpic/0/0b6c8d228bd401e11794516950624501/0?w=668&h=174" alt="img">        </p>
<ol start="3">
<li>初始组和附加组 </li>
</ol>
<ul>
<li><p>初始组：就是指用户一登录就立刻拥有这个用户组的相关权限，每个用户的初始组只能有一个，一般就是和这个用户的用户名相同的组名作为这个用户的初始组。 </p>
</li>
<li><p>附加组：指用户可以加入多个其他的用户组，并拥有这些组的权限，附加组可以有多个。</p>
</li>
</ul>
<ol start="4">
<li>Shell是什么 </li>
</ol>
<ul>
<li><p>Shell就是Linux的命令解释器。 </p>
</li>
<li><p>在/etc/passwd当中，除了标准Shell是/bin/bash之外，还可以写如/sbin/nologin，/usr/bin/passwd等。</p>
</li>
</ul>
<blockquote>
<p>tips:暂时禁用用户，可以把/bin/bash -&gt; /bin/nologin</p>
</blockquote>
<h3 id="7-1-2-影子文件-etc-shadow"><a href="#7-1-2-影子文件-etc-shadow" class="headerlink" title="7.1.2 影子文件/etc/shadow"></a><strong>7.1.2 影子文件/etc/shadow</strong></h3><ol>
<li>影子文件/etc/shadow </li>
</ol>
<ul>
<li><p>第1字段：用户名 </p>
</li>
<li><p>第2字段：加密密码 </p>
</li>
<li><ul>
<li>加密算法升级为SHA512散列加密算法 </li>
<li>如果密码位是“!!”或“*”代表没有密码，不能登录 </li>
<li>可以用感叹号禁用用户密码</li>
</ul>
</li>
<li><p>第3字段：密码最后一次修改日期 </p>
</li>
<li><ul>
<li>使用1970年1月1日作为标准时间，每过一天时间戳加1</li>
</ul>
</li>
<li><p>第4字段：两次密码的修改间隔时间（和第3字段相比） </p>
</li>
<li><p>第5字段：密码有效期（和第3字段相比） </p>
</li>
<li><p>第6字段：密码修改到期前的警告天数（和第5字段相比）</p>
</li>
<li><p>第7字段：密码过期后的宽限天数（和第5 字段相比） </p>
</li>
<li><ul>
<li>0：代表密码过期后立即失效</li>
<li>-1：则代表密码永远不会失效。 </li>
</ul>
</li>
<li><p>第8字段：账号失效时间 </p>
</li>
<li><ul>
<li>要用时间戳表示 </li>
</ul>
</li>
<li><p>第9字段：保留</p>
</li>
</ul>
<p>​                 <img src="https://qqadapt.qpic.cn/txdocpic/0/65cffc655c3262246b47e9d0105fd1a1/0?w=1818&h=914" alt="img">        </p>
<ol start="2">
<li>时间戳换算 </li>
</ol>
<ul>
<li><p>把时间戳换算为日期 </p>
</li>
<li><ul>
<li>date -d “1970-01-01 16066 days” </li>
</ul>
</li>
<li><p>把日期换算为时间戳 </p>
</li>
<li><ul>
<li>echo $(($(date –date=”2014/01/06” +%s)/86400+1))</li>
</ul>
</li>
</ul>
<blockquote>
<p>date与–之间有空格； +与%s之间不能有空格</p>
</blockquote>
<h3 id="7-1-3-组信息文件-etc-group和组密码文件-etc-gshadow"><a href="#7-1-3-组信息文件-etc-group和组密码文件-etc-gshadow" class="headerlink" title="7.1.3 组信息文件/etc/group和组密码文件 /etc/gshadow"></a><strong>7.1.3 组信息文件/etc/group和组密码文件 /etc/gshadow</strong></h3><ol>
<li>组信息文件/etc/group </li>
</ol>
<ul>
<li>第一字段：组名 </li>
<li>第二字段：组密码标志 </li>
<li>第三字段：GID </li>
<li>第四字段：组中附加用户</li>
</ul>
<p>​                 <img src="https://qqadapt.qpic.cn/txdocpic/0/10c293c3bcd49b53c6c03676309a4daf/0?w=482&h=86" alt="img">        </p>
<p>​                 <img src="https://qqadapt.qpic.cn/txdocpic/0/35cabbcec6b1c3d7bbf450eeb62053f7/0?w=318&h=54" alt="img">        </p>
<ol start="2">
<li>组密码文件/etc/gshadow </li>
</ol>
<ul>
<li>第一字段：组名 </li>
<li>第二字段：组密码 (不推荐使用，可以理解为给组设置个小组长)</li>
<li>第三字段：组管理员用户名 </li>
<li>第四字段：组中附加用户</li>
</ul>
<h2 id="7-2、用户管理相关文件"><a href="#7-2、用户管理相关文件" class="headerlink" title="7.2、用户管理相关文件"></a><strong>7.2、用户管理相关文件</strong></h2><ol>
<li>用户的家目录 </li>
</ol>
<ul>
<li>普通用户：/home/用户名/，所有者和所属组都是此用户，权限是700 </li>
<li>超级用户：/root/，所有者和所属组都是root用户，权限是550 </li>
</ul>
<blockquote>
<p>普通用户变为超级用户家目录不会变</p>
</blockquote>
<ol start="2">
<li>用户的邮箱 </li>
</ol>
<ul>
<li>/var/spool/mail/用户名/ </li>
</ul>
<ol start="3">
<li>用户模板目录 </li>
</ol>
<ul>
<li>/etc/skel/</li>
</ul>
<h2 id="7-3、用户管理命令"><a href="#7-3、用户管理命令" class="headerlink" title="7.3、用户管理命令"></a><strong>7.3、用户管理命令</strong></h2><h3 id="7-3-1-用户添加命令useradd"><a href="#7-3-1-用户添加命令useradd" class="headerlink" title="7.3.1 用户添加命令useradd"></a><strong>7.3.1 用户添加命令useradd</strong></h3><ol>
<li>useradd命令格式 </li>
</ol>
<p>[root@localhost ~]#useradd [选项] 用户名 </p>
<p>选项：  </p>
<p>-u UID： 手工指定用户的UID号  </p>
<p>-d 家目录： 手工指定用户的家目录  </p>
<p>-c 用户说明： 手工指定用户的说明  </p>
<p>-g 组名： 手工指定用户的初始组  </p>
<p>-G 组名： 指定用户的附加组  </p>
<p>-s shell： 手工指定用户的登录shell。默认是/bin/bash  </p>
<ol start="2">
<li>添加默认用户 </li>
</ol>
<ul>
<li><p>[root@localhost ~]# useradd lamp </p>
<p>useradd lamp等同于如下操作：</p>
</li>
<li><ul>
<li>[root@localhost ~]# grep “lamp” /etc/passwd l</li>
<li>[root@localhost ~]# grep “lamp” /etc/shadow </li>
<li>[root@localhost ~]# grep “lamp” /etc/group </li>
<li>[root@localhost ~]# grep “lamp” /etc/gshadow </li>
<li>[root@localhost ~]# ll -d /home/lamp/ </li>
<li>[root@localhost ~]# ll /var/spool/mail/lamp</li>
</ul>
</li>
</ul>
<ol start="3">
<li>指定选项添加用户 </li>
</ol>
<ul>
<li>groupadd lamp1 </li>
<li>useradd -u 550 -g lamp1 -G root -d /home/lamp1  \  -c “test user” -s /bin/bash lamp1</li>
</ul>
<ol start="4">
<li>用户默认值文件 </li>
</ol>
<ul>
<li><p>/etc/default/useradd </p>
</li>
<li><ul>
<li>GROUP=100  #用户默认组 </li>
<li>HOME=/home #用户家目录 </li>
<li>INACTIVE=-1 #密码过期宽限天数（7）</li>
<li>EXPIRE=  #密码失效时间（8） </li>
<li>SHELL=/bin/bash #默认shell </li>
<li>SKEL=/etc/skel #模板目录 </li>
<li>CREATE_MAIL_SPOOL=yes #是否建立邮箱 </li>
</ul>
</li>
</ul>
<p>​                 <img src="https://qqadapt.qpic.cn/txdocpic/0/5ae5fd3766e5c877bf2db422da9db6b9/0?w=672&h=392" alt="img">        </p>
<ul>
<li><p>/etc/login.defs  </p>
</li>
<li><p>PASS_MAX_DAYS 99999 #密码有效期（5） </p>
</li>
<li><p>PASS_MIN_DAYS 0 #密码修改间隔（4）</p>
</li>
<li><p>PASS_MIN_LEN 5 #密码最小5位（PAM）</p>
</li>
<li><p>PASS_WARN_AGE 7 #密码到期警告（6）</p>
</li>
<li><p>UID_MIN  500 #最小和最大UID范围 </p>
</li>
<li><p>GID_MAX  60000 </p>
</li>
<li><p>ENCRYPT_METHOD SHA512 #加密模式</p>
</li>
</ul>
<p>​                 <img src="https://qqadapt.qpic.cn/txdocpic/0/a60beb569d06d2ff51d8687558e5b6b8/0?w=492&h=238" alt="img">        </p>
<h3 id="7-3-2-修改用户密码passwd"><a href="#7-3-2-修改用户密码passwd" class="headerlink" title="7.3.2 修改用户密码passwd"></a><strong>7.3.2 修改用户密码passwd</strong></h3><ol>
<li>passwd命令格式 </li>
</ol>
<p>[root@localhost ~]#passwd [选项] 用户名 </p>
<p>选项：  </p>
<p>-S  查询用户密码的密码状态。仅root用户可用。 </p>
<p>-l  暂时锁定用户。仅root用户可用  </p>
<p>-u  解锁用户。仅root用户可用  </p>
<p>–stdin 可以通过管道符输出的数据作为用户的密码。 </p>
<ol start="2">
<li>查看密码状态 </li>
</ol>
<p>[root@localhost ~]# passwd -S lamp  </p>
<p>lamp PS 2013-01-06 0 99999 7 -1  </p>
<p>#用户名 密码设定时间（2013-01-06） 密码修改间隔时间（0） #密码有效期（99999 ） 警告时间（7） 密码不失效（-1）</p>
<ol start="3">
<li>锁定用户和解锁用户 </li>
</ol>
<ul>
<li>[root@localhost ~]# passwd -l lamp </li>
<li>[root@localhost ~]# passwd -u lamp   </li>
</ul>
<ol start="4">
<li>使用字符串作为用户的密码 </li>
</ol>
<ul>
<li>[root@localhost ~]# echo “123” | passwd –stdin lamp（shell脚本可能会用到）</li>
</ul>
<h3 id="7-3-3-修改用户信息usermod-amp-修改用户密码状态chage"><a href="#7-3-3-修改用户信息usermod-amp-修改用户密码状态chage" class="headerlink" title="7.3.3    修改用户信息usermod&amp;修改用户密码状态chage"></a><strong>7.3.3    修改用户信息usermod&amp;修改用户密码状态chage</strong></h3><p>1、修改用户信息usermod</p>
<p>[root@localhost ~]#usermod [选项] 用户名</p>
<p>选项：</p>
<p>​    -u UID：        修改用户的UID号</p>
<p>​    -c 用户说明：    修改用户的说明信息</p>
<p>​    -G 组名：        修改用户的附加组</p>
<p>​    -L：        临时锁定用户（Lock）</p>
<p>​    -U：        解锁用户锁定（Unlock）</p>
<ul>
<li>[root@localhost ~]# usermod -c “test user” lamp</li>
</ul>
<p>修改用户的说明</p>
<ul>
<li>[root@localhost ~]# usermod -G root lamp</li>
</ul>
<p>把lamp用户加入root组</p>
<ul>
<li>[root@localhost ~]# usermod -L lamp</li>
</ul>
<p>锁定用户</p>
<ul>
<li>[root@localhost ~]# usermod -U lamp</li>
</ul>
<p>解锁用户</p>
<p>2、修改用户密码状态chage</p>
<p>[root@localhost ~]#chage [选项] 用户名</p>
<table>
<thead>
<tr>
<th>选项</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>-l</td>
<td>列出用户的详细密码状态</td>
</tr>
<tr>
<td>-d 日期</td>
<td>修改密码最后一次更改日期（shadow3字段）</td>
</tr>
<tr>
<td>-m 天数</td>
<td>两次密码修改间隔（4字段）</td>
</tr>
<tr>
<td>-M 天数</td>
<td>密码有效期（5字段）</td>
</tr>
<tr>
<td>-w 天数</td>
<td>密码过期前警告天数（6字段）</td>
</tr>
<tr>
<td>-I 天数</td>
<td>密码过后宽限天数（7字段）</td>
</tr>
<tr>
<td>-E 日期</td>
<td>账号失效时间（8字段）</td>
</tr>
</tbody></table>
<blockquote>
<p>[root@localhost ~]# chage -d 0 lamp  </p>
<p>这个命令其实是把密码修改日期归0了（shadow第3字段）#这样用户一登陆就要修改密码</p>
</blockquote>
<h3 id="7-3-4-删除用户userdel-用户切换命令su"><a href="#7-3-4-删除用户userdel-用户切换命令su" class="headerlink" title="7.3.4 删除用户userdel   用户切换命令su"></a><strong>7.3.4 删除用户userdel   用户切换命令su</strong></h3><ol>
<li>删除用户userdel </li>
</ol>
<p>[root@localhost ~]# userdel [-r] 用户名 </p>
<p>选项：  </p>
<p>-r 删除用户的同时删除用户家目录  </p>
<p><strong>手工删除用户</strong> </p>
<ul>
<li><p>[root@localhost ~]# vi /etc/passwd </p>
</li>
<li><p>[root@localhost ~]# vi /etc/shadow </p>
</li>
<li><p>[root@localhost ~]# vi /etc/group </p>
</li>
<li><p>[root@localhost ~]# vi /etc/gshadow </p>
</li>
<li><p>[root@localhost ~]# rm -rf /var/spool/mail/lamp </p>
</li>
<li><p>[root@localhost ~]# rm -rf /home/lamp/</p>
</li>
</ul>
<ol start="2">
<li>查看用户ID </li>
</ol>
<p>[root@localhost ~]# id 用户名</p>
<ol start="3">
<li>切换用户身份su </li>
</ol>
<p>[root@localhost ~]# su [选项] 用户名 </p>
<p>选项：  </p>
<p>-  ： 选项只使用“-”代表连带用户的环境变量一起切换  (env命令查看当前环境变量)</p>
<p>-c 命令： 仅执行一次命令，而不切换用户身份  </p>
<ul>
<li>[lamp@localhost ~]$ su  –  root </li>
</ul>
<p>#切换成root  </p>
<ul>
<li>[lamp@localhost ~]$ su - root -c “useradd user3” </li>
</ul>
<p>#不切换成root，但是执行useradd命令添加user1用户</p>
<h2 id="7-4、用户组管理命令"><a href="#7-4、用户组管理命令" class="headerlink" title="7.4、用户组管理命令"></a><strong>7.4、用户组管理命令</strong></h2><ol>
<li>添加用户组</li>
</ol>
<p>[root@localhost ~]# groupadd [选项] 组名 </p>
<p>选项：</p>
<p>-g GID     指定组ID</p>
<ol start="2">
<li>修改用户组</li>
</ol>
<p>[root@localhost ~]# groupmod [选项] 组名 </p>
<p>选项：</p>
<p>-g GID     修改组ID</p>
<p>-n 新组名    修改组名</p>
<p>例：[root@localhost ~]# groupmod -n yxlm lol</p>
<p>#把组名lol修改为yxlm</p>
<ol start="3">
<li>删除用户组</li>
</ol>
<p>[root@localhost ~]# groupdel [选项] 组名 </p>
<p>tips:删除组的时候，组内不允许有初始用户存在。</p>
<ol>
<li>把用户添加入组或从组中删除</li>
</ol>
<p>[root@localhost ~]# groupdel [选项] 组名 </p>
<p>选项：</p>
<p>-a 用户名： 把用户加入组</p>
<p>-d 用户名： 把用户从组中删除</p>
<h1 id="第八章-权限管理"><a href="#第八章-权限管理" class="headerlink" title="第八章 权限管理"></a><strong>第八章 权限管理</strong></h1><h2 id="8-1-ACL权限"><a href="#8-1-ACL权限" class="headerlink" title="8.1 ACL权限"></a><strong>8.1 ACL权限</strong></h2><h3 id="8-1-1-ACL权限简介与开启"><a href="#8-1-1-ACL权限简介与开启" class="headerlink" title="8.1.1 ACL权限简介与开启"></a><strong>8.1.1 ACL权限简介与开启</strong></h3><p>参考博文：<a target="_blank" rel="noopener" href="http://c.biancheng.net/view/863.html">http://c.biancheng.net/view/863.html</a></p>
<p><strong>ACL 是 Access Control List 的缩写，主要的目的是在提供传统的 owner,group,others 的 read,write,execute 权限之外的细部权限设定。ACL 可以针对单一使用者，单一文件或目录来进行 r,w,x 的权限规范，对于需要特殊权限的使用状况非常有帮助。</strong></p>
<ol>
<li>ACL权限简介</li>
</ol>
<p>​                 <img src="https://qqadapt.qpic.cn/txdocpic/0/a69f48e9b5ee91b26d8522ee330fddb6/0?w=958&h=508" alt="img">        </p>
<ol start="2">
<li>查看分区ACL权限是否开启 </li>
</ol>
<p>[root@localhost ~]# dumpe2fs -h /dev/sda3 </p>
<p>#dumpe2fs命令是查询指定分区详细文件系统信息的命令 </p>
<p>选项：  -h 仅显示超级块中信息，而不显示磁盘块组的详细信息</p>
<ol start="3">
<li>临时开启分区ACL权限 </li>
</ol>
<p>[root@localhost ~]# mount -o remount,acl / </p>
<p>#重新挂载根分区，并挂载加入acl权限  </p>
<ol start="4">
<li>永久开启分区ACL权限 </li>
</ol>
<p>[root@localhost ~]# vi /etc/fstab </p>
<p>UUID=c2ca6f57-b15c-43ea-bca0-f239083d8bd2  /   ext4    defaults,acl        1  1</p>
<p>#加入acl  </p>
<p>[root@localhost ~]# mount -o remount / </p>
<p>#重新挂载文件系统或重启动系统，使修改生效</p>
<h3 id="8-1-2-查看与设定ACL权限"><a href="#8-1-2-查看与设定ACL权限" class="headerlink" title="8.1.2 查看与设定ACL权限"></a><strong>8.1.2 查看与设定ACL权限</strong></h3><ol>
<li>查看ACL命令 </li>
</ol>
<p>[root@localhost ~]# getfacl 文件名 </p>
<p>#查看acl权限</p>
<ol start="2">
<li>设定ACL权限的命令</li>
</ol>
<p>[root@localhost ~]# setfacl 选项 文件名 </p>
<p>选项：</p>
<p>-m  设定ACL权限  </p>
<p>-x  删除指定的ACL权限  </p>
<p>-b  删除所有的ACL权限  </p>
<p>-d  设定默认ACL权限。 </p>
<p>-k  删除默认ACL权限  </p>
<p>-R  递归设定ACL权限。</p>
<p>3、给用户设定ACL权限</p>
<p>[root@localhost ~]# useradd zhangsan </p>
<p>[root@localhost ~]# useradd lisi </p>
<p>[root@localhost ~]# useradd st </p>
<p>[root@localhost ~]# groupadd tgroup</p>
<p>[root@localhost ~]# mkdir /project </p>
<p>[root@localhost ~]# chown root:tgroup /project/ </p>
<p>[root@localhost ~]# chmod 770 /project/ </p>
<p>[root@localhost ~]# setfacl -m u:st:rx /project/ </p>
<p>#给用户st赋予r-x权限，使用“u:用户名:权限”格式</p>
<p>4、给用户组设定ACL权限 </p>
<p>[root@localhost /]# groupadd tgroup2 </p>
<p>[root@localhost /]# setfacl -m g:tgroup2:rwx project/ </p>
<p>#为组tgroup2分配ACl权限。使用“g:组名:权限”格式</p>
<p>​                 <img src="https://qqadapt.qpic.cn/txdocpic/0/5b2124def3d64ac51a95fd38129b79b6/0?w=656&h=610" alt="img">        </p>
<p>操作前后显示内容对比:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"># ========前===========</span><br><span class="line">[yasuo@local1 ~]$ getfacl /lol</span><br><span class="line">getfacl: Removing leading &#x27;/&#x27; from absolute path names</span><br><span class="line"># file: lol</span><br><span class="line"># owner: root</span><br><span class="line"># group: root</span><br><span class="line">user::rwx</span><br><span class="line">group::r-x</span><br><span class="line">other::r-x</span><br><span class="line"></span><br><span class="line">[yasuo@local1 ~]$ ll -d /lol</span><br><span class="line">drwxr-xr-x. 2 root root 6 4月   1 15:55 /lol</span><br><span class="line"></span><br><span class="line"># =========后===========</span><br><span class="line">[yasuo@local1 ~]$ getfacl /lol</span><br><span class="line">getfacl: Removing leading &#x27;/&#x27; from absolute path names</span><br><span class="line"># file: lol</span><br><span class="line"># owner: root</span><br><span class="line"># group: zuan</span><br><span class="line">user::rwx</span><br><span class="line">#下面这行变化</span><br><span class="line">user:luban:r-x</span><br><span class="line">group::rwx</span><br><span class="line">#下面这行变化</span><br><span class="line">group:wzry:rwx</span><br><span class="line">mask::rwx</span><br><span class="line">other::---</span><br><span class="line"></span><br><span class="line"># . -&gt; + 表示有acl权限</span><br><span class="line">[yasuo@local1 ~]$ ll -d /lol  </span><br><span class="line">drwxrwx---+ 2 root zuan 6 4月   1 15:55 /lol</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h3 id="8-1-3-最大有效权限与删除ACL权限"><a href="#8-1-3-最大有效权限与删除ACL权限" class="headerlink" title="8.1.3 最大有效权限与删除ACL权限"></a><strong>8.1.3 最大有效权限与删除ACL权限</strong></h3><ol>
<li>最大有效权限mask </li>
</ol>
<ul>
<li>mask是用来指定最大有效权限的。如果我给用户赋予了ACL权限，是需要和mask的权限“相与”才能得到用户的真正权限</li>
</ul>
<table>
<thead>
<tr>
<th><strong>A</strong></th>
<th><strong>B</strong></th>
<th><strong>and</strong></th>
</tr>
</thead>
<tbody><tr>
<td>r</td>
<td>r</td>
<td>r</td>
</tr>
<tr>
<td>r</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td>-</td>
<td>r</td>
<td>-</td>
</tr>
<tr>
<td>-</td>
<td>-</td>
<td>-</td>
</tr>
</tbody></table>
<p>修改最大有效权限 </p>
<p>[root@localhost /]# setfacl -m m:rx 文件名 </p>
<p>#设定mask权限为r-x。使用“m:权限”格式  </p>
<ol start="2">
<li>删除ACL权限 [root@localhost /]# setfacl -x u:用户名 文件名 </li>
</ol>
<p>#删除指定用户的ACL权限  </p>
<p>[root@localhost /]# setfacl -x g:组名 文件名 </p>
<p>#删除指定用户组的ACL权限</p>
<p>[root@localhost /]# setfacl -b 文件名 </p>
<p>#会删除文件的所有的ACL权限</p>
<h3 id="8-1-4-默认ACL权限和递归ACL权限"><a href="#8-1-4-默认ACL权限和递归ACL权限" class="headerlink" title="8.1.4 默认ACL权限和递归ACL权限"></a><strong>8.1.4 默认ACL权限和递归ACL权限</strong></h3><ol>
<li>递归ACL权限 </li>
</ol>
<ul>
<li>递归是父目录在设定ACL权限时，所有的子文件和子目录也会拥有相同的ACL权限。 </li>
<li>setfacl -m u:用户名:权限 -R 文件名    </li>
</ul>
<blockquote>
<p>tips:只对当前现有目录有作用 ，例如新touch的文件没有设定的权限。</p>
</blockquote>
<ol start="2">
<li>默认ACL权限 </li>
</ol>
<ul>
<li>默认ACL权限的作用是如果给父目录设定了默认ACL权限，那么父目录中所有新建的子文件(目录)都会继承父目录的ACL权限。 </li>
<li>setfacl -m d:u:用户名:权限 文件名</li>
</ul>
<h2 id="8-2-文件特殊权限"><a href="#8-2-文件特殊权限" class="headerlink" title="8.2 文件特殊权限"></a><strong>8.2 文件特殊权限</strong></h2><h3 id="8-2-1-SetUID"><a href="#8-2-1-SetUID" class="headerlink" title="8.2.1 SetUID"></a><strong>8.2.1 SetUID</strong></h3><ol>
<li>SetUID的功能 </li>
</ol>
<ul>
<li>只有可以执行的<strong>二进制程序</strong>才能设定SUID权限 </li>
<li>命令执行者要对该程序拥有x（执行）权限 </li>
<li>命令执行者在执行该程序时获得该程序文件属主的身份（在执行程序的过程中灵魂附体为文件的属主） </li>
<li>SetUID权限只在该程序执行过程中有效，也就是说身份改变只在程序执行过程中有效  </li>
<li>passwd命令拥有SetUID权限，所以普通可以修改自己的密码</li>
</ul>
<p>​                 <img src="https://qqadapt.qpic.cn/txdocpic/0/a5d5cbd4c017bee64c662761f6b28069/0?w=924&h=524" alt="img">        </p>
<ol start="2">
<li>设定SetUID的方法 </li>
</ol>
<ul>
<li><p>4代表SUID </p>
</li>
<li><ul>
<li>chmod 4755 文件名 </li>
<li>chmod u+s 文件名 </li>
</ul>
</li>
</ul>
<ol start="3">
<li>取消SetUID的方法 </li>
</ol>
<ul>
<li>chmod 755 文件名 </li>
<li>chmod u-s 文件名</li>
</ul>
<ol start="4">
<li>危险的SetUID </li>
</ol>
<ul>
<li>关键目录应严格控制写权限。比如“/”、“/usr”等 </li>
<li>用户的密码设置要严格遵守密码三原则 </li>
<li>对系统中默认应该具有SetUID权限的文件作一列表，定时检查有没有这之外的文件被设置了SetUID权限</li>
</ul>
<p>​        </p>
<h3 id="8-2-2-SetGID"><a href="#8-2-2-SetGID" class="headerlink" title="8.2.2 SetGID"></a><strong>8.2.2 SetGID</strong></h3><ol>
<li>SetGID针对文件的作用</li>
</ol>
<ul>
<li>只有可执行的二进制程序才能设置SGID权限 </li>
<li>命令执行者要对该程序拥有x（执行）权限 </li>
<li>命令执行在执行程序的时候，组身份升级为该程序文件的属组 </li>
<li>SetGID权限同样只在该程序执行过程中有效，也就是说组身份改变只在程序执行过程中有效 </li>
</ul>
<ol start="2">
<li>SetGID针对目录的作用 </li>
</ol>
<ul>
<li>普通用户必须对此目录拥有r和x权限，才能进入此目录 </li>
<li>普通用户在此目录中的有效组会变成此目录的属组 </li>
<li>若普通用户对此目录拥有w权限时，新建的文件的默认属组是这个目录</li>
</ul>
<ol start="3">
<li>设定SetGID </li>
</ol>
<ul>
<li><p>2代表SGID </p>
</li>
<li><ul>
<li>chmod 2755 文件名 </li>
<li>chmod g+s 文件名  </li>
</ul>
</li>
</ul>
<ol start="4">
<li>取消SetGID </li>
</ol>
<ul>
<li>chmod 755 文件名</li>
<li>chmod g-s 文件名</li>
<li></li>
</ul>
<h3 id="8-2-3-Sticky-BIT"><a href="#8-2-3-Sticky-BIT" class="headerlink" title="8.2.3 Sticky BIT"></a><strong>8.2.3 Sticky BIT</strong></h3><ol>
<li>SBIT粘着位作用 </li>
</ol>
<ul>
<li><p>粘着位目前只对目录有效 </p>
</li>
<li><p>普通用户对该目录拥有w和x权限，即普通用户可以在此目录拥有写入权限 </p>
</li>
<li><p>如果没有粘着位，因为普通用户拥有w权限，所以可以删除此目录下所有文件，包括其他用户建立的文件。一但赋予了粘着位，除了root可以删除所有文件，普通用户就算拥有w权限，也只能删除自己建立的文件，但是不能删除其他用户建立的文件  </p>
</li>
</ul>
<p>tips：只用root和文件拥有者可以修改删除某文件。其他用户无法操作。</p>
<p>[root@localhost ~]# ll -d /tmp/ </p>
<p>drwxrwxrwt. 3 root root 4096 12月 13 11:22 /tmp/</p>
<ol>
<li>设置与取消粘着位 </li>
</ol>
<ul>
<li><p>设置粘着位 </p>
</li>
<li><ul>
<li>chmod 1755 目录名 </li>
<li>chmod o+t 目录名 </li>
</ul>
</li>
<li><p>取消粘着位</p>
</li>
<li><ul>
<li>chmod 777 目录名 </li>
<li>chmod o-t 目录名</li>
</ul>
</li>
</ul>
<h2 id="8-3-文件系统属性chattr权限"><a href="#8-3-文件系统属性chattr权限" class="headerlink" title="8.3 文件系统属性chattr权限"></a><strong>8.3 文件系统属性chattr权限</strong></h2><ol>
<li>chattr命令格式 </li>
</ol>
<p>[root@localhost ~]# chattr [+-=] [选项] 文件或目录名  </p>
<p>+: 增加权限  </p>
<p>-: 删除权限  </p>
<p>=: 等于某权限  </p>
<ul>
<li><p>选项 </p>
</li>
<li><ul>
<li>i：如果对文件设置i属性，那么不允许对文件进行删除、改名，也不能添加和修改数据；如果对目录设置i属性，那么只能修改目录下文件的数据，但不允许建立和删除文件。 </li>
<li>a：如果对文件设置a属性，那么只能在文件中增加数据，但是不能删除也不能修改数据；如果对目录设置a属性，那么只允许在目录中建立和修改文件，但是不允许删除</li>
</ul>
</li>
</ul>
<ol start="2">
<li>查看文件系统属性 </li>
</ol>
<p>[root@localhost ~]# lsattr 选项 文件名 </p>
<p>选项：  </p>
<p>-a  显示所有文件和目录  </p>
<p>-d 若目标是目录，仅列出目录本身的属性，而不是子文件的</p>
<h2 id="8-4-系统命令sudo权限"><a href="#8-4-系统命令sudo权限" class="headerlink" title="8.4 系统命令sudo权限"></a><strong>8.4 系统命令sudo权限</strong></h2><ol>
<li>sudo权限 </li>
</ol>
<ul>
<li><p>root把本来只能超级用户执行的命令赋予普通用户执行。 </p>
</li>
<li><p>sudo的操作对象是系统命令 </p>
</li>
</ul>
<ol start="2">
<li>sudo使用 </li>
</ol>
<p>[root@localhost ~]# visudo </p>
<p>#实际修改的是/etc/sudoers文件  </p>
<p>root    ALL=(ALL)       ALL </p>
<p>#用户名  被管理主机的地址=（可使用的身份） 授权命令（绝对路径） </p>
<p># %wheel        ALL=(ALL)       ALL </p>
<p>#%组名  被管理主机的地址=（可使用的身份） 授权命令（绝对路径）</p>
<blockquote>
<p>被管理主机的地址：本机IP或者ALL，限制的不是来源IP，而是访问IP</p>
</blockquote>
<ol start="3">
<li>授权sc用户可以重启服务器 </li>
</ol>
<p>[root@localhost ~]# visudo </p>
<p>sc  ALL= /sbin/shutdown –r now </p>
<ol start="4">
<li>普通用户执行sudo赋予的命令 </li>
</ol>
<p>[root@localhost ~]# su – sc </p>
<p>[sc@localhost ~]$ sudo -l </p>
<p>#查看可用的sudo命令 </p>
<p>[lamp@localhost ~]$ sudo /sbin/shutdown -r now </p>
<p>#普通用户执行sudo赋予的命令</p>
<h1 id="第九章-文件系统管理"><a href="#第九章-文件系统管理" class="headerlink" title="第九章 文件系统管理"></a><strong>第九章 文件系统管理</strong></h1><h2 id="9-1-回顾分区和文件系统"><a href="#9-1-回顾分区和文件系统" class="headerlink" title="9.1 回顾分区和文件系统"></a><strong>9.1 回顾分区和文件系统</strong></h2><ol>
<li>分区类型 </li>
</ol>
<ul>
<li><p>主分区：总共最多只能分四个 </p>
</li>
<li><p>扩展分区：只能有一个，也算作主分区的一种，也就是说主分区加扩展分区最多有四个。但是扩展分区不能存储数据和格式化，必须再划分成逻辑分区才能使用。 </p>
</li>
<li><p>逻辑分区：逻辑分区是在扩展分区中划分的，如果是IDE硬盘，Linux最多支持59个逻辑分区，如果是SCSI硬盘Linux最多支持11个逻辑分区</p>
</li>
</ul>
<ol start="2">
<li>分区表示方法</li>
</ol>
<p>​                 <img src="https://qqadapt.qpic.cn/txdocpic/0/bed6312f2316ae005c4c699757253e5d/0?w=916&h=166" alt="img">        </p>
<p>​                 <img src="https://qqadapt.qpic.cn/txdocpic/0/529cb68430f615eff042c41e6b8d4086/0?w=850&h=436" alt="img">        </p>
<p>​                 <img src="https://qqadapt.qpic.cn/txdocpic/0/5aac3ff3972b997f4beabafcca1dab33/0?w=924&h=190" alt="img">        </p>
<p>​                 <img src="https://qqadapt.qpic.cn/txdocpic/0/cb89d1888b0c3e1dd72ff1d96e445c50/0?w=880&h=454" alt="img">        </p>
<ol start="3">
<li>文件系统 </li>
</ol>
<ul>
<li>ext2：是ext文件系统的升级版本，Red Hat Linux7.2版本以前的系统默认都是ext2 文件系统。1993年发布，最大支持16TB 的分区和最大2TB的文件（1TB=1024GB=1024*1024KB）</li>
<li>ext3： ext3文件系统是ext2文件系统的升级版本，最大的区别就是带日志功能，以在系统突然停止时提高文件系统的可靠性。支持最大16TB的分区和最大2TB的文件</li>
<li>ext4：它是ext3文件系统的升级版。ext4 在性能、伸缩性和可靠性方面进行了大量改进。EXT4 的变化可以说是翻天覆地的，比如向下兼容EXT3、最大1EB文件系统和16TB文件、无限数量子目录、Extents连续数据块概念、多块分配、延迟分配、持久预分配、快速FSCK、日志校验、无日志模式、在线碎片整理、inode增强、默认启用barrier等。是CentOS 6.3的默认文件系统      （1EB=1024PB=1024*1024TB）</li>
</ul>
<h2 id="9-2-文件系统常用命令"><a href="#9-2-文件系统常用命令" class="headerlink" title="9.2 文件系统常用命令"></a><strong>9.2 文件系统常用命令</strong></h2><h3 id="9-2-1-df命令、du命令、fsck命令和dump2fs命令"><a href="#9-2-1-df命令、du命令、fsck命令和dump2fs命令" class="headerlink" title="9.2.1 df命令、du命令、fsck命令和dump2fs命令"></a><strong>9.2.1 df命令、du命令、fsck命令和dump2fs命令</strong></h3><ol>
<li>文件系统查看命令df </li>
</ol>
<p>[root@localhost ~]# df  [选项] [挂载点] </p>
<p>选项：  </p>
<p>-a 显示所有的文件系统信息，包括特殊文件系统，如 /proc、/sysfs  </p>
<p>-h 使用习惯单位显示容量，如KB，MB或GB等  </p>
<p>-T 显示文件系统类型  </p>
<p>-m 以MB为单位显示容量  </p>
<p>-k 以KB为单位显示容量。默认就是以KB为单位</p>
<ol start="2">
<li>统计目录或文件大小 </li>
</ol>
<p>[root@localhost ~]# du [选项] [目录或文件名] </p>
<p>选项：  </p>
<p>-a 显示每个子文件的磁盘占用量。默认只统计 子目录的磁盘占用量  </p>
<p>-h 使用习惯单位显示磁盘占用量，如KB，MB  或GB等  </p>
<p>-s 统计总占用量，而不列出子目录和子文件的 占用量</p>
<p><strong>du命令和df命令的区别</strong> </p>
<ul>
<li>df命令是从文件系统考虑的，不光要考虑文件占用的空间，还要统计被命令或程序占用的空间（最常见的就是文件已经删除，但是程序并没有释放空间） </li>
<li>du命令是面向文件的，只会计算文件或目录占用的空间 </li>
</ul>
<ol>
<li>文件系统修复命令fsck [root@localhost ~]# fsck [选项] 分区设备文件名 选项：  -a： 不用显示用户提示，自动修复文件系统  -y： 自动修复。和-a作用一致，不过有些文件系统只支 持-y</li>
</ol>
<blockquote>
<p>注意：知道就行，不必操作，有可能弄崩溃系统</p>
</blockquote>
<ol start="2">
<li>显示磁盘状态命令dumpe2fs </li>
</ol>
<p>[root@localhost ~]# dumpe2fs 分区设备文件名</p>
<h3 id="9-2-2-挂载命令"><a href="#9-2-2-挂载命令" class="headerlink" title="9.2.2 挂载命令"></a><strong>9.2.2 挂载命令</strong></h3><ol>
<li>查询与自动挂载 </li>
</ol>
<p>[root@localhost ~]# mount [-l] </p>
<p>#查询系统中已经挂载的设备，-l会显示卷标名称  </p>
<p>[root@localhost ~]# mount –a </p>
<p>#依据配置文件/etc/fstab的内容，自动挂载  </p>
<ol start="2">
<li>挂载命令格式 </li>
</ol>
<p>[root@localhost ~]# mount [-t 文件系统] [-L 卷标名]  \ </p>
<p>[-o 特殊选项]   设备文件名 挂载点 </p>
<p>选项：  </p>
<p>-t 文件系统：加入文件系统类型来指定挂载的类型，可以ext3、ext4、iso9660等文件系统   </p>
<p>-L 卷标名： 挂载指定卷标的分区，而不是安装设备文件名挂载  </p>
<p>-o 特殊选项：可以指定挂载的额外选项</p>
<p>​                 <img src="https://qqadapt.qpic.cn/txdocpic/0/e9957fe0041a6078782303146e262bd3/0?w=1100&h=686" alt="img">        </p>
<blockquote>
<p>home下使用noexec权限那么即使是root用户也无法执行</p>
</blockquote>
<p>[root@localhost ~]# mount -o remount,noexec /home </p>
<p>#重新挂载/boot分区，并使用noexec权限 </p>
<p>[root@localhost sh]# cd /home </p>
<p>[root@localhost boot]# vi hello.sh </p>
<p>[root@localhost boot]# chmod 755 hello.sh  </p>
<p>[root@localhost boot]# ./hello.sh </p>
<p>[root@localhost boot]# mount -o remount,exec /home </p>
<p>#记得改回来啊，要不会影响系统启动的</p>
<h3 id="9-2-3-挂载光盘与U盘"><a href="#9-2-3-挂载光盘与U盘" class="headerlink" title="9.2.3 挂载光盘与U盘"></a><strong>9.2.3 挂载光盘与U盘</strong></h3><ol>
<li>挂载光盘 </li>
</ol>
<p>[root@localhost ~]# mkdir /mnt/cdrom/ </p>
<p>#建立挂载点 </p>
<p>[root@localhost ~]# mount -t iso9660 /dev/cdrom /mnt/cdrom/ </p>
<p>#挂载光盘 </p>
<p>[root@localhost ~]# mount /dev/sr0 /mnt/cdrom/   </p>
<ol start="2">
<li>卸载命令 </li>
</ol>
<p>[root@localhost ~]# umount 设备文件名或挂载点  </p>
<p>[root@localhost ~]# umount /mnt/cdrom</p>
<ol start="3">
<li>挂载U盘 </li>
</ol>
<p>[root@localhost ~]# fdisk –l </p>
<p>#查看U盘设备文件名 </p>
<p>[root@localhost ~]# mount -t vfat /dev/sdb1 /mnt/usb/   </p>
<p><strong>注意:</strong></p>
<ul>
<li><strong>Linux默认是不支持NTFS文件系统的</strong></li>
<li><strong>格式化就是重新写入文件系统</strong></li>
<li><strong>fat16分区识别为fat fat32分区识别为vfat</strong></li>
</ul>
<h3 id="9-2-4-支持NTFS文件系统"><a href="#9-2-4-支持NTFS文件系统" class="headerlink" title="9.2.4 支持NTFS文件系统"></a><strong>9.2.4 支持NTFS文件系统</strong></h3><ol>
<li>下载NTFS-3G插件 </li>
</ol>
<p><a target="_blank" rel="noopener" href="http://www.tuxera.com/community/ntfs-3g-">http://www.tuxera.com/community/ntfs-3g-</a> download/ </p>
<ol start="2">
<li>安装NTFS-3G </li>
</ol>
<p>[root@localhost ~]# tar -zxvf ntfs-3g_ntfsprogs-2013.1.13.tgz </p>
<p>#解压 </p>
<p>[root@localhost ~]# cd ntfs-3g_ntfsprogs-2013.1.13 </p>
<p>#进入解压目录 </p>
<p>[root@localhost ntfs-3g_ntfsprogs-2013.1.13]# ./configure </p>
<p>#编译器准备。没有指定安装目录，安装到默认位置中 </p>
<p>[root@localhost ntfs-3g_ntfsprogs-2013.1.13]# make </p>
<p>#编译 </p>
<p>[root@localhost ntfs-3g_ntfsprogs-2013.1.13]# make install </p>
<p>#编译安装</p>
<ol start="3">
<li>使用 [root@localhost ~]# mount -t ntfs-3g 分区设备文件名  挂载点</li>
</ol>
<h2 id="9-3-fdisk分区"><a href="#9-3-fdisk分区" class="headerlink" title="9.3 fdisk分区"></a><strong>9.3 fdisk分区</strong></h2><h3 id="9-3-1-fdisk命令分区过程"><a href="#9-3-1-fdisk命令分区过程" class="headerlink" title="9.3.1 fdisk命令分区过程"></a><strong>9.3.1 fdisk命令分区过程</strong></h3><p>1、添加新硬盘</p>
<p>​                 <img src="https://qqadapt.qpic.cn/txdocpic/0/f1924bc55d9ec365ca927d6ba0e107e1/0?w=552&h=484" alt="img">        </p>
<p>2、查看新硬盘 </p>
<p>[root@localhost ~]# fdisk -l  </p>
<p>3、使用fdisk命令分区 </p>
<p>[root@localhost ~]# fdisk /dev/sdb</p>
<p>​                 <img src="https://qqadapt.qpic.cn/txdocpic/0/77e2996903470f4577dc3c478de2bd36/0?w=912&h=572" alt="img">        </p>
<ol start="4">
<li>重新读取分区表信息 </li>
</ol>
<p>[root@localhost ~]# partprobe  </p>
<ol start="5">
<li>格式化分区 </li>
</ol>
<p>[root@localhost ~]# mkfs -t ext4 /dev/sdb1  </p>
<ol start="6">
<li>建立挂载点并挂载 </li>
</ol>
<p>[root@localhost ~]# mkdir /disk1 </p>
<p>[root@localhost ~]# mount /dev/sdb1 /disk1/</p>
<h3 id="9-3-2-分区自动挂载与fstab文件修复"><a href="#9-3-2-分区自动挂载与fstab文件修复" class="headerlink" title="9.3.2 分区自动挂载与fstab文件修复"></a><strong>9.3.2 分区自动挂载与fstab文件修复</strong></h3><ol>
<li>/etc/fstab文件 </li>
</ol>
<ul>
<li>第一字段：分区设备文件名或UUID（硬盘通用唯一识别码） </li>
<li>第二字段：挂载点 </li>
<li>第三字段：文件系统名称 </li>
<li>第四字段：挂载参数 </li>
<li>第五字段：指定分区是否被dump备份，0代表不备份，1 代表每天备份，2代表不定期备份 </li>
<li>第六字段：指定分区是否被fsck检测，0代表不检测，其他数字代表检测的优先级，那么当然1的优先级比2高  </li>
</ul>
<blockquote>
<p>在写入文件之后先不要着急重启，我们可以先用mount -a命令来实现系统自动重新挂载，如果出现错误会提示，不至于系统崩溃</p>
</blockquote>
<ol start="2">
<li>分区自动挂载 [root@localhost ~]# vi /etc/fstab </li>
</ol>
<p>…省略部分输出… </p>
<p>/dev/sdb5               /disk5                  ext4    defaults        1 2  </p>
<ol start="3">
<li>/etc/fstab文件修复 [root@localhost ~]# mount -o remount,rw /</li>
</ol>
<h2 id="9-4-分配swap分区"><a href="#9-4-分配swap分区" class="headerlink" title="9.4 分配swap分区"></a><strong>9.4 分配swap分区</strong></h2><ol>
<li>新建swap分区 </li>
</ol>
<p>[root@localhost ~]# fdisk /dev/sdb  </p>
<p>别忘记把分区ID改为82</p>
<ol start="2">
<li>格式化 </li>
</ol>
<p>[root@localhost ~]# mkswap /dev/sdb1   </p>
<ol start="3">
<li>加入swap分区 </li>
</ol>
<p>[root@localhost ~]# swapon /dev/sdb1 </p>
<p>#加入swap分区 </p>
<p>[root@localhost ~]# swapoff /dev/sdb1 </p>
<p>#取消swap分区</p>
<ol start="4">
<li>swap分区开机自动挂载 </li>
</ol>
<p>[root@localhost ~]# vi /etc/fstab </p>
<p>/dev/sdb1        swap                    swap    defaults        0 0  </p>
<ol start="5">
<li>free命令 </li>
</ol>
<p>[root@localhost ~]# free  </p>
<p>#查看内存与swap分区使用状况 </p>
<ul>
<li>cached（缓存）：是指把读取出来的数据保存在内存当中，当再次读取时，不用读取硬盘而直接从内存当中读取，加速了数据的读取过程 </li>
<li>buffer（缓冲）：是指在写入数据时，先把分散的写入操作保存到内存当中，当达到一定程度再集中写入硬盘，减少了磁盘碎片和硬盘的反复寻道，加速了数据的写入过程</li>
</ul>
<h1 id="第十章-Shell基础"><a href="#第十章-Shell基础" class="headerlink" title="第十章 Shell基础"></a><strong>第十章 Shell基础</strong></h1><h2 id="10-1-Shell概述"><a href="#10-1-Shell概述" class="headerlink" title="10.1 Shell概述"></a><strong>10.1 Shell概述</strong></h2><ol>
<li>Shell是什么 </li>
</ol>
<ul>
<li>Shell是一个命令行解释器，它为用户提供了一个向Linux内核发送请求以便运行程序的界面系统级程序，用户可以用Shell来启动、挂起、停止甚至是编写一些程序。</li>
</ul>
<p>​                 <img src="https://qqadapt.qpic.cn/txdocpic/0/82336ec6100a6ed745db1783ad004827/0?w=654&h=526" alt="img">        </p>
<ul>
<li>Shell还是一个功能相当强大的编程语言，易编写，易调试，灵活性较强。Shell是解释执行的脚本语言，在Shell中可以直接调用Linux系统命令。</li>
</ul>
<ol start="2">
<li>Shell的分类 </li>
</ol>
<ul>
<li><p>Bourne Shell：从1979起Unix就开始使用Bourne Shell，Bourne Shell的主文件名为sh。 </p>
</li>
<li><p>C Shell： C Shell主要在BSD版的Unix系统中使用，其语法和C语言相类似而得名</p>
</li>
<li><p>Shell的两种主要语法类型有Bourne和C，这两种语法彼此不兼容。Bourne家族主要包括sh、ksh、Bash、psh、zsh；C家族主要包括：csh、tcsh </p>
</li>
<li><p>Bash： Bash与sh兼容，现在使用的Linux 就是使用Bash作为用户的基本Shell。</p>
</li>
</ul>
<ol start="3">
<li>Linux支持的Shell </li>
</ol>
<ul>
<li>/etc/shells</li>
</ul>
<h2 id="10-2-Shell脚本的执行方式"><a href="#10-2-Shell脚本的执行方式" class="headerlink" title="10.2 Shell脚本的执行方式"></a><strong>10.2 Shell脚本的执行方式</strong></h2><ol>
<li>echo输出命令 </li>
</ol>
<p>[root@localhost ~]# echo [选项] [输出内容] </p>
<p>选项：  -e： 支持反斜线控制的字符转换</p>
<p>​                 <img src="https://qqadapt.qpic.cn/txdocpic/0/e4bfda768c1942eb6ef3b817ebe5f1f5/0?w=918&h=564" alt="img">        </p>
<p>[root@localhost ~]# echo -e “ab\bc” </p>
<p>#删除左侧字符  </p>
<p>[root@localhost ~]# echo -e “a\tb\tc\nd\te\tf” </p>
<p>#制表符与换行符</p>
<p>[root@localhost ~]# echo -e   “\x61\t\x62\t\x63\n\x64\t\x65\t\x66” </p>
<p>#按照十六进制ASCII码也同样可以输出  </p>
<p>[root@localhost ~]# echo -e “\e[1;31m  abcd \e[0m” </p>
<p>#输出颜色</p>
<p>#30m=黑色，31m=红色，32m=绿色，33m=黄色 </p>
<p>#34m=蓝色，35m=洋红，36m=青色，37m=白色</p>
<ol start="2">
<li>第一个脚本 </li>
</ol>
<p>[root@localhost sh]# vi hello.sh #!/bin/Bash </p>
<p>#The first program # Author: shenchao （E-mail: <a href="mailto:&#x73;&#x68;&#101;&#110;&#99;&#x68;&#97;&#111;&#64;&#x6c;&#97;&#109;&#112;&#98;&#x72;&#111;&#116;&#104;&#x65;&#114;&#46;&#110;&#x65;&#x74;">&#x73;&#x68;&#101;&#110;&#99;&#x68;&#97;&#111;&#64;&#x6c;&#97;&#109;&#112;&#98;&#x72;&#111;&#116;&#104;&#x65;&#114;&#46;&#110;&#x65;&#x74;</a>）   </p>
<p>echo -e “Mr. Shen Chao is the most honest man in LampBrother”</p>
<ol start="3">
<li>脚本执行 </li>
</ol>
<ul>
<li><p>赋予执行权限，直接运行 </p>
</li>
<li><ul>
<li>chmod 755 hello.sh </li>
<li>./hello.sh  </li>
</ul>
</li>
<li><p>通过Bash调用执行脚本 </p>
</li>
<li><ul>
<li>bash hello.sh</li>
</ul>
</li>
</ul>
<p>tips:<a target="_blank" rel="noopener" href="https://pan.baidu.com/share/init?surl=X5bg6IRSKoVC-lFuERSQOQ">俄罗斯方块游戏代码点击下载</a></p>
<p>密码:du55</p>
<h2 id="10-3-Bash的基本功能"><a href="#10-3-Bash的基本功能" class="headerlink" title="10.3 Bash的基本功能"></a><strong>10.3 Bash的基本功能</strong></h2><h3 id="10-3-1-历史命令与命令补全"><a href="#10-3-1-历史命令与命令补全" class="headerlink" title="10.3.1 历史命令与命令补全"></a><strong>10.3.1 历史命令与命令补全</strong></h3><ol>
<li>历史命令 </li>
</ol>
<p>[root@localhost ~]# history [选项] [历史命令保存文件] </p>
<p>选项：  </p>
<p>-c：  清空历史命令  </p>
<p>-w： 把缓存中的历史命令写入历史命令保存文件    </p>
<p>~/.bash_history </p>
<ul>
<li>历史命令默认会保存1000条,可以在环境变量配置文件/etc/profile中进行修改</li>
</ul>
<p>历史命令的调用 </p>
<ul>
<li>使用上、下箭头调用以前的历史命令 </li>
<li>使用“!n”重复执行第n条历史命令 </li>
<li>使用“!!”重复执行上一条命令 </li>
<li>使用“!字串”重复执行最后一条以该字串开头的命令  </li>
</ul>
<ol start="2">
<li>命令与文件补全 </li>
</ol>
<ul>
<li>在Bash中，命令与文件补全是非常方便与常用的功能，我们只要在输入命令或文件时，按“Tab”键就会自动进行补全</li>
</ul>
<h3 id="10-3-2-命令别名与常用快捷键"><a href="#10-3-2-命令别名与常用快捷键" class="headerlink" title="10.3.2 命令别名与常用快捷键"></a><strong>10.3.2 命令别名与常用快捷键</strong></h3><ol>
<li>命令别名 </li>
</ol>
<p>[root@localhost ~]# alias 别名=’原命令’ </p>
<p>#设定命令别名  </p>
<p>[root@localhost ~]# alias </p>
<p>#查询命令别名  </p>
<p>命令执行时顺序 </p>
<p>1 第一顺位执行用绝对路径或相对路径执行的命令。 </p>
<p>2 第二顺位执行别名。 </p>
<p>3 第三顺位执行Bash的内部命令。 </p>
<p>4 第四顺位执行按照$PATH环境变量定义的目录查找顺序找到的第一个命令。</p>
<p>让别名永久生效 </p>
<p>[root@localhost ~]# vi /root/.bashrc </p>
<p>删除别名 </p>
<p>[root@localhost ~]# unalias 别名</p>
<ol>
<li>Bash常用快捷键</li>
</ol>
<p>​                 <img src="https://qqadapt.qpic.cn/txdocpic/0/ca0efe8462dbe7bfaf4917a027f40378/0?w=890&h=490" alt="img">        </p>
<blockquote>
<p>ctrl+z 快捷键一定要谨慎使用，如果使用的多了，系统会占用大量存储空间来存放暂停的数据，用多了系统会变卡！！！</p>
</blockquote>
<h3 id="10-3-3-输入输出重定向"><a href="#10-3-3-输入输出重定向" class="headerlink" title="10.3.3 输入输出重定向"></a><strong>10.3.3 输入输出重定向</strong></h3><ol>
<li>标准输入输出</li>
</ol>
<p>​                 <img src="https://qqadapt.qpic.cn/txdocpic/0/a1ffd1a5b78dee2d4ca8754aa7e3512c/0?w=962&h=448" alt="img">        </p>
<ol start="2">
<li>输出重定向</li>
</ol>
<p>​                 <img src="https://qqadapt.qpic.cn/txdocpic/0/207a9a486aa018915e4d0dd4565cb6df/0?w=932&h=474" alt="img">        </p>
<p>​                 <img src="https://qqadapt.qpic.cn/txdocpic/0/9d7f93db73cded12084bad967a2bddd9/0?w=950&h=554" alt="img">        </p>
<blockquote>
<p>有一个用法：命令 &amp;&gt;/dev/unll 不管命令是否正确，直接丢入这个文件夹，不保存任何数据，在写shell脚本时有用</p>
</blockquote>
<ol start="3">
<li>输入重定向 </li>
</ol>
<p>[root@localhost ~]# wc [选项] [文件名] </p>
<p>选项：  </p>
<p>- c   统计字节数  </p>
<p>- w   统计单词数  </p>
<p>- l   统计行数  </p>
<ul>
<li>命令&lt;文件  把文件作为命令的输入 </li>
<li>命令&lt;&lt; 标识符    </li>
</ul>
<p>…      </p>
<p>标识符   把标识符之间内容作为命令的输入</p>
<h3 id="10-3-4-多命令顺序执行与管道符"><a href="#10-3-4-多命令顺序执行与管道符" class="headerlink" title="10.3.4 多命令顺序执行与管道符"></a><strong>10.3.4 多命令顺序执行与管道符</strong></h3><ol>
<li>多命令顺序执行</li>
</ol>
<p>​                 <img src="https://qqadapt.qpic.cn/txdocpic/0/bad853f5b140bba96ff87419b4a4603a/0?w=906&h=436" alt="img">        </p>
<p>例子： [root@localhost ~]# ls ; date ; cd /user ; pwd</p>
<p>[root@localhost ~]# dd if=输入文件 of=输出文件 bs=字节数 count=个数  </p>
<p>选项：  </p>
<p>if=输入文件  指定源文件或源设备  </p>
<p>of=输出文件  指定目标文件或目标设备  </p>
<p>bs=字节数  指定一次输入/输出多少字节，即把这些字节看做一个数据块 </p>
<p>count=个数  指定输入/输出多少个数据块  </p>
<p>例子： </p>
<p>[root@localhost ~]# date ; dd if=/dev/zero of=/root/testfile bs=1k count=100000 ; date</p>
<p>[root@localhost ~]# ls anaconda-ks.cfg &amp;&amp; echo yes  </p>
<p>[root@localhost ~]# ls /root/test || echo “no   </p>
<p>[root@localhost ~]# 命令 &amp;&amp; echo yes || echo no</p>
<ol start="2">
<li>管道符 </li>
</ol>
<p>命令格式：</p>
<p>[root@localhost ~]# 命令1  |  命令2 </p>
<p>#命令1的正确输出作为命令2的操作对象 </p>
<p>颜色显示   </p>
<p>例子： </p>
<p>[root@localhost ~]# ll -a /etc/  | more </p>
<p>[root@localhost ~]# netstat -an | grep “ESTABLISHED”</p>
<p>[root@localhost ~]# grep [选项] “搜索内容” 文件名 </p>
<p>选项：  </p>
<p>-i：  忽略大小写  </p>
<p>-n：  输出行号  </p>
<p>-v：  反向查找  </p>
<p>–color=auto 搜索出的关键字用颜色显示</p>
<h3 id="10-3-5-通配符与其他特殊符号"><a href="#10-3-5-通配符与其他特殊符号" class="headerlink" title="10.3.5 通配符与其他特殊符号"></a><strong>10.3.5 通配符与其他特殊符号</strong></h3><p>1、通配符</p>
<p>​                 <img src="https://qqadapt.qpic.cn/txdocpic/0/b9239d6f55297c9f696bca9044d7f5b0/0?w=916&h=478" alt="img">        </p>
<p>​                 <img src="https://qqadapt.qpic.cn/txdocpic/0/280991962a83ee0a786db37ae60284cc/0?w=502&h=486" alt="img">        </p>
<ol start="2">
<li>Bash中其他特殊符号 </li>
</ol>
<p>​                 <img src="https://qqadapt.qpic.cn/txdocpic/0/4b073c3230c59cfb7fb301ae4986be75/0?w=940&h=496" alt="img">        </p>
<p>反引号与$() </p>
<p>[root@localhost ~]# echo <code>ls</code>  </p>
<p>[root@localhost ~]# echo $(date)  </p>
<p>单引号与双引号 </p>
<p>[root@localhost ~]# name=sc </p>
<p>[root@localhost ~]# echo ‘$name’ </p>
<p>[root@localhost ~]# echo “$name” </p>
<p>[root@localhost ~]# echo ‘$(date)’ </p>
<p>[root@localhost ~]# echo “$(date)”</p>
<p>​                 <img src="https://qqadapt.qpic.cn/txdocpic/0/7fbb608dd52c200776ead7e656224cf6/0?w=544&h=316" alt="img">        </p>
<h2 id="10-4-Bash的变量"><a href="#10-4-Bash的变量" class="headerlink" title="10.4 Bash的变量"></a><strong>10.4 Bash的变量</strong></h2><h3 id="10-4-1-用户自定义变量"><a href="#10-4-1-用户自定义变量" class="headerlink" title="10.4.1 用户自定义变量"></a><strong>10.4.1 用户自定义变量</strong></h3><ol>
<li>什么是变量 </li>
</ol>
<ul>
<li>变量是计算机内存的单元，其中存放的值可以改变。当Shell脚本需要保存一些信息时，如一个文件名或是一个数字，就把它存放在一个变量中。每个变量有一个名字，所以很容易引用它。使用变量可以保存有用信息，使系统获知用户相关设置，变量也可以用于保存暂时信息。 </li>
</ul>
<ol start="2">
<li>变量设置规则 </li>
</ol>
<ul>
<li><p>变量名称可以由字母、数字和下划线组成，但是不能以数字开头。如果变量名是“2name”则是错误的。 </p>
</li>
<li><p>在Bash中，变量的默认类型都是字符串型，如果要进行数值运算，则必修指定变量类型为数值型。</p>
</li>
<li><p>变量用等号连接值，等号左右两侧不能有空格。 </p>
</li>
<li><p>变量的值如果有空格，需要使用单引号或双引号包括。 </p>
</li>
<li><p>在变量的值中，可以使用“\”转义符。 </p>
</li>
<li><p>如果需要增加变量的值，那么可以进行变量值的叠加。不过变量需要用双引号包含“$变量名”或用${变量名}包含。 </p>
</li>
<li><p>如果是把命令的结果作为变量值赋予变量，则需要使用反引号或$()包含命令。 </p>
</li>
<li><p>环境变量名建议大写，便于区分。</p>
</li>
</ul>
<ol start="3">
<li>变量分类 </li>
</ol>
<ul>
<li><p>用户自定义变量  环境变量：这种变量中主要保存的是和系统操作环境相关的数据。 </p>
</li>
<li><p>位置参数变量：这种变量主要是用来向脚本当中传递参数或数据的，变量名不能自定义，变量作用是固定的。 </p>
</li>
<li><p>预定义变量：是Bash中已经定义好的变量，变量名不能自定义，变量作用也是固定的。</p>
</li>
</ul>
<p> 4、本地变量</p>
<ul>
<li>变量定义</li>
</ul>
<p> [root@localhost ~]# name=”shen chao”</p>
<ul>
<li>变量叠加</li>
</ul>
<p>[root@localhost ~]# aa=123 </p>
<p>[root@localhost ~]# aa=”$aa”456 </p>
<p>[root@localhost ~]# aa=${aa}789</p>
<ul>
<li>变量调用 </li>
</ul>
<p>[root@localhost ~]# echo $name  </p>
<ul>
<li>变量查看 </li>
</ul>
<p>[root@localhost ~]# set  </p>
<p>查看当前系统全部变量</p>
<ul>
<li>变量删除</li>
</ul>
<p>[root@localhost ~]# unset name</p>
<h3 id="10-4-2-环境变量"><a href="#10-4-2-环境变量" class="headerlink" title="10.4.2 环境变量"></a><strong>10.4.2 环境变量</strong></h3><ol>
<li>环境变量是什么 </li>
</ol>
<ul>
<li>用户自定义变量只在当前的Shell中生效，而环境变量会在当前Shell和这个Shell的所有子Shell当中生效。如果把环境变量写入相应的配置文件，那么这个环境变量就会在所有的Shell中生效         </li>
</ul>
<ol start="2">
<li>设置环境变量 </li>
</ol>
<p>export 变量名=变量值 </p>
<p>#申明变量  </p>
<p>env </p>
<p>#查询变量  </p>
<p>unset 变量名 </p>
<p>#删除变量</p>
<ol start="3">
<li>系统常见环境变量 </li>
</ol>
<ul>
<li>PATH：系统查找命令的路径 </li>
</ul>
<p>[root@localhost ~]# echo $PATH /usr/lib/qt-3.3/bin:/usr/local/sbin:/usr/local/bin: /sbin:/bin:/usr/sbin:/usr/bin:/root/bin </p>
<ul>
<li>PATH=”$PATH”:/root/sh </li>
</ul>
<p>#PATH变量叠加</p>
<ul>
<li>PS1：定义系统提示符的变量 </li>
</ul>
<p>\d：显示日期，格式为“星期 月 日” </p>
<p>\h：显示简写主机名。如默认主机名“localhost” </p>
<p>\t：显示24小时制时间，格式为“HH:MM:SS” </p>
<p>\T：显示12小时制时间，格式为“HH:MM:SS”</p>
<p>\A：显示24小时制时间，格式为“HH:MM” </p>
<p>\u：显示当前用户名 </p>
<p>\w：显示当前所在目录的完整名称 </p>
<p>\W：显示当前所在目录的最后一个目录 </p>
<p>#：执行的第几个命令 </p>
<p>$：提示符。如果是root用户会显示提示符为“#”，如果是普通用户会显示提示符为“$”</p>
<p>举例： </p>
<ul>
<li>[root@localhost ~]# PS1=’[\u@\t \w]$ ‘ </li>
<li>[root@04:50:08 /usr/local/src]#PS1=’[\u@@ \h # \W]$‘  </li>
<li>[root@04:53 上午 localhost 31 src]#PS1=’[\u@\h \W]$ ‘</li>
</ul>
<p>​                 <img src="https://qqadapt.qpic.cn/txdocpic/0/7ec29f82f1ef58d0c973dfec670cafe7/0?w=408&h=90" alt="img">        </p>
<p>[显示当前用户名  显示当前用户名  显示当前所在目录的最后一个目录] 提示符</p>
<h3 id="10-4-3-位置参数变量"><a href="#10-4-3-位置参数变量" class="headerlink" title="10.4.3 位置参数变量"></a><strong>10.4.3 位置参数变量</strong></h3><ol>
<li>位置参数变量</li>
</ol>
<p>​                 <img src="https://qqadapt.qpic.cn/txdocpic/0/0db98cfb7264389946a1a167784cb3f9/0?w=912&h=484" alt="img">        </p>
<p>例子1： </p>
<p>#!/bin/bash </p>
<p>num1=$1 </p>
<p>num2=$2 </p>
<p>sum=$(( $num1 + $num2)) </p>
<p>#变量sum的和是num1加num2 </p>
<p>echo $sum </p>
<p>#打印变量sum的值</p>
<p>例子2： </p>
<p>#!/bin/bash </p>
<p>echo “A total of $# parameters” </p>
<p>#使用$#代表所有参数的个数 </p>
<p>echo “The parameters is: $*” </p>
<p>#使用$*代表所有的参数 </p>
<p>echo “The parameters is: $@” </p>
<p>#使用$@也代表所有参数</p>
<p>​                 <img src="https://qqadapt.qpic.cn/txdocpic/0/1823658428d3ef6ae3ecd114b871fdc2/0?w=704&h=352" alt="img">        </p>
<p>例子3：$*与$@的区别 </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash </span><br><span class="line">for i in &quot;$*&quot; </span><br><span class="line">#$*中的所有参数看成是一个整体，所以这个for循环只会循环一次         </span><br><span class="line">do                 </span><br><span class="line">echo &quot;The parameters is: $i&quot;         </span><br><span class="line">done </span><br><span class="line">x=1 </span><br><span class="line">for y in &quot;$@&quot; </span><br><span class="line">#$@中的每个参数都看成是独立的，所以“$@”中有几个参数，就会循环几次        </span><br><span class="line">do                </span><br><span class="line">echo &quot;The parameter$x is: $y&quot;                </span><br><span class="line">x=$(( $x +1 ))       </span><br><span class="line">done</span><br><span class="line"></span><br></pre></td></tr></table></figure>





<h3 id="10-4-4-预定义变量"><a href="#10-4-4-预定义变量" class="headerlink" title="10.4.4 预定义变量"></a><strong>10.4.4 预定义变量</strong></h3><ol>
<li>预定义变量</li>
</ol>
<p>​                 <img src="https://qqadapt.qpic.cn/txdocpic/0/3d77bd2337c0d0c6d876074982012ff4/0?w=938&h=472" alt="img">        </p>
<ol start="2">
<li>接收键盘输入 </li>
</ol>
<p>[root@localhost ~]# read [选项] [变量名] </p>
<p>选项：  </p>
<p>-p “提示信息”：在等待read输入时，输出提示信息  </p>
<p>-t 秒数：  read命令会一直等待用户输入，使用此选项可以指定等待时间  </p>
<p>-n 字符数： read命令只接受指定的字符数，就会 执行  </p>
<p>-s：   隐藏输入的数据，适用于机密信息的输入  </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash </span><br><span class="line">read -t 30 -p &quot;Please input your name: &quot; name </span><br><span class="line">#提示“请输入姓名”并等待30秒，把用户的输入保存入变量name中 </span><br><span class="line">echo &quot;Name is $name &quot;  </span><br><span class="line">read -s -t 30 -p &quot;Please enter your age: &quot; age </span><br><span class="line">#年龄是隐私，所以我们用“-s”选项隐藏输入 </span><br><span class="line">echo -e &quot;\n&quot; </span><br><span class="line">echo &quot;Age is $age &quot;  </span><br><span class="line">read -n 1 -t 30 -p &quot;Please select your gender[M/F]: &quot; gender</span><br><span class="line">#使用“-n 1”选项只接收一个输入字符就会执行（都不用输入回车） </span><br><span class="line">echo -e &quot;\n&quot; </span><br><span class="line">echo &quot;Sex is $gender&quot;</span><br><span class="line"></span><br></pre></td></tr></table></figure>





<h2 id="10-5-Bash的运算符"><a href="#10-5-Bash的运算符" class="headerlink" title="10.5 Bash的运算符"></a><strong>10.5 Bash的运算符</strong></h2><h3 id="10-5-1-数值运算与运算符"><a href="#10-5-1-数值运算与运算符" class="headerlink" title="10.5.1 数值运算与运算符"></a><strong>10.5.1 数值运算与运算符</strong></h3><ol>
<li>declare声明变量类型 </li>
</ol>
<p>[root@localhost ~]# declare [+/-][选项] 变量名 </p>
<p>选项：  </p>
<p> -：  给变量设定类型属性  </p>
<p>  +:  取消变量的类型属性  </p>
<p> -i:  将变量声明为整数型（integer）  </p>
<p>-x: 将变量声明为环境变量  </p>
<p>-p:  显示指定变量的被声明的类型 </p>
<ol start="2">
<li>数值运算</li>
</ol>
<p>方法1 :</p>
<p>[root@localhost ~]# aa=11 </p>
<p>[root@localhost ~]# bb=22 #给变量aa和bb赋值</p>
<p>[root@localhost ~]# declare -i cc=$aa+$bb</p>
<p>方法2：expr或let数值运算工具 </p>
<p>[root@localhost ~]# aa=11 </p>
<p>[root@localhost ~]# bb=22 </p>
<p>#给变量aa和变量bb赋值 </p>
<p>[root@localhost ~]# dd=$(expr $aa + $bb) </p>
<p>#dd的值是aa和bb的和。注意“+”号左右两侧必须有空格  </p>
<p><strong>方法3：“$((运算式))”或“$[运算式]”</strong> (推荐)</p>
<p>[root@localhost ~]# aa=11 </p>
<p>[root@localhost ~]# bb=22 </p>
<p>[root@localhost ~]# ff=$(( $aa+$bb )) </p>
<p>[root@localhost ~]# gg=$[ $aa+$bb ]</p>
<ol start="3">
<li>运算符</li>
</ol>
<p>​                 <img src="https://qqadapt.qpic.cn/txdocpic/0/ae305e4623a94503ce0916cb5ce05dc0/0?w=992&h=570" alt="img">        </p>
<h3 id="10-5-2-变量测试与内容替换"><a href="#10-5-2-变量测试与内容替换" class="headerlink" title="10.5.2 变量测试与内容替换"></a><strong>10.5.2 变量测试与内容替换</strong></h3><p>​                 <img src="https://qqadapt.qpic.cn/txdocpic/0/eb5c55805c2d7f425bc17582914a01e7/0?w=918&h=584" alt="img">        </p>
<p>例子1：测试x = $ { y - 新值} </p>
<h2 id="10-6-环境变量配置文件"><a href="#10-6-环境变量配置文件" class="headerlink" title="10.6 环境变量配置文件"></a><strong>10.6 环境变量配置文件</strong></h2><h3 id="10-6-1-环境变量配置文件简介"><a href="#10-6-1-环境变量配置文件简介" class="headerlink" title="10.6.1 环境变量配置文件简介"></a><strong>10.6.1 环境变量配置文件简介</strong></h3><ol>
<li>source命令 </li>
</ol>
<p>[root@localhost ~]# source 配置文件 </p>
<p>或 </p>
<p>[root@localhost ~]# . 配置文件  </p>
<ol>
<li>环境变量配置文件简介 </li>
</ol>
<ul>
<li>环境变量配置文件中主要是定义对系统的操作环境生效的系统默认环境变量，比如PATH、HISTSIZE、PS1、HOSTNAME等默认环境变量。</li>
<li>/etc/profile </li>
<li>/etc/profile.d/*.sh </li>
<li>~/.bash_profile </li>
<li>~/.bashrc </li>
<li>/etc/bashrc</li>
</ul>
<h3 id="10-6-2-环境变量配置文件作用"><a href="#10-6-2-环境变量配置文件作用" class="headerlink" title="10.6.2 环境变量配置文件作用"></a><strong>10.6.2 环境变量配置文件作用</strong></h3><ul>
<li>/etc/profile </li>
<li>/etc/profile.d/*.sh </li>
<li>~/.bash_profile </li>
<li>~/.bashrc </li>
<li>/etc/bashrc</li>
</ul>
<p>tips:/etc 目录下的对所有用户都生效</p>
<p>~/.bash_profile 和 ~/.bashrc -&gt; 每个用户自己的配置文件，只对用户生效。</p>
<p>下图为配置文件读取顺序：</p>
<p>​                 <img src="https://qqadapt.qpic.cn/txdocpic/0/e77a36d0f27fa64796c3d9abd807cebc/0?w=1522&h=860" alt="img">        </p>
<p>上图从左到右如果没有叠加。后面的命令会覆盖前面的命令。</p>
<p>/etc/profile的作用： </p>
<ul>
<li>USER变量： </li>
<li>LOGNAME变量： </li>
<li>MAIL变量： </li>
<li>PATH变量： </li>
<li>HOSTNAME变量： </li>
<li>HISTSIZE变量： </li>
<li>umask： </li>
<li>调用/etc/profile.d/*.sh文件  </li>
</ul>
<p>~/.bash_profile的作用 </p>
<ul>
<li><p>用了~/.bashrc文件。 </p>
</li>
<li><p>在PATH变量后面加入了“:$HOME/bin”这个目录</p>
</li>
</ul>
<h3 id="10-6-3-其他配置文件和登录信息"><a href="#10-6-3-其他配置文件和登录信息" class="headerlink" title="10.6.3 其他配置文件和登录信息"></a><strong>10.6.3 其他配置文件和登录信息</strong></h3><ol>
<li>注销时生效的环境变量配置文件 </li>
</ol>
<ul>
<li>~/.bash_logout  </li>
</ul>
<ol>
<li>其他配置文件</li>
</ol>
<ul>
<li>~/bash_history</li>
</ul>
<ol>
<li>Shell登录信息 </li>
</ol>
<ul>
<li>本地终端欢迎信息： /etc/issue</li>
</ul>
<p>​                 <img src="https://qqadapt.qpic.cn/txdocpic/0/c8f07428bfb245a582e0fe3e247beabf/0?w=942&h=396" alt="img">        </p>
<ul>
<li><p>远程终端欢迎信息： /etc/issue.net </p>
</li>
<li><ul>
<li>转义符在/etc/issue.net文件中不能使用 </li>
<li>是否显示此欢迎信息，由ssh的配置文件/etc/ssh/sshd_config决定，加入“Banner /etc/issue.net”行才能显示（记得重启SSH服务）   </li>
</ul>
</li>
<li><p>登陆后欢迎信息：/etc/motd </p>
</li>
</ul>
<p>不管是本地登录，还是远程登录，都可以显示此欢迎信息</p>
<h1 id="第十一章-Shell编程"><a href="#第十一章-Shell编程" class="headerlink" title="第十一章 Shell编程"></a><strong>第十一章 Shell编程</strong></h1><h2 id="11-1-基础正则表达式"><a href="#11-1-基础正则表达式" class="headerlink" title="11.1 基础正则表达式"></a><strong>11.1 基础正则表达式</strong></h2><ol>
<li>正则表达式与通配符 </li>
</ol>
<ul>
<li><p>正则表达式用来在文件中匹配符合条件的字符串，正则是包含匹配。grep、awk、sed等命令可以支持正则表达式。 </p>
</li>
<li><p>通配符用来匹配符合条件的文件名，通配符是完全匹配。ls、find、cp这些命令不支持正则表达式，所以只能使用shell自己的通配符来进行匹配了。</p>
</li>
</ul>
<p>2、基础正则表达式</p>
<p>​                 <img src="https://qqadapt.qpic.cn/txdocpic/0/60bec856edca0c11a4d2e36d7a176ccb/0?w=1360&h=824" alt="img">        </p>
<p> “*”前一个字符匹配0次，或任意多次 </p>
<ul>
<li>grep “a*” test_rule.txt  </li>
</ul>
<p>#匹配所有内容，包括空白行</p>
<ul>
<li>grep “aa*” test_rule.txt </li>
</ul>
<p>#匹配至少包含有一个a的行 </p>
<ul>
<li>grep “aaa*” test_rule.txt  </li>
</ul>
<p>#匹配最少包含两个连续a的字符串 </p>
<ul>
<li>grep “aaaaa*” test_rule.txt </li>
</ul>
<p>#则会匹配最少包含四个个连续a的字符串</p>
<p>“.” 匹配除了换行符外任意一个字符 </p>
<ul>
<li>grep  “s..d” test_rule.txt  </li>
</ul>
<p>#“s..d”会匹配在s和d这两个字母之间一定有两个字符的单词 </p>
<ul>
<li>grep “s.*d” test_rule.txt  </li>
</ul>
<p>#匹配在s和d字母之间有任意字符 </p>
<ul>
<li>grep “.*” test_rule.txt  </li>
</ul>
<p>#匹配所有内容</p>
<p>“^”匹配行首，“$”匹配行尾 </p>
<ul>
<li>grep “^M” test_rule.txt </li>
</ul>
<p>#匹配以大写“M”开头的行 </p>
<ul>
<li>grep “n$” test_rule.txt </li>
</ul>
<p>#匹配以小写“n”结尾的行 </p>
<ul>
<li>grep -n “^$” test_rule.txt </li>
</ul>
<p>#会匹配空白行 </p>
<p>“[]” 匹配中括号中指定的任意一个字符，只匹配一个字符</p>
<ul>
<li>grep “s[ao]id” test_rule.txt</li>
</ul>
<p>#匹配s和i字母中，要不是a、要不是o </p>
<ul>
<li>grep “[0-9]” test_rule.txt</li>
</ul>
<p>#匹配任意一个数字 </p>
<ul>
<li>grep “^[a-z]” test_rule.txt </li>
</ul>
<p>#匹配用小写字母开头的行</p>
<p>“[^]” 匹配除中括号的字符以外的任意一个字符 </p>
<ul>
<li>grep “^[â-z]” test_rule.txt  </li>
</ul>
<p>#匹配不用小写字母开头的行 </p>
<ul>
<li>grep “^[â-zA-Z]” test_rule.txt </li>
</ul>
<p>#匹配不用字母开头的行 “\” 转义符 </p>
<ul>
<li>grep “.$” test_rule.txt</li>
</ul>
<p>#匹配使用“.”结尾的行</p>
<p>“{n}”表示其前面的字符恰好出现n次 </p>
<ul>
<li>grep “a{3}“ test_rule.txt </li>
</ul>
<p>#匹配a字母连续出现三次的字符串 </p>
<ul>
<li>grep “[0-9]{3}“ test_rule.txt </li>
</ul>
<p>#匹配包含连续的三个数字的字符串   </p>
<p>“{n,}”表示其前面的字符出现不小于n次 </p>
<ul>
<li>grep “^[0-9]{3,}[a-z]” test_rule.txt </li>
</ul>
<p>#匹配最少用连续三个数字开头的行</p>
<p>“{n,m}”匹配其前面的字符至少出现n次，最多出现m次 </p>
<ul>
<li>grep “sa{1,3}i” test_rule.txt </li>
</ul>
<p>#匹配在字母s和字母i之间有最少一个a，最多三个a</p>
<h2 id="11-2-字符截取命令"><a href="#11-2-字符截取命令" class="headerlink" title="11.2 字符截取命令"></a><strong>11.2 字符截取命令</strong></h2><h3 id="11-2-1-cut字段提取命令"><a href="#11-2-1-cut字段提取命令" class="headerlink" title="11.2.1  cut字段提取命令"></a><strong>11.2.1  cut字段提取命令</strong></h3><p>[root@localhost ~]# cut [选项] 文件名 </p>
<p>选项：  </p>
<p>-f  列号：         提取第几列  </p>
<p>-d 分隔符：  按照指定分隔符分割列</p>
<p>[root@localhost ~]# vi student.txt </p>
<p>ID      Name    gender  Mark </p>
<p>1        Liming  M         86 </p>
<p>2        Sc          M         90 </p>
<p>3        Gao        M         83  </p>
<p>[root@localhost ~]# cut -f 2 student.txt  </p>
<p>#提取第二列</p>
<p>[root@localhost ~]# cut -f 2,3 student.txt  </p>
<p>#提取第二第三列</p>
<p>[root@localhost ~]# cut -d “:” -f 1,3 /etc/passwd</p>
<p>#以：为分隔符提取第一第三列</p>
<p>cut命令的局限 </p>
<p>[root@localhost ~]# df -h | cut -d “ “ -f 1,3</p>
<p>#有空格时提取会出问题</p>
<h3 id="11-2-2-printf命令"><a href="#11-2-2-printf命令" class="headerlink" title="11.2.2  printf命令"></a><strong>11.2.2  printf命令</strong></h3><p>[root@localhost ~]# printf   ’输出类型输出格式’    输出内容 </p>
<p>输出类型：  </p>
<p>%ns ：  输出字符串。n是数字指代输出几个字符  </p>
<p>%ni ：  输出整数。n是数字指代输出几个数字  </p>
<p>%m.nf ： 输出浮点数。m和n是数字，指代输出的整数   位数和小数位数。如%8.2f代表共输出8位数，   其中2位是小数，6位是整数。 </p>
<p>输出格式：  </p>
<p>\a :    输出警告声音  </p>
<p>\b :    输出退格键，也就是Backspace键 </p>
<p>\f :    清除屏幕  </p>
<p>\n :    换行  </p>
<p>\r :    回车，也就是Enter键  </p>
<p>\t :    水平输出退格键，也就是Tab键  </p>
<p>\v :    垂直输出退格键，也就是Tab键</p>
<p>[root@localhost ~]# printf %s 1 2 3 4 5 6  </p>
<p>[root@localhost ~]# printf %s %s %s 1 2 3 4 5 6  </p>
<p>[root@localhost ~]# printf  ‘%s %s %s’ 1 2 3 4 5 6  </p>
<p>[root@localhost ~]# printf ‘%s %s %s\n’ 1 2 3 4 5 6 </p>
<p>tips:printf  ‘%s %s %s\n’ 1 2 3 4 5 6 </p>
<p>三个看成一个整体所以123是一个整体，456是另一个。所以在3后面换行</p>
<p>​                 <img src="https://qqadapt.qpic.cn/txdocpic/0/5bbd1d05814875a3f6ec54e266fce6ae/0?w=802&h=422" alt="img">        </p>
<p>[root@localhost ~]# vi student.txt  </p>
<p>ID      Name      PHP     Linux   MySQL   Average </p>
<p>1       Liming     82         95         86            87.66 </p>
<p>2       Sc             74         96         87            85.66 </p>
<p>3       Gao           99         83         93           91.66</p>
<p>printf  ‘%s’ $(cat student.txt) </p>
<p>#不调整输出格式  </p>
<p>printf ‘%s\t %s\t %s\t %s\t %s\t %s\t \n’ $(cat student.txt) </p>
<p>#调整格式输出 </p>
<p>在awk命令的输出中支持print和printf命令 </p>
<ul>
<li>print：print会在每个输出之后自动加入一个换行符（Linux默认没有print命</li>
<li>printf：printf是标准格式输出命令，并不会自动加入换行符，如果需要换行，需要手工加入换行符</li>
</ul>
<h3 id="11-2-3-awk命令"><a href="#11-2-3-awk命令" class="headerlink" title="11.2.3  awk命令"></a><strong>11.2.3  awk命令</strong></h3><p>[root@localhost ~]# awk ‘条件1{动作1} 条件2{动作2}…’ 文件名 </p>
<p>条件（Pattern）：  </p>
<p>一般使用关系表达式作为条件  </p>
<p>x &gt; 10 判断变量 x是否大于10  </p>
<p>x&gt;=10 大于等于 </p>
<p>x&lt;=10 小于等于 </p>
<p>动作（Action）：  </p>
<p>格式化输出  </p>
<p>流程控制语句   </p>
<p>[root@localhost ~]# vi student.txt  </p>
<p>ID      Name      PHP     Linux   MySQL   Average </p>
<p>1        Liming    82        95         86             87.66 </p>
<p>2        Sc            74        96         87             85.66 </p>
<p>3        Gao          99        83        93              91.66</p>
<p>[root@localhost ~]#awk ‘{printf $2 “\t” $6 “\n”}’ student.txt   </p>
<p>[root@localhost ~]# df -h | awk ‘{print $1 “\t” $3}’    </p>
<p>​                 <img src="https://qqadapt.qpic.cn/txdocpic/0/e9cbdcb0e2ed565ca08b535b601fda32/0?w=870&h=768" alt="img">        </p>
<p>提取已用百分比</p>
<p>​                 <img src="https://qqadapt.qpic.cn/txdocpic/0/b31688b708a7554b4bf04fe44b3eabb9/0?w=988&h=150" alt="img">        </p>
<p><strong>BEGIN</strong> </p>
<p>#awk ‘BEGIN{printf “This is a transcript \n” }  {printf $2 “\t” $6 “\n”}’ student.txt</p>
<p><strong>END</strong> </p>
<p># awk ‘END{printf “The End \n” }                             </p>
<p>{printf $2 “\t” $6 “\n”}’ student.txt  </p>
<p><strong>FS内置变量</strong> </p>
<p>#cat /etc/passwd | grep “/bin/bash” | awk ‘BEGIN {FS=”:”} {printf $1 “\t” $3 “\n”}’</p>
<p><strong>关系运算符</strong> </p>
<p>#cat student.txt | grep -v Name |  awk ‘$6 &gt;= 87 {printf $2 “\n” }’</p>
<h3 id="11-2-4-sed命令"><a href="#11-2-4-sed命令" class="headerlink" title="11.2.4  sed命令"></a><strong>11.2.4  sed命令</strong></h3><p><strong>sed命令</strong> </p>
<ul>
<li>sed 是一种几乎包括在所有 UNIX 平台（包括 Linux）的轻量级流编辑器。sed主要是用来将数据进行选取、替换、删除、新增的命令。</li>
</ul>
<p>[root@localhost ~]# sed [选项] ‘[动作]’ 文件名 </p>
<p>选项：  </p>
<p>-n：  一般sed命令会把所有数据都输出到屏幕 ，  如果加入此选择，则只会把经过                   sed命令处  理的行输出到屏幕。 </p>
<p> -e： 允许对输入数据应用多条sed命令编辑 </p>
<p> -i：  用sed的修改结果直接修改读取数据的文件，  而不是由屏幕输出</p>
<p>动作：  </p>
<p>a \：  追加，在当前行后添加一行或多行。添加多行时，除最后 一行  外，每行末尾需要用“\”代表数据未完结。 </p>
<p>c \：  行替换，用c后面的字符串替换原数据行，替换多行时，除最  后一行外，每行末尾需“\”代表数据未完结。</p>
<p> i \：  插入，在当期行前插入一行或多行。插入多行时，除最后 一行  外，每行末尾需要“\”代表数据未完结。 </p>
<p>d：  删除，删除指定的行。 </p>
<p>p：  打印，输出指定的行。 </p>
<p>s：  字串替换，用一个字符串替换另外一个字符串。格式为“行范  围s/旧字串/新字串/g”（和vim中的替换格式类似）。 </p>
<p>学生成绩表 </p>
<p>[root@localhost ~]# vi student.txt  </p>
<p>ID      Name      PHP     Linux   MySQL   Average </p>
<p>1        Liming    82        95         86             87.66 </p>
<p>2        Sc            74        96         87             85.66 </p>
<p>3        Gao         99        83         93             91.66</p>
<p><strong>行数据操作</strong> </p>
<p>[root@localhost ~]# sed ‘2p’ student.txt  </p>
<p>#查看文件的第二行  </p>
<p>[root@localhost ~]# sed -n ‘2p’ student.txt    </p>
<p>[root@localhost ~]# sed ‘2,4d’ student.txt  </p>
<p>#删除第二行到第四行的数据，但不修改文件本身</p>
<p>​                 <img src="https://qqadapt.qpic.cn/txdocpic/0/cbf28b4a3eb1162287090d2116cd2c79/0?w=574&h=310" alt="img">        </p>
<p>​                 <img src="https://qqadapt.qpic.cn/txdocpic/0/b09f23ccebed263fd1fb4ac8ede47de9/0?w=632&h=310" alt="img">        </p>
<p>[root@localhost ~]# sed ‘2a hello’ student.txt   </p>
<p>#在第二行后追加hello  </p>
<p>[root@localhost ~]# sed ‘2i hello \ world’ student.txt </p>
<p>#在第二行前插入两行数据  </p>
<p># sed ‘2c No such person‘ student.txt </p>
<p>#数据替换</p>
<p><strong>字符串替换</strong> </p>
<p># sed ‘s/旧字串/新字串/g’ 文件名  </p>
<p># sed ‘3s/74/99/g’ student.txt  </p>
<p>#在第三行中，把74换成99 </p>
<p>#sed -i ‘3s/74/99/g’ student.txt  </p>
<p>#sed操作的数据直接写入文件  </p>
<p># sed -e ‘s/Liming//g ; s/Gao//g’ student.txt  </p>
<p>#同时把“Liming”和“Gao”替换为空</p>
<h2 id="11-3-字符处理命令"><a href="#11-3-字符处理命令" class="headerlink" title="11.3 字符处理命令"></a><strong>11.3 字符处理命令</strong></h2><ol>
<li>排序命令sort  </li>
</ol>
<p>[root@localhost ~]# sort [选项] 文件名 </p>
<p>选项： </p>
<p>-f：  忽略大小写  </p>
<p>-n：  以数值型进行排序，默认使用字符串型排序  </p>
<p>-r：  反向排序  </p>
<p>-t：  指定分隔符，默认是分隔符是制表符  </p>
<p>-k n[,m]： 按照指定的字段范围排序。从第n字段开始，  m字段结束（默认到行尾）  </p>
<p>[root@localhost ~]# sort /etc/passwd </p>
<p>#排序用户信息文件  </p>
<p>[root@localhost ~]# sort -r /etc/passwd </p>
<p>#反向排序</p>
<p>[root@localhost ~]# sort -t “:” -k 3,3 /etc/passwd </p>
<p>#指定分隔符是“：”，用第三字段开头，第三字段结尾排序，就是只用第三字段排序  </p>
<p>[root@localhost ~]# sort -n -t “:” -k 3,3 /etc/passwd  </p>
<ol start="2">
<li>统计命令wc </li>
</ol>
<p>[root@localhost ~]# wc [选项] 文件名 </p>
<p>选项：  </p>
<p>-l： 只统计行数  </p>
<p>-w： 只统计单词数  </p>
<p>-m： 只统计字符数</p>
<h2 id="11-4-条件判断"><a href="#11-4-条件判断" class="headerlink" title="11.4 条件判断"></a><strong>11.4 条件判断</strong></h2><ol>
<li>按照文件类型进行判断</li>
</ol>
<p>​                 <img src="https://qqadapt.qpic.cn/txdocpic/0/4f42d4180d9b05736045c067138be4bf/0?w=1412&h=824" alt="img">        </p>
<p>两种判断格式 </p>
<p>[root@localhost ~]# test -e /root/install.log   </p>
<p>[root@localhost ~]# [ -e /root/install.log ] </p>
<p>[ -d /root ] &amp;&amp; echo “yes” || echo “no”  </p>
<p>#第一个判断命令如果正确执行，则打印“yes”，否则打印“no”</p>
<p>​                 <img src="https://qqadapt.qpic.cn/txdocpic/0/daae0b2c7d35b1aac425ae2a56e34f62/0?w=888&h=726" alt="img">        </p>
<ol start="2">
<li>按照文件权限进行判断</li>
</ol>
<p>​                 <img src="https://qqadapt.qpic.cn/txdocpic/0/674dc7ea0e3aa4a86c8eae2071903c64/0?w=1240&h=644" alt="img">        </p>
<p>[ -w student.txt ] &amp;&amp; echo “yes” || echo “no”                   </p>
<p>#判断文件是拥有写权限的</p>
<ol start="3">
<li>两个文件之间进行比较</li>
</ol>
<p>​                 <img src="https://qqadapt.qpic.cn/txdocpic/0/dff4827fcd80b237a5c4eb0c1abf8902/0?w=1226&h=586" alt="img">        </p>
<p>ln /root/student.txt /tmp/stu.txt </p>
<p>#创建个硬链接吧 </p>
<p>[ /root/student.txt -ef /tmp/stu.txt ] &amp;&amp; echo “yes” || echo “no” yes </p>
<p>#用test测试下，果然很有用</p>
<ol start="4">
<li>两个整数之间比较</li>
</ol>
<p>​                 <img src="https://qqadapt.qpic.cn/txdocpic/0/f18adf373b051aa36a9331c02b7fe4de/0?w=1208&h=598" alt="img">        </p>
<p>[ 23 -ge 22 ] &amp;&amp; echo “yes” || echo “no”                                   yes </p>
<p>#判断23是否大于等于22，当然是了  </p>
<p>[ 23 -le 22 ] &amp;&amp; echo “yes” || echo “no”                                          no </p>
<p>#判断23是否小于等于22，当然不是了</p>
<p><strong>5、字符串的判断</strong></p>
<p>​                 <img src="https://qqadapt.qpic.cn/txdocpic/0/af57965d98b2141a63a65e9a16e34c27/0?w=1210&h=618" alt="img">        </p>
<p>name=sc </p>
<p>#给name变量赋值 </p>
<p>[ -z “$name” ] &amp;&amp; echo “yes” || echo “no”  </p>
<p>no </p>
<p>#判断name变量是否为空，因为不为空，所以返回no  </p>
<p>aa=11 </p>
<p>bb=22 </p>
<p>#给变量aa和变量bb赋值 </p>
<p>[ “$aa” == “bb” ] &amp;&amp; echo “yes” || echo “no”            </p>
<p>no </p>
<p>#判断两个变量的值是否相等，明显不相等，所以返回no</p>
<p>6、<strong>多重条件判断</strong></p>
<p>​                 <img src="https://qqadapt.qpic.cn/txdocpic/0/28e56d24796132715b2cb2c841b12f1a/0?w=1164&h=556" alt="img">        </p>
<p>aa=11 </p>
<p>[ -n “$aa”  -a “$aa” -gt 23 ] &amp;&amp; echo “yes” || echo “no” </p>
<p>no </p>
<p>#判断变量aa是否有值，同时判断变量aa的是否大于23 </p>
<p>#因为变量aa的值不大于23，所以虽然第一个判断值为真，返回的结果也是假  </p>
<p>aa=24 </p>
<p>[ -n “$aa”  -a “$aa” -gt 23 ] &amp;&amp; echo “yes” || echo “no” yes</p>
<h2 id="11-5-流程控制"><a href="#11-5-流程控制" class="headerlink" title="11.5 流程控制"></a><strong>11.5 流程控制</strong></h2><h3 id="11-5-1-if语句"><a href="#11-5-1-if语句" class="headerlink" title="11.5.1  if语句"></a><strong>11.5.1  if语句</strong></h3><ol>
<li>单分支if条件语句 </li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">if  [ 条件判断式 ] ; then</span><br><span class="line">程序 </span><br><span class="line">fi  </span><br><span class="line">#或者</span><br><span class="line">if  [ 条件判断式 ]  </span><br><span class="line">    then</span><br><span class="line">        	程序 </span><br><span class="line">fi </span><br><span class="line"></span><br></pre></td></tr></table></figure>





<p>单分支条件语句需要注意几个点</p>
<ul>
<li>if语句使用fi结尾，和一般语言使用大括号结尾不同 </li>
<li>[ 条件判断式 ]就是使用test命令判断，所以中括号和条件判断式之间必须有空格</li>
<li>then后面跟符合条件之后执行的程序，可以放在[]之后，用“；”分割。也可以换行写入，就不需要“；”了</li>
</ul>
<p>例子：判断分区使用率 </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/basn</span><br><span class="line"># 统计根分区使用率 </span><br><span class="line"># Author: shenchao （E-mail: shenchao@qq.com）  </span><br><span class="line"> rate=$(df -h | grep &quot;/dev/sda3&quot; | awk &#x27;&#123;print $5&#125;&#x27; | cut -d &quot;%&quot; -f 1)  </span><br><span class="line"> # 把根分区使用率作为变量值赋予变量rate  </span><br><span class="line"> if [ $rate -ge 80]</span><br><span class="line">    then</span><br><span class="line">        echo &quot;Warning! /dev/sda3 is full!&quot;</span><br><span class="line"> fi</span><br><span class="line"></span><br></pre></td></tr></table></figure>





<p>​                 <img src="https://qqadapt.qpic.cn/txdocpic/0/894b2edf008c6069681da701d9002869/0?w=1020&h=662" alt="img">        </p>
<ol>
<li>双分支if条件语句 </li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">if [ 条件判断式 ] </span><br><span class="line">    then   </span><br><span class="line">        条件成立时，执行的程序  </span><br><span class="line">    else </span><br><span class="line">        条件不成立时，执行的另一个程序 </span><br><span class="line">fi</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p>例子1：备份mysql数据库 </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line">#备份mysql数据库。</span><br><span class="line"># Author:shenchao（E-mail:shenchao@lampbrother.net）</span><br><span class="line">ntpdateasia.pool.ntp.org&amp;&gt;/dev/null</span><br><span class="line">#同步系统时间</span><br><span class="line">date=$(date+%y%m%d)</span><br><span class="line">#把当前系统时间按照“年月日”格式赋予变量</span><br><span class="line">datesize=$(du-sh/var/lib/mysql)</span><br><span class="line">#统计mysql数据库的大小，并把大小赋予size变量</span><br><span class="line">if [ -d/tmp/dbbak ]</span><br><span class="line">    then</span><br><span class="line">        echo&quot;Date:$date!&quot; &gt; /tmp/dbbak/dbinfo.txt</span><br><span class="line">        echo&quot;Datasize$size&quot;&gt;&gt;/tmp/dbbak/dbinfo.txt</span><br><span class="line">        cd/tmp/dbbak</span><br><span class="line">        tar -zcf mysql-lib-$date.tar.gz /var/lib/mysql dbinfo.txt &amp;&gt;/dev/null</span><br><span class="line">        rm -rf /tmp/dbbak/dbinfo.txt</span><br><span class="line">    else</span><br><span class="line">        mkdir /tmp/dbbak</span><br><span class="line">        echo&quot;Date:date!&quot;&gt;/tmp/dbbak/dbinfo.txt</span><br><span class="line">        echo&quot;Datasize:size&quot;&gt;&gt;/tmp/dbbak/dbinfo.txt</span><br><span class="line">        cd/tmp/dbbak</span><br><span class="line">        tar -zcf mysql-lib-$date.tar.gz /var/lib/mysql  </span><br><span class="line">         dbinfo.txt &amp;&gt; /dev/null</span><br><span class="line">         rm -rf /tmp/dbbak/dbinfo.txt</span><br><span class="line"> fi</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p>例子2：判断apache是否启动</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line">#Author:shenchao（E-mail:shenchao@lampbrother.net）</span><br><span class="line">port=$(nmap -sT 192.168.1.156 | grep tcp | grep http |awk&#x27;&#123;print$2&#125;&#x27;)</span><br><span class="line">#使用nmap命令扫描服务器，并截取apache服务的状态，赋予变量port</span><br><span class="line">if [ &quot;$port&quot;==&quot;open&quot; ]</span><br><span class="line">    then</span><br><span class="line">        echo“$(date)httpdisok!” &gt;&gt; /tmp/autostart-acc.log</span><br><span class="line">    else</span><br><span class="line">        /etc/rc.d/init.d/httpdstart &amp;&gt; /dev/null</span><br><span class="line">        echo&quot;$(date)restarthttpd!!&quot; &gt;&gt; /tmp/autostart-err.log</span><br><span class="line">fi</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<ol>
<li>多分支if条件语句</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">if [ 条件判断式1 ]</span><br><span class="line">    then</span><br><span class="line">        当条件判断式1成立时，执行程序1</span><br><span class="line">elif [ 条件判断式2 ]</span><br><span class="line">    then</span><br><span class="line">        当条件判断式2成立时，执行程序2</span><br><span class="line">„省略更多条件…</span><br><span class="line">else</span><br><span class="line">    当所有条件都不成立时，最后执行此程序</span><br><span class="line">fi</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p>例子</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line">#判断用户输入的是什么文件</span><br><span class="line">#Author:shenchao（E-mail:shenchao@lampbrother.net）</span><br><span class="line">read-p&quot;Pleaseinputafilename:&quot;file</span><br><span class="line">#接收键盘的输入，并赋予变量file</span><br><span class="line">if [ -z &quot;$file&quot; ]</span><br><span class="line">#判断file变量是否为空       </span><br><span class="line">    then</span><br><span class="line">        echo &quot;Error,pleaseinputafilename&quot;</span><br><span class="line">        exit 1</span><br><span class="line">elif [ ! -e &quot;$file&quot; ]</span><br><span class="line">#判断file的值是否存在</span><br><span class="line">    then</span><br><span class="line">        echo &quot;Yourinputisnotafile!&quot;</span><br><span class="line">        exit 2</span><br><span class="line">elif [ -f &quot;$file&quot; ]</span><br><span class="line">#判断file的值是否为普通文件</span><br><span class="line">    then </span><br><span class="line">    echo &quot;$fileisaregularefile!&quot;</span><br><span class="line">elif [ -d &quot;$file&quot; ]</span><br><span class="line">#判断file的值是否为目录文件  </span><br><span class="line">    then</span><br><span class="line">        echo &quot;$fileisadirectory!&quot;</span><br><span class="line">else</span><br><span class="line">    echo&quot;$fileisanotherfile!&quot;</span><br><span class="line">fi</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h3 id="11-5-2-case语句"><a href="#11-5-2-case语句" class="headerlink" title="11.5.2  case语句"></a><strong>11.5.2  case语句</strong></h3><p><strong>多分支case条件语句</strong> </p>
<ul>
<li>case语句和if…elif…else语句一样都是多分支条件语句，不过和if多分支条件语句不同的是，case语句只能判断一种条件关系，而if语句可以判断多种条件关系。</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">case $ 变量名 in  </span><br><span class="line">    &quot; 值1&quot;）   </span><br><span class="line">         如果变量的值等于值1，则执行程序1   </span><br><span class="line">        ; ;</span><br><span class="line">     &quot; 值2&quot;）   </span><br><span class="line">         如果变量的值等于值2，则执行程序2  </span><br><span class="line">          ; ;  </span><br><span class="line">      …省略其他分支…  </span><br><span class="line">      * ）   </span><br><span class="line">      如果变量的值都不是以上的值，则执行此程序 </span><br><span class="line">      ; ;</span><br><span class="line">esac </span><br><span class="line"></span><br></pre></td></tr></table></figure>



<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line">#判断用户输入</span><br><span class="line">#Author:shenchao（E-mail:shenchao@lampbrother.net）</span><br><span class="line">read -p&quot;Pleasechooseyes/no:&quot; -t 30 cho</span><br><span class="line">case $cho in</span><br><span class="line">    &quot;yes&quot;)</span><br><span class="line">        echo&quot;Yourchooseisyes!&quot;</span><br><span class="line">        ;;       </span><br><span class="line">    &quot;no&quot;)</span><br><span class="line">        echo&quot;Yourchooseisno!&quot;</span><br><span class="line">        ;;</span><br><span class="line">    *)</span><br><span class="line">    echo&quot;Yourchooseiserror!&quot;</span><br><span class="line">    ;;</span><br><span class="line">esac</span><br><span class="line"></span><br></pre></td></tr></table></figure>







<h3 id="11-5-3-for循环"><a href="#11-5-3-for循环" class="headerlink" title="11.5.3  for循环"></a><strong>11.5.3  for循环</strong></h3><p>语法一</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">for 变量 in 值1 值2 值3</span><br><span class="line">    do </span><br><span class="line">        程序</span><br><span class="line">    done</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line">for city in beijing nanjing shanghai </span><br><span class="line">    do</span><br><span class="line">        echo &quot;this city is $city &quot;</span><br><span class="line">    done </span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p>输出：</p>
<p>this city is beijing </p>
<p>this city is nanjing </p>
<p>this city is shanghai </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line">#批量解压缩脚本</span><br><span class="line">cd /sh</span><br><span class="line">ls *.tar.gz -&gt; ls.log</span><br><span class="line">for i in $(cat ls.log)</span><br><span class="line">    do</span><br><span class="line">       tar -zxf $i &amp;&gt; /dev/null</span><br><span class="line">    done </span><br><span class="line">rm -rf /sh/ls.log</span><br><span class="line"></span><br></pre></td></tr></table></figure>





<p>语法二</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">for((初始值;循环控制条件;变量变化))</span><br><span class="line">    do</span><br><span class="line">        程序</span><br><span class="line">    done</span><br></pre></td></tr></table></figure>



<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line">#从1加到100</span><br><span class="line">#Author</span><br><span class="line">num=0</span><br><span class="line">for((i=1;i&lt;=100;i++))</span><br><span class="line">    do</span><br><span class="line">        num=$(($num+$i))</span><br><span class="line">    done</span><br><span class="line">echo &quot;this sum of 1+2+...+100 is: $num&quot;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h3 id="11-5-4-while循环与until循环"><a href="#11-5-4-while循环与until循环" class="headerlink" title="11.5.4  while循环与until循环"></a><strong>11.5.4  while循环与until循环</strong></h3><ol>
<li><strong>while循环</strong> </li>
</ol>
<ul>
<li>while循环是不定循环，也称作条件循环。只要条件判断式成立，循环就会一直继续，直到条件判断式不成立，循环才会停止。这就和for的固定循环不太一样了。</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">while [ 条件判断式 ]</span><br><span class="line">    do</span><br><span class="line">        程序</span><br><span class="line">    done</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line">#从1加到100</span><br><span class="line">#Author:shenchao（E-mail:shenchao@lampbrother.net）</span><br><span class="line">i=1</span><br><span class="line">s=0</span><br><span class="line">while [ $i -le 100 ] </span><br><span class="line">#如果变量i的值小于等于100，则执行循环</span><br><span class="line">    do</span><br><span class="line">        s=$(($s+$i))</span><br><span class="line">        i=$(($i+1))</span><br><span class="line">    done</span><br><span class="line">echo&quot;Thesumis:$s&quot;</span><br></pre></td></tr></table></figure>







<ol start="2">
<li>until循环 </li>
</ol>
<ul>
<li>until循环，和while循环相反，until循环时只要条件判断式不成立则进行循环，并执行循环程序。一旦循环条件成立，则终止循环。</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">until [ 条件判断式 ]</span><br><span class="line">    do</span><br><span class="line">        程序</span><br><span class="line">    done</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line">#从1加到100</span><br><span class="line">#Author:shenchao（E-mail:shenchao@lampbrother.net）</span><br><span class="line">i=1</span><br><span class="line">s=0</span><br><span class="line">until [ $i -gt 100 ]</span><br><span class="line">#循环直到变量i的值大于100，就停止循环</span><br><span class="line">    do</span><br><span class="line">        s=$(($s+$i))i=$(($i+1))</span><br><span class="line">    done</span><br><span class="line">echo&quot;Thesumis:$s&quot;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h1 id="第十二讲-Linux服务管理"><a href="#第十二讲-Linux服务管理" class="headerlink" title="第十二讲 Linux服务管理"></a><strong>第十二讲 Linux服务管理</strong></h1><h2 id="12-1-服务简介与分类"><a href="#12-1-服务简介与分类" class="headerlink" title="12.1  服务简介与分类"></a><strong>12.1  服务简介与分类</strong></h2><ol>
<li>服务的分类</li>
</ol>
<p>​                 <img src="https://qqadapt.qpic.cn/txdocpic/0/b90c7e8e3391b24d7f572eba86e8ae3b/0?w=1100&h=606" alt="img">        </p>
<p>启动与自启动 </p>
<ul>
<li><p>服务启动：就是在当前系统中让服务运行，并提供功能。 </p>
</li>
<li><p>服务自启动：自启动是指让服务在系统开机或重启动之后，随着系统的启动而自动启动服务。</p>
</li>
</ul>
<p>查询已安装的服务</p>
<ul>
<li><p>RPM包安装的服务 </p>
</li>
<li><ul>
<li>chkconfig  –list </li>
</ul>
</li>
</ul>
<p>#查看服务自启动状态，可以看到所有RPM包安装的服务  </p>
<ul>
<li><p>源码包安装的服务 </p>
</li>
<li><ul>
<li>查看服务安装位置，一般是/usr/local/下</li>
</ul>
</li>
</ul>
<p>RPM安装服务和源码包安装服务的区别</p>
<ul>
<li><p>RPM安装服务和源码包安装服务的区别就是安装位置的不同</p>
</li>
<li><ul>
<li>源码包安装在指定位置，一般是/usr/local/ </li>
<li>RPM包安装在默认位置中</li>
</ul>
</li>
</ul>
<h2 id="12-2-RPM包安装服务的管理"><a href="#12-2-RPM包安装服务的管理" class="headerlink" title="12.2 RPM包安装服务的管理"></a><strong>12.2 RPM包安装服务的管理</strong></h2><h3 id="12-2-1-独立服务的管理"><a href="#12-2-1-独立服务的管理" class="headerlink" title="12.2.1  独立服务的管理"></a><strong>12.2.1  独立服务的管理</strong></h3><p>​                 <img src="https://qqadapt.qpic.cn/txdocpic/0/b90c7e8e3391b24d7f572eba86e8ae3b/0?w=1100&h=606" alt="img">        </p>
<ol>
<li>RPM包安装服务的位置 </li>
</ol>
<ul>
<li><p>RPM安装服务和源码包安装服务的区别就是安装位置的不同</p>
</li>
<li><ul>
<li>源码包安装在指定位置，一般是/usr/local/ </li>
<li>RPM包安装在默认位置中 /etc/init.d/：启动脚本位置</li>
</ul>
</li>
<li><p>/etc/sysconfig/：初始化环境配置文件位置 </p>
</li>
<li><p>/etc/：配置文件位置 </p>
</li>
<li><p>/etc/xinetd.conf：xinetd配置文件 </p>
</li>
<li><p>/etc/xinetd.d/：基于xinetd服务的启动脚本</p>
</li>
<li><p>/var/lib/：服务产生的数据放在这里 </p>
</li>
<li><p>/var/log/：日志</p>
</li>
</ul>
<ol start="2">
<li>独立服务的启动 </li>
</ol>
<ul>
<li>/etc/init.d/独立服务名  start|stop|status|restart|    </li>
<li>service  独立服务名  start|stop|restart||status </li>
</ul>
<ol start="3">
<li>独立服务的自启动 </li>
</ol>
<ul>
<li>chkconfig [–level 运行级别] [独立服务名] [on|off]   </li>
<li>修改/etc/rc.d/rc.local文件   </li>
<li>使用ntsysv命令管理自启动</li>
</ul>
<p><strong>tips:</strong> service和chkconfig命令的功能在Centos7中好像都被阉割了。被<strong>systemctl</strong>取代。</p>
<p>参考博文：<a target="_blank" rel="noopener" href="https://blog.csdn.net/cds86333774/article/details/51165361">Centos7下的systemctl命令与service和chkconfig</a></p>
<h3 id="12-2-2-基于xinetd服务的管理"><a href="#12-2-2-基于xinetd服务的管理" class="headerlink" title="12.2.2  基于xinetd服务的管理"></a><strong>12.2.2  基于xinetd服务的管理</strong></h3><p><strong>Xinetd：</strong>即extended internet daemon，是新一代的网络守护进程服务程序，又叫超级Internet服务器，常用来管理多种轻量级Internet服务。Xinetd提供类似于inetd+tcp_wrapper的功能，但是更加强大和安全。</p>
<p>​                 <img src="https://qqadapt.qpic.cn/txdocpic/0/b90c7e8e3391b24d7f572eba86e8ae3b/0?w=1100&h=606" alt="img">        </p>
<ol>
<li>安装xinetd与telnet </li>
</ol>
<p>[root@localhost ~]# yum -y install xinetd  </p>
<p>[root@localhost ~]# yum -y install telnet-server </p>
<ol start="2">
<li>xinetd服务的启动</li>
</ol>
<p>[root@localhost ~]# vi /etc/xinetd.d/telnet </p>
<p>service telnet  &lt;- 服务的名称为telnet</p>
<p> {         </p>
<p>flags           = REUSE  &lt;- 标志为REUSE，设定TCP/IP socket可重用</p>
<p>socket_type     = stream  &lt;-使用TCP协议数据包         </p>
<p>wait            = no  &lt;-允许多个连接同时连接         </p>
<p>user            = root  &lt;- 启动服务的用户为root         </p>
<p>server          = /usr/sbin/in.telnetd  &lt;- 服务的启动程序         </p>
<p>log_on_failure  += USERID  &lt;- 登陆失败后，记录用户的ID         </p>
<p>disable         = no   &lt;- 服务不启动</p>
<p>}</p>
<p>重启xinetd服务 [root@localhost ~]# service xinetd restart</p>
<ol start="3">
<li>xinetd服务的自启动 </li>
</ol>
<ul>
<li>[root@localhost ~]# chkconfig telnet on   </li>
<li>ntsysv</li>
</ul>
<h2 id="12-3-源码包安装服务的管理"><a href="#12-3-源码包安装服务的管理" class="headerlink" title="12.3 源码包安装服务的管理"></a><strong>12.3 源码包安装服务的管理</strong></h2><ol>
<li>源码包安装服务的启动 </li>
</ol>
<ul>
<li>使用绝对路径，调用启动脚本来启动。不同的源码包的启动脚本不同。可以查看源码包的安装说明，查看启动脚本的方法。 </li>
</ul>
<p> /usr/local/apache2/bin/apachectl  start|stop </p>
<ol>
<li>源码包服务的自启动 </li>
</ol>
<p>[root@localhost ~]# vi /etc/rc.d/rc.local </p>
<p>加入 </p>
<p>/usr/local/apache2/bin/apachectl  start</p>
<ol start="2">
<li>让源码包服务被服务管理命令识别 </li>
</ol>
<ul>
<li>让源码包的apache服务能被service命令管理启动 </li>
</ul>
<p>ln -s /usr/local/apache2/bin/apachectl /etc/init.d/apache   </p>
<ul>
<li>让源码包的apache服务能被chkconfig与ntsysv命令管理自启动  </li>
</ul>
<p>vi /etc/init.d/apache </p>
<p># chkconfig: 35 86 76 </p>
<p>#指定httpd脚本可以被chkconfig命令管理。格式是：  </p>
<p>chkconfig： 运行级别 启动顺序 关闭顺序 </p>
<p># description: source package apache </p>
<p>#说明，内容随意</p>
<p>[root@localhost ~]# chkconfig –add apache </p>
<p>#把源码包apache加入chkconfig命令</p>
<h2 id="12-4-服务管理总结"><a href="#12-4-服务管理总结" class="headerlink" title="12.4 服务管理总结"></a><strong>12.4 服务管理总结</strong></h2><p>脑图地址</p>
<p>​                 <img src="https://qqadapt.qpic.cn/txdocpic/0/d246ef6a527a876cb6d5b847c47138bb/0?w=1768&h=1052" alt="img">        </p>
<h1 id="第十三章-Linux系统管理"><a href="#第十三章-Linux系统管理" class="headerlink" title="第十三章 Linux系统管理"></a><strong>第十三章 Linux系统管理</strong></h1><h2 id="13-1-进程管理"><a href="#13-1-进程管理" class="headerlink" title="13.1 进程管理"></a><strong>13.1 进程管理</strong></h2><h3 id="13-1-1-进程查看"><a href="#13-1-1-进程查看" class="headerlink" title="13.1.1  进程查看"></a><strong>13.1.1  进程查看</strong></h3><ol>
<li>进程简介 </li>
</ol>
<ul>
<li>进程是正在执行的一个程序或命令，每一个进程都是一个运行的实体，都有自己的地址空间，并占用一定的系统资源。 </li>
</ul>
<ol start="2">
<li>进程管理的作用</li>
</ol>
<ul>
<li>判断服务器健康状态 </li>
<li>查看系统中所有进程 </li>
<li>杀死进程</li>
</ul>
<ol start="3">
<li>查看系统中所有进程</li>
</ol>
<p>[root@localhost ~]# ps aux </p>
<p>#查看系统中所有进程，使用BSD操作系统格式 </p>
<p>[root@localhost ~]# ps -le </p>
<p>#查看系统中所有进程，使用Linux标准命令格式。 </p>
<ul>
<li><p>USER：该进程是由哪个用户产生的； </p>
</li>
<li><p>PID：进程的ID号； </p>
</li>
<li><p>%CPU：该进程占用CPU资源的百分比，占用越高，进程越耗费资源；</p>
</li>
<li><p>%MEN：该进程占用物理内存的百分比，占用越高，进程越耗费资源； </p>
</li>
<li><p>VSZ: 该进程占用虚拟内存的大小，单位KB；</p>
</li>
<li><p>RSS：该进程占用实际物理内存的大小，单位KB； </p>
</li>
<li><p>TTY：该进程是在哪个终端中运行的。其中tty1-tty7代表本地控制台终端，tty1-tty6是本地的字符界面终端，tty7 是图形终端。pts/0-255代表虚拟终端。</p>
</li>
<li><p>STAT：进程状态。常见的状态有：</p>
</li>
<li><ul>
<li>R：运行</li>
<li>S：睡眠</li>
<li>T：停止状态</li>
<li>s：包含子进程</li>
<li>+：位于后台 </li>
</ul>
</li>
<li><p>START：该进程的启动时间 </p>
</li>
<li><p>TIME：该进程占用CPU的运算时间，注意不是系统时间 </p>
</li>
<li><p>COMMAND：产生此进程的命令名</p>
</li>
</ul>
<p>​                 <img src="https://qqadapt.qpic.cn/txdocpic/0/b3a1df554f84bcb79f177e3728c1fd87/0?w=1572&h=360" alt="img">        </p>
<p>​                 <img src="https://qqadapt.qpic.cn/txdocpic/0/2d9c9e0677f7b4f369b9001212a34de3/0?w=1394&h=336" alt="img">        </p>
<p><strong>tips: ps aux 和 ps -ef 区别</strong></p>
<p>两者没太大差别，讨论这个问题，要追溯到Unix系统中的两种风格，System Ｖ风格和BSD 风格，ps aux最初用到Unix Style中，而ps -ef被用在System V Style中，两者输出略有不同。现在的大部分Linux系统都是可以同时使用这两种方式的。</p>
<p>其中各列的内容意思如下</p>
<p>UID  //用户ID、但输出的是用户名 </p>
<p>PID  //进程的ID </p>
<p>PPID  //父进程ID </p>
<p>C   //进程占用CPU的百分比 </p>
<p>STIME //进程启动到现在的时间 </p>
<p>TTY  //该进程在那个终端上运行，若与终端无关，则显示? 若为pts/0等，则表示由网络连接主机进程。 </p>
<p>CMD  //命令的名称和参数</p>
<ol start="4">
<li>查看系统健康状态 </li>
</ol>
<p>[root@localhost]#  top [ 选项] </p>
<p>选项： </p>
<p>- d  秒数： 指定top命令每隔几秒更新。默认是3秒 在top命令的交互模式当中可以执行的命令：  </p>
<p>？或h：  显示交互模式的帮助  </p>
<p>P：   以CPU使用率排序，默认就是此项  </p>
<p>M：   以内存的使用率排序  </p>
<p>N：   以PID排序  </p>
<p>q：   退出top</p>
<p><strong>第一行信息为任务队列信息 [重点关注load average]</strong></p>
<p>​                 <img src="https://qqadapt.qpic.cn/txdocpic/0/c8da8aa417c4cdb3fd7690b80340ce0a/0?w=864&h=462" alt="img">        </p>
<p><strong>第二行为进程信息</strong>                 <img src="https://qqadapt.qpic.cn/txdocpic/0/98b877a1b778022866047f4bc0caad0b/0?w=912&h=484" alt="img">        </p>
<p><strong>第三行为CPU信息 [重点关注 id(空闲cpu百分比)]</strong></p>
<p>​                 <img src="https://qqadapt.qpic.cn/txdocpic/0/290d397ab79a974533564412643af57d/0?w=942&h=532" alt="img">        </p>
<p><strong>第四行为物理内存信息 [重点关注free]</strong></p>
<p>​                 <img src="https://qqadapt.qpic.cn/txdocpic/0/a9448620d6f6fcc35e977d9e9b1c5dae/0?w=944&h=504" alt="img">        </p>
<p><strong>第五行为交换分区（swap）信息</strong></p>
<p>​                 <img src="https://qqadapt.qpic.cn/txdocpic/0/7be9bb3cefb995a1cbd203c00fb95afd/0?w=946&h=488" alt="img">        </p>
<ol start="5">
<li>查看进程树 </li>
</ol>
<p>[root@localhost]# pstree  [选项]</p>
<p>选项：  </p>
<p>- p ： 显示进程的PID  </p>
<p>- u ： 显示进程的所属用户</p>
<h3 id="13-1-2-终止进程"><a href="#13-1-2-终止进程" class="headerlink" title="13.1.2  终止进程"></a><strong>13.1.2  终止进程</strong></h3><ol>
<li>kill命令 </li>
</ol>
<p>[root@localhost ~]# kill –l </p>
<p>#查看可用的进程信号</p>
<p>​                 <img src="https://qqadapt.qpic.cn/txdocpic/0/19bb434390ca0be04461e0de1af45eeb/0?w=1562&h=950" alt="img">        </p>
<p>[root@localhost ~]# kill -1 22354 </p>
<p>#重启进程  </p>
<p>[root@localhost ~]# kill -9 22368 </p>
<p>#强制杀死进程</p>
<ol>
<li>killall命令 </li>
</ol>
<p>[root@localhost]# killall [ 选项][信号] 进程名 </p>
<p>#按照进程名杀死进程 </p>
<p>选项：  </p>
<p>- i ： 交互式，询问是否要杀死某个进程  </p>
<p>- I ： 忽略进程名的大小写  </p>
<ol>
<li>pkill命令</li>
</ol>
<p>[root@localhost]# pkill  [ 选项] [信号] 进程名 </p>
<p>#按照进程名终止进程 选项：  </p>
<p>- t  终端号： 按照终端号踢出用户</p>
<p><strong>按照终端号踢出用户</strong> </p>
<p>[root@localhost ~]# w </p>
<p>#使用w命令查询本机已经登录的用户  </p>
<p>[root@localhost ~]# pkill -t -9 pts/1 </p>
<p>#强制杀死从pts/1虚拟终端登录的进程</p>
<h2 id="13-2-工作管理"><a href="#13-2-工作管理" class="headerlink" title="13.2 工作管理"></a><strong>13.2 工作管理</strong></h2><ol>
<li>把程序放入后台</li>
</ol>
<ul>
<li>tar -zcf etc.tar.gz /etc &amp;  [程序还在运行]</li>
<li>[root@localhost ~]# top </li>
</ul>
<p>#在top命令执行的过程中，按下ctrl+z快捷键  [程序暂停，除非恢复]</p>
<ol start="2">
<li>查看后台的工作</li>
</ol>
<p>[root@localhost]# jobs [-l]</p>
<p>选项：</p>
<p>-l: 显示工作的PID</p>
<p>注：”+”号表示最近一个放入后台的工作，也是工作恢复时，默认恢复的工作。</p>
<p>“-“号代表倒数第二个放入后台的工作</p>
<ol start="3">
<li>将后台暂停的工作恢复到前台执行</li>
</ol>
<p>[root@localhost]# fg %工作号</p>
<p>参数：</p>
<p>%工作号：%号可以省略，但是注意工作号和PID的区别</p>
<ol start="4">
<li>把后台暂停的工作恢复到后台执行</li>
</ol>
<p>[root@localhost]# bg %工作号</p>
<p>注：后台恢复执行的命令，是不能和前台有交互的，否则不能恢复到后台执行。</p>
<p>即：命令和前台有交互是不能恢复到后台运行。例如：top</p>
<h2 id="13-3-系统资源查看"><a href="#13-3-系统资源查看" class="headerlink" title="13.3 系统资源查看"></a><strong>13.3 系统资源查看</strong></h2><ol>
<li>vmstat命令监控系统资源</li>
</ol>
<p>[root@localhost ~]# vmstat [刷新延时 刷新次数]  </p>
<p>例如： </p>
<p>[root@localhost proc]# vmstat 1 3  </p>
<ol start="2">
<li>dmesg开机时内核检测信息 </li>
</ol>
<p>[root@localhost ~]# dmesg </p>
<p>[root@localhost ~]# dmesg | grep CPU</p>
<ol start="3">
<li>free命令查看内存使用状态 </li>
</ol>
<p>[root@localhost ~]# free [-b|-k|-m|-g] </p>
<p>选项：  </p>
<p>-b： 以字节为单位显示  </p>
<p>-k： 以KB为单位显示，默认就是以   KB为单位显示  </p>
<p>-m： 以MB为单位显示  </p>
<p>-g： 以GB为单位显示  </p>
<p><strong>缓存和缓冲的区别</strong></p>
<ul>
<li>简单来说缓存（cache）是用来加速数据从硬盘中“读取”的，而缓冲（buffer）是用来加速数据“写入”硬盘的。</li>
</ul>
<p>tips:向硬盘写入数据的时候,现存在缓冲中,达到一定规模,写入到硬盘。减少写入写出操作。</p>
<ol>
<li>查看CPU信息</li>
</ol>
<p>[root@localhost ~]# cat /proc/cpuinfo  </p>
<ol start="2">
<li>uptime命令 </li>
</ol>
<p>[root@localhost ~]# uptime  </p>
<p>#显示系统的启动时间和平均负载，也就是top命令的第一行。w命令也可以看到这个数据。</p>
<ol start="3">
<li>查看系统与内核相关信息</li>
</ol>
<p>[root@localhost ~]# uname [选项] </p>
<p>选项： </p>
<p>-a： 查看系统所有相关信息；  </p>
<p>-r： 查看内核版本；  </p>
<p>-s： 查看内核名称。 </p>
<p> <strong>判断当前系统的位数</strong></p>
<p>[root@localhost ~]# file /bin/ls</p>
<p><strong>查询当前Linux系统的发行版本</strong> </p>
<p>[root@localhost ~]# lsb_release -a  </p>
<ol>
<li>列出进程打开或使用的文件信息 </li>
</ol>
<p>[root@localhost ~ ] #  lsof [ 选项] </p>
<p># 列出进程调用或打开的文件的信息 </p>
<p>选项： </p>
<p>- c  字符串： 只列出以字符串开头的进程打开的文件  </p>
<p>- u  用户名： 只列出某个用户的进程打开的文   件  </p>
<p>- p  pid ：  列出某个PID进程打开的文件</p>
<h2 id="13-4-系统定时任务"><a href="#13-4-系统定时任务" class="headerlink" title="13.4 系统定时任务"></a><strong>13.4 系统定时任务</strong></h2><ol>
<li><strong>crond服务管理与访问控制</strong> </li>
</ol>
<p>[root@localhost ~]# service crond restart   </p>
<p>[root@localhost ~]# chkconfig crond on</p>
<ol start="2">
<li>用户的crontab设置 </li>
</ol>
<p>[root@localhost ~]# crontab [选项] </p>
<p>选项：  </p>
<p>-e：  编辑crontab定时任务  </p>
<p>-l：  查询crontab任务  </p>
<p>-r：  删除当前用户所有的crontab任务</p>
<p>[root@localhost ~]# crontab -e </p>
<p>#进入crontab编辑界面。会打开vim编辑你的工作。 </p>
<blockquote>
<p>注意：在crontab -e 编辑下 %有特殊含义，所以就应该加转义符</p>
</blockquote>
<p>* * * * * 执行的任务</p>
<p>​                 <img src="https://qqadapt.qpic.cn/txdocpic/0/a52cab47fba8765a97ddf71a911d934c/0?w=890&h=536" alt="img">        </p>
<p>​                 <img src="https://qqadapt.qpic.cn/txdocpic/0/960a3475db25aeec59cdda42469ac9cb/0?w=900&h=552" alt="img">        </p>
<p>​                 <img src="https://qqadapt.qpic.cn/txdocpic/0/f9e21e6ae9bb1dff3fa8a64ed73c47c6/0?w=956&h=574" alt="img">        </p>
<p>举例 </p>
<p>*/5 * * * * /bin/echo ”11” &gt;&gt; /tmp/test </p>
<p>5 5 * * 2 /sbin/shutdown -r now  </p>
<p>0 5 1,10,15 * * /root/sh/autobak.sh</p>
<h1 id="第十四讲-日志管理"><a href="#第十四讲-日志管理" class="headerlink" title="第十四讲 日志管理"></a><strong>第十四讲 日志管理</strong></h1><h2 id="14-1-日志管理简介"><a href="#14-1-日志管理简介" class="headerlink" title="14.1 日志管理简介"></a><strong>14.1 日志管理简介</strong></h2><ol>
<li>日志服务</li>
</ol>
<ul>
<li><p>在CentOS 6.x中日志服务已经由rsyslogd取代了原先的syslogd服务。rsyslogd日志服务更加先进，功能更多。但是不论该服务的使用，还是日志文件的格式其实都是和syslogd服务相兼容的，所以学习起来基本和syslogd服务一致。 </p>
</li>
<li><p>rsyslogd的新特点： </p>
</li>
<li><ul>
<li>基于TCP网络协议传输日志信息； </li>
<li>更安全的网络传输方式；</li>
<li>有日志消息的及时分析框架； </li>
<li>后台数据库； </li>
<li>配置文件中可以写简单的逻辑判断； </li>
<li>与syslog配置文件相兼容。</li>
</ul>
</li>
</ul>
<p><strong>确定服务启动</strong></p>
<p>[root@localhost ~]# ps aux | grep rsyslogd</p>
<p>#查看服务是否启动  </p>
<p>chkconfig –list | grep rsyslog </p>
<p>systemctl list-unit-files | grep rsyslog  <strong>[<strong><strong>Centos7</strong></strong>]</strong></p>
<p>#查看服务是否自启动</p>
<ol>
<li>常见日志的作用</li>
</ol>
<p>​                 <img src="https://qqadapt.qpic.cn/txdocpic/0/075f1ba464b745bdc824f1d06f38809e/0?w=924&h=498" alt="img">        </p>
<p>​                 <img src="https://qqadapt.qpic.cn/txdocpic/0/29ab4554a1c47a73dd174e915d644e96/0?w=908&h=548" alt="img">        </p>
<ul>
<li>除了系统默认的日志之外，采用RPM方式安装的系统服务也会默认把日志记录在/var/log/目录中（源码包安装的服务日志是在源码包指定目录中）。不过这些日志不是由rsyslogd服务来记录和管理的，而是各个服务使用自己的日志管理文档来记录自身日志。</li>
</ul>
<p>​                 <img src="https://qqadapt.qpic.cn/txdocpic/0/0502840904158cb04497e27bbd702a48/0?w=938&h=530" alt="img">        </p>
<h2 id="14-2-rsyslogd日志服务"><a href="#14-2-rsyslogd日志服务" class="headerlink" title="14.2 rsyslogd日志服务"></a><strong>14.2 rsyslogd日志服务</strong></h2><ol>
<li>日志文件格式 </li>
</ol>
<ul>
<li><p>基本日志格式包含以下四列： </p>
</li>
<li><ul>
<li>事件产生的时间； </li>
<li>发生事件的服务器的主机名；</li>
<li>产生事件的服务名或程序名；</li>
<li>事件的具体信息。 </li>
<li></li>
</ul>
</li>
</ul>
<p> 2、/etc/rsyslog.conf配置文件 </p>
<p>authpriv.*                          /var/log/secure </p>
<p>#服务名称[连接符号]日志等级  日志记录位置 </p>
<p>#认证相关服务.所有日志等级  记录在/var/log/secure日志中</p>
<p><strong>服务名称</strong></p>
<p>​                 <img src="https://qqadapt.qpic.cn/txdocpic/0/065505a09bfe2af144dd671a7589bf6f/0?w=898&h=472" alt="img">        </p>
<p>​                 <img src="https://qqadapt.qpic.cn/txdocpic/0/c0ef5f37c5b3a828a900d670d59a1a4d/0?w=896&h=534" alt="img">        </p>
<p><strong>连接符号</strong> </p>
<ul>
<li><p>连接符号可以识别为：</p>
</li>
<li><ul>
<li>“*”代表所有日志等级，比如：“authpriv.*”代表authpriv认证信息服务产生的日志，所有的日志等级都记录 </li>
<li>“.”代表只要比后面的等级高的（包含该等级）日志都记录下来。比如：“cron.info”代表cron服务产生的日志，只要日志等级大于等于info级别，就记录 </li>
<li>“.=”代表只记录所需等级的日志，其他等级的都不记录。比如：“*.=emerg”代表人和日志服务产生的日志，只要等级是emerg等级就记录。这种用法及少见，了解就好 </li>
<li>“.!”代表不等于，也就是除了该等级的日志外，其他等级的日志都记录。</li>
</ul>
</li>
</ul>
<p><strong>日志等级</strong></p>
<p>​                 <img src="https://qqadapt.qpic.cn/txdocpic/0/4f65dcc63069495e36da467b0b4d075b/0?w=902&h=482" alt="img">        </p>
<p><strong>日志记录位置</strong> </p>
<ul>
<li>日志文件的绝对路径，如“/var/log/secure”</li>
<li>系统设备文件，如“/dev/lp0” </li>
<li>转发给远程主机，如“@192.168.0.210:514” </li>
<li>用户名，如“root” </li>
<li>忽略或丢弃日志，如“~”</li>
</ul>
<h2 id="14-3-日志轮替"><a href="#14-3-日志轮替" class="headerlink" title="14.3 日志轮替"></a><strong>14.3 日志轮替</strong></h2><ol>
<li><strong>日志文件的命名规则</strong></li>
</ol>
<ul>
<li>如果配置文件中拥有“dateext”参数，那么日志会用日期来作为日志文件的后缀，例如“secure-20130605”。这样的话日志文件名不会重叠，所以也就不需要日志文件的改名，只需要保存指定的日志个数，删除多余的日志文件即可。 </li>
<li>如果配置文件中没有“dateext”参数，那么日志文件就需要进行改名了。当第一次进行日志轮替时，当前的“secure”日志会自动改名为“secure.1”，然后新建“secure”日志，用来保存新的日志。当第二次进行日志轮替时，“secure.1”会自动改名为“secure.2”，当前的“secure”日志会自动改名为“secure.1”，然后也会新建“secure”日志，用来保存新的日志，以此类推。</li>
</ul>
<ol>
<li><strong>logrotate配置文件</strong></li>
</ol>
<p>​                 <img src="https://qqadapt.qpic.cn/txdocpic/0/6254cba458b05bed9b54b5cb841f0079/0?w=864&h=444" alt="img">        </p>
<p>​                 <img src="https://qqadapt.qpic.cn/txdocpic/0/db9d9c61c7086ff9b82334b8b51f417f/0?w=878&h=536" alt="img">        </p>
<ol>
<li><strong>把apache日志加入轮替</strong> </li>
</ol>
<p>[root@localhost ~]# vi /etc/logrotate.conf  </p>
<p>/usr/local/apache2/logs/access_log {</p>
<p>​       daily    </p>
<p>create     </p>
<p>rotate 30 </p>
<p>} </p>
<ol>
<li><strong>logrotate命令</strong></li>
</ol>
<p>[root@localhost ~]# logrotate [选项] 配置文件名 </p>
<p>选项：  </p>
<p>如果此命令没有选项，则会按照配置文件中的条件进行日志轮替  </p>
<p>-v： 显示日志轮替过程。加了-v选项，会显示日志的轮 替的过程  </p>
<p>-f： 强制进行日志轮替。不管日志轮替的条件是否已经 符合，强制配置文件中所有的日志进行轮替</p>
<h1 id="第十五章-启动管理"><a href="#第十五章-启动管理" class="headerlink" title="第十五章 启动管理"></a><strong>第十五章 启动管理</strong></h1><h2 id="15-1-CentOS-6-x启动管理"><a href="#15-1-CentOS-6-x启动管理" class="headerlink" title="15.1 CentOS 6.x启动管理"></a><strong>15.1 CentOS 6.x启动管理</strong></h2><h3 id="15-1-1-系统运行级别"><a href="#15-1-1-系统运行级别" class="headerlink" title="15.1.1 系统运行级别"></a><strong>15.1.1 系统运行级别</strong></h3><ol>
<li><strong>运行级别</strong></li>
</ol>
<p>​                 <img src="https://qqadapt.qpic.cn/txdocpic/0/e7be547845bc06f89fd3e9163d20b435/0?w=882&h=474" alt="img">        </p>
<ol start="2">
<li><strong>运行级别命令</strong></li>
</ol>
<p>[root@localhost ~]# runlevel  </p>
<p>#查看运行级别命令  </p>
<p>[root@localhost ~]# init 运行级别 </p>
<p>#改变运行级别命令  </p>
<ol start="3">
<li><strong>系统默认运行级别</strong></li>
</ol>
<p>[root@localhost ~]# vim /etc/inittab id:3:initdefault: #系统开机后直接进入哪个运行级别</p>
<h3 id="15-1-2-系统启动过程"><a href="#15-1-2-系统启动过程" class="headerlink" title="15.1.2 系统启动过程"></a><strong>15.1.2 系统启动过程</strong></h3><p>启动流程图</p>
<p>initramfs内存文件系统 </p>
<ul>
<li>CentOS 6.x中使用initramfs内存文件系统取代了CentOS 5.x中的initrd RAM Disk。</li>
</ul>
<p>他们的作用类似，可以通过启动引导程序加载到内存中，然后加载启动过程中所需要的内核模块，比如USB、SATA、SCSI 硬盘的驱动和LVM、RAID文件系统的驱动 </p>
<p>mkdir /tmp/initramfs </p>
<p>#建立测试目录 </p>
<p>cp /boot/initramfs-2.6.32-279.el6.i686.img /tmp/initramfs/ </p>
<p>#复制initramfs文件 </p>
<p>cd /tmp/initramfs/ </p>
<p>file initramfs-2.6.32-279.el6.i686.img  </p>
<p>mv initramfs-2.6.32-279.el6.i686.img initramfs-2.6.32-279.el6.i686.img.gz </p>
<p>#修改文件的后缀名为.gz </p>
<p>gunzip initramfs-2.6.32-279.el6.i686.img.gz </p>
<p>#解压缩  </p>
<p>file initramfs-2.6.32-279.el6.i686.img  </p>
<p>cpio -ivcdu &lt; initramfs-2.6.32-279.el6.i686.img </p>
<p>#解压缩</p>
<p>调用/etc/init/rcS.conf配置文件 </p>
<ul>
<li><p>主要功能是两个： </p>
</li>
<li><ul>
<li>先调用/etc/rc.d/rc.sysinit，然后由/etc/rc.d/rc.sysinit配置文件进行Linux系统初始化。 </li>
<li>然后再调用/etc/inittab，然后由/etc/inittab配置文件确定系统的默认运行级别。 </li>
</ul>
</li>
</ul>
<p><strong>由/etc/rc.d/rc.sysinit初始化</strong></p>
<ol>
<li>获得网络环境 </li>
<li>挂载设备 </li>
<li>开机启动画面Plymouth（取替了过往的 RHGB）</li>
<li>判断是否启用SELinux </li>
<li>显示于开机过程中的欢迎画面 </li>
<li>初始化硬件 </li>
<li>用户自定义模块的加载 </li>
<li>配置内核的参数 </li>
<li>设置主机名</li>
<li>同步存储器 </li>
<li>设备映射器及相关的初始化 </li>
<li>初始化软件磁盘阵列（RAID） </li>
<li>初始化 LVM 的文件系统功能 </li>
<li>检验磁盘文件系统（fsck）</li>
<li>设置磁盘配额(quota) </li>
<li>重新以可读写模式挂载系统磁盘 </li>
<li>更新quota（非必要） </li>
<li>启动系统虚拟随机数生成器 </li>
<li>配置机器（非必要）</li>
<li>清除开机过程当中的临时文件</li>
<li>创建ICE目录 </li>
<li>启动交换分区（swap） </li>
<li>将开机信息写入/var/log/dmesg文件中</li>
</ol>
<p>调用/etc/rc.d/rc文件 </p>
<ul>
<li><p>运行级别参数传入/etc/rc.d/rc这个脚本之后，由这个脚本文件按照不同的运行级别启动/etc/rc[0-6].d/目录中的相应的程序 </p>
</li>
<li><ul>
<li>/etc/rc3.d/k??开头的文件（??是数字），会按照数字顺序依次关闭 </li>
<li>/etc/rc3.d/S??开头的文件（??是数字），会按照数字顺序依次启动</li>
</ul>
</li>
</ul>
<h2 id="15-2-启动引导程序grub"><a href="#15-2-启动引导程序grub" class="headerlink" title="15.2 启动引导程序grub"></a><strong>15.2 启动引导程序grub</strong></h2><h3 id="15-2-1-Grub配置文件"><a href="#15-2-1-Grub配置文件" class="headerlink" title="15.2.1 Grub配置文件"></a><strong>15.2.1 Grub配置文件</strong></h3><ol>
<li>grub中分区表示</li>
</ol>
<p>​                 <img src="https://qqadapt.qpic.cn/txdocpic/0/c8ee9fa12cdb41da25a41e0642984ff5/0?w=920&h=486" alt="img">        </p>
<ol start="2">
<li>grub配置文件 </li>
</ol>
<p>vi /boot/grub/grub.conf </p>
<ul>
<li>default=0  默认启动第一个系统 </li>
<li>timeout=5  等待时间，默认是5秒 </li>
<li>splashimage=(hd0,0)/grub/splash.xpm.gz  这里是指定grub启动时的背景图像文件的保存位置的 </li>
<li>hiddenmenu 隐藏菜单</li>
<li>title CentOS (2.6.32-279.el6.i686)  title就是标题的意思</li>
<li>root (hd0,0)  是指启动程序的保存分区 </li>
<li>kernel /vmlinuz-2.6.32-279.el6.i686 ro root=UUID=b9a7a1a8-767f-4a87-8a2b-a535edb362c9 </li>
</ul>
<p>rd_NO_LUKS  KEYBOARDTYPE=pc KEYTABLE=us </p>
<p>rd_NO_MD crashkernel=auto LANG=zh_CN.UTF-8 </p>
<p>rd_NO_LVM rd_NO_DM rhgb quiet  </p>
<p>定义内核加载时的选项</p>
<ul>
<li>initrd /initramfs-2.6.32-279.el6.i686.img  </li>
</ul>
<p>指定了initramfs内存文件系统镜像文件的所在位置</p>
<h2 id="15-3-系统修复模式"><a href="#15-3-系统修复模式" class="headerlink" title="15.3 系统修复模式"></a><strong>15.3 系统修复模式</strong></h2><ol>
<li><strong>单用户模式</strong></li>
</ol>
<p><strong>单用户模式常见的错误修复</strong> </p>
<ul>
<li>遗忘root密码 </li>
<li>修改系统默认运行级别</li>
</ul>
<ol>
<li><strong>光盘修复模式</strong></li>
</ol>
<p><strong>重要系统文件丢失，导致系统无法启动</strong> </p>
<p>bash-4.1# chroot /mnt/sysimage </p>
<p>#改变主目录 </p>
<p>sh-4.1# cd /root </p>
<p>sh-4.1# rpm -qf /etc/inittab </p>
<p>#查询下/etc/inittab文件属于哪个包。 </p>
<p>sh-4.1# mkdir /mnt/cdrom </p>
<p>#建立挂载点 </p>
<p>sh-4.1# mount /dev/sr0 /mnt/cdrom </p>
<p>#挂载光盘   </p>
<p>sh-4.1#  rpm2cpio/mnt/cdrom/Packages/initscripts-8.45.3-1.i386.rpm  \</p>
<p>  | cpio -idv ./etc/inittab </p>
<p>#提取inittab文件到当前目录 </p>
<p>sh-4.1#  cp etc/inittab /etc/inittab </p>
<p>#复制inittab文件到指定位置</p>
<p>3、<strong>Linux的安全性</strong></p>
<p>​                 <img src="https://qqadapt.qpic.cn/txdocpic/0/14e5dcd8d057a2fca860cb8834a091be/0?w=890&h=416" alt="img">        </p>
<h1 id="第十六章-备份与恢复"><a href="#第十六章-备份与恢复" class="headerlink" title="第十六章 备份与恢复"></a><strong>第十六章 备份与恢复</strong></h1><h2 id="16-1-备份概述"><a href="#16-1-备份概述" class="headerlink" title="16.1 备份概述"></a><strong>16.1 备份概述</strong></h2><ol>
<li>Linux系统需要备份的数据 </li>
</ol>
<ul>
<li>/root/目录： </li>
<li>/home/目录：</li>
<li>/var/spool/mail/目录： </li>
<li>/etc/目录： </li>
<li>其他目录： </li>
</ul>
<p><strong>安装服务的数据</strong> </p>
<ul>
<li><p>apache需要备份的数据 </p>
</li>
<li><ul>
<li>配置文件 </li>
<li>网页主目录 </li>
<li>日志文件 </li>
<li>mysql需要备份的数据</li>
<li>源码包安装的mysql：/usr/local/mysql/data/ </li>
<li>RPM包安装的mysql：/var/lib/mysql/</li>
</ul>
</li>
</ul>
<ol start="2">
<li>备份策略 </li>
</ol>
<ul>
<li>完全备份：完全备份就是指把所有需要备份的数据全部备份，当然完全备份可以备份整块硬盘，整个分区或某个具体的目录</li>
</ul>
<p><strong>增量备份</strong></p>
<p>​                 <img src="https://qqadapt.qpic.cn/txdocpic/0/8d936b7c27bb0ef8122440a689153b9f/0?w=752&h=580" alt="img">        </p>
<p><strong>差异备份</strong></p>
<h2 id="16-2-dump和restore命令"><a href="#16-2-dump和restore命令" class="headerlink" title="16.2 dump和restore命令"></a><strong>16.2 dump和restore命令</strong></h2><ol>
<li>dump命令 </li>
</ol>
<p>[root@localhost ~]# dump [选项] 备份之后的文件名 原文件或目录 </p>
<p>选项：  </p>
<p>-level： 就是我们说的0-9十个备份级别  </p>
<p>-f 文件名： 指定备份之后的文件名  </p>
<p>-u：  备份成功之后，把备份时间记录在/etc/dumpdates文件  </p>
<p>-v：  显示备份过程中更多的输出信息  </p>
<p>-j：  调用bzlib库压缩备份文件，其实就是把备份文件压缩  为.bz2格式，默认压缩等级是2  </p>
<p>-W： 显示允许被dump的分区的备份等级及备份时间  </p>
<p>备份分区 </p>
<p>dump -0uj -f /root/boot.bak.bz2 /boot/ </p>
<p>#备份命令。先执行一次完全备份，并压缩和更新备份时间 </p>
<p>cat /etc/dumpdates </p>
<p>#查看备份时间文件 </p>
<p>cp install.log /boot/ </p>
<p>#复制日志文件到/boot分区 </p>
<p>dump -1uj -f /root/boot.bak1.bz2 /boot/ </p>
<p>#增量备份/boot分区，并压缩 </p>
<p>dump –W </p>
<p>#查询分区的备份时间及备份级别的</p>
<p>备份文件或目录</p>
<p>dump -0j -f /root/etc.dump.bz2 /etc/</p>
<p>#完全备份/etc/目录，只能使用0级别进行完全备份，而不再支持增量备份  </p>
<ol start="2">
<li>restore命令 </li>
</ol>
<p>[root@localhost ~]# restore [模式选项] [选项]  </p>
<p>模式选项：restore命令常用的模式有以下四种，这四个模式不能混用。 </p>
<pre><code>     -C：比较备份数据和实际数据的变化  
</code></pre>
<p>-i： 进入交互模式，手工选择需要恢复的文件。 </p>
<pre><code>     -t： 查看模式，用于查看备份文件中拥有哪些数据。 
</code></pre>
<p>​             -r： 还原模式，用于数据还原。 </p>
<p>选项： </p>
<p>-f： 指定备份文件的文件名</p>

    

    

    

  </div>
  <div class="article-info article-info-index">
    
    
    

    
    <p class="article-more-link">
      <a class="article-more-a" href="/2021/09/01/linux/">展开全文 >></a>
    </p>
    

    
    <div class="clearfix"></div>
  </div>
  </div>
</article>

<aside class="wrap-side-operation">
    <div class="mod-side-operation">
        
        <div class="jump-container" id="js-jump-container" style="display:none;">
            <a href="javascript:void(0)" class="mod-side-operation__jump-to-top">
                <i class="icon-font icon-back"></i>
            </a>
            <div id="js-jump-plan-container" class="jump-plan-container" style="top: -11px;">
                <i class="icon-font icon-plane jump-plane"></i>
            </div>
        </div>
        
        
    </div>
</aside>




  
    <article id="post-git笔记" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
  <div class="article-entry" itemprop="articleBody">
    
    <h2 id="介"><a href="#介" class="headerlink" title="介"></a>介</h2><p> <strong>版本控制工具应该具备的功能</strong>：</p>
<p><strong>协同修改</strong></p>
<p>多人并行不悖的修改服务器端的同一个文件。</p>
<p><strong>数据备份</strong></p>
<p>不仅保存目录和文件的当前状态，还能够保存每一个提交过的历史状态。</p>
<p><strong>版本管理</strong></p>
<p>在保存每一个版本的文件信息的时候要做到不保存重复数据，以节约存储空间，提高运行效率。这方面 SVN 采用的是增量式管理的方式，而 <strong>Git</strong> <strong>采取了文件系统快照的方式</strong>。</p>
<p><strong>权限控制</strong></p>
<p>对团队中参与开发的人员进行权限控制。</p>
<p>对团队外开发者贡献的代码进行审核——Git 独有。</p>
<p><strong>历史记录</strong></p>
<p>查看修改人、修改时间、修改内容、日志信息。</p>
<p>将本地文件恢复到某一个历史状态。</p>
<p>分支管理</p>
<p>允许开发团队在工作过程中多条生产线同时推进任务，进一步提高效率。</p>
<p><strong>托管中心</strong><code>远程库</code></p>
<ul>
<li><strong>内网：可以自己搭建一个GitLab服务器</strong></li>
<li><strong>外网：可以使用码云、Github</strong></li>
</ul>
<p><strong>版本控制工具</strong></p>
<ul>
<li><strong>集中式</strong>：CSV ,<strong>SVN</strong>,VSS</li>
<li><strong>分布式</strong>：<strong>Git</strong>，Darcs,…</li>
</ul>
<p><strong>Git</strong> <strong>的优势</strong> </p>
<p><strong>大部分操作在本地完成，不需要联网</strong></p>
<p><strong>完整性保证(提交每条数据进行hash运算)</strong></p>
<p><strong>尽可能添加数据而不是删除或修改数据</strong></p>
<p><strong>分支操作非常快捷流畅(1因为用快照,2每个分支只是创建一个指针)</strong></p>
<p><strong>与</strong> <strong>Linux</strong> <strong>命令全面兼容</strong></p>
<p><strong>Git 基本工作流程</strong></p>
<table>
<thead>
<tr>
<th>git仓库</th>
<th>暂存区</th>
<th>工作目录</th>
</tr>
</thead>
<tbody><tr>
<td>用于存放提交记录</td>
<td>临时存放被修改文件</td>
<td>被Git管理的项目目录</td>
</tr>
</tbody></table>
<h2 id="Git命令行操作"><a href="#Git命令行操作" class="headerlink" title="Git命令行操作"></a>Git命令行操作</h2><h3 id="1-1本地库初始化"><a href="#1-1本地库初始化" class="headerlink" title="1.1本地库初始化"></a>1.1本地库初始化</h3><p><code>进入文件夹</code></p>
<p><img src="git%E7%AC%94%E8%AE%B0.assets/image-20210823164121049.png" alt="image-20210823164121049"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git init</span><br><span class="line">注意：生成的 .git 目录中存放的是本地库相关文件，不要删除</span><br></pre></td></tr></table></figure>

<h3 id="1-2设置签名"><a href="#1-2设置签名" class="headerlink" title="1.2设置签名"></a>1.2设置签名</h3><p>作用：区分不同开发人员的身份</p>
<ul>
<li><p>项目(仓库)级别<code>仅在当前本地库有效</code></p>
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config user.name tom  #设置用户名tom</span><br><span class="line">git config user.email liu@qq.com #设置用户邮箱</span><br></pre></td></tr></table></figure></li>
<li><p>系统用户级别<code>仅在当前登录的操作系统用户有效</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.name tom</span><br><span class="line">git config --global user.email liu@qq.com</span><br></pre></td></tr></table></figure></li>
</ul>
<blockquote>
<p>仅仅加了一个 <code>--global</code></p>
<p>优先级别：<code>项目级别</code>  &gt;  <code>系统级别</code></p>
<p>信息保存位置：<code>~/.gitconfig 文件</code>  </p>
</blockquote>
<h3 id="1-3基本操作"><a href="#1-3基本操作" class="headerlink" title="1.3基本操作"></a>1.3基本操作</h3><h4 id="1-3-1-状态查看"><a href="#1-3-1-状态查看" class="headerlink" title="1.3.1 状态查看"></a>1.3.1 状态查看</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git status   #查看工作区、暂存区状态</span><br></pre></td></tr></table></figure>

<h4 id="1-3-2-添加"><a href="#1-3-2-添加" class="headerlink" title="1.3.2 添加"></a>1.3.2 添加</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git add fileName  #指定文件</span><br><span class="line">git rm --cached fileName  从暂存区撤回</span><br><span class="line">git add . #所有</span><br><span class="line">说明：将工作区的文件添加到暂存区</span><br></pre></td></tr></table></figure>

<h4 id="1-3-3-提交"><a href="#1-3-3-提交" class="headerlink" title="1.3.3 提交"></a>1.3.3 提交</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">将暂存区内容提交到本地库</span><br><span class="line">git commit filename(此时会进入vim，需要添加提交信息)</span><br><span class="line">不进入vim 则可以：</span><br><span class="line">git commit -m &#x27;commit message&#x27; fileName（在-m&#x27;&#x27;里添加提交信息）</span><br></pre></td></tr></table></figure>

<h4 id="1-3-4-查看历史记录"><a href="#1-3-4-查看历史记录" class="headerlink" title="1.3.4 查看历史记录"></a>1.3.4 查看历史记录</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">git log </span><br><span class="line">git log --greph #图形显示,更直观</span><br><span class="line">git log --pretty=oneline #一行显示</span><br><span class="line">git log --oneline #显示部分哈希值；只显示过去版本</span><br><span class="line">git reflog  #显示指针；显示所有版本(常用)</span><br><span class="line">说明：HEAD@&#123;移动到当前版本需要多少步&#125;</span><br></pre></td></tr></table></figure>

<h4 id="1-3-5-前进后退"><a href="#1-3-5-前进后退" class="headerlink" title="1.3.5 前进后退"></a>1.3.5 前进后退</h4><ul>
<li><p>基于索引值<code>推荐</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git reset --hard 索引值(部分就行，即git reflog中显示的索引值)</span><br><span class="line">例子：git reset --hard a6ace91 #回到这个状态</span><br></pre></td></tr></table></figure></li>
<li><p>使用 <strong>^</strong> 符号<code>只能后退，更近的版本会消失</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git reset --hard HEAD^</span><br><span class="line">例子：git reset --hard HEAD^^</span><br><span class="line">注意：几个 ^ 表示后退几步</span><br></pre></td></tr></table></figure></li>
<li><p>使用 <strong>~</strong> 符号<code>只能后退</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git reset --hard HEAD~n</span><br><span class="line">例子：git reset --hard HEAD~3</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="1-3-6-reset的三个参数比较"><a href="#1-3-6-reset的三个参数比较" class="headerlink" title="1.3.6 reset的三个参数比较"></a>1.3.6 reset的三个参数比较</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">soft: </span><br><span class="line">  - 仅本地库移动HEAD 指针</span><br><span class="line">mixed:</span><br><span class="line">  - 在本地库移动HEAD指针</span><br><span class="line">  - 重置暂存区</span><br><span class="line">hard:</span><br><span class="line">  - 在本地库移动HEAD指针</span><br><span class="line">  - 重置暂存区</span><br><span class="line">  - 重置工作区</span><br></pre></td></tr></table></figure>

<h4 id="1-3-7-删除文件并找回"><a href="#1-3-7-删除文件并找回" class="headerlink" title="1.3.7　删除文件并找回"></a>1.3.7　删除文件并找回</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">前提：删除前，文件存在时的状态提交到了本地库。</span><br><span class="line">rm 文件名(rm aaa.txt)删除本地文件&gt;然后提交到暂存区git add aaa.txt &gt;然后提交到本地仓库git commit -m ”delete aaa” aaa.txt (删除完成)</span><br><span class="line">找回操作：git reset --hard [指针位置] </span><br><span class="line">删除操作已经提交到本地库：指针位置指向历史记录(回到之前未删除版本)</span><br><span class="line">删除操作尚未提交到本地库：指针位置使用 HEAD(git reset --hard HEAD)(回到之前未删除版本)</span><br></pre></td></tr></table></figure>

<h4 id="1-3-8-文件差异比较"><a href="#1-3-8-文件差异比较" class="headerlink" title="1.3.8 文件差异比较"></a>1.3.8 文件差异比较</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">git diff 文件名</span><br><span class="line">在工作区中用vim修改文件后</span><br><span class="line">git diff  文件名  #将工作区和本地库进行比较</span><br><span class="line">修改后提交到暂存区</span><br><span class="line">git diff HEAD 哈希值 文件名  #将暂存区中的文件和本地库历史记录比较</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h3 id="2-2-分支管理"><a href="#2-2-分支管理" class="headerlink" title="2.2 分支管理"></a>2.2 分支管理</h3><p><img src="git%E7%AC%94%E8%AE%B0.assets/image-20210823205322571.png" alt="image-20210823205322571"></p>
<h4 id="2-2-1-什么是分支管理"><a href="#2-2-1-什么是分支管理" class="headerlink" title="2.2.1 什么是分支管理"></a>2.2.1 什么是分支管理</h4><ul>
<li>在版本控制中，使用推进多个任务</li>
</ul>
<h4 id="2-2-2-分支的好处"><a href="#2-2-2-分支的好处" class="headerlink" title="2.2.2 分支的好处"></a>2.2.2 分支的好处</h4><ul>
<li>同时并行推进多个功能开发，提高开发效率</li>
<li>某一分支开发失败，不会对其它分支有任何影响</li>
</ul>
<h4 id="2-2-3-分支操作"><a href="#2-2-3-分支操作" class="headerlink" title="2.2.3 分支操作"></a>2.2.3 分支操作</h4><ul>
<li>创建分支</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch 分支名</span><br></pre></td></tr></table></figure>

<ul>
<li>查看分支</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git branch</span><br><span class="line">git branch -v </span><br></pre></td></tr></table></figure>

<ul>
<li>切换分支</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git checkout 分支名</span><br><span class="line">git checkout -b 分支名   #创建分支并直接切换到该分支</span><br></pre></td></tr></table></figure>

<ul>
<li>合并分支<code>相当于把修改了的文件拉过来</code></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git merge xxx</span><br><span class="line">注意：合并分支的时候要明确谁谁合并</span><br><span class="line">	我在a分支里面修改了。要合并到master，就先切换到master，然后合并b</span><br></pre></td></tr></table></figure>

<ul>
<li>删除分支</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch -d 分支名</span><br></pre></td></tr></table></figure>



<h4 id="2-2-4-解决冲突"><a href="#2-2-4-解决冲突" class="headerlink" title="2.2.4 解决冲突"></a>2.2.4 解决冲突</h4><ul>
<li><p>冲突原因: 2个分支,修改同一文件,同一位置,修改内容不一样时.</p>
</li>
<li><p><strong>冲突的表现:</strong></p>
<p> <img src="git%E7%AC%94%E8%AE%B0.assets/clip_image002.gif" alt="img"></p>
</li>
</ul>
<ul>
<li>冲突的解决<ul>
<li>第一步：编辑，删除特殊标记<code>&lt;&lt;&lt;</code> <code>===</code></li>
<li>第二步：修改到满意位置，保存退出</li>
<li>第三步：添加到缓存区  <code>git  add 文件名</code></li>
<li>第四步：提交到本地库<code>git commit -m &#39;日志信息&#39; </code>  <code>注意：后面一定不能带文件名</code></li>
</ul>
</li>
</ul>
<h2 id="Git-结合Github"><a href="#Git-结合Github" class="headerlink" title="Git 结合Github"></a>Git 结合Github</h2><p><code>别分手</code>  <code>别名 分支名</code></p>
<h4 id="1-1-创建远程库地址别名"><a href="#1-1-创建远程库地址别名" class="headerlink" title="1.1 创建远程库地址别名"></a>1.1 创建远程库地址别名</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git remote -v  #查看远程地址别名</span><br><span class="line">git remote add 别名 远程地址 </span><br><span class="line">例子：git remote add origin https://xx</span><br></pre></td></tr></table></figure>

<h4 id="1-2-推送"><a href="#1-2-推送" class="headerlink" title="1.2 推送"></a>1.2 推送</h4><p><code>开发修改完把本地库的文件推送到远程仓库</code> <code>前提是提交到了本地库才可以推送</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git push 别名 分支名</span><br><span class="line">git push -u 别名 分支名    #-u指定默认主机</span><br><span class="line">例子：git push origin master</span><br></pre></td></tr></table></figure>



<p>出现unable to access问题则用：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config --global http.sslVerify &quot;false&quot;</span><br></pre></td></tr></table></figure>



<h4 id="1-3-克隆"><a href="#1-3-克隆" class="headerlink" title="1.3 克隆"></a>1.3 克隆</h4><p><code>完整的把远程库克隆到本地</code>  <code>克隆下来后不要在主分支里面做开发</code> <code>clone进行一次，从无到有的过程，更新用pull</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git clone  远程地址</span><br><span class="line">例子：git clone https://xx</span><br></pre></td></tr></table></figure>

<h4 id="1-4-拉取"><a href="#1-4-拉取" class="headerlink" title="1.4 拉取"></a>1.4 拉取</h4><p>  <code>本地存在clone下来的文件  就用pull更新</code>  </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">pull = fetch + merge</span><br><span class="line">	git fetch 别名 分支名</span><br><span class="line">	git merge 别名 分支名</span><br><span class="line">git pull 别名 分支名</span><br></pre></td></tr></table></figure>

<h4 id="1-5-解决冲突"><a href="#1-5-解决冲突" class="headerlink" title="1.5 解决冲突"></a>1.5 解决冲突</h4><p><code>注意：解决冲突后的提交是不能带文件名的</code></p>
<p><code>如果不是基于远程库最新版做的修改不能推送，必须先pull下来安装冲突办法解决</code></p>
<h4 id="1-6-跨团队合作"><a href="#1-6-跨团队合作" class="headerlink" title="1.6 跨团队合作"></a>1.6 跨团队合作</h4><p><code>代码review之后合并</code></p>
<ul>
<li><p><strong>适用于个人</strong></p>
<p><strong>邀请成员</strong>:<code>Settings</code> –&gt; <code>Collaborators</code> –&gt;<code>填写用户名</code> –&gt;<code>打开链接接受邀请</code></p>
</li>
<li><p><strong>企业</strong>   <code>创建一个组织</code> <code>方便管理</code></p>
</li>
<li><p><strong>review</strong></p>
<p>  <code>组织做review</code>  <code>通过Pull request</code></p>
</li>
<li><p><strong>给开源社区共享代码</strong></p>
<p>  <code>点击别人仓库的fork 到自己的仓库</code>   – &gt; <code>然后clone下来 修改后推送到远程库</code>  –&gt; <code>点击Pull Request请求</code> –&gt; <code>Create pull request发消息</code></p>
</li>
</ul>
<h4 id="1-7-SSH-免密登录"><a href="#1-7-SSH-免密登录" class="headerlink" title="1.7 SSH 免密登录"></a>1.7 SSH 免密登录</h4><ul>
<li>输入:<code>ssh-keygen -t rsa -C GitHub邮箱地址</code>  </li>
<li>进入<code>.ssh</code>目录，复制<code>id_rsa.pub</code>文件内容</li>
<li>登录GitHub。<code>Settings</code>  –&gt; <code>SSH and GPG keys </code> –&gt; <code>New SSH Key    </code></li>
<li>回到git通过ssh地址创建。<code>git remote add 别名 SSH地址  </code></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">在 GitFlow 基础上， 充分利用了 Git 的 Fork 和 pull request 的功能以达到代码审核的目的。 </span><br><span class="line">安全可靠地管理大团队的开发者</span><br></pre></td></tr></table></figure>
    

    

    

  </div>
  <div class="article-info article-info-index">
    
    
    

    
    <p class="article-more-link">
      <a class="article-more-a" href="/2021/09/01/git%E7%AC%94%E8%AE%B0/">展开全文 >></a>
    </p>
    

    
    <div class="clearfix"></div>
  </div>
  </div>
</article>

<aside class="wrap-side-operation">
    <div class="mod-side-operation">
        
        <div class="jump-container" id="js-jump-container" style="display:none;">
            <a href="javascript:void(0)" class="mod-side-operation__jump-to-top">
                <i class="icon-font icon-back"></i>
            </a>
            <div id="js-jump-plan-container" class="jump-plan-container" style="top: -11px;">
                <i class="icon-font icon-plane jump-plane"></i>
            </div>
        </div>
        
        
    </div>
</aside>




  
  


          </div>
        </div>
      </div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2021 <a href="http://Funder666.github.io/" target="_blank">Restart</a>
    	</div>
      	<div class="footer-right">
			
			
      		GitHub:<a href="https://github.com/JoeyBling/hexo-theme-yilia-plus" target="_blank">hexo-theme-yilia-plus</a> by Litten
      	</div>
    </div>
  </div>
  
  
  
</footer>

    </div>
    <script>
	var yiliaConfig = {
		mathjax: false,
		isHome: true,
		isPost: false,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: true,
		toc_hide_index: true,
		root: "/",
		innerArchive: true,
		showTags: false
	}
</script>

<script>!function(r){function e(t){if(i[t])return i[t].exports;var n=i[t]={exports:{},id:t,loaded:!1};return r[t].call(n.exports,n,n.exports,e),n.loaded=!0,n.exports}var i={};e.m=r,e.c=i,e.p="./",e(0)}([function(t,n,r){r(208),t.exports=r(205)},function(t,n,r){var d=r(3),y=r(46),g=r(26),b=r(27),x=r(47),m="prototype",S=function(t,n,r){var e,i,o,u,c=t&S.F,f=t&S.G,a=t&S.S,s=t&S.P,l=t&S.B,h=f?d:a?d[n]||(d[n]={}):(d[n]||{})[m],v=f?y:y[n]||(y[n]={}),p=v[m]||(v[m]={});for(e in f&&(r=n),r)o=((i=!c&&h&&void 0!==h[e])?h:r)[e],u=l&&i?x(o,d):s&&"function"==typeof o?x(Function.call,o):o,h&&b(h,e,o,t&S.U),v[e]!=o&&g(v,e,u),s&&p[e]!=o&&(p[e]=o)};d.core=y,S.F=1,S.G=2,S.S=4,S.P=8,S.B=16,S.W=32,S.U=64,S.R=128,t.exports=S},function(t,n,r){var e=r(5);t.exports=function(t){if(!e(t))throw TypeError(t+" is not an object!");return t}},function(t,n){var r=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(t,n){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,n){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,n){var r=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(t,n,r){var e=r(118)("wks"),i=r(79),o=r(3).Symbol,u="function"==typeof o;(t.exports=function(t){return e[t]||(e[t]=u&&o[t]||(u?o:i)("Symbol."+t))}).store=e},function(t,n,r){var e=r(49),i=Math.min;t.exports=function(t){return 0<t?i(e(t),9007199254740991):0}},function(t,n){var r={}.hasOwnProperty;t.exports=function(t,n){return r.call(t,n)}},function(t,n,r){t.exports=!r(4)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,n,r){var e=r(2),i=r(174),o=r(53),u=Object.defineProperty;n.f=r(10)?Object.defineProperty:function(t,n,r){if(e(t),n=o(n,!0),e(r),i)try{return u(t,n,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(t[n]=r.value),t}},function(t,n,r){t.exports=!r(20)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,n,r){var e=r(14),i=r(24);t.exports=r(12)?function(t,n,r){return e.f(t,n,i(1,r))}:function(t,n,r){return t[n]=r,t}},function(t,n,r){var e=r(22),i=r(60),o=r(42),u=Object.defineProperty;n.f=r(12)?Object.defineProperty:function(t,n,r){if(e(t),n=o(n,!0),e(r),i)try{return u(t,n,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(t[n]=r.value),t}},function(t,n,r){var e=r(96),i=r(34);t.exports=function(t){return e(i(t))}},function(t,n,r){var e=r(40)("wks"),i=r(25),o=r(6).Symbol,u="function"==typeof o;(t.exports=function(t){return e[t]||(e[t]=u&&o[t]||(u?o:i)("Symbol."+t))}).store=e},function(t,n,r){var e=r(51);t.exports=function(t){return Object(e(t))}},function(t,n){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,n){var r=t.exports={version:"2.6.9"};"number"==typeof __e&&(__e=r)},function(t,n){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,n){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,n,r){var e=r(18);t.exports=function(t){if(!e(t))throw TypeError(t+" is not an object!");return t}},function(t,n){t.exports=!0},function(t,n){t.exports=function(t,n){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:n}}},function(t,n){var r=0,e=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++r+e).toString(36))}},function(t,n,r){var e=r(11),i=r(75);t.exports=r(10)?function(t,n,r){return e.f(t,n,i(1,r))}:function(t,n,r){return t[n]=r,t}},function(t,n,r){var o=r(3),u=r(26),c=r(30),f=r(79)("src"),e=r(219),i="toString",a=(""+e).split(i);r(46).inspectSource=function(t){return e.call(t)},(t.exports=function(t,n,r,e){var i="function"==typeof r;i&&(c(r,"name")||u(r,"name",n)),t[n]!==r&&(i&&(c(r,f)||u(r,f,t[n]?""+t[n]:a.join(String(n)))),t===o?t[n]=r:e?t[n]?t[n]=r:u(t,n,r):(delete t[n],u(t,n,r)))})(Function.prototype,i,function(){return"function"==typeof this&&this[f]||e.call(this)})},function(t,n,r){var e=r(1),i=r(4),u=r(51),c=/"/g,o=function(t,n,r,e){var i=String(u(t)),o="<"+n;return""!==r&&(o+=" "+r+'="'+String(e).replace(c,"&quot;")+'"'),o+">"+i+"</"+n+">"};t.exports=function(n,t){var r={};r[n]=t(o),e(e.P+e.F*i(function(){var t=""[n]('"');return t!==t.toLowerCase()||3<t.split('"').length}),"String",r)}},function(t,n,r){var e=r(65),i=r(35);t.exports=Object.keys||function(t){return e(t,i)}},function(t,n){var r={}.hasOwnProperty;t.exports=function(t,n){return r.call(t,n)}},function(t,n,r){var e=r(117),i=r(75),o=r(33),u=r(53),c=r(30),f=r(174),a=Object.getOwnPropertyDescriptor;n.f=r(10)?a:function(t,n){if(t=o(t),n=u(n,!0),f)try{return a(t,n)}catch(t){}if(c(t,n))return i(!e.f.call(t,n),t[n])}},function(t,n,r){var e=r(30),i=r(17),o=r(154)("IE_PROTO"),u=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),e(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?u:null}},function(t,n,r){var e=r(116),i=r(51);t.exports=function(t){return e(i(t))}},function(t,n){t.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},function(t,n){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,n){t.exports={}},function(t,n){n.f={}.propertyIsEnumerable},function(t,n,r){var e=r(14).f,i=r(9),o=r(16)("toStringTag");t.exports=function(t,n,r){t&&!i(t=r?t:t.prototype,o)&&e(t,o,{configurable:!0,value:n})}},function(t,n,r){var e=r(40)("keys"),i=r(25);t.exports=function(t){return e[t]||(e[t]=i(t))}},function(t,n,r){var e=r(19),i=r(6),o="__core-js_shared__",u=i[o]||(i[o]={});(t.exports=function(t,n){return u[t]||(u[t]=void 0!==n?n:{})})("versions",[]).push({version:e.version,mode:r(23)?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(t,n){var r=Math.ceil,e=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(0<t?e:r)(t)}},function(t,n,r){var i=r(18);t.exports=function(t,n){if(!i(t))return t;var r,e;if(n&&"function"==typeof(r=t.toString)&&!i(e=r.call(t)))return e;if("function"==typeof(r=t.valueOf)&&!i(e=r.call(t)))return e;if(!n&&"function"==typeof(r=t.toString)&&!i(e=r.call(t)))return e;throw TypeError("Can't convert object to primitive value")}},function(t,n,r){var e=r(6),i=r(19),o=r(23),u=r(44),c=r(14).f;t.exports=function(t){var n=i.Symbol||(i.Symbol=o?{}:e.Symbol||{});"_"==t.charAt(0)||t in n||c(n,t,{value:u.f(t)})}},function(t,n,r){n.f=r(16)},function(t,n){var r={}.toString;t.exports=function(t){return r.call(t).slice(8,-1)}},function(t,n){var r=t.exports={version:"2.6.9"};"number"==typeof __e&&(__e=r)},function(t,n,r){var o=r(21);t.exports=function(e,i,t){if(o(e),void 0===i)return e;switch(t){case 1:return function(t){return e.call(i,t)};case 2:return function(t,n){return e.call(i,t,n)};case 3:return function(t,n,r){return e.call(i,t,n,r)}}return function(){return e.apply(i,arguments)}}},function(t,n,r){"use strict";var e=r(4);t.exports=function(t,n){return!!t&&e(function(){n?t.call(null,function(){},1):t.call(null)})}},function(t,n){var r=Math.ceil,e=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(0<t?e:r)(t)}},function(t,n,r){var x=r(47),m=r(116),S=r(17),w=r(8),e=r(138);t.exports=function(l,t){var h=1==l,v=2==l,p=3==l,d=4==l,y=6==l,g=5==l||y,b=t||e;return function(t,n,r){for(var e,i,o=S(t),u=m(o),c=x(n,r,3),f=w(u.length),a=0,s=h?b(t,f):v?b(t,0):void 0;a<f;a++)if((g||a in u)&&(i=c(e=u[a],a,o),l))if(h)s[a]=i;else if(i)switch(l){case 3:return!0;case 5:return e;case 6:return a;case 2:s.push(e)}else if(d)return!1;return y?-1:p||d?d:s}}},function(t,n){t.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},function(t,n,r){var i=r(1),o=r(46),u=r(4);t.exports=function(t,n){var r=(o.Object||{})[t]||Object[t],e={};e[t]=n(r),i(i.S+i.F*u(function(){r(1)}),"Object",e)}},function(t,n,r){var i=r(5);t.exports=function(t,n){if(!i(t))return t;var r,e;if(n&&"function"==typeof(r=t.toString)&&!i(e=r.call(t)))return e;if("function"==typeof(r=t.valueOf)&&!i(e=r.call(t)))return e;if(!n&&"function"==typeof(r=t.toString)&&!i(e=r.call(t)))return e;throw TypeError("Can't convert object to primitive value")}},function(t,n,r){var d=r(6),y=r(19),g=r(93),b=r(13),x=r(9),m="prototype",S=function(t,n,r){var e,i,o,u=t&S.F,c=t&S.G,f=t&S.S,a=t&S.P,s=t&S.B,l=t&S.W,h=c?y:y[n]||(y[n]={}),v=h[m],p=c?d:f?d[n]:(d[n]||{})[m];for(e in c&&(r=n),r)(i=!u&&p&&void 0!==p[e])&&x(h,e)||(o=i?p[e]:r[e],h[e]=c&&"function"!=typeof p[e]?r[e]:s&&i?g(o,d):l&&p[e]==o?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t[m]=e[m],t}(o):a&&"function"==typeof o?g(Function.call,o):o,a&&((h.virtual||(h.virtual={}))[e]=o,t&S.R&&v&&!v[e]&&b(v,e,o)))};S.F=1,S.G=2,S.S=4,S.P=8,S.B=16,S.W=32,S.U=64,S.R=128,t.exports=S},function(t,n,r){var e=r(34);t.exports=function(t){return Object(e(t))}},function(t,n,r){var o=r(196),e=r(1),i=r(118)("metadata"),u=i.store||(i.store=new(r(200))),c=function(t,n,r){var e=u.get(t);if(!e){if(!r)return;u.set(t,e=new o)}var i=e.get(n);if(!i){if(!r)return;e.set(n,i=new o)}return i};t.exports={store:u,map:c,has:function(t,n,r){var e=c(n,r,!1);return void 0!==e&&e.has(t)},get:function(t,n,r){var e=c(n,r,!1);return void 0===e?void 0:e.get(t)},set:function(t,n,r,e){c(r,e,!0).set(t,n)},keys:function(t,n){var r=c(t,n,!1),e=[];return r&&r.forEach(function(t,n){e.push(n)}),e},key:function(t){return void 0===t||"symbol"==typeof t?t:String(t)},exp:function(t){e(e.S,"Reflect",t)}}},function(t,n,r){"use strict";if(r(10)){var g=r(68),b=r(3),x=r(4),m=r(1),S=r(132),e=r(159),h=r(47),w=r(70),i=r(75),_=r(26),o=r(76),u=r(49),O=r(8),E=r(194),c=r(78),f=r(53),a=r(30),M=r(81),P=r(5),v=r(17),p=r(145),j=r(72),F=r(32),A=r(73).f,d=r(161),s=r(79),l=r(7),y=r(50),I=r(120),L=r(119),N=r(162),T=r(82),k=r(125),R=r(77),C=r(137),D=r(166),G=r(11),W=r(31),U=G.f,V=W.f,B=b.RangeError,q=b.TypeError,z=b.Uint8Array,K="ArrayBuffer",H="Shared"+K,J="BYTES_PER_ELEMENT",$="prototype",Y=Array[$],X=e.ArrayBuffer,Q=e.DataView,Z=y(0),tt=y(2),nt=y(3),rt=y(4),et=y(5),it=y(6),ot=I(!0),ut=I(!1),ct=N.values,ft=N.keys,at=N.entries,st=Y.lastIndexOf,lt=Y.reduce,ht=Y.reduceRight,vt=Y.join,pt=Y.sort,dt=Y.slice,yt=Y.toString,gt=Y.toLocaleString,bt=l("iterator"),xt=l("toStringTag"),mt=s("typed_constructor"),St=s("def_constructor"),wt=S.CONSTR,_t=S.TYPED,Ot=S.VIEW,Et="Wrong length!",Mt=y(1,function(t,n){return It(L(t,t[St]),n)}),Pt=x(function(){return 1===new z(new Uint16Array([1]).buffer)[0]}),jt=!!z&&!!z[$].set&&x(function(){new z(1).set({})}),Ft=function(t,n){var r=u(t);if(r<0||r%n)throw B("Wrong offset!");return r},At=function(t){if(P(t)&&_t in t)return t;throw q(t+" is not a typed array!")},It=function(t,n){if(!(P(t)&&mt in t))throw q("It is not a typed array constructor!");return new t(n)},Lt=function(t,n){return Nt(L(t,t[St]),n)},Nt=function(t,n){for(var r=0,e=n.length,i=It(t,e);r<e;)i[r]=n[r++];return i},Tt=function(t,n,r){U(t,n,{get:function(){return this._d[r]}})},kt=function(t){var n,r,e,i,o,u,c=v(t),f=arguments.length,a=1<f?arguments[1]:void 0,s=void 0!==a,l=d(c);if(null!=l&&!p(l)){for(u=l.call(c),e=[],n=0;!(o=u.next()).done;n++)e.push(o.value);c=e}for(s&&2<f&&(a=h(a,arguments[2],2)),n=0,r=O(c.length),i=It(this,r);n<r;n++)i[n]=s?a(c[n],n):c[n];return i},Rt=function(){for(var t=0,n=arguments.length,r=It(this,n);t<n;)r[t]=arguments[t++];return r},Ct=!!z&&x(function(){gt.call(new z(1))}),Dt=function(){return gt.apply(Ct?dt.call(At(this)):At(this),arguments)},Gt={copyWithin:function(t,n){return D.call(At(this),t,n,2<arguments.length?arguments[2]:void 0)},every:function(t){return rt(At(this),t,1<arguments.length?arguments[1]:void 0)},fill:function(t){return C.apply(At(this),arguments)},filter:function(t){return Lt(this,tt(At(this),t,1<arguments.length?arguments[1]:void 0))},find:function(t){return et(At(this),t,1<arguments.length?arguments[1]:void 0)},findIndex:function(t){return it(At(this),t,1<arguments.length?arguments[1]:void 0)},forEach:function(t){Z(At(this),t,1<arguments.length?arguments[1]:void 0)},indexOf:function(t){return ut(At(this),t,1<arguments.length?arguments[1]:void 0)},includes:function(t){return ot(At(this),t,1<arguments.length?arguments[1]:void 0)},join:function(t){return vt.apply(At(this),arguments)},lastIndexOf:function(t){return st.apply(At(this),arguments)},map:function(t){return Mt(At(this),t,1<arguments.length?arguments[1]:void 0)},reduce:function(t){return lt.apply(At(this),arguments)},reduceRight:function(t){return ht.apply(At(this),arguments)},reverse:function(){for(var t,n=this,r=At(n).length,e=Math.floor(r/2),i=0;i<e;)t=n[i],n[i++]=n[--r],n[r]=t;return n},some:function(t){return nt(At(this),t,1<arguments.length?arguments[1]:void 0)},sort:function(t){return pt.call(At(this),t)},subarray:function(t,n){var r=At(this),e=r.length,i=c(t,e);return new(L(r,r[St]))(r.buffer,r.byteOffset+i*r.BYTES_PER_ELEMENT,O((void 0===n?e:c(n,e))-i))}},Wt=function(t,n){return Lt(this,dt.call(At(this),t,n))},Ut=function(t){At(this);var n=Ft(arguments[1],1),r=this.length,e=v(t),i=O(e.length),o=0;if(r<i+n)throw B(Et);for(;o<i;)this[n+o]=e[o++]},Vt={entries:function(){return at.call(At(this))},keys:function(){return ft.call(At(this))},values:function(){return ct.call(At(this))}},Bt=function(t,n){return P(t)&&t[_t]&&"symbol"!=typeof n&&n in t&&String(+n)==String(n)},qt=function(t,n){return Bt(t,n=f(n,!0))?i(2,t[n]):V(t,n)},zt=function(t,n,r){return!(Bt(t,n=f(n,!0))&&P(r)&&a(r,"value"))||a(r,"get")||a(r,"set")||r.configurable||a(r,"writable")&&!r.writable||a(r,"enumerable")&&!r.enumerable?U(t,n,r):(t[n]=r.value,t)};wt||(W.f=qt,G.f=zt),m(m.S+m.F*!wt,"Object",{getOwnPropertyDescriptor:qt,defineProperty:zt}),x(function(){yt.call({})})&&(yt=gt=function(){return vt.call(this)});var Kt=o({},Gt);o(Kt,Vt),_(Kt,bt,Vt.values),o(Kt,{slice:Wt,set:Ut,constructor:function(){},toString:yt,toLocaleString:Dt}),Tt(Kt,"buffer","b"),Tt(Kt,"byteOffset","o"),Tt(Kt,"byteLength","l"),Tt(Kt,"length","e"),U(Kt,xt,{get:function(){return this[_t]}}),t.exports=function(t,l,n,o){var h=t+((o=!!o)?"Clamped":"")+"Array",r="get"+t,u="set"+t,v=b[h],c=v||{},e=v&&F(v),i=!v||!S.ABV,f={},a=v&&v[$],p=function(t,i){U(t,i,{get:function(){return t=i,(n=this._d).v[r](t*l+n.o,Pt);var t,n},set:function(t){return n=i,r=t,e=this._d,o&&(r=(r=Math.round(r))<0?0:255<r?255:255&r),void e.v[u](n*l+e.o,r,Pt);var n,r,e},enumerable:!0})};i?(v=n(function(t,n,r,e){w(t,v,h,"_d");var i,o,u,c,f=0,a=0;if(P(n)){if(!(n instanceof X||(c=M(n))==K||c==H))return _t in n?Nt(v,n):kt.call(v,n);i=n,a=Ft(r,l);var s=n.byteLength;if(void 0===e){if(s%l)throw B(Et);if((o=s-a)<0)throw B(Et)}else if(s<(o=O(e)*l)+a)throw B(Et);u=o/l}else u=E(n),i=new X(o=u*l);for(_(t,"_d",{b:i,o:a,l:o,e:u,v:new Q(i)});f<u;)p(t,f++)}),a=v[$]=j(Kt),_(a,"constructor",v)):x(function(){v(1)})&&x(function(){new v(-1)})&&k(function(t){new v,new v(null),new v(1.5),new v(t)},!0)||(v=n(function(t,n,r,e){var i;return w(t,v,h),P(n)?n instanceof X||(i=M(n))==K||i==H?void 0!==e?new c(n,Ft(r,l),e):void 0!==r?new c(n,Ft(r,l)):new c(n):_t in n?Nt(v,n):kt.call(v,n):new c(E(n))}),Z(e!==Function.prototype?A(c).concat(A(e)):A(c),function(t){t in v||_(v,t,c[t])}),v[$]=a,g||(a.constructor=v));var s=a[bt],d=!!s&&("values"==s.name||null==s.name),y=Vt.values;_(v,mt,!0),_(a,_t,h),_(a,Ot,!0),_(a,St,v),(o?new v(1)[xt]==h:xt in a)||U(a,xt,{get:function(){return h}}),f[h]=v,m(m.G+m.W+m.F*(v!=c),f),m(m.S,h,{BYTES_PER_ELEMENT:l}),m(m.S+m.F*x(function(){c.of.call(v,1)}),h,{from:kt,of:Rt}),J in a||_(a,J,l),m(m.P,h,Gt),R(h),m(m.P+m.F*jt,h,{set:Ut}),m(m.P+m.F*!d,h,Vt),g||a.toString==yt||(a.toString=yt),m(m.P+m.F*x(function(){new v(1).slice()}),h,{slice:Wt}),m(m.P+m.F*(x(function(){return[1,2].toLocaleString()!=new v([1,2]).toLocaleString()})||!x(function(){a.toLocaleString.call([1,2])})),h,{toLocaleString:Dt}),T[h]=d?s:y,g||d||_(a,bt,y)}}else t.exports=function(){}},function(t,n){var r={}.toString;t.exports=function(t){return r.call(t).slice(8,-1)}},function(t,n,r){var e=r(18),i=r(6).document,o=e(i)&&e(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,n,r){t.exports=!r(12)&&!r(20)(function(){return 7!=Object.defineProperty(r(59)("div"),"a",{get:function(){return 7}}).a})},function(t,n,r){"use strict";var x=r(23),m=r(54),S=r(66),w=r(13),_=r(36),O=r(98),E=r(38),M=r(104),P=r(16)("iterator"),j=!([].keys&&"next"in[].keys()),F="values",A=function(){return this};t.exports=function(t,n,r,e,i,o,u){O(r,n,e);var c,f,a,s=function(t){if(!j&&t in p)return p[t];switch(t){case"keys":case F:return function(){return new r(this,t)}}return function(){return new r(this,t)}},l=n+" Iterator",h=i==F,v=!1,p=t.prototype,d=p[P]||p["@@iterator"]||i&&p[i],y=d||s(i),g=i?h?s("entries"):y:void 0,b="Array"==n&&p.entries||d;if(b&&((a=M(b.call(new t)))!==Object.prototype&&a.next&&(E(a,l,!0),x||"function"==typeof a[P]||w(a,P,A))),h&&d&&d.name!==F&&(v=!0,y=function(){return d.call(this)}),x&&!u||!j&&!v&&p[P]||w(p,P,y),_[n]=y,_[l]=A,i)if(c={values:h?y:s(F),keys:o?y:s("keys"),entries:g},u)for(f in c)f in p||S(p,f,c[f]);else m(m.P+m.F*(j||v),n,c);return c}},function(t,n,e){var i=e(22),o=e(101),u=e(35),c=e(39)("IE_PROTO"),f=function(){},a="prototype",s=function(){var t,n=e(59)("iframe"),r=u.length;for(n.style.display="none",e(95).appendChild(n),n.src="javascript:",(t=n.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),s=t.F;r--;)delete s[a][u[r]];return s()};t.exports=Object.create||function(t,n){var r;return null!==t?(f[a]=i(t),r=new f,f[a]=null,r[c]=t):r=s(),void 0===n?r:o(r,n)}},function(t,n,r){var e=r(65),i=r(35).concat("length","prototype");n.f=Object.getOwnPropertyNames||function(t){return e(t,i)}},function(t,n){n.f=Object.getOwnPropertySymbols},function(t,n,r){var u=r(9),c=r(15),f=r(92)(!1),a=r(39)("IE_PROTO");t.exports=function(t,n){var r,e=c(t),i=0,o=[];for(r in e)r!=a&&u(e,r)&&o.push(r);for(;n.length>i;)u(e,r=n[i++])&&(~f(o,r)||o.push(r));return o}},function(t,n,r){t.exports=r(13)},function(t,n,r){var e=r(7)("unscopables"),i=Array.prototype;null==i[e]&&r(26)(i,e,{}),t.exports=function(t){i[e][t]=!0}},function(t,n){t.exports=!1},function(t,n,r){var e=r(79)("meta"),i=r(5),o=r(30),u=r(11).f,c=0,f=Object.isExtensible||function(){return!0},a=!r(4)(function(){return f(Object.preventExtensions({}))}),s=function(t){u(t,e,{value:{i:"O"+ ++c,w:{}}})},l=t.exports={KEY:e,NEED:!1,fastKey:function(t,n){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,e)){if(!f(t))return"F";if(!n)return"E";s(t)}return t[e].i},getWeak:function(t,n){if(!o(t,e)){if(!f(t))return!0;if(!n)return!1;s(t)}return t[e].w},onFreeze:function(t){return a&&l.NEED&&f(t)&&!o(t,e)&&s(t),t}}},function(t,n){t.exports=function(t,n,r,e){if(!(t instanceof n)||void 0!==e&&e in t)throw TypeError(r+": incorrect invocation!");return t}},function(t,n,r){var h=r(47),v=r(177),p=r(145),d=r(2),y=r(8),g=r(161),b={},x={};(n=t.exports=function(t,n,r,e,i){var o,u,c,f,a=i?function(){return t}:g(t),s=h(r,e,n?2:1),l=0;if("function"!=typeof a)throw TypeError(t+" is not iterable!");if(p(a)){for(o=y(t.length);l<o;l++)if((f=n?s(d(u=t[l])[0],u[1]):s(t[l]))===b||f===x)return f}else for(c=a.call(t);!(u=c.next()).done;)if((f=v(c,s,u.value,n))===b||f===x)return f}).BREAK=b,n.RETURN=x},function(t,n,e){var i=e(2),o=e(183),u=e(141),c=e(154)("IE_PROTO"),f=function(){},a="prototype",s=function(){var t,n=e(140)("iframe"),r=u.length;for(n.style.display="none",e(143).appendChild(n),n.src="javascript:",(t=n.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),s=t.F;r--;)delete s[a][u[r]];return s()};t.exports=Object.create||function(t,n){var r;return null!==t?(f[a]=i(t),r=new f,f[a]=null,r[c]=t):r=s(),void 0===n?r:o(r,n)}},function(t,n,r){var e=r(185),i=r(141).concat("length","prototype");n.f=Object.getOwnPropertyNames||function(t){return e(t,i)}},function(t,n,r){var e=r(185),i=r(141);t.exports=Object.keys||function(t){return e(t,i)}},function(t,n){t.exports=function(t,n){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:n}}},function(t,n,r){var i=r(27);t.exports=function(t,n,r){for(var e in n)i(t,e,n[e],r);return t}},function(t,n,r){"use strict";var e=r(3),i=r(11),o=r(10),u=r(7)("species");t.exports=function(t){var n=e[t];o&&n&&!n[u]&&i.f(n,u,{configurable:!0,get:function(){return this}})}},function(t,n,r){var e=r(49),i=Math.max,o=Math.min;t.exports=function(t,n){return(t=e(t))<0?i(t+n,0):o(t,n)}},function(t,n){var r=0,e=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++r+e).toString(36))}},function(t,n,r){var e=r(5);t.exports=function(t,n){if(!e(t)||t._t!==n)throw TypeError("Incompatible receiver, "+n+" required!");return t}},function(t,n,r){var i=r(45),o=r(7)("toStringTag"),u="Arguments"==i(function(){return arguments}());t.exports=function(t){var n,r,e;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=function(t,n){try{return t[n]}catch(t){}}(n=Object(t),o))?r:u?i(n):"Object"==(e=i(n))&&"function"==typeof n.callee?"Arguments":e}},function(t,n){t.exports={}},function(t,n,r){var e=r(11).f,i=r(30),o=r(7)("toStringTag");t.exports=function(t,n,r){t&&!i(t=r?t:t.prototype,o)&&e(t,o,{configurable:!0,value:n})}},function(t,n,r){var u=r(1),e=r(51),c=r(4),f=r(157),i="["+f+"]",o=RegExp("^"+i+i+"*"),a=RegExp(i+i+"*$"),s=function(t,n,r){var e={},i=c(function(){return!!f[t]()||"​"!="​"[t]()}),o=e[t]=i?n(l):f[t];r&&(e[r]=o),u(u.P+u.F*i,"String",e)},l=s.trim=function(t,n){return t=String(e(t)),1&n&&(t=t.replace(o,"")),2&n&&(t=t.replace(a,"")),t};t.exports=s},function(t,n,r){t.exports={default:r(88),__esModule:!0}},function(t,n,r){t.exports={default:r(89),__esModule:!0}},function(t,n,r){"use strict";function e(t){return t&&t.__esModule?t:{default:t}}n.__esModule=!0;var i=e(r(86)),o=e(r(85)),u="function"==typeof o.default&&"symbol"==typeof i.default?function(t){return typeof t}:function(t){return t&&"function"==typeof o.default&&t.constructor===o.default&&t!==o.default.prototype?"symbol":typeof t};n.default="function"==typeof o.default&&"symbol"===u(i.default)?function(t){return void 0===t?"undefined":u(t)}:function(t){return t&&"function"==typeof o.default&&t.constructor===o.default&&t!==o.default.prototype?"symbol":void 0===t?"undefined":u(t)}},function(t,n,r){r(111),r(109),r(112),r(113),t.exports=r(19).Symbol},function(t,n,r){r(110),r(114),t.exports=r(44).f("iterator")},function(t,n){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,n){t.exports=function(){}},function(t,n,r){var f=r(15),a=r(107),s=r(106);t.exports=function(c){return function(t,n,r){var e,i=f(t),o=a(i.length),u=s(r,o);if(c&&n!=n){for(;u<o;)if((e=i[u++])!=e)return!0}else for(;u<o;u++)if((c||u in i)&&i[u]===n)return c||u||0;return!c&&-1}}},function(t,n,r){var o=r(90);t.exports=function(e,i,t){if(o(e),void 0===i)return e;switch(t){case 1:return function(t){return e.call(i,t)};case 2:return function(t,n){return e.call(i,t,n)};case 3:return function(t,n,r){return e.call(i,t,n,r)}}return function(){return e.apply(i,arguments)}}},function(t,n,r){var c=r(29),f=r(64),a=r(37);t.exports=function(t){var n=c(t),r=f.f;if(r)for(var e,i=r(t),o=a.f,u=0;i.length>u;)o.call(t,e=i[u++])&&n.push(e);return n}},function(t,n,r){var e=r(6).document;t.exports=e&&e.documentElement},function(t,n,r){var e=r(58);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==e(t)?t.split(""):Object(t)}},function(t,n,r){var e=r(58);t.exports=Array.isArray||function(t){return"Array"==e(t)}},function(t,n,r){"use strict";var e=r(62),i=r(24),o=r(38),u={};r(13)(u,r(16)("iterator"),function(){return this}),t.exports=function(t,n,r){t.prototype=e(u,{next:i(1,r)}),o(t,n+" Iterator")}},function(t,n){t.exports=function(t,n){return{value:n,done:!!t}}},function(t,n,r){var e=r(25)("meta"),i=r(18),o=r(9),u=r(14).f,c=0,f=Object.isExtensible||function(){return!0},a=!r(20)(function(){return f(Object.preventExtensions({}))}),s=function(t){u(t,e,{value:{i:"O"+ ++c,w:{}}})},l=t.exports={KEY:e,NEED:!1,fastKey:function(t,n){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,e)){if(!f(t))return"F";if(!n)return"E";s(t)}return t[e].i},getWeak:function(t,n){if(!o(t,e)){if(!f(t))return!0;if(!n)return!1;s(t)}return t[e].w},onFreeze:function(t){return a&&l.NEED&&f(t)&&!o(t,e)&&s(t),t}}},function(t,n,r){var u=r(14),c=r(22),f=r(29);t.exports=r(12)?Object.defineProperties:function(t,n){c(t);for(var r,e=f(n),i=e.length,o=0;o<i;)u.f(t,r=e[o++],n[r]);return t}},function(t,n,r){var e=r(37),i=r(24),o=r(15),u=r(42),c=r(9),f=r(60),a=Object.getOwnPropertyDescriptor;n.f=r(12)?a:function(t,n){if(t=o(t),n=u(n,!0),f)try{return a(t,n)}catch(t){}if(c(t,n))return i(!e.f.call(t,n),t[n])}},function(t,n,r){var e=r(15),i=r(63).f,o={}.toString,u="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return u&&"[object Window]"==o.call(t)?function(t){try{return i(t)}catch(t){return u.slice()}}(t):i(e(t))}},function(t,n,r){var e=r(9),i=r(55),o=r(39)("IE_PROTO"),u=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),e(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?u:null}},function(t,n,r){var f=r(41),a=r(34);t.exports=function(c){return function(t,n){var r,e,i=String(a(t)),o=f(n),u=i.length;return o<0||u<=o?c?"":void 0:(r=i.charCodeAt(o))<55296||56319<r||o+1===u||(e=i.charCodeAt(o+1))<56320||57343<e?c?i.charAt(o):r:c?i.slice(o,o+2):e-56320+(r-55296<<10)+65536}}},function(t,n,r){var e=r(41),i=Math.max,o=Math.min;t.exports=function(t,n){return(t=e(t))<0?i(t+n,0):o(t,n)}},function(t,n,r){var e=r(41),i=Math.min;t.exports=function(t){return 0<t?i(e(t),9007199254740991):0}},function(t,n,r){"use strict";var e=r(91),i=r(99),o=r(36),u=r(15);t.exports=r(61)(Array,"Array",function(t,n){this._t=u(t),this._i=0,this._k=n},function(){var t=this._t,n=this._k,r=this._i++;return!t||r>=t.length?(this._t=void 0,i(1)):i(0,"keys"==n?r:"values"==n?t[r]:[r,t[r]])},"values"),o.Arguments=o.Array,e("keys"),e("values"),e("entries")},function(t,n){},function(t,n,r){"use strict";var e=r(105)(!0);r(61)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,n=this._t,r=this._i;return r>=n.length?{value:void 0,done:!0}:(t=e(n,r),this._i+=t.length,{value:t,done:!1})})},function(t,n,r){"use strict";var e=r(6),u=r(9),i=r(12),o=r(54),c=r(66),f=r(100).KEY,a=r(20),s=r(40),l=r(38),h=r(25),v=r(16),p=r(44),d=r(43),y=r(94),g=r(97),b=r(22),x=r(18),m=r(55),S=r(15),w=r(42),_=r(24),O=r(62),E=r(103),M=r(102),P=r(64),j=r(14),F=r(29),A=M.f,I=j.f,L=E.f,N=e.Symbol,T=e.JSON,k=T&&T.stringify,R="prototype",C=v("_hidden"),D=v("toPrimitive"),G={}.propertyIsEnumerable,W=s("symbol-registry"),U=s("symbols"),V=s("op-symbols"),B=Object[R],q="function"==typeof N&&!!P.f,z=e.QObject,K=!z||!z[R]||!z[R].findChild,H=i&&a(function(){return 7!=O(I({},"a",{get:function(){return I(this,"a",{value:7}).a}})).a})?function(t,n,r){var e=A(B,n);e&&delete B[n],I(t,n,r),e&&t!==B&&I(B,n,e)}:I,J=function(t){var n=U[t]=O(N[R]);return n._k=t,n},$=q&&"symbol"==typeof N.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof N},Y=function(t,n,r){return t===B&&Y(V,n,r),b(t),n=w(n,!0),b(r),u(U,n)?(r.enumerable?(u(t,C)&&t[C][n]&&(t[C][n]=!1),r=O(r,{enumerable:_(0,!1)})):(u(t,C)||I(t,C,_(1,{})),t[C][n]=!0),H(t,n,r)):I(t,n,r)},X=function(t,n){b(t);for(var r,e=y(n=S(n)),i=0,o=e.length;i<o;)Y(t,r=e[i++],n[r]);return t},Q=function(t){var n=G.call(this,t=w(t,!0));return!(this===B&&u(U,t)&&!u(V,t))&&(!(n||!u(this,t)||!u(U,t)||u(this,C)&&this[C][t])||n)},Z=function(t,n){if(t=S(t),n=w(n,!0),t!==B||!u(U,n)||u(V,n)){var r=A(t,n);return!r||!u(U,n)||u(t,C)&&t[C][n]||(r.enumerable=!0),r}},tt=function(t){for(var n,r=L(S(t)),e=[],i=0;r.length>i;)u(U,n=r[i++])||n==C||n==f||e.push(n);return e},nt=function(t){for(var n,r=t===B,e=L(r?V:S(t)),i=[],o=0;e.length>o;)!u(U,n=e[o++])||r&&!u(B,n)||i.push(U[n]);return i};q||(c((N=function(){if(this instanceof N)throw TypeError("Symbol is not a constructor!");var n=h(0<arguments.length?arguments[0]:void 0),r=function(t){this===B&&r.call(V,t),u(this,C)&&u(this[C],n)&&(this[C][n]=!1),H(this,n,_(1,t))};return i&&K&&H(B,n,{configurable:!0,set:r}),J(n)})[R],"toString",function(){return this._k}),M.f=Z,j.f=Y,r(63).f=E.f=tt,r(37).f=Q,P.f=nt,i&&!r(23)&&c(B,"propertyIsEnumerable",Q,!0),p.f=function(t){return J(v(t))}),o(o.G+o.W+o.F*!q,{Symbol:N});for(var rt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),et=0;rt.length>et;)v(rt[et++]);for(var it=F(v.store),ot=0;it.length>ot;)d(it[ot++]);o(o.S+o.F*!q,"Symbol",{for:function(t){return u(W,t+="")?W[t]:W[t]=N(t)},keyFor:function(t){if(!$(t))throw TypeError(t+" is not a symbol!");for(var n in W)if(W[n]===t)return n},useSetter:function(){K=!0},useSimple:function(){K=!1}}),o(o.S+o.F*!q,"Object",{create:function(t,n){return void 0===n?O(t):X(O(t),n)},defineProperty:Y,defineProperties:X,getOwnPropertyDescriptor:Z,getOwnPropertyNames:tt,getOwnPropertySymbols:nt});var ut=a(function(){P.f(1)});o(o.S+o.F*ut,"Object",{getOwnPropertySymbols:function(t){return P.f(m(t))}}),T&&o(o.S+o.F*(!q||a(function(){var t=N();return"[null]"!=k([t])||"{}"!=k({a:t})||"{}"!=k(Object(t))})),"JSON",{stringify:function(t){for(var n,r,e=[t],i=1;arguments.length>i;)e.push(arguments[i++]);if(r=n=e[1],(x(n)||void 0!==t)&&!$(t))return g(n)||(n=function(t,n){if("function"==typeof r&&(n=r.call(this,t,n)),!$(n))return n}),e[1]=n,k.apply(T,e)}}),N[R][D]||r(13)(N[R],D,N[R].valueOf),l(N,"Symbol"),l(Math,"Math",!0),l(e.JSON,"JSON",!0)},function(t,n,r){r(43)("asyncIterator")},function(t,n,r){r(43)("observable")},function(t,n,r){r(108);for(var e=r(6),i=r(13),o=r(36),u=r(16)("toStringTag"),c="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),f=0;f<c.length;f++){var a=c[f],s=e[a],l=s&&s.prototype;l&&!l[u]&&i(l,u,a),o[a]=o.Array}},function(t,n,r){"use strict";var e=r(2);t.exports=function(){var t=e(this),n="";return t.global&&(n+="g"),t.ignoreCase&&(n+="i"),t.multiline&&(n+="m"),t.unicode&&(n+="u"),t.sticky&&(n+="y"),n}},function(t,n,r){var e=r(45);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==e(t)?t.split(""):Object(t)}},function(t,n){n.f={}.propertyIsEnumerable},function(t,n,r){var e=r(46),i=r(3),o="__core-js_shared__",u=i[o]||(i[o]={});(t.exports=function(t,n){return u[t]||(u[t]=void 0!==n?n:{})})("versions",[]).push({version:e.version,mode:r(68)?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(t,n,r){var i=r(2),o=r(21),u=r(7)("species");t.exports=function(t,n){var r,e=i(t).constructor;return void 0===e||null==(r=i(e)[u])?n:o(r)}},function(t,n,r){var f=r(33),a=r(8),s=r(78);t.exports=function(c){return function(t,n,r){var e,i=f(t),o=a(i.length),u=s(r,o);if(c&&n!=n){for(;u<o;)if((e=i[u++])!=e)return!0}else for(;u<o;u++)if((c||u in i)&&i[u]===n)return c||u||0;return!c&&-1}}},function(t,n,r){"use strict";var g=r(3),b=r(1),x=r(27),m=r(76),S=r(69),w=r(71),_=r(70),O=r(5),E=r(4),M=r(125),P=r(83),j=r(144);t.exports=function(e,t,n,r,i,o){var u=g[e],c=u,f=i?"set":"add",a=c&&c.prototype,s={},l=function(t){var r=a[t];x(a,t,"delete"==t?function(t){return!(o&&!O(t))&&r.call(this,0===t?0:t)}:"has"==t?function(t){return!(o&&!O(t))&&r.call(this,0===t?0:t)}:"get"==t?function(t){return o&&!O(t)?void 0:r.call(this,0===t?0:t)}:"add"==t?function(t){return r.call(this,0===t?0:t),this}:function(t,n){return r.call(this,0===t?0:t,n),this})};if("function"==typeof c&&(o||a.forEach&&!E(function(){(new c).entries().next()}))){var h=new c,v=h[f](o?{}:-0,1)!=h,p=E(function(){h.has(1)}),d=M(function(t){new c(t)}),y=!o&&E(function(){for(var t=new c,n=5;n--;)t[f](n,n);return!t.has(-0)});d||(((c=t(function(t,n){_(t,c,e);var r=j(new u,t,c);return null!=n&&w(n,i,r[f],r),r})).prototype=a).constructor=c),(p||y)&&(l("delete"),l("has"),i&&l("get")),(y||v)&&l(f),o&&a.clear&&delete a.clear}else c=r.getConstructor(t,e,i,f),m(c.prototype,n),S.NEED=!0;return P(c,e),s[e]=c,b(b.G+b.W+b.F*(c!=u),s),o||r.setStrong(c,e,i),c}},function(t,n,r){"use strict";r(197);var s=r(27),l=r(26),h=r(4),v=r(51),p=r(7),d=r(152),y=p("species"),g=!h(function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}),b=function(){var t=/(?:)/,n=t.exec;t.exec=function(){return n.apply(this,arguments)};var r="ab".split(t);return 2===r.length&&"a"===r[0]&&"b"===r[1]}();t.exports=function(r,t,n){var e=p(r),o=!h(function(){var t={};return t[e]=function(){return 7},7!=""[r](t)}),i=o?!h(function(){var t=!1,n=/a/;return n.exec=function(){return t=!0,null},"split"===r&&(n.constructor={},n.constructor[y]=function(){return n}),n[e](""),!t}):void 0;if(!o||!i||"replace"===r&&!g||"split"===r&&!b){var u=/./[e],c=n(v,e,""[r],function(t,n,r,e,i){return n.exec===d?o&&!i?{done:!0,value:u.call(n,r,e)}:{done:!0,value:t.call(r,n,e)}:{done:!1}}),f=c[0],a=c[1];s(String.prototype,r,f),l(RegExp.prototype,e,2==t?function(t,n){return a.call(t,this,n)}:function(t){return a.call(t,this)})}}},function(t,n,r){var e=r(45);t.exports=Array.isArray||function(t){return"Array"==e(t)}},function(t,n,r){var e=r(5),i=r(45),o=r(7)("match");t.exports=function(t){var n;return e(t)&&(void 0!==(n=t[o])?!!n:"RegExp"==i(t))}},function(t,n,r){var o=r(7)("iterator"),u=!1;try{var e=[7][o]();e.return=function(){u=!0},Array.from(e,function(){throw 2})}catch(t){}t.exports=function(t,n){if(!n&&!u)return!1;var r=!1;try{var e=[7],i=e[o]();i.next=function(){return{done:r=!0}},e[o]=function(){return i},t(e)}catch(t){}return r}},function(t,n,r){"use strict";t.exports=r(68)||!r(4)(function(){var t=Math.random();__defineSetter__.call(null,t,function(){}),delete r(3)[t]})},function(t,n){n.f=Object.getOwnPropertySymbols},function(t,n,r){"use strict";var i=r(81),o=RegExp.prototype.exec;t.exports=function(t,n){var r=t.exec;if("function"==typeof r){var e=r.call(t,n);if("object"!=typeof e)throw new TypeError("RegExp exec method returned something other than an Object or null");return e}if("RegExp"!==i(t))throw new TypeError("RegExp#exec called on incompatible receiver");return o.call(t,n)}},function(t,n,r){"use strict";var e=r(1),u=r(21),c=r(47),f=r(71);t.exports=function(t){e(e.S,t,{from:function(t){var n,r,e,i,o=arguments[1];return u(this),(n=void 0!==o)&&u(o),null==t?new this:(r=[],n?(e=0,i=c(o,arguments[2],2),f(t,!1,function(t){r.push(i(t,e++))})):f(t,!1,r.push,r),new this(r))}})}},function(t,n,r){"use strict";var e=r(1);t.exports=function(t){e(e.S,t,{of:function(){for(var t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return new this(n)}})}},function(t,n,r){var f=r(49),a=r(51);t.exports=function(c){return function(t,n){var r,e,i=String(a(t)),o=f(n),u=i.length;return o<0||u<=o?c?"":void 0:(r=i.charCodeAt(o))<55296||56319<r||o+1===u||(e=i.charCodeAt(o+1))<56320||57343<e?c?i.charAt(o):r:c?i.slice(o,o+2):e-56320+(r-55296<<10)+65536}}},function(t,n,r){for(var e,i=r(3),o=r(26),u=r(79),c=u("typed_array"),f=u("view"),a=!(!i.ArrayBuffer||!i.DataView),s=a,l=0,h="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");l<9;)(e=i[h[l++]])?(o(e.prototype,c,!0),o(e.prototype,f,!0)):s=!1;t.exports={ABV:a,CONSTR:s,TYPED:c,VIEW:f}},function(t,n,r){var e=r(3).navigator;t.exports=e&&e.userAgent||""},function(t,n){"use strict";var r,e={versions:(r=window.navigator.userAgent,{trident:-1<r.indexOf("Trident"),presto:-1<r.indexOf("Presto"),webKit:-1<r.indexOf("AppleWebKit"),gecko:-1<r.indexOf("Gecko")&&-1==r.indexOf("KHTML"),mobile:!!r.match(/AppleWebKit.*Mobile.*/),ios:!!r.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:-1<r.indexOf("Android")||-1<r.indexOf("Linux"),iPhone:-1<r.indexOf("iPhone")||-1<r.indexOf("Mac"),iPad:-1<r.indexOf("iPad"),webApp:-1==r.indexOf("Safari"),weixin:-1==r.indexOf("MicroMessenger")})};t.exports=e},function(t,n,r){"use strict";var e,i=r(87),l=(e=i)&&e.__esModule?e:{default:e},h=function(){function n(t,n,r){return n||r?String.fromCharCode(n||r):o[t]||t}function r(t){return s[t]}var e=/&quot;|&lt;|&gt;|&amp;|&nbsp;|&apos;|&#(\d+);|&#(\d+)/g,i=/['<> "&]/g,o={"&quot;":'"',"&lt;":"<","&gt;":">","&amp;":"&","&nbsp;":" "},u=/\u00a0/g,c=/<br\s*\/?>/gi,f=/\r?\n/g,a=/\s/g,s={};for(var t in o)s[o[t]]=t;return o["&apos;"]="'",s["'"]="&#39;",{encode:function(t){return t?(""+t).replace(i,r).replace(f,"<br/>").replace(a,"&nbsp;"):""},decode:function(t){return t?(""+t).replace(c,"\n").replace(e,n).replace(u," "):""},encodeBase16:function(t){if(!t)return t;for(var n=[],r=0,e=(t+="").length;r<e;r++)n.push(t.charCodeAt(r).toString(16).toUpperCase());return n.join("")},encodeBase16forJSON:function(t){if(!t)return t;for(var n=[],r=0,e=(t=t.replace(/[\u4E00-\u9FBF]/gi,function(t){return escape(t).replace("%u","\\u")})).length;r<e;r++)n.push(t.charCodeAt(r).toString(16).toUpperCase());return n.join("")},decodeBase16:function(t){if(!t)return t;for(var n=[],r=0,e=(t+="").length;r<e;r+=2)n.push(String.fromCharCode("0x"+t.slice(r,r+2)));return n.join("")},encodeObject:function(t){if(t instanceof Array)for(var n=0,r=t.length;n<r;n++)t[n]=h.encodeObject(t[n]);else if("object"==(void 0===t?"undefined":(0,l.default)(t)))for(var e in t)t[e]=h.encodeObject(t[e]);else if("string"==typeof t)return h.encode(t);return t},loadScript:function(t){var n=document.createElement("script");document.getElementsByTagName("body")[0].appendChild(n),n.setAttribute("src",t)},addLoadEvent:function(t){var n=window.onload;"function"!=typeof window.onload?window.onload=t:window.onload=function(){n(),t()}}}}();t.exports=h},function(t,n,r){"use strict";var e=r(131)(!0);t.exports=function(t,n,r){return n+(r?e(t,n).length:1)}},function(t,n,r){"use strict";var c=r(17),f=r(78),a=r(8);t.exports=function(t){for(var n=c(this),r=a(n.length),e=arguments.length,i=f(1<e?arguments[1]:void 0,r),o=2<e?arguments[2]:void 0,u=void 0===o?r:f(o,r);i<u;)n[i++]=t;return n}},function(t,n,r){var e=r(215);t.exports=function(t,n){return new(e(t))(n)}},function(t,n,r){"use strict";var e=r(11),i=r(75);t.exports=function(t,n,r){n in t?e.f(t,n,i(0,r)):t[n]=r}},function(t,n,r){var e=r(5),i=r(3).document,o=e(i)&&e(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,n){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,n,r){var e=r(7)("match");t.exports=function(n){var r=/./;try{"/./"[n](r)}catch(t){try{return r[e]=!1,!"/./"[n](r)}catch(n){}}return!0}},function(t,n,r){var e=r(3).document;t.exports=e&&e.documentElement},function(t,n,r){var o=r(5),u=r(153).set;t.exports=function(t,n,r){var e,i=n.constructor;return i!==r&&"function"==typeof i&&(e=i.prototype)!==r.prototype&&o(e)&&u&&u(t,e),t}},function(t,n,r){var e=r(82),i=r(7)("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(e.Array===t||o[i]===t)}},function(t,n,r){"use strict";var e=r(72),i=r(75),o=r(83),u={};r(26)(u,r(7)("iterator"),function(){return this}),t.exports=function(t,n,r){t.prototype=e(u,{next:i(1,r)}),o(t,n+" Iterator")}},function(t,n,r){"use strict";var x=r(68),m=r(1),S=r(27),w=r(26),_=r(82),O=r(146),E=r(83),M=r(32),P=r(7)("iterator"),j=!([].keys&&"next"in[].keys()),F="values",A=function(){return this};t.exports=function(t,n,r,e,i,o,u){O(r,n,e);var c,f,a,s=function(t){if(!j&&t in p)return p[t];switch(t){case"keys":case F:return function(){return new r(this,t)}}return function(){return new r(this,t)}},l=n+" Iterator",h=i==F,v=!1,p=t.prototype,d=p[P]||p["@@iterator"]||i&&p[i],y=d||s(i),g=i?h?s("entries"):y:void 0,b="Array"==n&&p.entries||d;if(b&&((a=M(b.call(new t)))!==Object.prototype&&a.next&&(E(a,l,!0),x||"function"==typeof a[P]||w(a,P,A))),h&&d&&d.name!==F&&(v=!0,y=function(){return d.call(this)}),x&&!u||!j&&!v&&p[P]||w(p,P,y),_[n]=y,_[l]=A,i)if(c={values:h?y:s(F),keys:o?y:s("keys"),entries:g},u)for(f in c)f in p||S(p,f,c[f]);else m(m.P+m.F*(j||v),n,c);return c}},function(t,n){var r=Math.expm1;t.exports=!r||22025.465794806718<r(10)||r(10)<22025.465794806718||-2e-17!=r(-2e-17)?function(t){return 0==(t=+t)?t:-1e-6<t&&t<1e-6?t+t*t/2:Math.exp(t)-1}:r},function(t,n){t.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},function(t,n,r){var c=r(3),f=r(158).set,a=c.MutationObserver||c.WebKitMutationObserver,s=c.process,l=c.Promise,h="process"==r(45)(s);t.exports=function(){var r,e,i,t=function(){var t,n;for(h&&(t=s.domain)&&t.exit();r;){n=r.fn,r=r.next;try{n()}catch(t){throw r?i():e=void 0,t}}e=void 0,t&&t.enter()};if(h)i=function(){s.nextTick(t)};else if(!a||c.navigator&&c.navigator.standalone)if(l&&l.resolve){var n=l.resolve(void 0);i=function(){n.then(t)}}else i=function(){f.call(c,t)};else{var o=!0,u=document.createTextNode("");new a(t).observe(u,{characterData:!0}),i=function(){u.data=o=!o}}return function(t){var n={fn:t,next:void 0};e&&(e.next=n),r||(r=n,i()),e=n}}},function(t,n,r){"use strict";function e(t){var r,e;this.promise=new t(function(t,n){if(void 0!==r||void 0!==e)throw TypeError("Bad Promise constructor");r=t,e=n}),this.resolve=i(r),this.reject=i(e)}var i=r(21);t.exports.f=function(t){return new e(t)}},function(t,n,r){"use strict";var e,i,u=r(115),c=RegExp.prototype.exec,f=String.prototype.replace,o=c,a="lastIndex",s=(e=/a/,i=/b*/g,c.call(e,"a"),c.call(i,"a"),0!==e[a]||0!==i[a]),l=void 0!==/()??/.exec("")[1];(s||l)&&(o=function(t){var n,r,e,i,o=this;return l&&(r=new RegExp("^"+o.source+"$(?!\\s)",u.call(o))),s&&(n=o[a]),e=c.call(o,t),s&&e&&(o[a]=o.global?e.index+e[0].length:n),l&&e&&1<e.length&&f.call(e[0],r,function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(e[i]=void 0)}),e}),t.exports=o},function(t,n,i){var r=i(5),e=i(2),o=function(t,n){if(e(t),!r(n)&&null!==n)throw TypeError(n+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,r,e){try{(e=i(47)(Function.call,i(31).f(Object.prototype,"__proto__").set,2))(t,[]),r=!(t instanceof Array)}catch(t){r=!0}return function(t,n){return o(t,n),r?t.__proto__=n:e(t,n),t}}({},!1):void 0),check:o}},function(t,n,r){var e=r(118)("keys"),i=r(79);t.exports=function(t){return e[t]||(e[t]=i(t))}},function(t,n,r){var e=r(124),i=r(51);t.exports=function(t,n,r){if(e(n))throw TypeError("String#"+r+" doesn't accept regex!");return String(i(t))}},function(t,n,r){"use strict";var i=r(49),o=r(51);t.exports=function(t){var n=String(o(this)),r="",e=i(t);if(e<0||e==1/0)throw RangeError("Count can't be negative");for(;0<e;(e>>>=1)&&(n+=n))1&e&&(r+=n);return r}},function(t,n){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},function(t,n,r){var e,i,o,u=r(47),c=r(175),f=r(143),a=r(140),s=r(3),l=s.process,h=s.setImmediate,v=s.clearImmediate,p=s.MessageChannel,d=s.Dispatch,y=0,g={},b="onreadystatechange",x=function(){var t=+this;if(g.hasOwnProperty(t)){var n=g[t];delete g[t],n()}},m=function(t){x.call(t.data)};h&&v||(h=function(t){for(var n=[],r=1;arguments.length>r;)n.push(arguments[r++]);return g[++y]=function(){c("function"==typeof t?t:Function(t),n)},e(y),y},v=function(t){delete g[t]},"process"==r(45)(l)?e=function(t){l.nextTick(u(x,t,1))}:d&&d.now?e=function(t){d.now(u(x,t,1))}:p?(o=(i=new p).port2,i.port1.onmessage=m,e=u(o.postMessage,o,1)):s.addEventListener&&"function"==typeof postMessage&&!s.importScripts?(e=function(t){s.postMessage(t+"","*")},s.addEventListener("message",m,!1)):e=b in a("script")?function(t){f.appendChild(a("script"))[b]=function(){f.removeChild(this),x.call(t)}}:function(t){setTimeout(u(x,t,1),0)}),t.exports={set:h,clear:v}},function(t,n,r){"use strict";function e(t,n,r){var e,i,o,u=new Array(r),c=8*r-n-1,f=(1<<c)-1,a=f>>1,s=23===n?W(2,-24)-W(2,-77):0,l=0,h=t<0||0===t&&1/t<0?1:0;for((t=G(t))!=t||t===C?(i=t!=t?1:0,e=f):(e=U(V(t)/B),t*(o=W(2,-e))<1&&(e--,o*=2),2<=(t+=1<=e+a?s/o:s*W(2,1-a))*o&&(e++,o/=2),f<=e+a?(i=0,e=f):1<=e+a?(i=(t*o-1)*W(2,n),e+=a):(i=t*W(2,a-1)*W(2,n),e=0));8<=n;u[l++]=255&i,i/=256,n-=8);for(e=e<<n|i,c+=n;0<c;u[l++]=255&e,e/=256,c-=8);return u[--l]|=128*h,u}function i(t,n,r){var e,i=8*r-n-1,o=(1<<i)-1,u=o>>1,c=i-7,f=r-1,a=t[f--],s=127&a;for(a>>=7;0<c;s=256*s+t[f],f--,c-=8);for(e=s&(1<<-c)-1,s>>=-c,c+=n;0<c;e=256*e+t[f],f--,c-=8);if(0===s)s=1-u;else{if(s===o)return e?NaN:a?-C:C;e+=W(2,n),s-=u}return(a?-1:1)*e*W(2,s-n)}function o(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]}function u(t){return[255&t]}function c(t){return[255&t,t>>8&255]}function f(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]}function a(t){return e(t,52,8)}function s(t){return e(t,23,4)}function l(t,n,r){M(t[I],n,{get:function(){return this[r]}})}function h(t,n,r,e){var i=O(+r);if(i+n>t[H])throw R(L);var o=t[K]._b,u=i+t[J],c=o.slice(u,u+n);return e?c:c.reverse()}function v(t,n,r,e,i,o){var u=O(+r);if(u+n>t[H])throw R(L);for(var c=t[K]._b,f=u+t[J],a=e(+i),s=0;s<n;s++)c[f+s]=a[o?s:n-s-1]}var p=r(3),d=r(10),y=r(68),g=r(132),b=r(26),x=r(76),m=r(4),S=r(70),w=r(49),_=r(8),O=r(194),E=r(73).f,M=r(11).f,P=r(137),j=r(83),F="ArrayBuffer",A="DataView",I="prototype",L="Wrong index!",N=p[F],T=p[A],k=p.Math,R=p.RangeError,C=p.Infinity,D=N,G=k.abs,W=k.pow,U=k.floor,V=k.log,B=k.LN2,q="byteLength",z="byteOffset",K=d?"_b":"buffer",H=d?"_l":q,J=d?"_o":z;if(g.ABV){if(!m(function(){N(1)})||!m(function(){new N(-1)})||m(function(){return new N,new N(1.5),new N(NaN),N.name!=F})){for(var $,Y=(N=function(t){return S(this,N),new D(O(t))})[I]=D[I],X=E(D),Q=0;X.length>Q;)($=X[Q++])in N||b(N,$,D[$]);y||(Y.constructor=N)}var Z=new T(new N(2)),tt=T[I].setInt8;Z.setInt8(0,2147483648),Z.setInt8(1,2147483649),!Z.getInt8(0)&&Z.getInt8(1)||x(T[I],{setInt8:function(t,n){tt.call(this,t,n<<24>>24)},setUint8:function(t,n){tt.call(this,t,n<<24>>24)}},!0)}else N=function(t){S(this,N,F);var n=O(t);this._b=P.call(new Array(n),0),this[H]=n},T=function(t,n,r){S(this,T,A),S(t,N,A);var e=t[H],i=w(n);if(i<0||e<i)throw R("Wrong offset!");if(e<i+(r=void 0===r?e-i:_(r)))throw R("Wrong length!");this[K]=t,this[J]=i,this[H]=r},d&&(l(N,q,"_l"),l(T,"buffer","_b"),l(T,q,"_l"),l(T,z,"_o")),x(T[I],{getInt8:function(t){return h(this,1,t)[0]<<24>>24},getUint8:function(t){return h(this,1,t)[0]},getInt16:function(t){var n=h(this,2,t,arguments[1]);return(n[1]<<8|n[0])<<16>>16},getUint16:function(t){var n=h(this,2,t,arguments[1]);return n[1]<<8|n[0]},getInt32:function(t){return o(h(this,4,t,arguments[1]))},getUint32:function(t){return o(h(this,4,t,arguments[1]))>>>0},getFloat32:function(t){return i(h(this,4,t,arguments[1]),23,4)},getFloat64:function(t){return i(h(this,8,t,arguments[1]),52,8)},setInt8:function(t,n){v(this,1,t,u,n)},setUint8:function(t,n){v(this,1,t,u,n)},setInt16:function(t,n){v(this,2,t,c,n,arguments[2])},setUint16:function(t,n){v(this,2,t,c,n,arguments[2])},setInt32:function(t,n){v(this,4,t,f,n,arguments[2])},setUint32:function(t,n){v(this,4,t,f,n,arguments[2])},setFloat32:function(t,n){v(this,4,t,s,n,arguments[2])},setFloat64:function(t,n){v(this,8,t,a,n,arguments[2])}});j(N,F),j(T,A),b(T[I],g.VIEW,!0),n[F]=N,n[A]=T},function(t,n,r){var e=r(3),i=r(46),o=r(68),u=r(195),c=r(11).f;t.exports=function(t){var n=i.Symbol||(i.Symbol=o?{}:e.Symbol||{});"_"==t.charAt(0)||t in n||c(n,t,{value:u.f(t)})}},function(t,n,r){var e=r(81),i=r(7)("iterator"),o=r(82);t.exports=r(46).getIteratorMethod=function(t){if(null!=t)return t[i]||t["@@iterator"]||o[e(t)]}},function(t,n,r){"use strict";var e=r(67),i=r(178),o=r(82),u=r(33);t.exports=r(147)(Array,"Array",function(t,n){this._t=u(t),this._i=0,this._k=n},function(){var t=this._t,n=this._k,r=this._i++;return!t||r>=t.length?(this._t=void 0,i(1)):i(0,"keys"==n?r:"values"==n?t[r]:[r,t[r]])},"values"),o.Arguments=o.Array,e("keys"),e("values"),e("entries")},function(t,n){t.exports=function(t,n){t.classList?t.classList.add(n):t.className+=" "+n}},function(t,n){t.exports=function(t,n){if(t.classList)t.classList.remove(n);else{var r=new RegExp("(^|\\b)"+n.split(" ").join("|")+"(\\b|$)","gi");t.className=t.className.replace(r," ")}}},function(t,n,r){var e=r(45);t.exports=function(t,n){if("number"!=typeof t&&"Number"!=e(t))throw TypeError(n);return+t}},function(t,n,r){"use strict";var a=r(17),s=r(78),l=r(8);t.exports=[].copyWithin||function(t,n){var r=a(this),e=l(r.length),i=s(t,e),o=s(n,e),u=2<arguments.length?arguments[2]:void 0,c=Math.min((void 0===u?e:s(u,e))-o,e-i),f=1;for(o<i&&i<o+c&&(f=-1,o+=c-1,i+=c-1);0<c--;)o in r?r[i]=r[o]:delete r[i],i+=f,o+=f;return r}},function(t,n,r){var e=r(71);t.exports=function(t,n){var r=[];return e(t,!1,r.push,r,n),r}},function(t,n,r){var s=r(21),l=r(17),h=r(116),v=r(8);t.exports=function(t,n,r,e,i){s(n);var o=l(t),u=h(o),c=v(o.length),f=i?c-1:0,a=i?-1:1;if(r<2)for(;;){if(f in u){e=u[f],f+=a;break}if(f+=a,i?f<0:c<=f)throw TypeError("Reduce of empty array with no initial value")}for(;i?0<=f:f<c;f+=a)f in u&&(e=n(e,u[f],f,o));return e}},function(t,n,r){"use strict";var o=r(21),u=r(5),c=r(175),f=[].slice,a={};t.exports=Function.bind||function(n){var r=o(this),e=f.call(arguments,1),i=function(){var t=e.concat(f.call(arguments));return this instanceof i?function(t,n,r){if(!(n in a)){for(var e=[],i=0;i<n;i++)e[i]="a["+i+"]";a[n]=Function("F,a","return new F("+e.join(",")+")")}return a[n](t,r)}(r,t.length,t):c(r,t,n)};return u(r.prototype)&&(i.prototype=r.prototype),i}},function(t,n,r){"use strict";var u=r(11).f,c=r(72),f=r(76),a=r(47),s=r(70),l=r(71),e=r(147),i=r(178),o=r(77),h=r(10),v=r(69).fastKey,p=r(80),d=h?"_s":"size",y=function(t,n){var r,e=v(n);if("F"!==e)return t._i[e];for(r=t._f;r;r=r.n)if(r.k==n)return r};t.exports={getConstructor:function(t,o,r,e){var i=t(function(t,n){s(t,i,o,"_i"),t._t=o,t._i=c(null),t._f=void 0,t._l=void 0,t[d]=0,null!=n&&l(n,r,t[e],t)});return f(i.prototype,{clear:function(){for(var t=p(this,o),n=t._i,r=t._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];t._f=t._l=void 0,t[d]=0},delete:function(t){var n=p(this,o),r=y(n,t);if(r){var e=r.n,i=r.p;delete n._i[r.i],r.r=!0,i&&(i.n=e),e&&(e.p=i),n._f==r&&(n._f=e),n._l==r&&(n._l=i),n[d]--}return!!r},forEach:function(t){p(this,o);for(var n,r=a(t,1<arguments.length?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function(t){return!!y(p(this,o),t)}}),h&&u(i.prototype,"size",{get:function(){return p(this,o)[d]}}),i},def:function(t,n,r){var e,i,o=y(t,n);return o?o.v=r:(t._l=o={i:i=v(n,!0),k:n,v:r,p:e=t._l,n:void 0,r:!1},t._f||(t._f=o),e&&(e.n=o),t[d]++,"F"!==i&&(t._i[i]=o)),t},getEntry:y,setStrong:function(t,r,n){e(t,r,function(t,n){this._t=p(t,r),this._k=n,this._l=void 0},function(){for(var t=this,n=t._k,r=t._l;r&&r.r;)r=r.p;return t._t&&(t._l=r=r?r.n:t._t._f)?i(0,"keys"==n?r.k:"values"==n?r.v:[r.k,r.v]):(t._t=void 0,i(1))},n?"entries":"values",!n,!0),o(r)}}},function(t,n,r){var e=r(81),i=r(167);t.exports=function(t){return function(){if(e(this)!=t)throw TypeError(t+"#toJSON isn't generic");return i(this)}}},function(t,n,r){"use strict";var u=r(76),c=r(69).getWeak,i=r(2),f=r(5),a=r(70),s=r(71),e=r(50),l=r(30),h=r(80),o=e(5),v=e(6),p=0,d=function(t){return t._l||(t._l=new y)},y=function(){this.a=[]},g=function(t,n){return o(t.a,function(t){return t[0]===n})};y.prototype={get:function(t){var n=g(this,t);if(n)return n[1]},has:function(t){return!!g(this,t)},set:function(t,n){var r=g(this,t);r?r[1]=n:this.a.push([t,n])},delete:function(n){var t=v(this.a,function(t){return t[0]===n});return~t&&this.a.splice(t,1),!!~t}},t.exports={getConstructor:function(t,r,e,i){var o=t(function(t,n){a(t,o,r,"_i"),t._t=r,t._i=p++,t._l=void 0,null!=n&&s(n,e,t[i],t)});return u(o.prototype,{delete:function(t){if(!f(t))return!1;var n=c(t);return!0===n?d(h(this,r)).delete(t):n&&l(n,this._i)&&delete n[this._i]},has:function(t){if(!f(t))return!1;var n=c(t);return!0===n?d(h(this,r)).has(t):n&&l(n,this._i)}}),o},def:function(t,n,r){var e=c(i(n),!0);return!0===e?d(t).set(n,r):e[t._i]=r,t},ufstore:d}},function(t,n,r){"use strict";var p=r(123),d=r(5),y=r(8),g=r(47),b=r(7)("isConcatSpreadable");t.exports=function t(n,r,e,i,o,u,c,f){for(var a,s,l=o,h=0,v=!!c&&g(c,f,3);h<i;){if(h in e){if(a=v?v(e[h],h,r):e[h],s=!1,d(a)&&(s=void 0!==(s=a[b])?!!s:p(a)),s&&0<u)l=t(n,r,a,y(a.length),l,u-1)-1;else{if(9007199254740991<=l)throw TypeError();n[l]=a}l++}h++}return l}},function(t,n,r){t.exports=!r(10)&&!r(4)(function(){return 7!=Object.defineProperty(r(140)("div"),"a",{get:function(){return 7}}).a})},function(t,n){t.exports=function(t,n,r){var e=void 0===r;switch(n.length){case 0:return e?t():t.call(r);case 1:return e?t(n[0]):t.call(r,n[0]);case 2:return e?t(n[0],n[1]):t.call(r,n[0],n[1]);case 3:return e?t(n[0],n[1],n[2]):t.call(r,n[0],n[1],n[2]);case 4:return e?t(n[0],n[1],n[2],n[3]):t.call(r,n[0],n[1],n[2],n[3])}return t.apply(r,n)}},function(t,n,r){var e=r(5),i=Math.floor;t.exports=function(t){return!e(t)&&isFinite(t)&&i(t)===t}},function(t,n,r){var o=r(2);t.exports=function(t,n,r,e){try{return e?n(o(r)[0],r[1]):n(r)}catch(n){var i=t.return;throw void 0!==i&&o(i.call(t)),n}}},function(t,n){t.exports=function(t,n){return{value:n,done:!!t}}},function(t,n,r){var o=r(149),e=Math.pow,u=e(2,-52),c=e(2,-23),f=e(2,127)*(2-c),a=e(2,-126);t.exports=Math.fround||function(t){var n,r,e=Math.abs(t),i=o(t);return e<a?i*(e/a/c+1/u-1/u)*a*c:f<(r=(n=(1+c/u)*e)-(n-e))||r!=r?i*(1/0):i*r}},function(t,n){t.exports=Math.log1p||function(t){return-1e-8<(t=+t)&&t<1e-8?t-t*t/2:Math.log(1+t)}},function(t,n){t.exports=Math.scale||function(t,n,r,e,i){return 0===arguments.length||t!=t||n!=n||r!=r||e!=e||i!=i?NaN:t===1/0||t===-1/0?t:(t-n)*(i-e)/(r-n)+e}},function(t,n,r){"use strict";var h=r(10),v=r(74),p=r(127),d=r(117),y=r(17),g=r(116),i=Object.assign;t.exports=!i||r(4)(function(){var t={},n={},r=Symbol(),e="abcdefghijklmnopqrst";return t[r]=7,e.split("").forEach(function(t){n[t]=t}),7!=i({},t)[r]||Object.keys(i({},n)).join("")!=e})?function(t,n){for(var r=y(t),e=arguments.length,i=1,o=p.f,u=d.f;i<e;)for(var c,f=g(arguments[i++]),a=o?v(f).concat(o(f)):v(f),s=a.length,l=0;l<s;)c=a[l++],h&&!u.call(f,c)||(r[c]=f[c]);return r}:i},function(t,n,r){var u=r(11),c=r(2),f=r(74);t.exports=r(10)?Object.defineProperties:function(t,n){c(t);for(var r,e=f(n),i=e.length,o=0;o<i;)u.f(t,r=e[o++],n[r]);return t}},function(t,n,r){var e=r(33),i=r(73).f,o={}.toString,u="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return u&&"[object Window]"==o.call(t)?function(t){try{return i(t)}catch(t){return u.slice()}}(t):i(e(t))}},function(t,n,r){var u=r(30),c=r(33),f=r(120)(!1),a=r(154)("IE_PROTO");t.exports=function(t,n){var r,e=c(t),i=0,o=[];for(r in e)r!=a&&u(e,r)&&o.push(r);for(;n.length>i;)u(e,r=n[i++])&&(~f(o,r)||o.push(r));return o}},function(t,n,r){var f=r(10),a=r(74),s=r(33),l=r(117).f;t.exports=function(c){return function(t){for(var n,r=s(t),e=a(r),i=e.length,o=0,u=[];o<i;)n=e[o++],f&&!l.call(r,n)||u.push(c?[n,r[n]]:r[n]);return u}}},function(t,n,r){var e=r(73),i=r(127),o=r(2),u=r(3).Reflect;t.exports=u&&u.ownKeys||function(t){var n=e.f(o(t)),r=i.f;return r?n.concat(r(t)):n}},function(t,n,r){var e=r(3).parseFloat,i=r(84).trim;t.exports=1/e(r(157)+"-0")!=-1/0?function(t){var n=i(String(t),3),r=e(n);return 0===r&&"-"==n.charAt(0)?-0:r}:e},function(t,n,r){var e=r(3).parseInt,i=r(84).trim,o=r(157),u=/^[-+]?0[xX]/;t.exports=8!==e(o+"08")||22!==e(o+"0x16")?function(t,n){var r=i(String(t),3);return e(r,n>>>0||(u.test(r)?16:10))}:e},function(t,n){t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},function(t,n,r){var e=r(2),i=r(5),o=r(151);t.exports=function(t,n){if(e(t),i(n)&&n.constructor===t)return n;var r=o.f(t);return(0,r.resolve)(n),r.promise}},function(t,n){t.exports=Object.is||function(t,n){return t===n?0!==t||1/t==1/n:t!=t&&n!=n}},function(t,n,r){var s=r(8),l=r(156),h=r(51);t.exports=function(t,n,r,e){var i=String(h(t)),o=i.length,u=void 0===r?" ":String(r),c=s(n);if(c<=o||""==u)return i;var f=c-o,a=l.call(u,Math.ceil(f/u.length));return a.length>f&&(a=a.slice(0,f)),e?a+i:i+a}},function(t,n,r){var e=r(49),i=r(8);t.exports=function(t){if(void 0===t)return 0;var n=e(t),r=i(n);if(n!==r)throw RangeError("Wrong length!");return r}},function(t,n,r){n.f=r(7)},function(t,n,r){"use strict";var e=r(170),i=r(80);t.exports=r(121)("Map",function(t){return function(){return t(this,0<arguments.length?arguments[0]:void 0)}},{get:function(t){var n=e.getEntry(i(this,"Map"),t);return n&&n.v},set:function(t,n){return e.def(i(this,"Map"),0===t?0:t,n)}},e,!0)},function(t,n,r){"use strict";var e=r(152);r(1)({target:"RegExp",proto:!0,forced:e!==/./.exec},{exec:e})},function(t,n,r){r(10)&&"g"!=/./g.flags&&r(11).f(RegExp.prototype,"flags",{configurable:!0,get:r(115)})},function(t,n,r){"use strict";var e=r(170),i=r(80);t.exports=r(121)("Set",function(t){return function(){return t(this,0<arguments.length?arguments[0]:void 0)}},{add:function(t){return e.def(i(this,"Set"),t=0===t?0:t,t)}},e)},function(t,n,r){"use strict";var o,e=r(3),i=r(50)(0),u=r(27),c=r(69),f=r(182),a=r(172),s=r(5),l=r(80),h=r(80),v=!e.ActiveXObject&&"ActiveXObject"in e,p="WeakMap",d=c.getWeak,y=Object.isExtensible,g=a.ufstore,b=function(t){return function(){return t(this,0<arguments.length?arguments[0]:void 0)}},x={get:function(t){if(s(t)){var n=d(t);return!0===n?g(l(this,p)).get(t):n?n[this._i]:void 0}},set:function(t,n){return a.def(l(this,p),t,n)}},m=t.exports=r(121)(p,b,x,a,!0,!0);h&&v&&(f((o=a.getConstructor(b,p)).prototype,x),c.NEED=!0,i(["delete","has","get","set"],function(e){var t=m.prototype,i=t[e];u(t,e,function(t,n){if(!s(t)||y(t))return i.call(this,t,n);this._f||(this._f=new o);var r=this._f[e](t,n);return"set"==e?this:r})}))},,,,function(t,n){"use strict";t.exports={init:function(){var t=document.querySelector("#page-nav");t&&!document.querySelector("#page-nav .extend.prev")&&(t.innerHTML='<a class="extend prev disabled" rel="prev">&laquo; Prev</a>'+t.innerHTML),t&&!document.querySelector("#page-nav .extend.next")&&(t.innerHTML=t.innerHTML+'<a class="extend next disabled" rel="next">Next &raquo;</a>'),yiliaConfig&&yiliaConfig.open_in_new&&document.querySelectorAll(".article-entry a:not(.article-more-a)").forEach(function(t){var n=t.getAttribute("target");n&&""!==n||t.setAttribute("target","_blank")}),yiliaConfig&&yiliaConfig.toc_hide_index&&document.querySelectorAll(".toc-number").forEach(function(t){t.style.display="none"})}}},function(t,n,r){"use strict";function e(t){return t&&t.__esModule?t:{default:t}}function i(t,n,r,e,i){var o=function(t){for(var n=t.offsetLeft,r=t.offsetParent;null!==r;)n+=r.offsetLeft,r=r.offsetParent;return n}(t),u=function(t){for(var n=t.offsetTop,r=t.offsetParent;null!==r;)n+=r.offsetTop,r=r.offsetParent;return n}(t)-n;if(u-r<=i){var c=t.$newDom;c||(c=t.cloneNode(!0),(0,a.default)(t,c),(t.$newDom=c).style.position="fixed",c.style.top=(r||u)+"px",c.style.left=o+"px",c.style.zIndex=e||2,c.style.width="100%",c.style.color="#fff"),c.style.visibility="visible",t.style.visibility="hidden"}else{t.style.visibility="visible";var f=t.$newDom;f&&(f.style.visibility="hidden")}}function o(){var t=document.querySelector(".js-overlay"),n=document.querySelector(".js-header-menu");i(t,document.body.scrollTop,-63,2,0),i(n,document.body.scrollTop,1,3,0)}var f=e(r(163)),a=e((e(r(164)),r(414))),u=e(r(134)),c=e(r(204)),s=r(135);u.default.versions.mobile&&window.screen.width<800&&(function(){for(var t=document.querySelectorAll(".js-header-menu li a"),n=window.location.pathname,r=0,e=t.length;r<e;r++){var i=t[r];o=n,u=i.getAttribute("href"),c=/\/|index.html/g,o.replace(c,"")===u.replace(c,"")&&(0,f.default)(i,"active")}var o,u,c}(),document.querySelector("#container").addEventListener("scroll",function(t){o()}),window.addEventListener("scroll",function(t){o()}),o()),(0,s.addLoadEvent)(function(){c.default.init()}),t.exports={}},,,function(t,n,r){(function(t){"use strict";function n(t,n,r){t[n]||Object.defineProperty(t,n,{writable:!0,configurable:!0,value:r})}if(r(413),r(209),r(211),t._babelPolyfill)throw new Error("only one instance of babel-polyfill is allowed");t._babelPolyfill=!0;n(String.prototype,"padLeft","".padStart),n(String.prototype,"padRight","".padEnd),"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach(function(t){[][t]&&n(Array,t,Function.call.bind([][t]))})}).call(n,function(){return this}())},function(L,t){(function(t){!function(t){"use strict";function o(t,n,r,e){var o,u,c,f,i=n&&n.prototype instanceof h?n:h,a=Object.create(i.prototype),s=new p(e||[]);return a._invoke=(o=t,u=r,c=s,f=_,function(t,n){if(f===E)throw new Error("Generator is already running");if(f===M){if("throw"===t)throw n;return d()}for(c.method=t,c.arg=n;;){var r=c.delegate;if(r){var e=v(r,c);if(e){if(e===P)continue;return e}}if("next"===c.method)c.sent=c._sent=c.arg;else if("throw"===c.method){if(f===_)throw f=M,c.arg;c.dispatchException(c.arg)}else"return"===c.method&&c.abrupt("return",c.arg);f=E;var i=l(o,u,c);if("normal"===i.type){if(f=c.done?M:O,i.arg===P)continue;return{value:i.arg,done:c.done}}"throw"===i.type&&(f=M,c.method="throw",c.arg=i.arg)}}),a}function l(t,n,r){try{return{type:"normal",arg:t.call(n,r)}}catch(t){return{type:"throw",arg:t}}}function h(){}function r(){}function n(){}function e(t){["next","throw","return"].forEach(function(n){t[n]=function(t){return this._invoke(n,t)}})}function u(c){function f(t,n,r,e){var i=l(c[t],c,n);if("throw"!==i.type){var o=i.arg,u=o.value;return u&&"object"==typeof u&&y.call(u,"__await")?Promise.resolve(u.__await).then(function(t){f("next",t,r,e)},function(t){f("throw",t,r,e)}):Promise.resolve(u).then(function(t){o.value=t,r(o)},e)}e(i.arg)}var n;"object"==typeof t.process&&t.process.domain&&(f=t.process.domain.bind(f)),this._invoke=function(r,e){function t(){return new Promise(function(t,n){f(r,e,t,n)})}return n=n?n.then(t,t):t()}}function v(t,n){var r=t.iterator[n.method];if(r===a){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=a,v(t,n),"throw"===n.method))return P;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return P}var e=l(r,t.iterator,n.arg);if("throw"===e.type)return n.method="throw",n.arg=e.arg,n.delegate=null,P;var i=e.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=a),n.delegate=null,P):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,P)}function i(t){var n={tryLoc:t[0]};1 in t&&(n.catchLoc=t[1]),2 in t&&(n.finallyLoc=t[2],n.afterLoc=t[3]),this.tryEntries.push(n)}function c(t){var n=t.completion||{};n.type="normal",delete n.arg,t.completion=n}function p(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(i,this),this.reset(!0)}function f(n){if(n){var t=n[b];if(t)return t.call(n);if("function"==typeof n.next)return n;if(!isNaN(n.length)){var r=-1,e=function t(){for(;++r<n.length;)if(y.call(n,r))return t.value=n[r],t.done=!1,t;return t.value=a,t.done=!0,t};return e.next=e}}return{next:d}}function d(){return{value:a,done:!0}}var a,s=Object.prototype,y=s.hasOwnProperty,g="function"==typeof Symbol?Symbol:{},b=g.iterator||"@@iterator",x=g.asyncIterator||"@@asyncIterator",m=g.toStringTag||"@@toStringTag",S="object"==typeof L,w=t.regeneratorRuntime;if(w)S&&(L.exports=w);else{(w=t.regeneratorRuntime=S?L.exports:{}).wrap=o;var _="suspendedStart",O="suspendedYield",E="executing",M="completed",P={},j={};j[b]=function(){return this};var F=Object.getPrototypeOf,A=F&&F(F(f([])));A&&A!==s&&y.call(A,b)&&(j=A);var I=n.prototype=h.prototype=Object.create(j);r.prototype=I.constructor=n,n.constructor=r,n[m]=r.displayName="GeneratorFunction",w.isGeneratorFunction=function(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===r||"GeneratorFunction"===(n.displayName||n.name))},w.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,n):(t.__proto__=n,m in t||(t[m]="GeneratorFunction")),t.prototype=Object.create(I),t},w.awrap=function(t){return{__await:t}},e(u.prototype),u.prototype[x]=function(){return this},w.AsyncIterator=u,w.async=function(t,n,r,e){var i=new u(o(t,n,r,e));return w.isGeneratorFunction(n)?i:i.next().then(function(t){return t.done?t.value:i.next()})},e(I),I[m]="Generator",I[b]=function(){return this},I.toString=function(){return"[object Generator]"},w.keys=function(r){var e=[];for(var t in r)e.push(t);return e.reverse(),function t(){for(;e.length;){var n=e.pop();if(n in r)return t.value=n,t.done=!1,t}return t.done=!0,t}},w.values=f,p.prototype={constructor:p,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=a,this.done=!1,this.delegate=null,this.method="next",this.arg=a,this.tryEntries.forEach(c),!t)for(var n in this)"t"===n.charAt(0)&&y.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=a)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(r){function t(t,n){return o.type="throw",o.arg=r,e.next=t,n&&(e.method="next",e.arg=a),!!n}if(this.done)throw r;for(var e=this,n=this.tryEntries.length-1;0<=n;--n){var i=this.tryEntries[n],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var u=y.call(i,"catchLoc"),c=y.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(t,n){for(var r=this.tryEntries.length-1;0<=r;--r){var e=this.tryEntries[r];if(e.tryLoc<=this.prev&&y.call(e,"finallyLoc")&&this.prev<e.finallyLoc){var i=e;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=n&&n<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=n,i?(this.method="next",this.next=i.finallyLoc,P):this.complete(o)},complete:function(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),P},finish:function(t){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),c(r),P}},catch:function(t){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc===t){var e=r.completion;if("throw"===e.type){var i=e.arg;c(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:f(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=a),P}}}}("object"==typeof t?t:"object"==typeof window?window:"object"==typeof self?self:this)}).call(t,function(){return this}())},,function(t,n,r){r(221),t.exports=r(46).RegExp.escape},,,,function(t,n,r){var e=r(5),i=r(123),o=r(7)("species");t.exports=function(t){var n;return i(t)&&("function"!=typeof(n=t.constructor)||n!==Array&&!i(n.prototype)||(n=void 0),e(n)&&(null===(n=n[o])&&(n=void 0))),void 0===n?Array:n}},function(t,n,r){"use strict";var e=r(4),i=Date.prototype.getTime,o=Date.prototype.toISOString,u=function(t){return 9<t?t:"0"+t};t.exports=e(function(){return"0385-07-25T07:06:39.999Z"!=o.call(new Date(-5e13-1))})||!e(function(){o.call(new Date(NaN))})?function(){if(!isFinite(i.call(this)))throw RangeError("Invalid time value");var t=this,n=t.getUTCFullYear(),r=t.getUTCMilliseconds(),e=n<0?"-":9999<n?"+":"";return e+("00000"+Math.abs(n)).slice(e?-6:-4)+"-"+u(t.getUTCMonth()+1)+"-"+u(t.getUTCDate())+"T"+u(t.getUTCHours())+":"+u(t.getUTCMinutes())+":"+u(t.getUTCSeconds())+"."+(99<r?r:"0"+u(r))+"Z"}:o},function(t,n,r){"use strict";var e=r(2),i=r(53);t.exports=function(t){if("string"!==t&&"number"!==t&&"default"!==t)throw TypeError("Incorrect hint");return i(e(this),"number"!=t)}},function(t,n,r){var c=r(74),f=r(127),a=r(117);t.exports=function(t){var n=c(t),r=f.f;if(r)for(var e,i=r(t),o=a.f,u=0;i.length>u;)o.call(t,e=i[u++])&&n.push(e);return n}},function(t,n,r){t.exports=r(118)("native-function-to-string",Function.toString)},function(t,n){t.exports=function(n,r){var e=r===Object(r)?function(t){return r[t]}:r;return function(t){return String(t).replace(n,e)}}},function(t,n,r){var e=r(1),i=r(220)(/[\\^$*+?.()|[\]{}]/g,"\\$&");e(e.S,"RegExp",{escape:function(t){return i(t)}})},function(t,n,r){var e=r(1);e(e.P,"Array",{copyWithin:r(166)}),r(67)("copyWithin")},function(t,n,r){"use strict";var e=r(1),i=r(50)(4);e(e.P+e.F*!r(48)([].every,!0),"Array",{every:function(t){return i(this,t,arguments[1])}})},function(t,n,r){var e=r(1);e(e.P,"Array",{fill:r(137)}),r(67)("fill")},function(t,n,r){"use strict";var e=r(1),i=r(50)(2);e(e.P+e.F*!r(48)([].filter,!0),"Array",{filter:function(t){return i(this,t,arguments[1])}})},function(t,n,r){"use strict";var e=r(1),i=r(50)(6),o="findIndex",u=!0;o in[]&&Array(1)[o](function(){u=!1}),e(e.P+e.F*u,"Array",{findIndex:function(t){return i(this,t,1<arguments.length?arguments[1]:void 0)}}),r(67)(o)},function(t,n,r){"use strict";var e=r(1),i=r(50)(5),o="find",u=!0;o in[]&&Array(1)[o](function(){u=!1}),e(e.P+e.F*u,"Array",{find:function(t){return i(this,t,1<arguments.length?arguments[1]:void 0)}}),r(67)(o)},function(t,n,r){"use strict";var e=r(1),i=r(50)(0),o=r(48)([].forEach,!0);e(e.P+e.F*!o,"Array",{forEach:function(t){return i(this,t,arguments[1])}})},function(t,n,r){"use strict";var h=r(47),e=r(1),v=r(17),p=r(177),d=r(145),y=r(8),g=r(139),b=r(161);e(e.S+e.F*!r(125)(function(t){Array.from(t)}),"Array",{from:function(t){var n,r,e,i,o=v(t),u="function"==typeof this?this:Array,c=arguments.length,f=1<c?arguments[1]:void 0,a=void 0!==f,s=0,l=b(o);if(a&&(f=h(f,2<c?arguments[2]:void 0,2)),null==l||u==Array&&d(l))for(r=new u(n=y(o.length));s<n;s++)g(r,s,a?f(o[s],s):o[s]);else for(i=l.call(o),r=new u;!(e=i.next()).done;s++)g(r,s,a?p(i,f,[e.value,s],!0):e.value);return r.length=s,r}})},function(t,n,r){"use strict";var e=r(1),i=r(120)(!1),o=[].indexOf,u=!!o&&1/[1].indexOf(1,-0)<0;e(e.P+e.F*(u||!r(48)(o)),"Array",{indexOf:function(t){return u?o.apply(this,arguments)||0:i(this,t,arguments[1])}})},function(t,n,r){var e=r(1);e(e.S,"Array",{isArray:r(123)})},function(t,n,r){"use strict";var e=r(1),i=r(33),o=[].join;e(e.P+e.F*(r(116)!=Object||!r(48)(o)),"Array",{join:function(t){return o.call(i(this),void 0===t?",":t)}})},function(t,n,r){"use strict";var e=r(1),i=r(33),o=r(49),u=r(8),c=[].lastIndexOf,f=!!c&&1/[1].lastIndexOf(1,-0)<0;e(e.P+e.F*(f||!r(48)(c)),"Array",{lastIndexOf:function(t){if(f)return c.apply(this,arguments)||0;var n=i(this),r=u(n.length),e=r-1;for(1<arguments.length&&(e=Math.min(e,o(arguments[1]))),e<0&&(e=r+e);0<=e;e--)if(e in n&&n[e]===t)return e||0;return-1}})},function(t,n,r){"use strict";var e=r(1),i=r(50)(1);e(e.P+e.F*!r(48)([].map,!0),"Array",{map:function(t){return i(this,t,arguments[1])}})},function(t,n,r){"use strict";var e=r(1),i=r(139);e(e.S+e.F*r(4)(function(){function t(){}return!(Array.of.call(t)instanceof t)}),"Array",{of:function(){for(var t=0,n=arguments.length,r=new("function"==typeof this?this:Array)(n);t<n;)i(r,t,arguments[t++]);return r.length=n,r}})},function(t,n,r){"use strict";var e=r(1),i=r(168);e(e.P+e.F*!r(48)([].reduceRight,!0),"Array",{reduceRight:function(t){return i(this,t,arguments.length,arguments[1],!0)}})},function(t,n,r){"use strict";var e=r(1),i=r(168);e(e.P+e.F*!r(48)([].reduce,!0),"Array",{reduce:function(t){return i(this,t,arguments.length,arguments[1],!1)}})},function(t,n,r){"use strict";var e=r(1),i=r(143),a=r(45),s=r(78),l=r(8),h=[].slice;e(e.P+e.F*r(4)(function(){i&&h.call(i)}),"Array",{slice:function(t,n){var r=l(this.length),e=a(this);if(n=void 0===n?r:n,"Array"==e)return h.call(this,t,n);for(var i=s(t,r),o=s(n,r),u=l(o-i),c=new Array(u),f=0;f<u;f++)c[f]="String"==e?this.charAt(i+f):this[i+f];return c}})},function(t,n,r){"use strict";var e=r(1),i=r(50)(3);e(e.P+e.F*!r(48)([].some,!0),"Array",{some:function(t){return i(this,t,arguments[1])}})},function(t,n,r){"use strict";var e=r(1),i=r(21),o=r(17),u=r(4),c=[].sort,f=[1,2,3];e(e.P+e.F*(u(function(){f.sort(void 0)})||!u(function(){f.sort(null)})||!r(48)(c)),"Array",{sort:function(t){return void 0===t?c.call(o(this)):c.call(o(this),i(t))}})},function(t,n,r){r(77)("Array")},function(t,n,r){var e=r(1);e(e.S,"Date",{now:function(){return(new Date).getTime()}})},function(t,n,r){var e=r(1),i=r(216);e(e.P+e.F*(Date.prototype.toISOString!==i),"Date",{toISOString:i})},function(t,n,r){"use strict";var e=r(1),i=r(17),o=r(53);e(e.P+e.F*r(4)(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(t){var n=i(this),r=o(n);return"number"!=typeof r||isFinite(r)?n.toISOString():null}})},function(t,n,r){var e=r(7)("toPrimitive"),i=Date.prototype;e in i||r(26)(i,e,r(217))},function(t,n,r){var e=Date.prototype,i="Invalid Date",o="toString",u=e[o],c=e.getTime;new Date(NaN)+""!=i&&r(27)(e,o,function(){var t=c.call(this);return t==t?u.call(this):i})},function(t,n,r){var e=r(1);e(e.P,"Function",{bind:r(169)})},function(t,n,r){"use strict";var e=r(5),i=r(32),o=r(7)("hasInstance"),u=Function.prototype;o in u||r(11).f(u,o,{value:function(t){if("function"!=typeof this||!e(t))return!1;if(!e(this.prototype))return t instanceof this;for(;t=i(t);)if(this.prototype===t)return!0;return!1}})},function(t,n,r){var e=r(11).f,i=Function.prototype,o=/^\s*function ([^ (]*)/;"name"in i||r(10)&&e(i,"name",{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(t){return""}}})},function(t,n,r){var e=r(1),i=r(180),o=Math.sqrt,u=Math.acosh;e(e.S+e.F*!(u&&710==Math.floor(u(Number.MAX_VALUE))&&u(1/0)==1/0),"Math",{acosh:function(t){return(t=+t)<1?NaN:94906265.62425156<t?Math.log(t)+Math.LN2:i(t-1+o(t-1)*o(t+1))}})},function(t,n,r){var e=r(1),i=Math.asinh;e(e.S+e.F*!(i&&0<1/i(0)),"Math",{asinh:function t(n){return isFinite(n=+n)&&0!=n?n<0?-t(-n):Math.log(n+Math.sqrt(n*n+1)):n}})},function(t,n,r){var e=r(1),i=Math.atanh;e(e.S+e.F*!(i&&1/i(-0)<0),"Math",{atanh:function(t){return 0==(t=+t)?t:Math.log((1+t)/(1-t))/2}})},function(t,n,r){var e=r(1),i=r(149);e(e.S,"Math",{cbrt:function(t){return i(t=+t)*Math.pow(Math.abs(t),1/3)}})},function(t,n,r){var e=r(1);e(e.S,"Math",{clz32:function(t){return(t>>>=0)?31-Math.floor(Math.log(t+.5)*Math.LOG2E):32}})},function(t,n,r){var e=r(1),i=Math.exp;e(e.S,"Math",{cosh:function(t){return(i(t=+t)+i(-t))/2}})},function(t,n,r){var e=r(1),i=r(148);e(e.S+e.F*(i!=Math.expm1),"Math",{expm1:i})},function(t,n,r){var e=r(1);e(e.S,"Math",{fround:r(179)})},function(t,n,r){var e=r(1),f=Math.abs;e(e.S,"Math",{hypot:function(t,n){for(var r,e,i=0,o=0,u=arguments.length,c=0;o<u;)c<(r=f(arguments[o++]))?(i=i*(e=c/r)*e+1,c=r):0<r?i+=(e=r/c)*e:i+=r;return c===1/0?1/0:c*Math.sqrt(i)}})},function(t,n,r){var e=r(1),i=Math.imul;e(e.S+e.F*r(4)(function(){return-5!=i(4294967295,5)||2!=i.length}),"Math",{imul:function(t,n){var r=65535,e=+t,i=+n,o=r&e,u=r&i;return 0|o*u+((r&e>>>16)*u+o*(r&i>>>16)<<16>>>0)}})},function(t,n,r){var e=r(1);e(e.S,"Math",{log10:function(t){return Math.log(t)*Math.LOG10E}})},function(t,n,r){var e=r(1);e(e.S,"Math",{log1p:r(180)})},function(t,n,r){var e=r(1);e(e.S,"Math",{log2:function(t){return Math.log(t)/Math.LN2}})},function(t,n,r){var e=r(1);e(e.S,"Math",{sign:r(149)})},function(t,n,r){var e=r(1),i=r(148),o=Math.exp;e(e.S+e.F*r(4)(function(){return-2e-17!=!Math.sinh(-2e-17)}),"Math",{sinh:function(t){return Math.abs(t=+t)<1?(i(t)-i(-t))/2:(o(t-1)-o(-t-1))*(Math.E/2)}})},function(t,n,r){var e=r(1),i=r(148),o=Math.exp;e(e.S,"Math",{tanh:function(t){var n=i(t=+t),r=i(-t);return n==1/0?1:r==1/0?-1:(n-r)/(o(t)+o(-t))}})},function(t,n,r){var e=r(1);e(e.S,"Math",{trunc:function(t){return(0<t?Math.floor:Math.ceil)(t)}})},function(t,n,r){"use strict";var e=r(3),i=r(30),o=r(45),u=r(144),s=r(53),c=r(4),f=r(73).f,a=r(31).f,l=r(11).f,h=r(84).trim,v="Number",p=e[v],d=p,y=p.prototype,g=o(r(72)(y))==v,b="trim"in String.prototype,x=function(t){var n=s(t,!1);if("string"==typeof n&&2<n.length){var r,e,i,o=(n=b?n.trim():h(n,3)).charCodeAt(0);if(43===o||45===o){if(88===(r=n.charCodeAt(2))||120===r)return NaN}else if(48===o){switch(n.charCodeAt(1)){case 66:case 98:e=2,i=49;break;case 79:case 111:e=8,i=55;break;default:return+n}for(var u,c=n.slice(2),f=0,a=c.length;f<a;f++)if((u=c.charCodeAt(f))<48||i<u)return NaN;return parseInt(c,e)}}return+n};if(!p(" 0o1")||!p("0b1")||p("+0x1")){p=function(t){var n=arguments.length<1?0:t,r=this;return r instanceof p&&(g?c(function(){y.valueOf.call(r)}):o(r)!=v)?u(new d(x(n)),r,p):x(n)};for(var m,S=r(10)?f(d):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),w=0;S.length>w;w++)i(d,m=S[w])&&!i(p,m)&&l(p,m,a(d,m));(p.prototype=y).constructor=p,r(27)(e,v,p)}},function(t,n,r){var e=r(1);e(e.S,"Number",{EPSILON:Math.pow(2,-52)})},function(t,n,r){var e=r(1),i=r(3).isFinite;e(e.S,"Number",{isFinite:function(t){return"number"==typeof t&&i(t)}})},function(t,n,r){var e=r(1);e(e.S,"Number",{isInteger:r(176)})},function(t,n,r){var e=r(1);e(e.S,"Number",{isNaN:function(t){return t!=t}})},function(t,n,r){var e=r(1),i=r(176),o=Math.abs;e(e.S,"Number",{isSafeInteger:function(t){return i(t)&&o(t)<=9007199254740991}})},function(t,n,r){var e=r(1);e(e.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(t,n,r){var e=r(1);e(e.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(t,n,r){var e=r(1),i=r(188);e(e.S+e.F*(Number.parseFloat!=i),"Number",{parseFloat:i})},function(t,n,r){var e=r(1),i=r(189);e(e.S+e.F*(Number.parseInt!=i),"Number",{parseInt:i})},function(t,n,r){"use strict";var e=r(1),a=r(49),s=r(165),l=r(156),i=1..toFixed,o=Math.floor,u=[0,0,0,0,0,0],h="Number.toFixed: incorrect invocation!",v=function(t,n){for(var r=-1,e=n;++r<6;)e+=t*u[r],u[r]=e%1e7,e=o(e/1e7)},p=function(t){for(var n=6,r=0;0<=--n;)r+=u[n],u[n]=o(r/t),r=r%t*1e7},d=function(){for(var t=6,n="";0<=--t;)if(""!==n||0===t||0!==u[t]){var r=String(u[t]);n=""===n?r:n+l.call("0",7-r.length)+r}return n},y=function(t,n,r){return 0===n?r:n%2==1?y(t,n-1,r*t):y(t*t,n/2,r)};e(e.P+e.F*(!!i&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!r(4)(function(){i.call({})})),"Number",{toFixed:function(t){var n,r,e,i,o=s(this,h),u=a(t),c="",f="0";if(u<0||20<u)throw RangeError(h);if(o!=o)return"NaN";if(o<=-1e21||1e21<=o)return String(o);if(o<0&&(c="-",o=-o),1e-21<o)if(r=(n=function(t){for(var n=0,r=t;4096<=r;)n+=12,r/=4096;for(;2<=r;)n+=1,r/=2;return n}(o*y(2,69,1))-69)<0?o*y(2,-n,1):o/y(2,n,1),r*=4503599627370496,0<(n=52-n)){for(v(0,r),e=u;7<=e;)v(1e7,0),e-=7;for(v(y(10,e,1),0),e=n-1;23<=e;)p(1<<23),e-=23;p(1<<e),v(1,1),p(2),f=d()}else v(0,r),v(1<<-n,0),f=d()+l.call("0",u);return f=0<u?c+((i=f.length)<=u?"0."+l.call("0",u-i)+f:f.slice(0,i-u)+"."+f.slice(i-u)):c+f}})},function(t,n,r){"use strict";var e=r(1),i=r(4),o=r(165),u=1..toPrecision;e(e.P+e.F*(i(function(){return"1"!==u.call(1,void 0)})||!i(function(){u.call({})})),"Number",{toPrecision:function(t){var n=o(this,"Number#toPrecision: incorrect invocation!");return void 0===t?u.call(n):u.call(n,t)}})},function(t,n,r){var e=r(1);e(e.S+e.F,"Object",{assign:r(182)})},function(t,n,r){var e=r(1);e(e.S,"Object",{create:r(72)})},function(t,n,r){var e=r(1);e(e.S+e.F*!r(10),"Object",{defineProperties:r(183)})},function(t,n,r){var e=r(1);e(e.S+e.F*!r(10),"Object",{defineProperty:r(11).f})},function(t,n,r){var e=r(5),i=r(69).onFreeze;r(52)("freeze",function(n){return function(t){return n&&e(t)?n(i(t)):t}})},function(t,n,r){var e=r(33),i=r(31).f;r(52)("getOwnPropertyDescriptor",function(){return function(t,n){return i(e(t),n)}})},function(t,n,r){r(52)("getOwnPropertyNames",function(){return r(184).f})},function(t,n,r){var e=r(17),i=r(32);r(52)("getPrototypeOf",function(){return function(t){return i(e(t))}})},function(t,n,r){var e=r(5);r(52)("isExtensible",function(n){return function(t){return!!e(t)&&(!n||n(t))}})},function(t,n,r){var e=r(5);r(52)("isFrozen",function(n){return function(t){return!e(t)||!!n&&n(t)}})},function(t,n,r){var e=r(5);r(52)("isSealed",function(n){return function(t){return!e(t)||!!n&&n(t)}})},function(t,n,r){var e=r(1);e(e.S,"Object",{is:r(192)})},function(t,n,r){var e=r(17),i=r(74);r(52)("keys",function(){return function(t){return i(e(t))}})},function(t,n,r){var e=r(5),i=r(69).onFreeze;r(52)("preventExtensions",function(n){return function(t){return n&&e(t)?n(i(t)):t}})},function(t,n,r){var e=r(5),i=r(69).onFreeze;r(52)("seal",function(n){return function(t){return n&&e(t)?n(i(t)):t}})},function(t,n,r){var e=r(1);e(e.S,"Object",{setPrototypeOf:r(153).set})},function(t,n,r){"use strict";var e=r(81),i={};i[r(7)("toStringTag")]="z",i+""!="[object z]"&&r(27)(Object.prototype,"toString",function(){return"[object "+e(this)+"]"},!0)},function(t,n,r){var e=r(1),i=r(188);e(e.G+e.F*(parseFloat!=i),{parseFloat:i})},function(t,n,r){var e=r(1),i=r(189);e(e.G+e.F*(parseInt!=i),{parseInt:i})},function(t,n,r){"use strict";var e,i,o,u,c=r(68),f=r(3),a=r(47),s=r(81),l=r(1),h=r(5),v=r(21),p=r(70),d=r(71),y=r(119),g=r(158).set,b=r(150)(),x=r(151),m=r(190),S=r(133),w=r(191),_="Promise",O=f.TypeError,E=f.process,M=E&&E.versions,P=M&&M.v8||"",j=f[_],F="process"==s(E),A=function(){},I=i=x.f,L=!!function(){try{var t=j.resolve(1),n=(t.constructor={})[r(7)("species")]=function(t){t(A,A)};return(F||"function"==typeof PromiseRejectionEvent)&&t.then(A)instanceof n&&0!==P.indexOf("6.6")&&-1===S.indexOf("Chrome/66")}catch(t){}}(),N=function(t){var n;return!(!h(t)||"function"!=typeof(n=t.then))&&n},T=function(s,r){if(!s._n){s._n=!0;var e=s._c;b(function(){for(var f=s._v,a=1==s._s,t=0,n=function(t){var n,r,e,i=a?t.ok:t.fail,o=t.resolve,u=t.reject,c=t.domain;try{i?(a||(2==s._h&&C(s),s._h=1),!0===i?n=f:(c&&c.enter(),n=i(f),c&&(c.exit(),e=!0)),n===t.promise?u(O("Promise-chain cycle")):(r=N(n))?r.call(n,o,u):o(n)):u(f)}catch(t){c&&!e&&c.exit(),u(t)}};e.length>t;)n(e[t++]);s._c=[],s._n=!1,r&&!s._h&&k(s)})}},k=function(o){g.call(f,function(){var t,n,r,e=o._v,i=R(o);if(i&&(t=m(function(){F?E.emit("unhandledRejection",e,o):(n=f.onunhandledrejection)?n({promise:o,reason:e}):(r=f.console)&&r.error&&r.error("Unhandled promise rejection",e)}),o._h=F||R(o)?2:1),o._a=void 0,i&&t.e)throw t.v})},R=function(t){return 1!==t._h&&0===(t._a||t._c).length},C=function(n){g.call(f,function(){var t;F?E.emit("rejectionHandled",n):(t=f.onrejectionhandled)&&t({promise:n,reason:n._v})})},D=function(t){var n=this;n._d||(n._d=!0,(n=n._w||n)._v=t,n._s=2,n._a||(n._a=n._c.slice()),T(n,!0))},G=function(t){var r,e=this;if(!e._d){e._d=!0,e=e._w||e;try{if(e===t)throw O("Promise can't be resolved itself");(r=N(t))?b(function(){var n={_w:e,_d:!1};try{r.call(t,a(G,n,1),a(D,n,1))}catch(t){D.call(n,t)}}):(e._v=t,e._s=1,T(e,!1))}catch(t){D.call({_w:e,_d:!1},t)}}};L||(j=function(t){p(this,j,_,"_h"),v(t),e.call(this);try{t(a(G,this,1),a(D,this,1))}catch(t){D.call(this,t)}},(e=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=r(76)(j.prototype,{then:function(t,n){var r=I(y(this,j));return r.ok="function"!=typeof t||t,r.fail="function"==typeof n&&n,r.domain=F?E.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&T(this,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),o=function(){var t=new e;this.promise=t,this.resolve=a(G,t,1),this.reject=a(D,t,1)},x.f=I=function(t){return t===j||t===u?new o(t):i(t)}),l(l.G+l.W+l.F*!L,{Promise:j}),r(83)(j,_),r(77)(_),u=r(46)[_],l(l.S+l.F*!L,_,{reject:function(t){var n=I(this);return(0,n.reject)(t),n.promise}}),l(l.S+l.F*(c||!L),_,{resolve:function(t){return w(c&&this===u?j:this,t)}}),l(l.S+l.F*!(L&&r(125)(function(t){j.all(t).catch(A)})),_,{all:function(t){var u=this,n=I(u),c=n.resolve,f=n.reject,r=m(function(){var e=[],i=0,o=1;d(t,!1,function(t){var n=i++,r=!1;e.push(void 0),o++,u.resolve(t).then(function(t){r||(r=!0,e[n]=t,--o||c(e))},f)}),--o||c(e)});return r.e&&f(r.v),n.promise},race:function(t){var n=this,r=I(n),e=r.reject,i=m(function(){d(t,!1,function(t){n.resolve(t).then(r.resolve,e)})});return i.e&&e(i.v),r.promise}})},function(t,n,r){var e=r(1),o=r(21),u=r(2),c=(r(3).Reflect||{}).apply,f=Function.apply;e(e.S+e.F*!r(4)(function(){c(function(){})}),"Reflect",{apply:function(t,n,r){var e=o(t),i=u(r);return c?c(e,n,i):f.call(e,n,i)}})},function(t,n,r){var e=r(1),c=r(72),f=r(21),a=r(2),s=r(5),i=r(4),l=r(169),h=(r(3).Reflect||{}).construct,v=i(function(){function t(){}return!(h(function(){},[],t)instanceof t)}),p=!i(function(){h(function(){})});e(e.S+e.F*(v||p),"Reflect",{construct:function(t,n){f(t),a(n);var r=arguments.length<3?t:f(arguments[2]);if(p&&!v)return h(t,n,r);if(t==r){switch(n.length){case 0:return new t;case 1:return new t(n[0]);case 2:return new t(n[0],n[1]);case 3:return new t(n[0],n[1],n[2]);case 4:return new t(n[0],n[1],n[2],n[3])}var e=[null];return e.push.apply(e,n),new(l.apply(t,e))}var i=r.prototype,o=c(s(i)?i:Object.prototype),u=Function.apply.call(t,o,n);return s(u)?u:o}})},function(t,n,r){var e=r(11),i=r(1),o=r(2),u=r(53);i(i.S+i.F*r(4)(function(){Reflect.defineProperty(e.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(t,n,r){o(t),n=u(n,!0),o(r);try{return e.f(t,n,r),!0}catch(t){return!1}}})},function(t,n,r){var e=r(1),i=r(31).f,o=r(2);e(e.S,"Reflect",{deleteProperty:function(t,n){var r=i(o(t),n);return!(r&&!r.configurable)&&delete t[n]}})},function(t,n,r){"use strict";var e=r(1),i=r(2),o=function(t){this._t=i(t),this._i=0;var n,r=this._k=[];for(n in t)r.push(n)};r(146)(o,"Object",function(){var t,n=this._k;do{if(this._i>=n.length)return{value:void 0,done:!0}}while(!((t=n[this._i++])in this._t));return{value:t,done:!1}}),e(e.S,"Reflect",{enumerate:function(t){return new o(t)}})},function(t,n,r){var e=r(31),i=r(1),o=r(2);i(i.S,"Reflect",{getOwnPropertyDescriptor:function(t,n){return e.f(o(t),n)}})},function(t,n,r){var e=r(1),i=r(32),o=r(2);e(e.S,"Reflect",{getPrototypeOf:function(t){return i(o(t))}})},function(t,n,r){var u=r(31),c=r(32),f=r(30),e=r(1),a=r(5),s=r(2);e(e.S,"Reflect",{get:function t(n,r){var e,i,o=arguments.length<3?n:arguments[2];return s(n)===o?n[r]:(e=u.f(n,r))?f(e,"value")?e.value:void 0!==e.get?e.get.call(o):void 0:a(i=c(n))?t(i,r,o):void 0}})},function(t,n,r){var e=r(1);e(e.S,"Reflect",{has:function(t,n){return n in t}})},function(t,n,r){var e=r(1),i=r(2),o=Object.isExtensible;e(e.S,"Reflect",{isExtensible:function(t){return i(t),!o||o(t)}})},function(t,n,r){var e=r(1);e(e.S,"Reflect",{ownKeys:r(187)})},function(t,n,r){var e=r(1),i=r(2),o=Object.preventExtensions;e(e.S,"Reflect",{preventExtensions:function(t){i(t);try{return o&&o(t),!0}catch(t){return!1}}})},function(t,n,r){var e=r(1),i=r(153);i&&e(e.S,"Reflect",{setPrototypeOf:function(t,n){i.check(t,n);try{return i.set(t,n),!0}catch(t){return!1}}})},function(t,n,r){var f=r(11),a=r(31),s=r(32),l=r(30),e=r(1),h=r(75),v=r(2),p=r(5);e(e.S,"Reflect",{set:function t(n,r,e){var i,o,u=arguments.length<4?n:arguments[3],c=a.f(v(n),r);if(!c){if(p(o=s(n)))return t(o,r,e,u);c=h(0)}if(l(c,"value")){if(!1===c.writable||!p(u))return!1;if(i=a.f(u,r)){if(i.get||i.set||!1===i.writable)return!1;i.value=e,f.f(u,r,i)}else f.f(u,r,h(0,e));return!0}return void 0!==c.set&&(c.set.call(u,e),!0)}})},function(t,n,r){var e=r(3),o=r(144),i=r(11).f,u=r(73).f,c=r(124),f=r(115),a=e.RegExp,s=a,l=a.prototype,h=/a/g,v=/a/g,p=new a(h)!==h;if(r(10)&&(!p||r(4)(function(){return v[r(7)("match")]=!1,a(h)!=h||a(v)==v||"/a/i"!=a(h,"i")}))){a=function(t,n){var r=this instanceof a,e=c(t),i=void 0===n;return!r&&e&&t.constructor===a&&i?t:o(p?new s(e&&!i?t.source:t,n):s((e=t instanceof a)?t.source:t,e&&i?f.call(t):n),r?this:l,a)};for(var d=function(n){n in a||i(a,n,{configurable:!0,get:function(){return s[n]},set:function(t){s[n]=t}})},y=u(s),g=0;y.length>g;)d(y[g++]);(l.constructor=a).prototype=l,r(27)(e,"RegExp",a)}r(77)("RegExp")},function(t,n,r){"use strict";var l=r(2),h=r(8),v=r(136),p=r(128);r(122)("match",1,function(e,i,a,s){return[function(t){var n=e(this),r=null==t?void 0:t[i];return void 0!==r?r.call(t,n):new RegExp(t)[i](String(n))},function(t){var n=s(a,t,this);if(n.done)return n.value;var r=l(t),e=String(this);if(!r.global)return p(r,e);for(var i,o=r.unicode,u=[],c=r.lastIndex=0;null!==(i=p(r,e));){var f=String(i[0]);""===(u[c]=f)&&(r.lastIndex=v(e,h(r.lastIndex),o)),c++}return 0===c?null:u}]})},function(t,n,r){"use strict";var O=r(2),e=r(17),E=r(8),M=r(49),P=r(136),j=r(128),F=Math.max,A=Math.min,h=Math.floor,v=/\$([$&`']|\d\d?|<[^>]*>)/g,p=/\$([$&`']|\d\d?)/g;r(122)("replace",2,function(i,o,S,w){function _(o,u,c,f,a,t){var s=c+o.length,l=f.length,n=p;return void 0!==a&&(a=e(a),n=v),S.call(t,n,function(t,n){var r;switch(n.charAt(0)){case"$":return"$";case"&":return o;case"`":return u.slice(0,c);case"'":return u.slice(s);case"<":r=a[n.slice(1,-1)];break;default:var e=+n;if(0===e)return t;if(l<e){var i=h(e/10);return 0===i?t:i<=l?void 0===f[i-1]?n.charAt(1):f[i-1]+n.charAt(1):t}r=f[e-1]}return void 0===r?"":r})}return[function(t,n){var r=i(this),e=null==t?void 0:t[o];return void 0!==e?e.call(t,r,n):S.call(String(r),t,n)},function(t,n){var r=w(S,t,this,n);if(r.done)return r.value;var e=O(t),i=String(this),o="function"==typeof n;o||(n=String(n));var u,c=e.global;if(c){var f=e.unicode;e.lastIndex=0}for(var a=[];;){var s=j(e,i);if(null===s)break;if(a.push(s),!c)break;""===String(s[0])&&(e.lastIndex=P(i,E(e.lastIndex),f))}for(var l="",h=0,v=0;v<a.length;v++){s=a[v];for(var p=String(s[0]),d=F(A(M(s.index),i.length),0),y=[],g=1;g<s.length;g++)y.push(void 0===(u=s[g])?u:String(u));var b=s.groups;if(o){var x=[p].concat(y,d,i);void 0!==b&&x.push(b);var m=String(n.apply(void 0,x))}else m=_(p,i,d,y,b,n);h<=d&&(l+=i.slice(h,d)+m,h=d+p.length)}return l+i.slice(h)}]})},function(t,n,r){"use strict";var f=r(2),a=r(192),s=r(128);r(122)("search",1,function(e,i,u,c){return[function(t){var n=e(this),r=null==t?void 0:t[i];return void 0!==r?r.call(t,n):new RegExp(t)[i](String(n))},function(t){var n=c(u,t,this);if(n.done)return n.value;var r=f(t),e=String(this),i=r.lastIndex;a(i,0)||(r.lastIndex=0);var o=s(r,e);return a(r.lastIndex,i)||(r.lastIndex=i),null===o?-1:o.index}]})},function(t,n,r){"use strict";var l=r(124),x=r(2),m=r(119),S=r(136),w=r(8),_=r(128),h=r(152),e=r(4),O=Math.min,v=[].push,u="split",p="length",d="lastIndex",E=4294967295,M=!e(function(){RegExp(E,"y")});r(122)("split",2,function(i,o,y,g){var b;return b="c"=="abbc"[u](/(b)*/)[1]||4!="test"[u](/(?:)/,-1)[p]||2!="ab"[u](/(?:ab)*/)[p]||4!="."[u](/(.?)(.?)/)[p]||1<"."[u](/()()/)[p]||""[u](/.?/)[p]?function(t,n){var r=String(this);if(void 0===t&&0===n)return[];if(!l(t))return y.call(r,t,n);for(var e,i,o,u=[],c=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),f=0,a=void 0===n?E:n>>>0,s=new RegExp(t.source,c+"g");(e=h.call(s,r))&&!(f<(i=s[d])&&(u.push(r.slice(f,e.index)),1<e[p]&&e.index<r[p]&&v.apply(u,e.slice(1)),o=e[0][p],f=i,u[p]>=a));)s[d]===e.index&&s[d]++;return f===r[p]?!o&&s.test("")||u.push(""):u.push(r.slice(f)),u[p]>a?u.slice(0,a):u}:"0"[u](void 0,0)[p]?function(t,n){return void 0===t&&0===n?[]:y.call(this,t,n)}:y,[function(t,n){var r=i(this),e=null==t?void 0:t[o];return void 0!==e?e.call(t,r,n):b.call(String(r),t,n)},function(t,n){var r=g(b,t,this,n,b!==y);if(r.done)return r.value;var e=x(t),i=String(this),o=m(e,RegExp),u=e.unicode,c=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(M?"y":"g"),f=new o(M?e:"^(?:"+e.source+")",c),a=void 0===n?E:n>>>0;if(0===a)return[];if(0===i.length)return null===_(f,i)?[i]:[];for(var s=0,l=0,h=[];l<i.length;){f.lastIndex=M?l:0;var v,p=_(f,M?i:i.slice(l));if(null===p||(v=O(w(f.lastIndex+(M?0:l)),i.length))===s)l=S(i,l,u);else{if(h.push(i.slice(s,l)),h.length===a)return h;for(var d=1;d<=p.length-1;d++)if(h.push(p[d]),h.length===a)return h;l=s=v}}return h.push(i.slice(s)),h}]})},function(t,n,r){"use strict";r(198);var e=r(2),i=r(115),o=r(10),u="toString",c=/./[u],f=function(t){r(27)(RegExp.prototype,u,t,!0)};r(4)(function(){return"/a/b"!=c.call({source:"a",flags:"b"})})?f(function(){var t=e(this);return"/".concat(t.source,"/","flags"in t?t.flags:!o&&t instanceof RegExp?i.call(t):void 0)}):c.name!=u&&f(function(){return c.call(this)})},function(t,n,r){"use strict";r(28)("anchor",function(n){return function(t){return n(this,"a","name",t)}})},function(t,n,r){"use strict";r(28)("big",function(t){return function(){return t(this,"big","","")}})},function(t,n,r){"use strict";r(28)("blink",function(t){return function(){return t(this,"blink","","")}})},function(t,n,r){"use strict";r(28)("bold",function(t){return function(){return t(this,"b","","")}})},function(t,n,r){"use strict";var e=r(1),i=r(131)(!1);e(e.P,"String",{codePointAt:function(t){return i(this,t)}})},function(t,n,r){"use strict";var e=r(1),u=r(8),c=r(155),f="endsWith",a=""[f];e(e.P+e.F*r(142)(f),"String",{endsWith:function(t){var n=c(this,t,f),r=1<arguments.length?arguments[1]:void 0,e=u(n.length),i=void 0===r?e:Math.min(u(r),e),o=String(t);return a?a.call(n,o,i):n.slice(i-o.length,i)===o}})},function(t,n,r){"use strict";r(28)("fixed",function(t){return function(){return t(this,"tt","","")}})},function(t,n,r){"use strict";r(28)("fontcolor",function(n){return function(t){return n(this,"font","color",t)}})},function(t,n,r){"use strict";r(28)("fontsize",function(n){return function(t){return n(this,"font","size",t)}})},function(t,n,r){var e=r(1),o=r(78),u=String.fromCharCode,i=String.fromCodePoint;e(e.S+e.F*(!!i&&1!=i.length),"String",{fromCodePoint:function(t){for(var n,r=[],e=arguments.length,i=0;i<e;){if(n=+arguments[i++],o(n,1114111)!==n)throw RangeError(n+" is not a valid code point");r.push(n<65536?u(n):u(55296+((n-=65536)>>10),n%1024+56320))}return r.join("")}})},function(t,n,r){"use strict";var e=r(1),i=r(155);e(e.P+e.F*r(142)("includes"),"String",{includes:function(t){return!!~i(this,t,"includes").indexOf(t,1<arguments.length?arguments[1]:void 0)}})},function(t,n,r){"use strict";r(28)("italics",function(t){return function(){return t(this,"i","","")}})},function(t,n,r){"use strict";var e=r(131)(!0);r(147)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,n=this._t,r=this._i;return r>=n.length?{value:void 0,done:!0}:(t=e(n,r),this._i+=t.length,{value:t,done:!1})})},function(t,n,r){"use strict";r(28)("link",function(n){return function(t){return n(this,"a","href",t)}})},function(t,n,r){var e=r(1),u=r(33),c=r(8);e(e.S,"String",{raw:function(t){for(var n=u(t.raw),r=c(n.length),e=arguments.length,i=[],o=0;o<r;)i.push(String(n[o++])),o<e&&i.push(String(arguments[o]));return i.join("")}})},function(t,n,r){var e=r(1);e(e.P,"String",{repeat:r(156)})},function(t,n,r){"use strict";r(28)("small",function(t){return function(){return t(this,"small","","")}})},function(t,n,r){"use strict";var e=r(1),i=r(8),o=r(155),u="startsWith",c=""[u];e(e.P+e.F*r(142)(u),"String",{startsWith:function(t){var n=o(this,t,u),r=i(Math.min(1<arguments.length?arguments[1]:void 0,n.length)),e=String(t);return c?c.call(n,e,r):n.slice(r,r+e.length)===e}})},function(t,n,r){"use strict";r(28)("strike",function(t){return function(){return t(this,"strike","","")}})},function(t,n,r){"use strict";r(28)("sub",function(t){return function(){return t(this,"sub","","")}})},function(t,n,r){"use strict";r(28)("sup",function(t){return function(){return t(this,"sup","","")}})},function(t,n,r){"use strict";r(84)("trim",function(t){return function(){return t(this,3)}})},function(t,n,r){"use strict";var e=r(3),u=r(30),i=r(10),o=r(1),c=r(27),f=r(69).KEY,a=r(4),s=r(118),l=r(83),h=r(79),v=r(7),p=r(195),d=r(160),y=r(218),g=r(123),b=r(2),x=r(5),m=r(17),S=r(33),w=r(53),_=r(75),O=r(72),E=r(184),M=r(31),P=r(127),j=r(11),F=r(74),A=M.f,I=j.f,L=E.f,N=e.Symbol,T=e.JSON,k=T&&T.stringify,R="prototype",C=v("_hidden"),D=v("toPrimitive"),G={}.propertyIsEnumerable,W=s("symbol-registry"),U=s("symbols"),V=s("op-symbols"),B=Object[R],q="function"==typeof N&&!!P.f,z=e.QObject,K=!z||!z[R]||!z[R].findChild,H=i&&a(function(){return 7!=O(I({},"a",{get:function(){return I(this,"a",{value:7}).a}})).a})?function(t,n,r){var e=A(B,n);e&&delete B[n],I(t,n,r),e&&t!==B&&I(B,n,e)}:I,J=function(t){var n=U[t]=O(N[R]);return n._k=t,n},$=q&&"symbol"==typeof N.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof N},Y=function(t,n,r){return t===B&&Y(V,n,r),b(t),n=w(n,!0),b(r),u(U,n)?(r.enumerable?(u(t,C)&&t[C][n]&&(t[C][n]=!1),r=O(r,{enumerable:_(0,!1)})):(u(t,C)||I(t,C,_(1,{})),t[C][n]=!0),H(t,n,r)):I(t,n,r)},X=function(t,n){b(t);for(var r,e=y(n=S(n)),i=0,o=e.length;i<o;)Y(t,r=e[i++],n[r]);return t},Q=function(t){var n=G.call(this,t=w(t,!0));return!(this===B&&u(U,t)&&!u(V,t))&&(!(n||!u(this,t)||!u(U,t)||u(this,C)&&this[C][t])||n)},Z=function(t,n){if(t=S(t),n=w(n,!0),t!==B||!u(U,n)||u(V,n)){var r=A(t,n);return!r||!u(U,n)||u(t,C)&&t[C][n]||(r.enumerable=!0),r}},tt=function(t){for(var n,r=L(S(t)),e=[],i=0;r.length>i;)u(U,n=r[i++])||n==C||n==f||e.push(n);return e},nt=function(t){for(var n,r=t===B,e=L(r?V:S(t)),i=[],o=0;e.length>o;)!u(U,n=e[o++])||r&&!u(B,n)||i.push(U[n]);return i};q||(c((N=function(){if(this instanceof N)throw TypeError("Symbol is not a constructor!");var n=h(0<arguments.length?arguments[0]:void 0),r=function(t){this===B&&r.call(V,t),u(this,C)&&u(this[C],n)&&(this[C][n]=!1),H(this,n,_(1,t))};return i&&K&&H(B,n,{configurable:!0,set:r}),J(n)})[R],"toString",function(){return this._k}),M.f=Z,j.f=Y,r(73).f=E.f=tt,r(117).f=Q,P.f=nt,i&&!r(68)&&c(B,"propertyIsEnumerable",Q,!0),p.f=function(t){return J(v(t))}),o(o.G+o.W+o.F*!q,{Symbol:N});for(var rt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),et=0;rt.length>et;)v(rt[et++]);for(var it=F(v.store),ot=0;it.length>ot;)d(it[ot++]);o(o.S+o.F*!q,"Symbol",{for:function(t){return u(W,t+="")?W[t]:W[t]=N(t)},keyFor:function(t){if(!$(t))throw TypeError(t+" is not a symbol!");for(var n in W)if(W[n]===t)return n},useSetter:function(){K=!0},useSimple:function(){K=!1}}),o(o.S+o.F*!q,"Object",{create:function(t,n){return void 0===n?O(t):X(O(t),n)},defineProperty:Y,defineProperties:X,getOwnPropertyDescriptor:Z,getOwnPropertyNames:tt,getOwnPropertySymbols:nt});var ut=a(function(){P.f(1)});o(o.S+o.F*ut,"Object",{getOwnPropertySymbols:function(t){return P.f(m(t))}}),T&&o(o.S+o.F*(!q||a(function(){var t=N();return"[null]"!=k([t])||"{}"!=k({a:t})||"{}"!=k(Object(t))})),"JSON",{stringify:function(t){for(var n,r,e=[t],i=1;arguments.length>i;)e.push(arguments[i++]);if(r=n=e[1],(x(n)||void 0!==t)&&!$(t))return g(n)||(n=function(t,n){if("function"==typeof r&&(n=r.call(this,t,n)),!$(n))return n}),e[1]=n,k.apply(T,e)}}),N[R][D]||r(26)(N[R],D,N[R].valueOf),l(N,"Symbol"),l(Math,"Math",!0),l(e.JSON,"JSON",!0)},function(t,n,r){"use strict";var e=r(1),i=r(132),o=r(159),a=r(2),s=r(78),l=r(8),u=r(5),c=r(3).ArrayBuffer,h=r(119),v=o.ArrayBuffer,p=o.DataView,f=i.ABV&&c.isView,d=v.prototype.slice,y=i.VIEW,g="ArrayBuffer";e(e.G+e.W+e.F*(c!==v),{ArrayBuffer:v}),e(e.S+e.F*!i.CONSTR,g,{isView:function(t){return f&&f(t)||u(t)&&y in t}}),e(e.P+e.U+e.F*r(4)(function(){return!new v(2).slice(1,void 0).byteLength}),g,{slice:function(t,n){if(void 0!==d&&void 0===n)return d.call(a(this),t);for(var r=a(this).byteLength,e=s(t,r),i=s(void 0===n?r:n,r),o=new(h(this,v))(l(i-e)),u=new p(this),c=new p(o),f=0;e<i;)c.setUint8(f++,u.getUint8(e++));return o}}),r(77)(g)},function(t,n,r){var e=r(1);e(e.G+e.W+e.F*!r(132).ABV,{DataView:r(159).DataView})},function(t,n,r){r(57)("Float32",4,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(t,n,r){r(57)("Float64",8,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(t,n,r){r(57)("Int16",2,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(t,n,r){r(57)("Int32",4,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(t,n,r){r(57)("Int8",1,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(t,n,r){r(57)("Uint16",2,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(t,n,r){r(57)("Uint32",4,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(t,n,r){r(57)("Uint8",1,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(t,n,r){r(57)("Uint8",1,function(e){return function(t,n,r){return e(this,t,n,r)}},!0)},function(t,n,r){"use strict";var e=r(172),i=r(80);r(121)("WeakSet",function(t){return function(){return t(this,0<arguments.length?arguments[0]:void 0)}},{add:function(t){return e.def(i(this,"WeakSet"),t,!0)}},e,!1,!0)},function(t,n,r){"use strict";var e=r(1),i=r(173),o=r(17),u=r(8),c=r(21),f=r(138);e(e.P,"Array",{flatMap:function(t){var n,r,e=o(this);return c(t),n=u(e.length),r=f(e,0),i(r,e,e,n,0,1,t,arguments[1]),r}}),r(67)("flatMap")},function(t,n,r){"use strict";var e=r(1),i=r(173),o=r(17),u=r(8),c=r(49),f=r(138);e(e.P,"Array",{flatten:function(){var t=arguments[0],n=o(this),r=u(n.length),e=f(n,0);return i(e,n,n,r,0,void 0===t?1:c(t)),e}}),r(67)("flatten")},function(t,n,r){"use strict";var e=r(1),i=r(120)(!0);e(e.P,"Array",{includes:function(t){return i(this,t,1<arguments.length?arguments[1]:void 0)}}),r(67)("includes")},function(t,n,r){var e=r(1),i=r(150)(),o=r(3).process,u="process"==r(45)(o);e(e.G,{asap:function(t){var n=u&&o.domain;i(n?n.bind(t):t)}})},function(t,n,r){var e=r(1),i=r(45);e(e.S,"Error",{isError:function(t){return"Error"===i(t)}})},function(t,n,r){var e=r(1);e(e.G,{global:r(3)})},function(t,n,r){r(129)("Map")},function(t,n,r){r(130)("Map")},function(t,n,r){var e=r(1);e(e.P+e.R,"Map",{toJSON:r(171)("Map")})},function(t,n,r){var e=r(1);e(e.S,"Math",{clamp:function(t,n,r){return Math.min(r,Math.max(n,t))}})},function(t,n,r){var e=r(1);e(e.S,"Math",{DEG_PER_RAD:Math.PI/180})},function(t,n,r){var e=r(1),i=180/Math.PI;e(e.S,"Math",{degrees:function(t){return t*i}})},function(t,n,r){var e=r(1),o=r(181),u=r(179);e(e.S,"Math",{fscale:function(t,n,r,e,i){return u(o(t,n,r,e,i))}})},function(t,n,r){var e=r(1);e(e.S,"Math",{iaddh:function(t,n,r,e){var i=t>>>0,o=r>>>0;return(n>>>0)+(e>>>0)+((i&o|(i|o)&~(i+o>>>0))>>>31)|0}})},function(t,n,r){var e=r(1);e(e.S,"Math",{imulh:function(t,n){var r=+t,e=+n,i=65535&r,o=65535&e,u=r>>16,c=e>>16,f=(u*o>>>0)+(i*o>>>16);return u*c+(f>>16)+((i*c>>>0)+(65535&f)>>16)}})},function(t,n,r){var e=r(1);e(e.S,"Math",{isubh:function(t,n,r,e){var i=t>>>0,o=r>>>0;return(n>>>0)-(e>>>0)-((~i&o|~(i^o)&i-o>>>0)>>>31)|0}})},function(t,n,r){var e=r(1);e(e.S,"Math",{RAD_PER_DEG:180/Math.PI})},function(t,n,r){var e=r(1),i=Math.PI/180;e(e.S,"Math",{radians:function(t){return t*i}})},function(t,n,r){var e=r(1);e(e.S,"Math",{scale:r(181)})},function(t,n,r){var e=r(1);e(e.S,"Math",{signbit:function(t){return(t=+t)!=t?t:0==t?1/t==1/0:0<t}})},function(t,n,r){var e=r(1);e(e.S,"Math",{umulh:function(t,n){var r=+t,e=+n,i=65535&r,o=65535&e,u=r>>>16,c=e>>>16,f=(u*o>>>0)+(i*o>>>16);return u*c+(f>>>16)+((i*c>>>0)+(65535&f)>>>16)}})},function(t,n,r){"use strict";var e=r(1),i=r(17),o=r(21),u=r(11);r(10)&&e(e.P+r(126),"Object",{__defineGetter__:function(t,n){u.f(i(this),t,{get:o(n),enumerable:!0,configurable:!0})}})},function(t,n,r){"use strict";var e=r(1),i=r(17),o=r(21),u=r(11);r(10)&&e(e.P+r(126),"Object",{__defineSetter__:function(t,n){u.f(i(this),t,{set:o(n),enumerable:!0,configurable:!0})}})},function(t,n,r){var e=r(1),i=r(186)(!0);e(e.S,"Object",{entries:function(t){return i(t)}})},function(t,n,r){var e=r(1),f=r(187),a=r(33),s=r(31),l=r(139);e(e.S,"Object",{getOwnPropertyDescriptors:function(t){for(var n,r,e=a(t),i=s.f,o=f(e),u={},c=0;o.length>c;)void 0!==(r=i(e,n=o[c++]))&&l(u,n,r);return u}})},function(t,n,r){"use strict";var e=r(1),i=r(17),o=r(53),u=r(32),c=r(31).f;r(10)&&e(e.P+r(126),"Object",{__lookupGetter__:function(t){var n,r=i(this),e=o(t,!0);do{if(n=c(r,e))return n.get}while(r=u(r))}})},function(t,n,r){"use strict";var e=r(1),i=r(17),o=r(53),u=r(32),c=r(31).f;r(10)&&e(e.P+r(126),"Object",{__lookupSetter__:function(t){var n,r=i(this),e=o(t,!0);do{if(n=c(r,e))return n.set}while(r=u(r))}})},function(t,n,r){var e=r(1),i=r(186)(!1);e(e.S,"Object",{values:function(t){return i(t)}})},function(t,n,r){"use strict";var e=r(1),o=r(3),u=r(46),i=r(150)(),c=r(7)("observable"),f=r(21),a=r(2),s=r(70),l=r(76),h=r(26),v=r(71),p=v.RETURN,d=function(t){return null==t?void 0:f(t)},y=function(t){var n=t._c;n&&(t._c=void 0,n())},g=function(t){return void 0===t._o},b=function(t){g(t)||(t._o=void 0,y(t))},x=function(t,n){a(t),this._c=void 0,this._o=t,t=new m(this);try{var r=n(t),e=r;null!=r&&("function"==typeof r.unsubscribe?r=function(){e.unsubscribe()}:f(r),this._c=r)}catch(n){return void t.error(n)}g(this)&&y(this)};x.prototype=l({},{unsubscribe:function(){b(this)}});var m=function(t){this._s=t};m.prototype=l({},{next:function(t){var n=this._s;if(!g(n)){var r=n._o;try{var e=d(r.next);if(e)return e.call(r,t)}catch(t){try{b(n)}finally{throw t}}}},error:function(t){var n=this._s;if(g(n))throw t;var r=n._o;n._o=void 0;try{var e=d(r.error);if(!e)throw t;t=e.call(r,t)}catch(t){try{y(n)}finally{throw t}}return y(n),t},complete:function(t){var n=this._s;if(!g(n)){var r=n._o;n._o=void 0;try{var e=d(r.complete);t=e?e.call(r,t):void 0}catch(t){try{y(n)}finally{throw t}}return y(n),t}}});var S=function(t){s(this,S,"Observable","_f")._f=f(t)};l(S.prototype,{subscribe:function(t){return new x(t,this._f)},forEach:function(e){var i=this;return new(u.Promise||o.Promise)(function(t,n){f(e);var r=i.subscribe({next:function(t){try{return e(t)}catch(t){n(t),r.unsubscribe()}},error:n,complete:t})})}}),l(S,{from:function(t){var n="function"==typeof this?this:S,r=d(a(t)[c]);if(r){var e=a(r.call(t));return e.constructor===n?e:new n(function(t){return e.subscribe(t)})}return new n(function(n){var r=!1;return i(function(){if(!r){try{if(v(t,!1,function(t){if(n.next(t),r)return p})===p)return}catch(t){if(r)throw t;return void n.error(t)}n.complete()}}),function(){r=!0}})},of:function(){for(var t=0,n=arguments.length,e=new Array(n);t<n;)e[t]=arguments[t++];return new("function"==typeof this?this:S)(function(n){var r=!1;return i(function(){if(!r){for(var t=0;t<e.length;++t)if(n.next(e[t]),r)return;n.complete()}}),function(){r=!0}})}}),h(S.prototype,c,function(){return this}),e(e.G,{Observable:S}),r(77)("Observable")},function(t,n,r){"use strict";var e=r(1),i=r(46),o=r(3),u=r(119),c=r(191);e(e.P+e.R,"Promise",{finally:function(n){var r=u(this,i.Promise||o.Promise),t="function"==typeof n;return this.then(t?function(t){return c(r,n()).then(function(){return t})}:n,t?function(t){return c(r,n()).then(function(){throw t})}:n)}})},function(t,n,r){"use strict";var e=r(1),i=r(151),o=r(190);e(e.S,"Promise",{try:function(t){var n=i.f(this),r=o(t);return(r.e?n.reject:n.resolve)(r.v),n.promise}})},function(t,n,r){var e=r(56),i=r(2),o=e.key,u=e.set;e.exp({defineMetadata:function(t,n,r,e){u(t,n,i(r),o(e))}})},function(t,n,r){var e=r(56),o=r(2),u=e.key,c=e.map,f=e.store;e.exp({deleteMetadata:function(t,n){var r=arguments.length<3?void 0:u(arguments[2]),e=c(o(n),r,!1);if(void 0===e||!e.delete(t))return!1;if(e.size)return!0;var i=f.get(n);return i.delete(r),!!i.size||f.delete(n)}})},function(t,n,r){var o=r(199),u=r(167),e=r(56),i=r(2),c=r(32),f=e.keys,a=e.key,s=function(t,n){var r=f(t,n),e=c(t);if(null===e)return r;var i=s(e,n);return i.length?r.length?u(new o(r.concat(i))):i:r};e.exp({getMetadataKeys:function(t){return s(i(t),arguments.length<2?void 0:a(arguments[1]))}})},function(t,n,r){var e=r(56),i=r(2),o=r(32),u=e.has,c=e.get,f=e.key,a=function(t,n,r){if(u(t,n,r))return c(t,n,r);var e=o(n);return null!==e?a(t,e,r):void 0};e.exp({getMetadata:function(t,n){return a(t,i(n),arguments.length<3?void 0:f(arguments[2]))}})},function(t,n,r){var e=r(56),i=r(2),o=e.keys,u=e.key;e.exp({getOwnMetadataKeys:function(t){return o(i(t),arguments.length<2?void 0:u(arguments[1]))}})},function(t,n,r){var e=r(56),i=r(2),o=e.get,u=e.key;e.exp({getOwnMetadata:function(t,n){return o(t,i(n),arguments.length<3?void 0:u(arguments[2]))}})},function(t,n,r){var e=r(56),i=r(2),o=r(32),u=e.has,c=e.key,f=function(t,n,r){if(u(t,n,r))return!0;var e=o(n);return null!==e&&f(t,e,r)};e.exp({hasMetadata:function(t,n){return f(t,i(n),arguments.length<3?void 0:c(arguments[2]))}})},function(t,n,r){var e=r(56),i=r(2),o=e.has,u=e.key;e.exp({hasOwnMetadata:function(t,n){return o(t,i(n),arguments.length<3?void 0:u(arguments[2]))}})},function(t,n,r){var e=r(56),i=r(2),o=r(21),u=e.key,c=e.set;e.exp({metadata:function(r,e){return function(t,n){c(r,e,(void 0!==n?i:o)(t),u(n))}}})},function(t,n,r){r(129)("Set")},function(t,n,r){r(130)("Set")},function(t,n,r){var e=r(1);e(e.P+e.R,"Set",{toJSON:r(171)("Set")})},function(t,n,r){"use strict";var e=r(1),i=r(131)(!0);e(e.P,"String",{at:function(t){return i(this,t)}})},function(t,n,r){"use strict";var e=r(1),i=r(51),o=r(8),u=r(124),c=r(115),f=RegExp.prototype,a=function(t,n){this._r=t,this._s=n};r(146)(a,"RegExp String",function(){var t=this._r.exec(this._s);return{value:t,done:null===t}}),e(e.P,"String",{matchAll:function(t){if(i(this),!u(t))throw TypeError(t+" is not a regexp!");var n=String(this),r="flags"in f?String(t.flags):c.call(t),e=new RegExp(t.source,~r.indexOf("g")?r:"g"+r);return e.lastIndex=o(t.lastIndex),new a(e,n)}})},function(t,n,r){"use strict";var e=r(1),i=r(193),o=r(133),u=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(o);e(e.P+e.F*u,"String",{padEnd:function(t){return i(this,t,1<arguments.length?arguments[1]:void 0,!1)}})},function(t,n,r){"use strict";var e=r(1),i=r(193),o=r(133),u=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(o);e(e.P+e.F*u,"String",{padStart:function(t){return i(this,t,1<arguments.length?arguments[1]:void 0,!0)}})},function(t,n,r){"use strict";r(84)("trimLeft",function(t){return function(){return t(this,1)}},"trimStart")},function(t,n,r){"use strict";r(84)("trimRight",function(t){return function(){return t(this,2)}},"trimEnd")},function(t,n,r){r(160)("asyncIterator")},function(t,n,r){r(160)("observable")},function(t,n,r){var e=r(1);e(e.S,"System",{global:r(3)})},function(t,n,r){r(129)("WeakMap")},function(t,n,r){r(130)("WeakMap")},function(t,n,r){r(129)("WeakSet")},function(t,n,r){r(130)("WeakSet")},function(t,n,r){for(var e=r(162),i=r(74),o=r(27),u=r(3),c=r(26),f=r(82),a=r(7),s=a("iterator"),l=a("toStringTag"),h=f.Array,v={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},p=i(v),d=0;d<p.length;d++){var y,g=p[d],b=v[g],x=u[g],m=x&&x.prototype;if(m&&(m[s]||c(m,s,h),m[l]||c(m,l,g),f[g]=h,b))for(y in e)m[y]||o(m,y,e[y],!0)}},function(t,n,r){var e=r(1),i=r(158);e(e.G+e.B,{setImmediate:i.set,clearImmediate:i.clear})},function(t,n,r){var e=r(3),i=r(1),o=r(133),u=[].slice,c=/MSIE .\./.test(o),f=function(i){return function(t,n){var r=2<arguments.length,e=!!r&&u.call(arguments,2);return i(r?function(){("function"==typeof t?t:Function(t)).apply(this,e)}:t,n)}};i(i.G+i.B+i.F*c,{setTimeout:f(e.setTimeout),setInterval:f(e.setInterval)})},function(t,n,r){r(341),r(280),r(282),r(281),r(284),r(286),r(291),r(285),r(283),r(293),r(292),r(288),r(289),r(287),r(279),r(290),r(294),r(295),r(247),r(249),r(248),r(297),r(296),r(267),r(277),r(278),r(268),r(269),r(270),r(271),r(272),r(273),r(274),r(275),r(276),r(250),r(251),r(252),r(253),r(254),r(255),r(256),r(257),r(258),r(259),r(260),r(261),r(262),r(263),r(264),r(265),r(266),r(328),r(333),r(340),r(331),r(323),r(324),r(329),r(334),r(336),r(319),r(320),r(321),r(322),r(325),r(326),r(327),r(330),r(332),r(335),r(337),r(338),r(339),r(242),r(244),r(243),r(246),r(245),r(231),r(229),r(235),r(232),r(238),r(240),r(228),r(234),r(225),r(239),r(223),r(237),r(236),r(230),r(233),r(222),r(224),r(227),r(226),r(241),r(162),r(313),r(197),r(318),r(198),r(314),r(315),r(316),r(317),r(298),r(196),r(199),r(200),r(353),r(342),r(343),r(348),r(351),r(352),r(346),r(349),r(347),r(350),r(344),r(345),r(299),r(300),r(301),r(302),r(303),r(306),r(304),r(305),r(307),r(308),r(309),r(310),r(312),r(311),r(356),r(354),r(355),r(397),r(400),r(399),r(401),r(402),r(398),r(403),r(404),r(378),r(381),r(377),r(375),r(376),r(379),r(380),r(362),r(396),r(361),r(395),r(407),r(409),r(360),r(394),r(406),r(408),r(359),r(405),r(358),r(363),r(364),r(365),r(366),r(367),r(369),r(368),r(370),r(371),r(372),r(374),r(373),r(383),r(384),r(385),r(386),r(388),r(387),r(390),r(389),r(391),r(392),r(393),r(357),r(382),r(412),r(411),r(410),t.exports=r(46)},function(t,n){t.exports=function(t,n){if("string"==typeof n)return t.insertAdjacentHTML("afterend",n);var r=t.nextSibling;return r?t.parentNode.insertBefore(n,r):t.parentNode.appendChild(n)}}])</script><script src="/./main.a5fda8.js"></script><script>!function(){var e,t;e="/slider.27463f.js",t=document.createElement("script"),document.getElementsByTagName("body")[0].appendChild(t),t.setAttribute("src",e)}()</script>



<!--  -->

<script>
  /* 标签页标题切换 */
  var originTitle = document.title;
  var titleTime;
  document.addEventListener("visibilitychange", function () {
    if (document.hidden) {
      document.title = "(つェ⊂) 我藏好了哦~ " + originTitle;
      clearTimeout(titleTime);
    } else {
      document.title = "(*´∇｀*) 被你发现啦~ " + originTitle;
      titleTime = setTimeout(function () {
        document.title = originTitle;
      }, 2000);
    }
  });
</script>


    
<div class="tools-col" q-class="show:isShow,hide:isShow|isFalse" q-on="click:stop(e)">
  <div class="tools-nav header-menu">
    
    
      
      
      
    
      
      
      
    
      
      
      
    
    

    <ul style="width: 70%">
    
    
      
      <li style="width: 33.333333333333336%" q-on="click: openSlider(e, 'innerArchive')"><a href="javascript:void(0)" q-class="active:innerArchive">所有文章</a></li>
      
        
      
      <li style="width: 33.333333333333336%" q-on="click: openSlider(e, 'friends')"><a href="javascript:void(0)" q-class="active:friends">友链</a></li>
      
        
      
      <li style="width: 33.333333333333336%" q-on="click: openSlider(e, 'aboutme')"><a href="javascript:void(0)" q-class="active:aboutme">关于我</a></li>
      
        
    </ul>
  </div>
  <div class="tools-wrap">
    
    	<section class="tools-section tools-section-all" q-show="innerArchive">
        <div class="search-wrap">
          <input class="search-ipt" q-model="search" type="text" placeholder="find something…">
          <i class="icon-search icon" q-show="search|isEmptyStr"></i>
          <i class="icon-close icon" q-show="search|isNotEmptyStr" q-on="click:clearChose(e)"></i>
        </div>
        <div class="widget tagcloud search-tag">
          <p class="search-tag-wording">tag:</p>
          <label class="search-switch">
            <input type="checkbox" q-on="click:toggleTag(e)" q-attr="checked:showTags">
          </label>
          <ul class="article-tag-list" q-show="showTags">
            
            <div class="clearfix"></div>
          </ul>
        </div>
        <ul class="search-ul">
          <p q-show="jsonFail" style="padding: 20px; font-size: 12px;">
            缺失模块。<br/>1、请确保node版本大于6.2<br/>2、在博客根目录（注意不是yilia-plus根目录）执行以下命令：<br/> npm i hexo-generator-json-content --save<br/><br/>
            3、在根目录_config.yml里添加配置：
<pre style="font-size: 12px;" q-show="jsonFail">
  jsonContent:
    meta: false
    pages: false
    posts:
      title: true
      date: true
      path: true
      text: false
      raw: false
      content: false
      slug: false
      updated: false
      comments: false
      link: false
      permalink: false
      excerpt: false
      categories: false
      tags: true
</pre>
          </p>
          <li class="search-li" q-repeat="items" q-show="isShow">
            <a q-attr="href:path|urlformat" class="search-title"><i class="icon-quo-left icon"></i><span q-text="title"></span></a>
            <p class="search-time">
              <i class="icon-calendar icon"></i>
              <span q-text="date|dateformat"></span>
            </p>
            <p class="search-tag">
              <i class="icon-price-tags icon"></i>
              <span q-repeat="tags" q-on="click:choseTag(e, name)" q-text="name|tagformat"></span>
            </p>
          </li>
        </ul>
    	</section>
    

    
    	<section class="tools-section tools-section-friends" q-show="friends">
  		
        <ul class="search-ul">
          
            <li class="search-li">
              <a href="https://zhousiwei.gitee.io/ibooks/" target="_blank" 
                class="search-title" >
                
                  <img src="https://zhousiwei.gitee.io/ibooks/favicon.ico">
                
                技术笔记
              </a>
            </li>
          
            <li class="search-li">
              <a href="/null" target="_blank" 
                class="search-title" >
                
                  <i class="icon-link icon"></i>
                
                GitHub
              </a>
            </li>
          
            <li class="search-li">
              <a href="/null" target="_blank" 
                class="search-title" >
                
                  <i class="icon-link icon"></i>
                
                码云
              </a>
            </li>
          
            <li class="search-li">
              <a href="/null" target="_blank" 
                class="search-title" >
                
                  <i class="icon-link icon"></i>
                
                简书
              </a>
            </li>
          
            <li class="search-li">
              <a href="/null" target="_blank" 
                class="search-title" >
                
                  <i class="icon-link icon"></i>
                
                CSDN
              </a>
            </li>
          
        </ul>
  		
    	</section>
    

    
    	<section class="tools-section tools-section-me" q-show="aboutme">
        
    	</section>
    
  </div>
  
</div>
    <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>
  </div>

  
  
<script type="text/javascript" src="/plugins/activate-power-mode/activate-power-mode.js"></script>
<script>
  POWERMODE.colorful = true; // make power mode colorful
  POWERMODE.shake = false; // turn off shake
  document.body.addEventListener('input', POWERMODE);
</script>

  
  <!-- <script async type="text/javascript" size="90" alpha="0.2" zIndex="0" src="/plugins/ribbon.js/ribbon.min.js"></script> -->
  
  
    <script type="text/javascript" src="/plugins/live2d-widget.js/L2Dwidget.min.js"></script>
<script type="text/javascript">
  /**
   * 完整配置请参考：https://l2dwidget.js.org/docs/class/src/index.js~L2Dwidget.html#instance-method-init
   */
  var pluginModelPath = "assets/", // 模型的文件路径，无需更改
    pluginRootPath = "/live2d_models/"; // 插件的路径，无需更改
  //特定的模型json文件名称
  var modelPathJson = {
    "epsilon2_1": "Epsilon2.1",
    "gf": "Gantzert_Felixander",
    "haru/01": "haru01",
    "haru/02": "haru02",
    "nietzsche": "nietzche"
  }

  
    var modelName = "koharu";
  

  var modelJsonPath = "";
  if (modelPathJson[modelName]) {
    modelJsonPath = pluginRootPath + modelName + "/" + pluginModelPath + modelPathJson[modelName] +
      ".model.json";
  } else {
    modelJsonPath = pluginRootPath + modelName + "/" + pluginModelPath + modelName + ".model.json";
  }
  L2Dwidget.init({
    model: {
      jsonPath: modelJsonPath
    },
    display: {
       position: "right", 
       width: 145, 
       height: 315, 
       hOffset: 10, 
      
    },
    mobile: {
      
       scale: 0.6 
    },
    react: {
       opacity: 0.8 
    }
  })

</script>

  
  
</body>

</html>
